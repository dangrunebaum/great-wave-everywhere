var cy=Object.defineProperty;var hy=(e,t,n)=>t in e?cy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ka=(e,t,n)=>hy(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const bh=!1;var yl=Array.isArray,fy=Array.prototype.indexOf,vl=Array.from,dy=Object.defineProperty,$i=Object.getOwnPropertyDescriptor,py=Object.getOwnPropertyDescriptors,gy=Object.prototype,my=Array.prototype,Qd=Object.getPrototypeOf,Rh=Object.isExtensible;function _y(e){for(var t=0;t<e.length;t++)e[t]()}const Ve=2,Xd=4,ta=8,wl=16,An=32,Yr=64,El=128,be=256,po=512,Ne=1024,mn=2048,wr=4096,pn=8192,Tl=16384,Jd=32768,Al=65536,Sh=1<<17,yy=1<<18,Yd=1<<19,_u=1<<20,Qa=Symbol("$state"),vy=Symbol(""),Zd=new class extends Error{constructor(){super(...arguments);Ka(this,"name","StaleReactionError");Ka(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function tp(e){return e===this.v}function wy(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ep(e){return!wy(e,this.v)}function Ey(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ty(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ay(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Iy(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function by(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ry(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Sy(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Cy=!1;const Il=1,bl=2,np=4,Py=8,xy=16,rp=1,Vy=2,he=Symbol(),Ny="http://www.w3.org/1999/xhtml";function ip(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ge=null;function Ch(e){ge=e}function sp(e,t=!1,n){var r=ge={p:ge,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};gp(()=>{r.d=!0})}function op(e){const t=ge;if(t!==null){const o=t.e;if(o!==null){var n=dt,r=ut;t.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];Ln(s.effect),en(s.reaction),mp(s.fn)}}finally{Ln(n),en(r)}}ge=t.p,t.m=!0}return{}}function ap(){return!0}function He(e){if(typeof e!="object"||e===null||Qa in e)return e;const t=Qd(e);if(t!==gy&&t!==my)return e;var n=new Map,r=yl(e),i=Mt(0),s=ut,o=u=>{var c=ut;en(s);var l=u();return en(c),l};return r&&n.set("length",Mt(e.length)),new Proxy(e,{defineProperty(u,c,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&by();var h=n.get(c);return h===void 0?h=o(()=>{var d=Mt(l.value);return n.set(c,d),d}):et(h,l.value,!0),!0},deleteProperty(u,c){var l=n.get(c);if(l===void 0){if(c in u){const p=o(()=>Mt(he));n.set(c,p),Xa(i)}}else{if(r&&typeof c=="string"){var h=n.get("length"),d=Number(c);Number.isInteger(d)&&d<h.v&&et(h,d)}et(l,he),Xa(i)}return!0},get(u,c,l){var m;if(c===Qa)return e;var h=n.get(c),d=c in u;if(h===void 0&&(!d||(m=$i(u,c))!=null&&m.writable)&&(h=o(()=>{var _=He(d?u[c]:he),E=Mt(_);return E}),n.set(c,h)),h!==void 0){var p=B(h);return p===he?void 0:p}return Reflect.get(u,c,l)},getOwnPropertyDescriptor(u,c){var l=Reflect.getOwnPropertyDescriptor(u,c);if(l&&"value"in l){var h=n.get(c);h&&(l.value=B(h))}else if(l===void 0){var d=n.get(c),p=d==null?void 0:d.v;if(d!==void 0&&p!==he)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return l},has(u,c){var p;if(c===Qa)return!0;var l=n.get(c),h=l!==void 0&&l.v!==he||Reflect.has(u,c);if(l!==void 0||dt!==null&&(!h||(p=$i(u,c))!=null&&p.writable)){l===void 0&&(l=o(()=>{var m=h?He(u[c]):he,_=Mt(m);return _}),n.set(c,l));var d=B(l);if(d===he)return!1}return h},set(u,c,l,h){var N;var d=n.get(c),p=c in u;if(r&&c==="length")for(var m=l;m<d.v;m+=1){var _=n.get(m+"");_!==void 0?et(_,he):m in u&&(_=o(()=>Mt(he)),n.set(m+"",_))}if(d===void 0)(!p||(N=$i(u,c))!=null&&N.writable)&&(d=o(()=>Mt(void 0)),et(d,He(l)),n.set(c,d));else{p=d.v!==he;var E=o(()=>He(l));et(d,E)}var v=Reflect.getOwnPropertyDescriptor(u,c);if(v!=null&&v.set&&v.set.call(h,l),!p){if(r&&typeof c=="string"){var S=n.get("length"),C=Number(c);Number.isInteger(C)&&C>=S.v&&et(S,C+1)}Xa(i)}return!0},ownKeys(u){B(i);var c=Reflect.ownKeys(u).filter(d=>{var p=n.get(d);return p===void 0||p.v!==he});for(var[l,h]of n)h.v!==he&&!(l in u)&&c.push(l);return c},setPrototypeOf(){Ry()}})}function Xa(e,t=1){et(e,e.v+t)}function Rl(e){var t=Ve|mn,n=ut!==null&&(ut.f&Ve)!==0?ut:null;return dt===null||n!==null&&(n.f&be)!==0?t|=be:dt.f|=Yd,{ctx:ge,deps:null,effects:null,equals:tp,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??dt,ac:null}}function Bs(e){const t=Rl(e);return bp(t),t}function Dy(e){const t=Rl(e);return t.equals=ep,t}function up(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Mn(t[n])}}function ky(e){for(var t=e.parent;t!==null;){if((t.f&Ve)===0)return t;t=t.parent}return null}function lp(e){var t,n=dt;Ln(ky(e));try{up(e),t=Pp(e)}finally{Ln(n)}return t}function cp(e){var t=lp(e);if(e.equals(t)||(e.v=t,e.wv=Sp()),!ti){var n=(xn||(e.f&be)!==0)&&e.deps!==null?wr:Ne;nn(e,n)}}const Wi=new Map;function go(e,t){var n={f:0,v:e,reactions:null,equals:tp,rv:0,wv:0};return n}function Mt(e,t){const n=go(e);return bp(n),n}function Oy(e,t=!1,n=!0){const r=go(e);return t||(r.equals=ep),r}function et(e,t,n=!1){ut!==null&&(!Ge||(ut.f&Sh)!==0)&&ap()&&(ut.f&(Ve|wl|Sh))!==0&&!(zt!=null&&zt[1].includes(e)&&zt[0]===ut)&&Sy();let r=n?He(t):t;return yu(e,r)}function yu(e,t){if(!e.equals(t)){var n=e.v;ti?Wi.set(e,t):Wi.set(e,n),e.v=t,(e.f&Ve)!==0&&((e.f&mn)!==0&&lp(e),nn(e,(e.f&be)===0?Ne:wr)),e.wv=Sp(),hp(e,mn),dt!==null&&(dt.f&Ne)!==0&&(dt.f&(An|Yr))===0&&(Re===null?Wy([e]):Re.push(e))}return t}function hp(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],o=s.f;(o&mn)===0&&(nn(s,t),(o&(Ne|be))!==0&&((o&Ve)!==0?hp(s,wr):xl(s)))}}let My=!1;var Ph,fp,dp,pp;function Ly(){if(Ph===void 0){Ph=window,fp=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;dp=$i(t,"firstChild").get,pp=$i(t,"nextSibling").get,Rh(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Rh(n)&&(n.__t=void 0)}}function ea(e=""){return document.createTextNode(e)}function Ae(e){return dp.call(e)}function na(e){return pp.call(e)}function Tt(e,t){return Ae(e)}function bi(e,t){{var n=Ae(e);return n instanceof Comment&&n.data===""?na(n):n}}function Bt(e,t=1,n=!1){let r=e;for(;t--;)r=na(r);return r}function Fy(e){e.textContent=""}function Uy(e){dt===null&&ut===null&&Ay(),ut!==null&&(ut.f&be)!==0&&dt===null&&Ty(),ti&&Ey()}function By(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Zr(e,t,n,r=!0){var i=dt,s={ctx:ge,deps:null,nodes_start:null,nodes_end:null,f:e|mn,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Pl(s),s.f|=Jd}catch(c){throw Mn(s),c}else t!==null&&xl(s);var o=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Yd|El))===0;if(!o&&r&&(i!==null&&By(s,i),ut!==null&&(ut.f&Ve)!==0)){var u=ut;(u.effects??(u.effects=[])).push(s)}return s}function gp(e){const t=Zr(ta,null,!1);return nn(t,Ne),t.teardown=e,t}function $y(e){Uy();var t=dt!==null&&(dt.f&An)!==0&&ge!==null&&!ge.m;if(t){var n=ge;(n.e??(n.e=[])).push({fn:e,effect:dt,reaction:ut})}else{var r=mp(e);return r}}function qy(e){const t=Zr(Yr,e,!0);return(n={})=>new Promise(r=>{n.outro?mo(t,()=>{Mn(t),r(void 0)}):(Mn(t),r(void 0))})}function mp(e){return Zr(Xd,e,!1)}function zy(e){return Zr(ta,e,!0)}function Le(e,t=[],n=Rl){const r=t.map(n);return Sl(()=>e(...r.map(B)))}function Sl(e,t=0){var n=Zr(ta|wl|t,e,!0);return n}function Ki(e,t=!0){return Zr(ta|An,e,!0,t)}function _p(e){var t=e.teardown;if(t!==null){const n=ti,r=ut;xh(!0),en(null);try{t.call(null)}finally{xh(n),en(r)}}}function yp(e,t=!1){var i;var n=e.first;for(e.first=e.last=null;n!==null;){(i=n.ac)==null||i.abort(Zd);var r=n.next;(n.f&Yr)!==0?n.parent=null:Mn(n,t),n=r}}function jy(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&An)===0&&Mn(t),t=n}}function Mn(e,t=!0){var n=!1;(t||(e.f&yy)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(vp(e.nodes_start,e.nodes_end),n=!0),yp(e,t&&!n),Eo(e,0),nn(e,Tl);var r=e.transitions;if(r!==null)for(const s of r)s.stop();_p(e);var i=e.parent;i!==null&&i.first!==null&&wp(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function vp(e,t){for(;e!==null;){var n=e===t?null:na(e);e.remove(),e=n}}function wp(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function mo(e,t){var n=[];Cl(e,n,!0),Ep(n,()=>{Mn(e),t&&t()})}function Ep(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Cl(e,t,n){if((e.f&pn)===0){if(e.f^=pn,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Al)!==0||(r.f&An)!==0;Cl(r,t,s?n:!1),r=i}}}function _o(e){Tp(e,!0)}function Tp(e,t){if((e.f&pn)!==0){e.f^=pn;for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Al)!==0||(n.f&An)!==0;Tp(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let yo=[];function Hy(){var e=yo;yo=[],_y(e)}function Ap(e){yo.length===0&&queueMicrotask(Hy),yo.push(e)}function Gy(e){var t=dt;if((t.f&Jd)===0){if((t.f&El)===0)throw e;t.fn(e)}else Ip(e,t)}function Ip(e,t){for(;t!==null;){if((t.f&El)!==0)try{t.b.error(e);return}catch{}t=t.parent}throw e}let vu=!1,vo=null,lr=!1,ti=!1;function xh(e){ti=e}let Zs=[];let ut=null,Ge=!1;function en(e){ut=e}let dt=null;function Ln(e){dt=e}let zt=null;function bp(e){ut!==null&&ut.f&_u&&(zt===null?zt=[ut,[e]]:zt[1].push(e))}let se=null,Ee=0,Re=null;function Wy(e){Re=e}let Rp=1,wo=0,xn=!1;function Sp(){return++Rp}function ra(e){var d;var t=e.f;if((t&mn)!==0)return!0;if((t&wr)!==0){var n=e.deps,r=(t&be)!==0;if(n!==null){var i,s,o=(t&po)!==0,u=r&&dt!==null&&!xn,c=n.length;if(o||u){var l=e,h=l.parent;for(i=0;i<c;i++)s=n[i],(o||!((d=s==null?void 0:s.reactions)!=null&&d.includes(l)))&&(s.reactions??(s.reactions=[])).push(l);o&&(l.f^=po),u&&h!==null&&(h.f&be)===0&&(l.f^=be)}for(i=0;i<c;i++)if(s=n[i],ra(s)&&cp(s),s.wv>e.wv)return!0}(!r||dt!==null&&!xn)&&nn(e,Ne)}return!1}function Cp(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];zt!=null&&zt[1].includes(e)&&zt[0]===ut||((s.f&Ve)!==0?Cp(s,t,!1):t===s&&(n?nn(s,mn):(s.f&Ne)!==0&&nn(s,wr),xl(s)))}}function Pp(e){var m;var t=se,n=Ee,r=Re,i=ut,s=xn,o=zt,u=ge,c=Ge,l=e.f;se=null,Ee=0,Re=null,xn=(l&be)!==0&&(Ge||!lr||ut===null),ut=(l&(An|Yr))===0?e:null,zt=null,Ch(e.ctx),Ge=!1,wo++,e.f|=_u,e.ac!==null&&(e.ac.abort(Zd),e.ac=null);try{var h=(0,e.fn)(),d=e.deps;if(se!==null){var p;if(Eo(e,Ee),d!==null&&Ee>0)for(d.length=Ee+se.length,p=0;p<se.length;p++)d[Ee+p]=se[p];else e.deps=d=se;if(!xn||(l&Ve)!==0&&e.reactions!==null)for(p=Ee;p<d.length;p++)((m=d[p]).reactions??(m.reactions=[])).push(e)}else d!==null&&Ee<d.length&&(Eo(e,Ee),d.length=Ee);if(ap()&&Re!==null&&!Ge&&d!==null&&(e.f&(Ve|wr|mn))===0)for(p=0;p<Re.length;p++)Cp(Re[p],e);return i!==null&&i!==e&&(wo++,Re!==null&&(r===null?r=Re:r.push(...Re))),h}catch(_){Gy(_)}finally{se=t,Ee=n,Re=r,ut=i,xn=s,zt=o,Ch(u),Ge=c,e.f^=_u}}function Ky(e,t){let n=t.reactions;if(n!==null){var r=fy.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&Ve)!==0&&(se===null||!se.includes(t))&&(nn(t,wr),(t.f&(be|po))===0&&(t.f^=po),up(t),Eo(t,0))}function Eo(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Ky(e,n[r])}function Pl(e){var t=e.f;if((t&Tl)===0){nn(e,Ne);var n=dt,r=lr;dt=e,lr=!0;try{(t&wl)!==0?jy(e):yp(e),_p(e);var i=Pp(e);e.teardown=typeof i=="function"?i:null,e.wv=Rp;var s;bh&&Cy&&(e.f&mn)!==0&&e.deps}finally{lr=r,dt=n}}}function Qy(){try{Iy()}catch(e){if(vo!==null)Ip(e,vo);else throw e}}function Xy(){var e=lr;try{var t=0;for(lr=!0;Zs.length>0;){t++>1e3&&Qy();var n=Zs,r=n.length;Zs=[];for(var i=0;i<r;i++){var s=Yy(n[i]);Jy(s)}Wi.clear()}}finally{vu=!1,lr=e,vo=null}}function Jy(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];(r.f&(Tl|pn))===0&&ra(r)&&(Pl(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?wp(r):r.fn=null))}}function xl(e){vu||(vu=!0,queueMicrotask(Xy));for(var t=vo=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(Yr|An))!==0){if((n&Ne)===0)return;t.f^=Ne}}Zs.push(t)}function Yy(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(An|Yr))!==0,s=i&&(r&Ne)!==0;if(!s&&(r&pn)===0){(r&Xd)!==0?t.push(n):i?n.f^=Ne:ra(n)&&Pl(n);var o=n.first;if(o!==null){n=o;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}return t}function B(e){var t=e.f,n=(t&Ve)!==0;if(ut!==null&&!Ge){if(!(zt!=null&&zt[1].includes(e))||zt[0]!==ut){var r=ut.deps;e.rv<wo&&(e.rv=wo,se===null&&r!==null&&r[Ee]===e?Ee++:se===null?se=[e]:(!xn||!se.includes(e))&&se.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&be)===0&&(i.f^=be)}return n&&(i=e,ra(i)&&cp(i)),ti&&Wi.has(e)?Wi.get(e):e.v}function Vl(e){var t=Ge;try{return Ge=!0,e()}finally{Ge=t}}const Zy=-7169;function nn(e,t){e.f=e.f&Zy|t}const tv=["touchstart","touchmove"];function ev(e){return tv.includes(e)}let Vh=!1;function nv(){Vh||(Vh=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function xp(e){var t=ut,n=dt;en(null),Ln(null);try{return e()}finally{en(t),Ln(n)}}function rv(e,t,n,r=n){e.addEventListener(t,()=>xp(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),nv()}const Vp=new Set,wu=new Set;function iv(e,t,n,r={}){function i(s){if(r.capture||Ci.call(t,s),!s.cancelBubble)return xp(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ap(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function sv(e,t,n,r,i){var s={capture:r,passive:i},o=iv(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&gp(()=>{t.removeEventListener(e,o,s)})}function ov(e){for(var t=0;t<e.length;t++)Vp.add(e[t]);for(var n of wu)n(e)}function Ci(e){var C;var t=this,n=t.ownerDocument,r=e.type,i=((C=e.composedPath)==null?void 0:C.call(e))||[],s=i[0]||e.target,o=0,u=e.__root;if(u){var c=i.indexOf(u);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var l=i.indexOf(t);if(l===-1)return;c<=l&&(o=c)}if(s=i[o]||e.target,s!==t){dy(e,"currentTarget",{configurable:!0,get(){return s||n}});var h=ut,d=dt;en(null),Ln(null);try{for(var p,m=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var E=s["__"+r];if(E!=null&&(!s.disabled||e.target===s))if(yl(E)){var[v,...S]=E;v.apply(s,[e,...S])}else E.call(s,e)}catch(N){p?m.push(N):p=N}if(e.cancelBubble||_===t||_===null)break;s=_}if(p){for(let N of m)queueMicrotask(()=>{throw N});throw p}}finally{e.__root=t,delete e.currentTarget,en(h),Ln(d)}}}function Nl(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function dr(e,t){var n=dt;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Hn(e,t){var n=(t&rp)!==0,r=(t&Vy)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=Nl(s?e:"<!>"+e),n||(i=Ae(i)));var o=r||fp?document.importNode(i,!0):i.cloneNode(!0);if(n){var u=Ae(o),c=o.lastChild;dr(u,c)}else dr(o,o);return o}}function av(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&rp)!==0,s=`<${n}>${r?e:"<!>"+e}</${n}>`,o;return()=>{if(!o){var u=Nl(s),c=Ae(u);if(i)for(o=document.createDocumentFragment();Ae(c);)o.appendChild(Ae(c));else o=Ae(c)}var l=o.cloneNode(!0);if(i){var h=Ae(l),d=l.lastChild;dr(h,d)}else dr(l,l);return l}}function ei(e,t){return av(e,t,"svg")}function uv(e=""){{var t=ea(e+"");return dr(t,t),t}}function Ja(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ea();return e.append(t,n),dr(t,n),e}function $t(e,t){e!==null&&e.before(t)}function xr(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function lv(e,t){return cv(e,t)}const Vr=new Map;function cv(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:o=!0}){Ly();var u=new Set,c=d=>{for(var p=0;p<d.length;p++){var m=d[p];if(!u.has(m)){u.add(m);var _=ev(m);t.addEventListener(m,Ci,{passive:_});var E=Vr.get(m);E===void 0?(document.addEventListener(m,Ci,{passive:_}),Vr.set(m,1)):Vr.set(m,E+1)}}};c(vl(Vp)),wu.add(c);var l=void 0,h=qy(()=>{var d=n??t.appendChild(ea());return Ki(()=>{if(s){sp({});var p=ge;p.c=s}i&&(r.$$events=i),l=e(d,r)||{},s&&op()}),()=>{var _;for(var p of u){t.removeEventListener(p,Ci);var m=Vr.get(p);--m===0?(document.removeEventListener(p,Ci),Vr.delete(p)):Vr.set(p,m)}wu.delete(c),d!==n&&((_=d.parentNode)==null||_.removeChild(d))}});return hv.set(l,h),l}let hv=new WeakMap;function ln(e,t,[n,r]=[0,0]){var i=e,s=null,o=null,u=he,c=n>0?Al:0,l=!1;const h=(p,m=!0)=>{l=!0,d(m,p)},d=(p,m)=>{u!==(u=p)&&(u?(s?_o(s):m&&(s=Ki(()=>m(i))),o&&mo(o,()=>{o=null})):(o?_o(o):m&&(o=Ki(()=>m(i,[n+1,r]))),s&&mo(s,()=>{s=null})))};Sl(()=>{l=!1,t(h),l||d(null,null)},c)}function rr(e,t){return t}function fv(e,t,n,r){for(var i=[],s=t.length,o=0;o<s;o++)Cl(t[o].e,i,!0);var u=s>0&&i.length===0&&n!==null;if(u){var c=n.parentNode;Fy(c),c.append(n),r.clear(),Cn(e,t[0].prev,t[s-1].next)}Ep(i,()=>{for(var l=0;l<s;l++){var h=t[l];u||(r.delete(h.k),Cn(e,h.prev,h.next)),Mn(h.e,!u)}})}function ir(e,t,n,r,i,s=null){var o=e,u={flags:t,items:new Map,first:null},c=(t&np)!==0;if(c){var l=e;o=l.appendChild(ea())}var h=null,d=!1,p=Dy(()=>{var m=n();return yl(m)?m:m==null?[]:vl(m)});Sl(()=>{var m=B(p),_=m.length;d&&_===0||(d=_===0,dv(m,u,o,i,t,r,n),s!==null&&(_===0?h?_o(h):h=Ki(()=>s(o)):h!==null&&mo(h,()=>{h=null})),B(p))})}function dv(e,t,n,r,i,s,o){var X,F,Y,ct;var u=(i&Py)!==0,c=(i&(Il|bl))!==0,l=e.length,h=t.items,d=t.first,p=d,m,_=null,E,v=[],S=[],C,N,x,M;if(u)for(M=0;M<l;M+=1)C=e[M],N=s(C,M),x=h.get(N),x!==void 0&&((X=x.a)==null||X.measure(),(E??(E=new Set)).add(x));for(M=0;M<l;M+=1){if(C=e[M],N=s(C,M),x=h.get(N),x===void 0){var U=p?p.e.nodes_start:n;_=gv(U,t,_,_===null?t.first:_.next,C,N,M,r,i,o),h.set(N,_),v=[],S=[],p=_.next;continue}if(c&&pv(x,C,M,i),(x.e.f&pn)!==0&&(_o(x.e),u&&((F=x.a)==null||F.unfix(),(E??(E=new Set)).delete(x))),x!==p){if(m!==void 0&&m.has(x)){if(v.length<S.length){var I=S[0],w;_=I.prev;var T=v[0],R=v[v.length-1];for(w=0;w<v.length;w+=1)Nh(v[w],I,n);for(w=0;w<S.length;w+=1)m.delete(S[w]);Cn(t,T.prev,R.next),Cn(t,_,T),Cn(t,R,I),p=I,_=R,M-=1,v=[],S=[]}else m.delete(x),Nh(x,p,n),Cn(t,x.prev,x.next),Cn(t,x,_===null?t.first:_.next),Cn(t,_,x),_=x;continue}for(v=[],S=[];p!==null&&p.k!==N;)(p.e.f&pn)===0&&(m??(m=new Set)).add(p),S.push(p),p=p.next;if(p===null)continue;x=p}v.push(x),_=x,p=x.next}if(p!==null||m!==void 0){for(var b=m===void 0?[]:vl(m);p!==null;)(p.e.f&pn)===0&&b.push(p),p=p.next;var P=b.length;if(P>0){var A=(i&np)!==0&&l===0?n:null;if(u){for(M=0;M<P;M+=1)(Y=b[M].a)==null||Y.measure();for(M=0;M<P;M+=1)(ct=b[M].a)==null||ct.fix()}fv(t,b,A,h)}}u&&Ap(()=>{var _t;if(E!==void 0)for(x of E)(_t=x.a)==null||_t.apply()}),dt.first=t.first&&t.first.e,dt.last=_&&_.e}function pv(e,t,n,r){(r&Il)!==0&&yu(e.v,t),(r&bl)!==0?yu(e.i,n):e.i=n}function gv(e,t,n,r,i,s,o,u,c,l){var h=(c&Il)!==0,d=(c&xy)===0,p=h?d?Oy(i,!1,!1):go(i):i,m=(c&bl)===0?o:go(o),_={i:m,v:p,k:s,a:null,e:null,prev:n,next:r};try{return _.e=Ki(()=>u(e,p,m,l),My),_.e.prev=n&&n.e,_.e.next=r&&r.e,n===null?t.first=_:(n.next=_,n.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function Nh(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var o=na(s);i.before(s),s=o}}function Cn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function mv(e,t,n=!1,r=!1,i=!1){var s=e,o="";Le(()=>{var u=dt;if(o!==(o=t()??"")&&(u.nodes_start!==null&&(vp(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),o!=="")){var c=o+"";n?c=`<svg>${c}</svg>`:r&&(c=`<math>${c}</math>`);var l=Nl(c);if((n||r)&&(l=Ae(l)),dr(Ae(l),l.lastChild),n||r)for(;Ae(l);)s.before(Ae(l));else s.before(l)}})}const Dh=[...` 	
\r\fÂ \v\uFEFF`];function _v(e,t,n){var r=""+e;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,o=0;(o=r.indexOf(i,o))>=0;){var u=o+s;(o===0||Dh.includes(r[o-1]))&&(u===r.length||Dh.includes(r[u]))?r=(o===0?"":r.substring(0,o))+r.substring(u+1):o=u}}return r===""?null:r}function yv(e,t){return e==null?null:String(e)}function vv(e,t,n,r,i,s){var o=e.__className;if(o!==n||o===void 0){var u=_v(n,r,s);u==null?e.removeAttribute("class"):e.className=u,e.__className=n}else if(s&&i!==s)for(var c in s){var l=!!s[c];(i==null||l!==!!i[c])&&e.classList.toggle(c,l)}return s}function wv(e,t,n,r){var i=e.__style;if(i!==t){var s=yv(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const Ev=Symbol("is custom element"),Tv=Symbol("is html");function ie(e,t,n,r){var i=Av(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[vy]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Iv(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Av(e){return e.__attributes??(e.__attributes={[Ev]:e.nodeName.includes("-"),[Tv]:e.namespaceURI===Ny})}var kh=new Map;function Iv(e){var t=kh.get(e.nodeName);if(t)return t;kh.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=py(r);for(var s in n)n[s].set&&t.push(s);r=Qd(r)}return t}function bv(e,t,n=t){rv(e,"input",r=>{var i=r?e.defaultValue:e.value;if(i=Ya(e)?Za(i):i,n(i),i!==(i=t())){var s=e.selectionStart,o=e.selectionEnd;e.value=i??"",o!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(o,e.value.length))}}),Vl(t)==null&&e.value&&n(Ya(e)?Za(e.value):e.value),zy(()=>{var r=t();Ya(e)&&r===Za(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function Ya(e){var t=e.type;return t==="number"||t==="range"}function Za(e){return e===""?null:+e}function Eu(e){ge===null&&ip(),$y(()=>{const t=Vl(e);if(typeof t=="function")return t})}function Rv(e){ge===null&&ip(),Eu(()=>()=>Vl(e))}const Sv="5";var Kd;typeof window<"u"&&((Kd=window.__svelte??(window.__svelte={})).v??(Kd.v=new Set)).add(Sv);function Np(e,t){return function(){return e.apply(t,arguments)}}const{toString:Cv}=Object.prototype,{getPrototypeOf:Dl}=Object,{iterator:ia,toStringTag:Dp}=Symbol,sa=(e=>t=>{const n=Cv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$e=e=>(e=e.toLowerCase(),t=>sa(t)===e),oa=e=>t=>typeof t===e,{isArray:ni}=Array,Qi=oa("undefined");function Pv(e){return e!==null&&!Qi(e)&&e.constructor!==null&&!Qi(e.constructor)&&me(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const kp=$e("ArrayBuffer");function xv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&kp(e.buffer),t}const Vv=oa("string"),me=oa("function"),Op=oa("number"),aa=e=>e!==null&&typeof e=="object",Nv=e=>e===!0||e===!1,to=e=>{if(sa(e)!=="object")return!1;const t=Dl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Dp in e)&&!(ia in e)},Dv=$e("Date"),kv=$e("File"),Ov=$e("Blob"),Mv=$e("FileList"),Lv=e=>aa(e)&&me(e.pipe),Fv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||me(e.append)&&((t=sa(e))==="formdata"||t==="object"&&me(e.toString)&&e.toString()==="[object FormData]"))},Uv=$e("URLSearchParams"),[Bv,$v,qv,zv]=["ReadableStream","Request","Response","Headers"].map($e),jv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ds(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),ni(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let u;for(r=0;r<o;r++)u=s[r],t.call(null,e[u],u,e)}}function Mp(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const or=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Lp=e=>!Qi(e)&&e!==or;function Tu(){const{caseless:e}=Lp(this)&&this||{},t={},n=(r,i)=>{const s=e&&Mp(t,i)||i;to(t[s])&&to(r)?t[s]=Tu(t[s],r):to(r)?t[s]=Tu({},r):ni(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ds(arguments[r],n);return t}const Hv=(e,t,n,{allOwnKeys:r}={})=>(ds(t,(i,s)=>{n&&me(i)?e[s]=Np(i,n):e[s]=i},{allOwnKeys:r}),e),Gv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Wv=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Kv=(e,t,n,r)=>{let i,s,o;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!u[o]&&(t[o]=e[o],u[o]=!0);e=n!==!1&&Dl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Qv=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Xv=e=>{if(!e)return null;if(ni(e))return e;let t=e.length;if(!Op(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Jv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Dl(Uint8Array)),Yv=(e,t)=>{const r=(e&&e[ia]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},Zv=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},t0=$e("HTMLFormElement"),e0=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Oh=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),n0=$e("RegExp"),Fp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ds(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},r0=e=>{Fp(e,(t,n)=>{if(me(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(me(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},i0=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return ni(e)?r(e):r(String(e).split(t)),n},s0=()=>{},o0=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function a0(e){return!!(e&&me(e.append)&&e[Dp]==="FormData"&&e[ia])}const u0=e=>{const t=new Array(10),n=(r,i)=>{if(aa(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=ni(r)?[]:{};return ds(r,(o,u)=>{const c=n(o,i+1);!Qi(c)&&(s[u]=c)}),t[i]=void 0,s}}return r};return n(e,0)},l0=$e("AsyncFunction"),c0=e=>e&&(aa(e)||me(e))&&me(e.then)&&me(e.catch),Up=((e,t)=>e?setImmediate:t?((n,r)=>(or.addEventListener("message",({source:i,data:s})=>{i===or&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),or.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",me(or.postMessage)),h0=typeof queueMicrotask<"u"?queueMicrotask.bind(or):typeof process<"u"&&process.nextTick||Up,f0=e=>e!=null&&me(e[ia]),D={isArray:ni,isArrayBuffer:kp,isBuffer:Pv,isFormData:Fv,isArrayBufferView:xv,isString:Vv,isNumber:Op,isBoolean:Nv,isObject:aa,isPlainObject:to,isReadableStream:Bv,isRequest:$v,isResponse:qv,isHeaders:zv,isUndefined:Qi,isDate:Dv,isFile:kv,isBlob:Ov,isRegExp:n0,isFunction:me,isStream:Lv,isURLSearchParams:Uv,isTypedArray:Jv,isFileList:Mv,forEach:ds,merge:Tu,extend:Hv,trim:jv,stripBOM:Gv,inherits:Wv,toFlatObject:Kv,kindOf:sa,kindOfTest:$e,endsWith:Qv,toArray:Xv,forEachEntry:Yv,matchAll:Zv,isHTMLForm:t0,hasOwnProperty:Oh,hasOwnProp:Oh,reduceDescriptors:Fp,freezeMethods:r0,toObjectSet:i0,toCamelCase:e0,noop:s0,toFiniteNumber:o0,findKey:Mp,global:or,isContextDefined:Lp,isSpecCompliantForm:a0,toJSONObject:u0,isAsyncFn:l0,isThenable:c0,setImmediate:Up,asap:h0,isIterable:f0};function Z(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}D.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const Bp=Z.prototype,$p={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$p[e]={value:e}});Object.defineProperties(Z,$p);Object.defineProperty(Bp,"isAxiosError",{value:!0});Z.from=(e,t,n,r,i,s)=>{const o=Object.create(Bp);return D.toFlatObject(e,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),Z.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const d0=null;function Au(e){return D.isPlainObject(e)||D.isArray(e)}function qp(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function Mh(e,t,n){return e?e.concat(t).map(function(i,s){return i=qp(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function p0(e){return D.isArray(e)&&!e.some(Au)}const g0=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function ua(e,t,n){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,v){return!D.isUndefined(v[E])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function l(_){if(_===null)return"";if(D.isDate(_))return _.toISOString();if(D.isBoolean(_))return _.toString();if(!c&&D.isBlob(_))throw new Z("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(_)||D.isTypedArray(_)?c&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,E,v){let S=_;if(_&&!v&&typeof _=="object"){if(D.endsWith(E,"{}"))E=r?E:E.slice(0,-2),_=JSON.stringify(_);else if(D.isArray(_)&&p0(_)||(D.isFileList(_)||D.endsWith(E,"[]"))&&(S=D.toArray(_)))return E=qp(E),S.forEach(function(N,x){!(D.isUndefined(N)||N===null)&&t.append(o===!0?Mh([E],x,s):o===null?E:E+"[]",l(N))}),!1}return Au(_)?!0:(t.append(Mh(v,E,s),l(_)),!1)}const d=[],p=Object.assign(g0,{defaultVisitor:h,convertValue:l,isVisitable:Au});function m(_,E){if(!D.isUndefined(_)){if(d.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));d.push(_),D.forEach(_,function(S,C){(!(D.isUndefined(S)||S===null)&&i.call(t,S,D.isString(C)?C.trim():C,E,p))===!0&&m(S,E?E.concat(C):[C])}),d.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Lh(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function kl(e,t){this._pairs=[],e&&ua(e,this,t)}const zp=kl.prototype;zp.append=function(t,n){this._pairs.push([t,n])};zp.toString=function(t){const n=t?function(r){return t.call(this,r,Lh)}:Lh;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function m0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jp(e,t,n){if(!t)return e;const r=n&&n.encode||m0;D.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=D.isURLSearchParams(t)?t.toString():new kl(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Fh{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Hp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_0=typeof URLSearchParams<"u"?URLSearchParams:kl,y0=typeof FormData<"u"?FormData:null,v0=typeof Blob<"u"?Blob:null,w0={isBrowser:!0,classes:{URLSearchParams:_0,FormData:y0,Blob:v0},protocols:["http","https","file","blob","url","data"]},Ol=typeof window<"u"&&typeof document<"u",Iu=typeof navigator=="object"&&navigator||void 0,E0=Ol&&(!Iu||["ReactNative","NativeScript","NS"].indexOf(Iu.product)<0),T0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",A0=Ol&&window.location.href||"http://localhost",I0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ol,hasStandardBrowserEnv:E0,hasStandardBrowserWebWorkerEnv:T0,navigator:Iu,origin:A0},Symbol.toStringTag,{value:"Module"})),ne={...I0,...w0};function b0(e,t){return ua(e,new ne.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ne.isNode&&D.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function R0(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function S0(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function Gp(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),c=s>=n.length;return o=!o&&D.isArray(i)?i.length:o,c?(D.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!D.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&D.isArray(i[o])&&(i[o]=S0(i[o])),!u)}if(D.isFormData(e)&&D.isFunction(e.entries)){const n={};return D.forEachEntry(e,(r,i)=>{t(R0(r),i,n,0)}),n}return null}function C0(e,t,n){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const ps={transitional:Hp,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=D.isObject(t);if(s&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return i?JSON.stringify(Gp(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return b0(t,this.formSerializer).toString();if((u=D.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ua(u?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),C0(t)):t}],transformResponse:[function(t){const n=this.transitional||ps.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(u){if(o)throw u.name==="SyntaxError"?Z.from(u,Z.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ne.classes.FormData,Blob:ne.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{ps.headers[e]={}});const P0=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),x0=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&P0[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Uh=Symbol("internals");function Ri(e){return e&&String(e).trim().toLowerCase()}function eo(e){return e===!1||e==null?e:D.isArray(e)?e.map(eo):String(e)}function V0(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const N0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function tu(e,t,n,r,i){if(D.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!D.isString(t)){if(D.isString(r))return t.indexOf(r)!==-1;if(D.isRegExp(r))return r.test(t)}}function D0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function k0(e,t){const n=D.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}let _e=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(u,c,l){const h=Ri(c);if(!h)throw new Error("header name must be a non-empty string");const d=D.findKey(i,h);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=eo(u))}const o=(u,c)=>D.forEach(u,(l,h)=>s(l,h,c));if(D.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(D.isString(t)&&(t=t.trim())&&!N0(t))o(x0(t),n);else if(D.isObject(t)&&D.isIterable(t)){let u={},c,l;for(const h of t){if(!D.isArray(h))throw TypeError("Object iterator must return a key-value pair");u[l=h[0]]=(c=u[l])?D.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(u,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=Ri(t),t){const r=D.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return V0(i);if(D.isFunction(n))return n.call(this,i,r);if(D.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ri(t),t){const r=D.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||tu(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=Ri(o),o){const u=D.findKey(r,o);u&&(!n||tu(r,r[u],u,n))&&(delete r[u],i=!0)}}return D.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||tu(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return D.forEach(this,(i,s)=>{const o=D.findKey(r,s);if(o){n[o]=eo(i),delete n[s];return}const u=t?D0(s):String(s).trim();u!==s&&delete n[s],n[u]=eo(i),r[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return D.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&D.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Uh]=this[Uh]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=Ri(o);r[u]||(k0(i,o),r[u]=!0)}return D.isArray(t)?t.forEach(s):s(t),this}};_e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(_e.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});D.freezeMethods(_e);function eu(e,t){const n=this||ps,r=t||n,i=_e.from(r.headers);let s=r.data;return D.forEach(e,function(u){s=u.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Wp(e){return!!(e&&e.__CANCEL__)}function ri(e,t,n){Z.call(this,e??"canceled",Z.ERR_CANCELED,t,n),this.name="CanceledError"}D.inherits(ri,Z,{__CANCEL__:!0});function Kp(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Z("Request failed with status code "+n.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function O0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function M0(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),h=r[s];o||(o=l),n[i]=c,r[i]=l;let d=s,p=0;for(;d!==i;)p+=n[d++],d=d%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-o<t)return;const m=h&&l-h;return m?Math.round(p*1e3/m):void 0}}function L0(e,t){let n=0,r=1e3/t,i,s;const o=(l,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),e.apply(null,l)};return[(...l)=>{const h=Date.now(),d=h-n;d>=r?o(l,h):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const To=(e,t,n=3)=>{let r=0;const i=M0(50,250);return L0(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),h=o<=u;r=o;const d={loaded:o,total:u,progress:u?o/u:void 0,bytes:c,rate:l||void 0,estimated:l&&u&&h?(u-o)/l:void 0,event:s,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(d)},n)},Bh=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},$h=e=>(...t)=>D.asap(()=>e(...t)),F0=ne.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ne.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ne.origin),ne.navigator&&/(msie|trident)/i.test(ne.navigator.userAgent)):()=>!0,U0=ne.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(r)&&o.push("path="+r),D.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function B0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Qp(e,t,n){let r=!B0(t);return e&&(r||n==!1)?$0(e,t):t}const qh=e=>e instanceof _e?{...e}:e;function pr(e,t){t=t||{};const n={};function r(l,h,d,p){return D.isPlainObject(l)&&D.isPlainObject(h)?D.merge.call({caseless:p},l,h):D.isPlainObject(h)?D.merge({},h):D.isArray(h)?h.slice():h}function i(l,h,d,p){if(D.isUndefined(h)){if(!D.isUndefined(l))return r(void 0,l,d,p)}else return r(l,h,d,p)}function s(l,h){if(!D.isUndefined(h))return r(void 0,h)}function o(l,h){if(D.isUndefined(h)){if(!D.isUndefined(l))return r(void 0,l)}else return r(void 0,h)}function u(l,h,d){if(d in t)return r(l,h);if(d in e)return r(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(l,h,d)=>i(qh(l),qh(h),d,!0)};return D.forEach(Object.keys(Object.assign({},e,t)),function(h){const d=c[h]||i,p=d(e[h],t[h],h);D.isUndefined(p)&&d!==u||(n[h]=p)}),n}const Xp=e=>{const t=pr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=t;t.headers=o=_e.from(o),t.url=jp(Qp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(D.isFormData(n)){if(ne.hasStandardBrowserEnv||ne.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...h]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...h].join("; "))}}if(ne.hasStandardBrowserEnv&&(r&&D.isFunction(r)&&(r=r(t)),r||r!==!1&&F0(t.url))){const l=i&&s&&U0.read(s);l&&o.set(i,l)}return t},q0=typeof XMLHttpRequest<"u",z0=q0&&function(e){return new Promise(function(n,r){const i=Xp(e);let s=i.data;const o=_e.from(i.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:l}=i,h,d,p,m,_;function E(){m&&m(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function S(){if(!v)return;const N=_e.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),M={data:!u||u==="text"||u==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:N,config:e,request:v};Kp(function(I){n(I),E()},function(I){r(I),E()},M),v=null}"onloadend"in v?v.onloadend=S:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(S)},v.onabort=function(){v&&(r(new Z("Request aborted",Z.ECONNABORTED,e,v)),v=null)},v.onerror=function(){r(new Z("Network Error",Z.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||Hp;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),r(new Z(x,M.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,e,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&D.forEach(o.toJSON(),function(x,M){v.setRequestHeader(M,x)}),D.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),u&&u!=="json"&&(v.responseType=i.responseType),l&&([p,_]=To(l,!0),v.addEventListener("progress",p)),c&&v.upload&&([d,m]=To(c),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(h=N=>{v&&(r(!N||N.type?new ri(null,e,v):N),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const C=O0(i.url);if(C&&ne.protocols.indexOf(C)===-1){r(new Z("Unsupported protocol "+C+":",Z.ERR_BAD_REQUEST,e));return}v.send(s||null)})},j0=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(l){if(!i){i=!0,u();const h=l instanceof Error?l:this.reason;r.abort(h instanceof Z?h:new ri(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,s(new Z(`timeout ${t} of ms exceeded`,Z.ETIMEDOUT))},t);const u=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),e=null)};e.forEach(l=>l.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>D.asap(u),c}},H0=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},G0=async function*(e,t){for await(const n of W0(e))yield*H0(n,t)},W0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},zh=(e,t,n,r)=>{const i=G0(e,t);let s=0,o,u=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:h}=await i.next();if(l){u(),c.close();return}let d=h.byteLength;if(n){let p=s+=d;n(p)}c.enqueue(new Uint8Array(h))}catch(l){throw u(l),l}},cancel(c){return u(c),i.return()}},{highWaterMark:2})},la=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Jp=la&&typeof ReadableStream=="function",K0=la&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Yp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Q0=Jp&&Yp(()=>{let e=!1;const t=new Request(ne.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),jh=64*1024,bu=Jp&&Yp(()=>D.isReadableStream(new Response("").body)),Ao={stream:bu&&(e=>e.body)};la&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ao[t]&&(Ao[t]=D.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Z(`Response type '${t}' is not supported`,Z.ERR_NOT_SUPPORT,r)})})})(new Response);const X0=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(ne.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await K0(e)).byteLength},J0=async(e,t)=>{const n=D.toFiniteNumber(e.getContentLength());return n??X0(t)},Y0=la&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:c,responseType:l,headers:h,withCredentials:d="same-origin",fetchOptions:p}=Xp(e);l=l?(l+"").toLowerCase():"text";let m=j0([i,s&&s.toAbortSignal()],o),_;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(c&&Q0&&n!=="get"&&n!=="head"&&(v=await J0(h,r))!==0){let M=new Request(t,{method:"POST",body:r,duplex:"half"}),U;if(D.isFormData(r)&&(U=M.headers.get("content-type"))&&h.setContentType(U),M.body){const[I,w]=Bh(v,To($h(c)));r=zh(M.body,jh,I,w)}}D.isString(d)||(d=d?"include":"omit");const S="credentials"in Request.prototype;_=new Request(t,{...p,signal:m,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:S?d:void 0});let C=await fetch(_,p);const N=bu&&(l==="stream"||l==="response");if(bu&&(u||N&&E)){const M={};["status","statusText","headers"].forEach(T=>{M[T]=C[T]});const U=D.toFiniteNumber(C.headers.get("content-length")),[I,w]=u&&Bh(U,To($h(u),!0))||[];C=new Response(zh(C.body,jh,I,()=>{w&&w(),E&&E()}),M)}l=l||"text";let x=await Ao[D.findKey(Ao,l)||"text"](C,e);return!N&&E&&E(),await new Promise((M,U)=>{Kp(M,U,{data:x,headers:_e.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:_})})}catch(S){throw E&&E(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,e,_),{cause:S.cause||S}):Z.from(S,S&&S.code,e,_)}}),Ru={http:d0,xhr:z0,fetch:Y0};D.forEach(Ru,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Hh=e=>`- ${e}`,Z0=e=>D.isFunction(e)||e===null||e===!1,Zp={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!Z0(n)&&(r=Ru[(o=String(n)).toLowerCase()],r===void 0))throw new Z(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(Hh).join(`
`):" "+Hh(s[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Ru};function nu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ri(null,e)}function Gh(e){return nu(e),e.headers=_e.from(e.headers),e.data=eu.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Zp.getAdapter(e.adapter||ps.adapter)(e).then(function(r){return nu(e),r.data=eu.call(e,e.transformResponse,r),r.headers=_e.from(r.headers),r},function(r){return Wp(r)||(nu(e),r&&r.response&&(r.response.data=eu.call(e,e.transformResponse,r.response),r.response.headers=_e.from(r.response.headers))),Promise.reject(r)})}const tg="1.10.0",ca={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ca[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Wh={};ca.transitional=function(t,n,r){function i(s,o){return"[Axios v"+tg+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(t===!1)throw new Z(i(o," has been removed"+(n?" in "+n:"")),Z.ERR_DEPRECATED);return n&&!Wh[o]&&(Wh[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,u):!0}};ca.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function tw(e,t,n){if(typeof e!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const u=e[s],c=u===void 0||o(u,s,e);if(c!==!0)throw new Z("option "+s+" must be "+c,Z.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Z("Unknown option "+s,Z.ERR_BAD_OPTION)}}const no={assertOptions:tw,validators:ca},ze=no.validators;let cr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Fh,response:new Fh}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=pr(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&no.assertOptions(r,{silentJSONParsing:ze.transitional(ze.boolean),forcedJSONParsing:ze.transitional(ze.boolean),clarifyTimeoutError:ze.transitional(ze.boolean)},!1),i!=null&&(D.isFunction(i)?n.paramsSerializer={serialize:i}:no.assertOptions(i,{encode:ze.function,serialize:ze.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),no.assertOptions(n,{baseUrl:ze.spelling("baseURL"),withXsrfToken:ze.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&D.merge(s.common,s[n.method]);s&&D.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=_e.concat(o,s);const u=[];let c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(c=c&&E.synchronous,u.unshift(E.fulfilled,E.rejected))});const l=[];this.interceptors.response.forEach(function(E){l.push(E.fulfilled,E.rejected)});let h,d=0,p;if(!c){const _=[Gh.bind(this),void 0];for(_.unshift.apply(_,u),_.push.apply(_,l),p=_.length,h=Promise.resolve(n);d<p;)h=h.then(_[d++],_[d++]);return h}p=u.length;let m=n;for(d=0;d<p;){const _=u[d++],E=u[d++];try{m=_(m)}catch(v){E.call(this,v);break}}try{h=Gh.call(this,m)}catch(_){return Promise.reject(_)}for(d=0,p=l.length;d<p;)h=h.then(l[d++],l[d++]);return h}getUri(t){t=pr(this.defaults,t);const n=Qp(t.baseURL,t.url,t.allowAbsoluteUrls);return jp(n,t.params,t.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(t){cr.prototype[t]=function(n,r){return this.request(pr(r||{},{method:t,url:n,data:(r||{}).data}))}});D.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,u){return this.request(pr(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}cr.prototype[t]=n(),cr.prototype[t+"Form"]=n(!0)});let ew=class eg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,u){r.reason||(r.reason=new ri(s,o,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new eg(function(i){t=i}),cancel:t}}};function nw(e){return function(n){return e.apply(null,n)}}function rw(e){return D.isObject(e)&&e.isAxiosError===!0}const Su={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Su).forEach(([e,t])=>{Su[t]=e});function ng(e){const t=new cr(e),n=Np(cr.prototype.request,t);return D.extend(n,cr.prototype,t,{allOwnKeys:!0}),D.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return ng(pr(e,i))},n}const At=ng(ps);At.Axios=cr;At.CanceledError=ri;At.CancelToken=ew;At.isCancel=Wp;At.VERSION=tg;At.toFormData=ua;At.AxiosError=Z;At.Cancel=At.CanceledError;At.all=function(t){return Promise.all(t)};At.spread=nw;At.isAxiosError=rw;At.mergeConfig=pr;At.AxiosHeaders=_e;At.formToJSON=e=>Gp(D.isHTMLForm(e)?new FormData(e):e);At.getAdapter=Zp.getAdapter;At.HttpStatusCode=Su;At.default=At;const{Axios:pP,AxiosError:gP,CanceledError:mP,isCancel:_P,CancelToken:yP,VERSION:vP,all:wP,Cancel:EP,isAxiosError:TP,spread:AP,toFormData:IP,AxiosHeaders:bP,HttpStatusCode:RP,formToJSON:SP,getAdapter:CP,mergeConfig:PP}=At;class gr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,u=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*iw(e){for(const t of e)yield*t}function rg(e){return Array.from(iw(e))}var sw={value:()=>{}};function Ml(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ro(n)}function ro(e){this._=e}function ow(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ro.prototype=Ml.prototype={constructor:ro,on:function(e,t){var n=this._,r=ow(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=aw(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Kh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Kh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ro(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function aw(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Kh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=sw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cu="http://www.w3.org/1999/xhtml";const Qh={svg:"http://www.w3.org/2000/svg",xhtml:Cu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ha(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qh.hasOwnProperty(t)?{space:Qh[t],local:e}:e}function uw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cu&&t.documentElement.namespaceURI===Cu?t.createElement(e):t.createElementNS(n,e)}}function lw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ig(e){var t=ha(e);return(t.local?lw:uw)(t)}function cw(){}function Ll(e){return e==null?cw:function(){return this.querySelector(e)}}function hw(e){typeof e!="function"&&(e=Ll(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=new Array(o),c,l,h=0;h<o;++h)(c=s[h])&&(l=e.call(c,c.__data__,h,s))&&("__data__"in c&&(l.__data__=c.__data__),u[h]=l);return new Ue(r,this._parents)}function fw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dw(){return[]}function sg(e){return e==null?dw:function(){return this.querySelectorAll(e)}}function pw(e){return function(){return fw(e.apply(this,arguments))}}function gw(e){typeof e=="function"?e=pw(e):e=sg(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],u=o.length,c,l=0;l<u;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new Ue(r,i)}function og(e){return function(){return this.matches(e)}}function ag(e){return function(t){return t.matches(e)}}var mw=Array.prototype.find;function _w(e){return function(){return mw.call(this.children,e)}}function yw(){return this.firstElementChild}function vw(e){return this.select(e==null?yw:_w(typeof e=="function"?e:ag(e)))}var ww=Array.prototype.filter;function Ew(){return Array.from(this.children)}function Tw(e){return function(){return ww.call(this.children,e)}}function Aw(e){return this.selectAll(e==null?Ew:Tw(typeof e=="function"?e:ag(e)))}function Iw(e){typeof e!="function"&&(e=og(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&u.push(c);return new Ue(r,this._parents)}function ug(e){return new Array(e.length)}function bw(){return new Ue(this._enter||this._groups.map(ug),this._parents)}function Io(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Io.prototype={constructor:Io,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Rw(e){return function(){return e}}function Sw(e,t,n,r,i,s){for(var o=0,u,c=t.length,l=s.length;o<l;++o)(u=t[o])?(u.__data__=s[o],r[o]=u):n[o]=new Io(e,s[o]);for(;o<c;++o)(u=t[o])&&(i[o]=u)}function Cw(e,t,n,r,i,s,o){var u,c,l=new Map,h=t.length,d=s.length,p=new Array(h),m;for(u=0;u<h;++u)(c=t[u])&&(p[u]=m=o.call(c,c.__data__,u,t)+"",l.has(m)?i[u]=c:l.set(m,c));for(u=0;u<d;++u)m=o.call(e,s[u],u,s)+"",(c=l.get(m))?(r[u]=c,c.__data__=s[u],l.delete(m)):n[u]=new Io(e,s[u]);for(u=0;u<h;++u)(c=t[u])&&l.get(p[u])===c&&(i[u]=c)}function Pw(e){return e.__data__}function xw(e,t){if(!arguments.length)return Array.from(this,Pw);var n=t?Cw:Sw,r=this._parents,i=this._groups;typeof e!="function"&&(e=Rw(e));for(var s=i.length,o=new Array(s),u=new Array(s),c=new Array(s),l=0;l<s;++l){var h=r[l],d=i[l],p=d.length,m=Vw(e.call(h,h&&h.__data__,l,r)),_=m.length,E=u[l]=new Array(_),v=o[l]=new Array(_),S=c[l]=new Array(p);n(h,d,E,v,S,m,t);for(var C=0,N=0,x,M;C<_;++C)if(x=E[C]){for(C>=N&&(N=C+1);!(M=v[N])&&++N<_;);x._next=M||null}}return o=new Ue(o,r),o._enter=u,o._exit=c,o}function Vw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Nw(){return new Ue(this._exit||this._groups.map(ug),this._parents)}function Dw(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function kw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),u=new Array(i),c=0;c<o;++c)for(var l=n[c],h=r[c],d=l.length,p=u[c]=new Array(d),m,_=0;_<d;++_)(m=l[_]||h[_])&&(p[_]=m);for(;c<i;++c)u[c]=n[c];return new Ue(u,this._parents)}function Ow(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Mw(e){e||(e=Lw);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],u=o.length,c=i[s]=new Array(u),l,h=0;h<u;++h)(l=o[h])&&(c[h]=l);c.sort(t)}return new Ue(i,this._parents).order()}function Lw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Fw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Uw(){return Array.from(this)}function Bw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function $w(){let e=0;for(const t of this)++e;return e}function qw(){return!this.node()}function zw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,u;s<o;++s)(u=i[s])&&e.call(u,u.__data__,s,i);return this}function jw(e){return function(){this.removeAttribute(e)}}function Hw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gw(e,t){return function(){this.setAttribute(e,t)}}function Ww(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Kw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Qw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Xw(e,t){var n=ha(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Hw:jw:typeof t=="function"?n.local?Qw:Kw:n.local?Ww:Gw)(n,t))}function lg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Jw(e){return function(){this.style.removeProperty(e)}}function Yw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Zw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function tE(e,t,n){return arguments.length>1?this.each((t==null?Jw:typeof t=="function"?Zw:Yw)(e,t,n??"")):zr(this.node(),e)}function zr(e,t){return e.style.getPropertyValue(t)||lg(e).getComputedStyle(e,null).getPropertyValue(t)}function eE(e){return function(){delete this[e]}}function nE(e,t){return function(){this[e]=t}}function rE(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function iE(e,t){return arguments.length>1?this.each((t==null?eE:typeof t=="function"?rE:nE)(e,t)):this.node()[e]}function cg(e){return e.trim().split(/^|\s+/)}function Fl(e){return e.classList||new hg(e)}function hg(e){this._node=e,this._names=cg(e.getAttribute("class")||"")}hg.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fg(e,t){for(var n=Fl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function dg(e,t){for(var n=Fl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function sE(e){return function(){fg(this,e)}}function oE(e){return function(){dg(this,e)}}function aE(e,t){return function(){(t.apply(this,arguments)?fg:dg)(this,e)}}function uE(e,t){var n=cg(e+"");if(arguments.length<2){for(var r=Fl(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?aE:t?sE:oE)(n,t))}function lE(){this.textContent=""}function cE(e){return function(){this.textContent=e}}function hE(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fE(e){return arguments.length?this.each(e==null?lE:(typeof e=="function"?hE:cE)(e)):this.node().textContent}function dE(){this.innerHTML=""}function pE(e){return function(){this.innerHTML=e}}function gE(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mE(e){return arguments.length?this.each(e==null?dE:(typeof e=="function"?gE:pE)(e)):this.node().innerHTML}function _E(){this.nextSibling&&this.parentNode.appendChild(this)}function yE(){return this.each(_E)}function vE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wE(){return this.each(vE)}function EE(e){var t=typeof e=="function"?e:ig(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function TE(){return null}function AE(e,t){var n=typeof e=="function"?e:ig(e),r=t==null?TE:typeof t=="function"?t:Ll(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function IE(){var e=this.parentNode;e&&e.removeChild(this)}function bE(){return this.each(IE)}function RE(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function CE(e){return this.select(e?SE:RE)}function PE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function xE(e){return function(t){e.call(this,t,this.__data__)}}function VE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function NE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function DE(e,t,n){return function(){var r=this.__on,i,s=xE(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function kE(e,t,n){var r=VE(e+""),i,s=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var c=0,l=u.length,h;c<l;++c)for(i=0,h=u[c];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(u=t?DE:NE,i=0;i<s;++i)this.each(u(r[i],t,n));return this}function pg(e,t,n){var r=lg(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function OE(e,t){return function(){return pg(this,e,t)}}function ME(e,t){return function(){return pg(this,e,t.apply(this,arguments))}}function LE(e,t){return this.each((typeof t=="function"?ME:OE)(e,t))}function*FE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var UE=[null];function Ue(e,t){this._groups=e,this._parents=t}function gs(){return new Ue([[document.documentElement]],UE)}function BE(){return this}Ue.prototype=gs.prototype={constructor:Ue,select:hw,selectAll:gw,selectChild:vw,selectChildren:Aw,filter:Iw,data:xw,enter:bw,exit:Nw,join:Dw,merge:kw,selection:BE,order:Ow,sort:Mw,call:Fw,nodes:Uw,node:Bw,size:$w,empty:qw,each:zw,attr:Xw,style:tE,property:iE,classed:uE,text:fE,html:mE,raise:yE,lower:wE,append:EE,insert:AE,remove:bE,clone:CE,datum:PE,on:kE,dispatch:LE,[Symbol.iterator]:FE};function Ul(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ms(){}var Xi=.7,bo=1/Xi,Ur="\\s*([+-]?\\d+)\\s*",Ji="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$E=/^#([0-9a-f]{3,8})$/,qE=new RegExp(`^rgb\\(${Ur},${Ur},${Ur}\\)$`),zE=new RegExp(`^rgb\\(${Qe},${Qe},${Qe}\\)$`),jE=new RegExp(`^rgba\\(${Ur},${Ur},${Ur},${Ji}\\)$`),HE=new RegExp(`^rgba\\(${Qe},${Qe},${Qe},${Ji}\\)$`),GE=new RegExp(`^hsl\\(${Ji},${Qe},${Qe}\\)$`),WE=new RegExp(`^hsla\\(${Ji},${Qe},${Qe},${Ji}\\)$`),Xh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ul(ms,Yi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jh,formatHex:Jh,formatHex8:KE,formatHsl:QE,formatRgb:Yh,toString:Yh});function Jh(){return this.rgb().formatHex()}function KE(){return this.rgb().formatHex8()}function QE(){return mg(this).formatHsl()}function Yh(){return this.rgb().formatRgb()}function Yi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$E.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Zh(t):n===3?new pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$s(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$s(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qE.exec(e))?new pe(t[1],t[2],t[3],1):(t=zE.exec(e))?new pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jE.exec(e))?$s(t[1],t[2],t[3],t[4]):(t=HE.exec(e))?$s(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=GE.exec(e))?nf(t[1],t[2]/100,t[3]/100,1):(t=WE.exec(e))?nf(t[1],t[2]/100,t[3]/100,t[4]):Xh.hasOwnProperty(e)?Zh(Xh[e]):e==="transparent"?new pe(NaN,NaN,NaN,0):null}function Zh(e){return new pe(e>>16&255,e>>8&255,e&255,1)}function $s(e,t,n,r){return r<=0&&(e=t=n=NaN),new pe(e,t,n,r)}function XE(e){return e instanceof ms||(e=Yi(e)),e?(e=e.rgb(),new pe(e.r,e.g,e.b,e.opacity)):new pe}function Pu(e,t,n,r){return arguments.length===1?XE(e):new pe(e,t,n,r??1)}function pe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ul(pe,Pu,gg(ms,{brighter(e){return e=e==null?bo:Math.pow(bo,e),new pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xi:Math.pow(Xi,e),new pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pe(hr(this.r),hr(this.g),hr(this.b),Ro(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tf,formatHex:tf,formatHex8:JE,formatRgb:ef,toString:ef}));function tf(){return`#${ar(this.r)}${ar(this.g)}${ar(this.b)}`}function JE(){return`#${ar(this.r)}${ar(this.g)}${ar(this.b)}${ar((isNaN(this.opacity)?1:this.opacity)*255)}`}function ef(){const e=Ro(this.opacity);return`${e===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${e===1?")":`, ${e})`}`}function Ro(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ar(e){return e=hr(e),(e<16?"0":"")+e.toString(16)}function nf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,r)}function mg(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof ms||(e=Yi(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,u=s-i,c=(s+i)/2;return u?(t===s?o=(n-r)/u+(n<r)*6:n===s?o=(r-t)/u+2:o=(t-n)/u+4,u/=c<.5?s+i:2-s-i,o*=60):u=c>0&&c<1?0:o,new Fe(o,u,c,e.opacity)}function YE(e,t,n,r){return arguments.length===1?mg(e):new Fe(e,t,n,r??1)}function Fe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ul(Fe,YE,gg(ms,{brighter(e){return e=e==null?bo:Math.pow(bo,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xi:Math.pow(Xi,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pe(ru(e>=240?e-240:e+120,i,r),ru(e,i,r),ru(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fe(rf(this.h),qs(this.s),qs(this.l),Ro(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ro(this.opacity);return`${e===1?"hsl(":"hsla("}${rf(this.h)}, ${qs(this.s)*100}%, ${qs(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rf(e){return e=(e||0)%360,e<0?e+360:e}function qs(e){return Math.max(0,Math.min(1,e||0))}function ru(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const _g=e=>()=>e;function ZE(e,t){return function(n){return e+n*t}}function tT(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function eT(e){return(e=+e)==1?yg:function(t,n){return n-t?tT(t,n,e):_g(isNaN(t)?n:t)}}function yg(e,t){var n=t-e;return n?ZE(e,n):_g(isNaN(e)?t:e)}const sf=function e(t){var n=eT(t);function r(i,s){var o=n((i=Pu(i)).r,(s=Pu(s)).r),u=n(i.g,s.g),c=n(i.b,s.b),l=yg(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=u(h),i.b=c(h),i.opacity=l(h),i+""}}return r.gamma=e,r}(1);function Pn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var xu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iu=new RegExp(xu.source,"g");function nT(e){return function(){return e}}function rT(e){return function(t){return e(t)+""}}function iT(e,t){var n=xu.lastIndex=iu.lastIndex=0,r,i,s,o=-1,u=[],c=[];for(e=e+"",t=t+"";(r=xu.exec(e))&&(i=iu.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,c.push({i:o,x:Pn(r,i)})),n=iu.lastIndex;return n<t.length&&(s=t.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?c[0]?rT(c[0].x):nT(t):(t=c.length,function(l){for(var h=0,d;h<t;++h)u[(d=c[h]).i]=d.x(l);return u.join("")})}var of=180/Math.PI,Vu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vg(e,t,n,r,i,s){var o,u,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*of,skewX:Math.atan(c)*of,scaleX:o,scaleY:u}}var zs;function sT(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Vu:vg(t.a,t.b,t.c,t.d,t.e,t.f)}function oT(e){return e==null||(zs||(zs=document.createElementNS("http://www.w3.org/2000/svg","g")),zs.setAttribute("transform",e),!(e=zs.transform.baseVal.consolidate()))?Vu:(e=e.matrix,vg(e.a,e.b,e.c,e.d,e.e,e.f))}function wg(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,h,d,p,m,_){if(l!==d||h!==p){var E=m.push("translate(",null,t,null,n);_.push({i:E-4,x:Pn(l,d)},{i:E-2,x:Pn(h,p)})}else(d||p)&&m.push("translate("+d+t+p+n)}function o(l,h,d,p){l!==h?(l-h>180?h+=360:h-l>180&&(l+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Pn(l,h)})):h&&d.push(i(d)+"rotate("+h+r)}function u(l,h,d,p){l!==h?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Pn(l,h)}):h&&d.push(i(d)+"skewX("+h+r)}function c(l,h,d,p,m,_){if(l!==d||h!==p){var E=m.push(i(m)+"scale(",null,",",null,")");_.push({i:E-4,x:Pn(l,d)},{i:E-2,x:Pn(h,p)})}else(d!==1||p!==1)&&m.push(i(m)+"scale("+d+","+p+")")}return function(l,h){var d=[],p=[];return l=e(l),h=e(h),s(l.translateX,l.translateY,h.translateX,h.translateY,d,p),o(l.rotate,h.rotate,d,p),u(l.skewX,h.skewX,d,p),c(l.scaleX,l.scaleY,h.scaleX,h.scaleY,d,p),l=h=null,function(m){for(var _=-1,E=p.length,v;++_<E;)d[(v=p[_]).i]=v.x(m);return d.join("")}}}var aT=wg(sT,"px, ","px)","deg)"),uT=wg(oT,", ",")",")"),jr=0,Pi=0,Si=0,Eg=1e3,So,xi,Co=0,mr=0,fa=0,Zi=typeof performance=="object"&&performance.now?performance:Date,Tg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bl(){return mr||(Tg(lT),mr=Zi.now()+fa)}function lT(){mr=0}function Po(){this._call=this._time=this._next=null}Po.prototype=$l.prototype={constructor:Po,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bl():+n)+(t==null?0:+t),!this._next&&xi!==this&&(xi?xi._next=this:So=this,xi=this),this._call=e,this._time=n,Nu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nu())}};function $l(e,t,n){var r=new Po;return r.restart(e,t,n),r}function cT(){Bl(),++jr;for(var e=So,t;e;)(t=mr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--jr}function af(){mr=(Co=Zi.now())+fa,jr=Pi=0;try{cT()}finally{jr=0,fT(),mr=0}}function hT(){var e=Zi.now(),t=e-Co;t>Eg&&(fa-=t,Co=e)}function fT(){for(var e,t=So,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:So=n);xi=e,Nu(r)}function Nu(e){if(!jr){Pi&&(Pi=clearTimeout(Pi));var t=e-mr;t>24?(e<1/0&&(Pi=setTimeout(af,e-Zi.now()-fa)),Si&&(Si=clearInterval(Si))):(Si||(Co=Zi.now(),Si=setInterval(hT,Eg)),jr=1,Tg(af))}}function uf(e,t,n){var r=new Po;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var dT=Ml("start","end","cancel","interrupt"),pT=[],Ag=0,lf=1,Du=2,io=3,cf=4,ku=5,so=6;function da(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;gT(e,n,{name:t,index:r,group:i,on:dT,tween:pT,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ag})}function ql(e,t){var n=qe(e,t);if(n.state>Ag)throw new Error("too late; already scheduled");return n}function sn(e,t){var n=qe(e,t);if(n.state>io)throw new Error("too late; already running");return n}function qe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function gT(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=$l(s,0,n.time);function s(l){n.state=lf,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var h,d,p,m;if(n.state!==lf)return c();for(h in r)if(m=r[h],m.name===n.name){if(m.state===io)return uf(o);m.state===cf?(m.state=so,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[h]):+h<t&&(m.state=so,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[h])}if(uf(function(){n.state===io&&(n.state=cf,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=Du,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Du){for(n.state=io,i=new Array(p=n.tween.length),h=0,d=-1;h<p;++h)(m=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=m);i.length=d+1}}function u(l){for(var h=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=ku,1),d=-1,p=i.length;++d<p;)i[d].call(e,h);n.state===ku&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=so,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function mT(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Du&&r.state<ku,r.state=so,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function _T(e){return this.each(function(){mT(this,e)})}function yT(e,t){var n,r;return function(){var i=sn(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function vT(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=sn(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=u;break}c===l&&i.push(u)}s.tween=i}}function wT(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=qe(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?yT:vT)(n,e,t))}function zl(e,t,n){var r=e._id;return e.each(function(){var i=sn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return qe(i,r).value[t]}}function Ig(e,t){var n;return(typeof t=="number"?Pn:t instanceof Yi?sf:(n=Yi(t))?(t=n,sf):iT)(e,t)}function ET(e){return function(){this.removeAttribute(e)}}function TT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AT(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function IT(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function bT(e,t,n){var r,i,s;return function(){var o,u=n(this),c;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=u+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,u)))}}function RT(e,t,n){var r,i,s;return function(){var o,u=n(this),c;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=u+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,u)))}}function ST(e,t){var n=ha(e),r=n==="transform"?uT:Ig;return this.attrTween(e,typeof t=="function"?(n.local?RT:bT)(n,r,zl(this,"attr."+e,t)):t==null?(n.local?TT:ET)(n):(n.local?IT:AT)(n,r,t))}function CT(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function PT(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xT(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&PT(e,s)),n}return i._value=t,i}function VT(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&CT(e,s)),n}return i._value=t,i}function NT(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ha(e);return this.tween(n,(r.local?xT:VT)(r,t))}function DT(e,t){return function(){ql(this,e).delay=+t.apply(this,arguments)}}function kT(e,t){return t=+t,function(){ql(this,e).delay=t}}function OT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?DT:kT)(t,e)):qe(this.node(),t).delay}function MT(e,t){return function(){sn(this,e).duration=+t.apply(this,arguments)}}function LT(e,t){return t=+t,function(){sn(this,e).duration=t}}function FT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?MT:LT)(t,e)):qe(this.node(),t).duration}function UT(e,t){if(typeof t!="function")throw new Error;return function(){sn(this,e).ease=t}}function BT(e){var t=this._id;return arguments.length?this.each(UT(t,e)):qe(this.node(),t).ease}function $T(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;sn(this,e).ease=n}}function qT(e){if(typeof e!="function")throw new Error;return this.each($T(this._id,e))}function zT(e){typeof e!="function"&&(e=og(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&u.push(c);return new _n(r,this._parents,this._name,this._id)}function jT(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),u=0;u<s;++u)for(var c=t[u],l=n[u],h=c.length,d=o[u]=new Array(h),p,m=0;m<h;++m)(p=c[m]||l[m])&&(d[m]=p);for(;u<r;++u)o[u]=t[u];return new _n(o,this._parents,this._name,this._id)}function HT(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function GT(e,t,n){var r,i,s=HT(t)?ql:sn;return function(){var o=s(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function WT(e,t){var n=this._id;return arguments.length<2?qe(this.node(),n).on.on(e):this.each(GT(n,e,t))}function KT(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function QT(){return this.on("end.remove",KT(this._id))}function XT(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ll(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var u=r[o],c=u.length,l=s[o]=new Array(c),h,d,p=0;p<c;++p)(h=u[p])&&(d=e.call(h,h.__data__,p,u))&&("__data__"in h&&(d.__data__=h.__data__),l[p]=d,da(l[p],t,n,p,l,qe(h,n)));return new _n(s,this._parents,t,n)}function JT(e){var t=this._name,n=this._id;typeof e!="function"&&(e=sg(e));for(var r=this._groups,i=r.length,s=[],o=[],u=0;u<i;++u)for(var c=r[u],l=c.length,h,d=0;d<l;++d)if(h=c[d]){for(var p=e.call(h,h.__data__,d,c),m,_=qe(h,n),E=0,v=p.length;E<v;++E)(m=p[E])&&da(m,t,n,E,p,_);s.push(p),o.push(h)}return new _n(s,o,t,n)}var YT=gs.prototype.constructor;function ZT(){return new YT(this._groups,this._parents)}function t1(e,t){var n,r,i;return function(){var s=zr(this,e),o=(this.style.removeProperty(e),zr(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function bg(e){return function(){this.style.removeProperty(e)}}function e1(e,t,n){var r,i=n+"",s;return function(){var o=zr(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function n1(e,t,n){var r,i,s;return function(){var o=zr(this,e),u=n(this),c=u+"";return u==null&&(c=u=(this.style.removeProperty(e),zr(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,u))}}function r1(e,t){var n,r,i,s="style."+t,o="end."+s,u;return function(){var c=sn(this,e),l=c.on,h=c.value[s]==null?u||(u=bg(t)):void 0;(l!==n||i!==h)&&(r=(n=l).copy()).on(o,i=h),c.on=r}}function i1(e,t,n){var r=(e+="")=="transform"?aT:Ig;return t==null?this.styleTween(e,t1(e,r)).on("end.style."+e,bg(e)):typeof t=="function"?this.styleTween(e,n1(e,r,zl(this,"style."+e,t))).each(r1(this._id,e)):this.styleTween(e,e1(e,r,t),n).on("end.style."+e,null)}function s1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function o1(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&s1(e,o,n)),r}return s._value=t,s}function a1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,o1(e,t,n??""))}function u1(e){return function(){this.textContent=e}}function l1(e){return function(){var t=e(this);this.textContent=t??""}}function c1(e){return this.tween("text",typeof e=="function"?l1(zl(this,"text",e)):u1(e==null?"":e+""))}function h1(e){return function(t){this.textContent=e.call(this,t)}}function f1(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&h1(i)),t}return r._value=e,r}function d1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,f1(e))}function p1(){for(var e=this._name,t=this._id,n=Rg(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,c,l=0;l<u;++l)if(c=o[l]){var h=qe(c,t);da(c,e,n,l,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new _n(r,this._parents,e,n)}function g1(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var u={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var l=sn(this,r),h=l.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(c)),l.on=t}),i===0&&s()})}var m1=0;function _n(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Rg(){return++m1}var cn=gs.prototype;_n.prototype={constructor:_n,select:XT,selectAll:JT,selectChild:cn.selectChild,selectChildren:cn.selectChildren,filter:zT,merge:jT,selection:ZT,transition:p1,call:cn.call,nodes:cn.nodes,node:cn.node,size:cn.size,empty:cn.empty,each:cn.each,on:WT,attr:ST,attrTween:NT,style:i1,styleTween:a1,text:c1,textTween:d1,remove:QT,tween:wT,delay:OT,duration:FT,ease:BT,easeVarying:qT,end:g1,[Symbol.iterator]:cn[Symbol.iterator]};function _1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var y1={time:null,delay:0,duration:250,ease:_1};function v1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function w1(e){var t,n;e instanceof _n?(t=e._id,e=e._name):(t=Rg(),(n=y1).time=Bl(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,c,l=0;l<u;++l)(c=o[l])&&da(c,e,t,l,o,n||v1(c,t));return new _n(r,this._parents,e,t)}gs.prototype.interrupt=_T;gs.prototype.transition=w1;function E1(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,u,c=0,l=0;for(s=0;s<o;++s)u=n[s],c+=u.x,l+=u.y;for(c=(c/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)u=n[s],u.x-=c,u.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function T1(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Sg(this.cover(t,n),t,n,e)}function Sg(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},u=e._x0,c=e._y0,l=e._x1,h=e._y1,d,p,m,_,E,v,S,C;if(!s)return e._root=o,e;for(;s.length;)if((E=t>=(d=(u+l)/2))?u=d:l=d,(v=n>=(p=(c+h)/2))?c=p:h=p,i=s,!(s=s[S=v<<1|E]))return i[S]=o,e;if(m=+e._x.call(null,s.data),_=+e._y.call(null,s.data),t===m&&n===_)return o.next=s,i?i[S]=o:e._root=o,e;do i=i?i[S]=new Array(4):e._root=new Array(4),(E=t>=(d=(u+l)/2))?u=d:l=d,(v=n>=(p=(c+h)/2))?c=p:h=p;while((S=v<<1|E)===(C=(_>=p)<<1|m>=d));return i[C]=s,i[S]=o,e}function A1(e){var t,n,r=e.length,i,s,o=new Array(r),u=new Array(r),c=1/0,l=1/0,h=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,u[n]=s,i<c&&(c=i),i>h&&(h=i),s<l&&(l=s),s>d&&(d=s));if(c>h||l>d)return this;for(this.cover(c,l).cover(h,d),n=0;n<r;++n)Sg(this,o[n],u[n],e[n]);return this}function I1(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,u=this._root,c,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=u,u=c,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function b1(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function R1(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function oe(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function S1(e,t,n){var r,i=this._x0,s=this._y0,o,u,c,l,h=this._x1,d=this._y1,p=[],m=this._root,_,E;for(m&&p.push(new oe(m,i,s,h,d)),n==null?n=1/0:(i=e-n,s=t-n,h=e+n,d=t+n,n*=n);_=p.pop();)if(!(!(m=_.node)||(o=_.x0)>h||(u=_.y0)>d||(c=_.x1)<i||(l=_.y1)<s))if(m.length){var v=(o+c)/2,S=(u+l)/2;p.push(new oe(m[3],v,S,c,l),new oe(m[2],o,S,v,l),new oe(m[1],v,u,c,S),new oe(m[0],o,u,v,S)),(E=(t>=S)<<1|e>=v)&&(_=p[p.length-1],p[p.length-1]=p[p.length-1-E],p[p.length-1-E]=_)}else{var C=e-+this._x.call(null,m.data),N=t-+this._y.call(null,m.data),x=C*C+N*N;if(x<n){var M=Math.sqrt(n=x);i=e-M,s=t-M,h=e+M,d=t+M,r=m.data}}return r}function C1(e){if(isNaN(h=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,u=this._y0,c=this._x1,l=this._y1,h,d,p,m,_,E,v,S;if(!n)return this;if(n.length)for(;;){if((_=h>=(p=(o+c)/2))?o=p:c=p,(E=d>=(m=(u+l)/2))?u=m:l=m,t=n,!(n=n[v=E<<1|_]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(r=t,S=v)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[v]=s:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[S]=n:this._root=n),this):(this._root=s,this)}function P1(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function x1(){return this._root}function V1(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function N1(e){var t=[],n,r=this._root,i,s,o,u,c;for(r&&t.push(new oe(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,u=n.x1,c=n.y1)&&r.length){var l=(s+u)/2,h=(o+c)/2;(i=r[3])&&t.push(new oe(i,l,h,u,c)),(i=r[2])&&t.push(new oe(i,s,h,l,c)),(i=r[1])&&t.push(new oe(i,l,o,u,h)),(i=r[0])&&t.push(new oe(i,s,o,l,h))}return this}function D1(e){var t=[],n=[],r;for(this._root&&t.push(new oe(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,u=r.y0,c=r.x1,l=r.y1,h=(o+c)/2,d=(u+l)/2;(s=i[0])&&t.push(new oe(s,o,u,h,d)),(s=i[1])&&t.push(new oe(s,h,u,c,d)),(s=i[2])&&t.push(new oe(s,o,d,h,l)),(s=i[3])&&t.push(new oe(s,h,d,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function k1(e){return e[0]}function O1(e){return arguments.length?(this._x=e,this):this._x}function M1(e){return e[1]}function L1(e){return arguments.length?(this._y=e,this):this._y}function Cg(e,t,n){var r=new jl(t??k1,n??M1,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function jl(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function hf(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ae=Cg.prototype=jl.prototype;ae.copy=function(){var e=new jl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=hf(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=hf(r));return e};ae.add=T1;ae.addAll=A1;ae.cover=I1;ae.data=b1;ae.extent=R1;ae.find=S1;ae.remove=C1;ae.removeAll=P1;ae.root=x1;ae.size=V1;ae.visit=N1;ae.visitAfter=D1;ae.x=O1;ae.y=L1;function dn(e){return function(){return e}}function Lr(e){return(e()-.5)*1e-6}function F1(e){return e.index}function ff(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function U1(e){var t=F1,n=d,r,i=dn(30),s,o,u,c,l,h=1;e==null&&(e=[]);function d(v){return 1/Math.min(u[v.source.index],u[v.target.index])}function p(v){for(var S=0,C=e.length;S<h;++S)for(var N=0,x,M,U,I,w,T,R;N<C;++N)x=e[N],M=x.source,U=x.target,I=U.x+U.vx-M.x-M.vx||Lr(l),w=U.y+U.vy-M.y-M.vy||Lr(l),T=Math.sqrt(I*I+w*w),T=(T-s[N])/T*v*r[N],I*=T,w*=T,U.vx-=I*(R=c[N]),U.vy-=w*R,M.vx+=I*(R=1-R),M.vy+=w*R}function m(){if(o){var v,S=o.length,C=e.length,N=new Map(o.map((M,U)=>[t(M,U,o),M])),x;for(v=0,u=new Array(S);v<C;++v)x=e[v],x.index=v,typeof x.source!="object"&&(x.source=ff(N,x.source)),typeof x.target!="object"&&(x.target=ff(N,x.target)),u[x.source.index]=(u[x.source.index]||0)+1,u[x.target.index]=(u[x.target.index]||0)+1;for(v=0,c=new Array(C);v<C;++v)x=e[v],c[v]=u[x.source.index]/(u[x.source.index]+u[x.target.index]);r=new Array(C),_(),s=new Array(C),E()}}function _(){if(o)for(var v=0,S=e.length;v<S;++v)r[v]=+n(e[v],v,e)}function E(){if(o)for(var v=0,S=e.length;v<S;++v)s[v]=+i(e[v],v,e)}return p.initialize=function(v,S){o=v,l=S,m()},p.links=function(v){return arguments.length?(e=v,m(),p):e},p.id=function(v){return arguments.length?(t=v,p):t},p.iterations=function(v){return arguments.length?(h=+v,p):h},p.strength=function(v){return arguments.length?(n=typeof v=="function"?v:dn(+v),_(),p):n},p.distance=function(v){return arguments.length?(i=typeof v=="function"?v:dn(+v),E(),p):i},p}const B1=1664525,$1=1013904223,df=4294967296;function q1(){let e=1;return()=>(e=(B1*e+$1)%df)/df}function z1(e){return e.x}function j1(e){return e.y}var H1=10,G1=Math.PI*(3-Math.sqrt(5));function W1(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,u=new Map,c=$l(d),l=Ml("tick","end"),h=q1();e==null&&(e=[]);function d(){p(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function p(E){var v,S=e.length,C;E===void 0&&(E=1);for(var N=0;N<E;++N)for(n+=(s-n)*i,u.forEach(function(x){x(n)}),v=0;v<S;++v)C=e[v],C.fx==null?C.x+=C.vx*=o:(C.x=C.fx,C.vx=0),C.fy==null?C.y+=C.vy*=o:(C.y=C.fy,C.vy=0);return t}function m(){for(var E=0,v=e.length,S;E<v;++E){if(S=e[E],S.index=E,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var C=H1*Math.sqrt(.5+E),N=E*G1;S.x=C*Math.cos(N),S.y=C*Math.sin(N)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function _(E){return E.initialize&&E.initialize(e,h),E}return m(),t={tick:p,restart:function(){return c.restart(d),t},stop:function(){return c.stop(),t},nodes:function(E){return arguments.length?(e=E,m(),u.forEach(_),t):e},alpha:function(E){return arguments.length?(n=+E,t):n},alphaMin:function(E){return arguments.length?(r=+E,t):r},alphaDecay:function(E){return arguments.length?(i=+E,t):+i},alphaTarget:function(E){return arguments.length?(s=+E,t):s},velocityDecay:function(E){return arguments.length?(o=1-E,t):1-o},randomSource:function(E){return arguments.length?(h=E,u.forEach(_),t):h},force:function(E,v){return arguments.length>1?(v==null?u.delete(E):u.set(E,_(v)),t):u.get(E)},find:function(E,v,S){var C=0,N=e.length,x,M,U,I,w;for(S==null?S=1/0:S*=S,C=0;C<N;++C)I=e[C],x=E-I.x,M=v-I.y,U=x*x+M*M,U<S&&(w=I,S=U);return w},on:function(E,v){return arguments.length>1?(l.on(E,v),t):l.on(E)}}}function K1(){var e,t,n,r,i=dn(-30),s,o=1,u=1/0,c=.81;function l(m){var _,E=e.length,v=Cg(e,z1,j1).visitAfter(d);for(r=m,_=0;_<E;++_)t=e[_],v.visit(p)}function h(){if(e){var m,_=e.length,E;for(s=new Array(_),m=0;m<_;++m)E=e[m],s[E.index]=+i(E,m,e)}}function d(m){var _=0,E,v,S=0,C,N,x;if(m.length){for(C=N=x=0;x<4;++x)(E=m[x])&&(v=Math.abs(E.value))&&(_+=E.value,S+=v,C+=v*E.x,N+=v*E.y);m.x=C/S,m.y=N/S}else{E=m,E.x=E.data.x,E.y=E.data.y;do _+=s[E.data.index];while(E=E.next)}m.value=_}function p(m,_,E,v){if(!m.value)return!0;var S=m.x-t.x,C=m.y-t.y,N=v-_,x=S*S+C*C;if(N*N/c<x)return x<u&&(S===0&&(S=Lr(n),x+=S*S),C===0&&(C=Lr(n),x+=C*C),x<o&&(x=Math.sqrt(o*x)),t.vx+=S*m.value*r/x,t.vy+=C*m.value*r/x),!0;if(m.length||x>=u)return;(m.data!==t||m.next)&&(S===0&&(S=Lr(n),x+=S*S),C===0&&(C=Lr(n),x+=C*C),x<o&&(x=Math.sqrt(o*x)));do m.data!==t&&(N=s[m.data.index]*r/x,t.vx+=S*N,t.vy+=C*N);while(m=m.next)}return l.initialize=function(m,_){e=m,n=_,h()},l.strength=function(m){return arguments.length?(i=typeof m=="function"?m:dn(+m),h(),l):i},l.distanceMin=function(m){return arguments.length?(o=m*m,l):Math.sqrt(o)},l.distanceMax=function(m){return arguments.length?(u=m*m,l):Math.sqrt(u)},l.theta=function(m){return arguments.length?(c=m*m,l):Math.sqrt(c)},l}function Q1(e,t,n){var r,i=dn(.1),s,o;typeof e!="function"&&(e=dn(+e)),t==null&&(t=0),n==null&&(n=0);function u(l){for(var h=0,d=r.length;h<d;++h){var p=r[h],m=p.x-t||1e-6,_=p.y-n||1e-6,E=Math.sqrt(m*m+_*_),v=(o[h]-E)*s[h]*l/E;p.vx+=m*v,p.vy+=_*v}}function c(){if(r){var l,h=r.length;for(s=new Array(h),o=new Array(h),l=0;l<h;++l)o[l]=+e(r[l],l,r),s[l]=isNaN(o[l])?0:+i(r[l],l,r)}}return u.initialize=function(l){r=l,c()},u.strength=function(l){return arguments.length?(i=typeof l=="function"?l:dn(+l),c(),u):i},u.radius=function(l){return arguments.length?(e=typeof l=="function"?l:dn(+l),c(),u):e},u.x=function(l){return arguments.length?(t=+l,u):t},u.y=function(l){return arguments.length?(n=+l,u):n},u}var gt=1e-6,ot=Math.PI,Pe=ot/2,pf=ot/4,De=ot*2,hn=180/ot,Te=ot/180,Et=Math.abs,X1=Math.atan,ts=Math.atan2,Pt=Math.cos,xt=Math.sin,J1=Math.sign||function(e){return e>0?1:e<0?-1:0},Er=Math.sqrt;function Y1(e){return e>1?0:e<-1?ot:Math.acos(e)}function es(e){return e>1?Pe:e<-1?-Pe:Math.asin(e)}function xe(){}function xo(e,t){e&&mf.hasOwnProperty(e.type)&&mf[e.type](e,t)}var gf={Feature:function(e,t){xo(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)xo(n[r].geometry,t)}},mf={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Ou(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ou(n[r],t,0)},Polygon:function(e,t){_f(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_f(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)xo(n[r],t)}};function Ou(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function _f(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Ou(e[n],t,1);t.polygonEnd()}function Nr(e,t){e&&gf.hasOwnProperty(e.type)?gf[e.type](e,t):xo(e,t)}function Mu(e){return[ts(e[1],e[0]),es(e[2])]}function Hr(e){var t=e[0],n=e[1],r=Pt(n);return[r*Pt(t),r*xt(t),xt(n)]}function js(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Vo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function su(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Hs(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Lu(e){var t=Er(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Fu(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Uu(e,t){return Et(e)>ot&&(e-=Math.round(e/De)*De),[e,t]}Uu.invert=Uu;function Z1(e,t,n){return(e%=De)?t||n?Fu(vf(e),wf(t,n)):vf(e):t||n?wf(t,n):Uu}function yf(e){return function(t,n){return t+=e,Et(t)>ot&&(t-=Math.round(t/De)*De),[t,n]}}function vf(e){var t=yf(e);return t.invert=yf(-e),t}function wf(e,t){var n=Pt(e),r=xt(e),i=Pt(t),s=xt(t);function o(u,c){var l=Pt(c),h=Pt(u)*l,d=xt(u)*l,p=xt(c),m=p*n+h*r;return[ts(d*i-m*s,h*n-p*r),es(m*i+d*s)]}return o.invert=function(u,c){var l=Pt(c),h=Pt(u)*l,d=xt(u)*l,p=xt(c),m=p*i-d*s;return[ts(d*i+p*s,h*n+m*r),es(m*n-h*r)]},o}function tA(e,t,n,r,i,s){if(n){var o=Pt(t),u=xt(t),c=r*n;i==null?(i=t+r*De,s=t-c/2):(i=Ef(o,i),s=Ef(o,s),(r>0?i<s:i>s)&&(i+=r*De));for(var l,h=i;r>0?h>s:h<s;h-=c)l=Mu([o,-u*Pt(h),-u*xt(h)]),e.point(l[0],l[1])}}function Ef(e,t){t=Hr(t),t[0]-=e,Lu(t);var n=Y1(-t[1]);return((-t[2]<0?-n:n)+De-gt)%De}function Pg(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:xe,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function oo(e,t){return Et(e[0]-t[0])<gt&&Et(e[1]-t[1])<gt}function Gs(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function xg(e,t,n,r,i){var s=[],o=[],u,c;if(e.forEach(function(_){if(!((E=_.length-1)<=0)){var E,v=_[0],S=_[E],C;if(oo(v,S)){if(!v[2]&&!S[2]){for(i.lineStart(),u=0;u<E;++u)i.point((v=_[u])[0],v[1]);i.lineEnd();return}S[0]+=2*gt}s.push(C=new Gs(v,_,null,!0)),o.push(C.o=new Gs(v,null,C,!1)),s.push(C=new Gs(S,_,null,!1)),o.push(C.o=new Gs(S,null,C,!0))}}),!!s.length){for(o.sort(t),Tf(s),Tf(o),u=0,c=o.length;u<c;++u)o[u].e=n=!n;for(var l=s[0],h,d;;){for(var p=l,m=!0;p.v;)if((p=p.n)===l)return;h=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(u=0,c=h.length;u<c;++u)i.point((d=h[u])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(m)for(h=p.p.z,u=h.length-1;u>=0;--u)i.point((d=h[u])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,h=p.z,m=!m}while(!p.v);i.lineEnd()}}}function Tf(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function ou(e){return Et(e[0])<=ot?e[0]:J1(e[0])*((Et(e[0])+ot)%De-ot)}function eA(e,t){var n=ou(t),r=t[1],i=xt(r),s=[xt(n),-Pt(n),0],o=0,u=0,c=new gr;i===1?r=Pe+gt:i===-1&&(r=-Pe-gt);for(var l=0,h=e.length;l<h;++l)if(p=(d=e[l]).length)for(var d,p,m=d[p-1],_=ou(m),E=m[1]/2+pf,v=xt(E),S=Pt(E),C=0;C<p;++C,_=x,v=U,S=I,m=N){var N=d[C],x=ou(N),M=N[1]/2+pf,U=xt(M),I=Pt(M),w=x-_,T=w>=0?1:-1,R=T*w,b=R>ot,P=v*U;if(c.add(ts(P*T*xt(R),S*I+P*Pt(R))),o+=b?w+T*De:w,b^_>=n^x>=n){var A=Vo(Hr(m),Hr(N));Lu(A);var X=Vo(s,A);Lu(X);var F=(b^w>=0?-1:1)*es(X[2]);(r>F||r===F&&(A[0]||A[1]))&&(u+=b^w>=0?1:-1)}}return(o<-gt||o<gt&&c<-1e-12)^u&1}function Vg(e,t,n,r){return function(i){var s=t(i),o=Pg(),u=t(o),c=!1,l,h,d,p={point:m,lineStart:E,lineEnd:v,polygonStart:function(){p.point=S,p.lineStart=C,p.lineEnd=N,h=[],l=[]},polygonEnd:function(){p.point=m,p.lineStart=E,p.lineEnd=v,h=rg(h);var x=eA(l,r);h.length?(c||(i.polygonStart(),c=!0),xg(h,rA,x,n,i)):x&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),h=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(x,M){e(x,M)&&i.point(x,M)}function _(x,M){s.point(x,M)}function E(){p.point=_,s.lineStart()}function v(){p.point=m,s.lineEnd()}function S(x,M){d.push([x,M]),u.point(x,M)}function C(){u.lineStart(),d=[]}function N(){S(d[0][0],d[0][1]),u.lineEnd();var x=u.clean(),M=o.result(),U,I=M.length,w,T,R;if(d.pop(),l.push(d),d=null,!!I){if(x&1){if(T=M[0],(w=T.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),U=0;U<w;++U)i.point((R=T[U])[0],R[1]);i.lineEnd()}return}I>1&&x&2&&M.push(M.pop().concat(M.shift())),h.push(M.filter(nA))}}return p}}function nA(e){return e.length>1}function rA(e,t){return((e=e.x)[0]<0?e[1]-Pe-gt:Pe-e[1])-((t=t.x)[0]<0?t[1]-Pe-gt:Pe-t[1])}const Af=Vg(function(){return!0},iA,oA,[-ot,-Pe]);function iA(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?ot:-ot,c=Et(s-t);Et(c-ot)<gt?(e.point(t,n=(n+o)/2>0?Pe:-Pe),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&c>=ot&&(Et(t-r)<gt&&(t-=r*gt),Et(s-u)<gt&&(s-=u*gt),n=sA(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function sA(e,t,n,r){var i,s,o=xt(e-n);return Et(o)>gt?X1((xt(t)*(s=Pt(r))*xt(n)-xt(r)*(i=Pt(t))*xt(e))/(i*s*o)):(t+r)/2}function oA(e,t,n,r){var i;if(e==null)i=n*Pe,r.point(-ot,i),r.point(0,i),r.point(ot,i),r.point(ot,0),r.point(ot,-i),r.point(0,-i),r.point(-ot,-i),r.point(-ot,0),r.point(-ot,i);else if(Et(e[0]-t[0])>gt){var s=e[0]<t[0]?ot:-ot;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function aA(e){var t=Pt(e),n=2*Te,r=t>0,i=Et(t)>gt;function s(h,d,p,m){tA(m,e,n,p,h,d)}function o(h,d){return Pt(h)*Pt(d)>t}function u(h){var d,p,m,_,E;return{lineStart:function(){_=m=!1,E=1},point:function(v,S){var C=[v,S],N,x=o(v,S),M=r?x?0:l(v,S):x?l(v+(v<0?ot:-ot),S):0;if(!d&&(_=m=x)&&h.lineStart(),x!==m&&(N=c(d,C),(!N||oo(d,N)||oo(C,N))&&(C[2]=1)),x!==m)E=0,x?(h.lineStart(),N=c(C,d),h.point(N[0],N[1])):(N=c(d,C),h.point(N[0],N[1],2),h.lineEnd()),d=N;else if(i&&d&&r^x){var U;!(M&p)&&(U=c(C,d,!0))&&(E=0,r?(h.lineStart(),h.point(U[0][0],U[0][1]),h.point(U[1][0],U[1][1]),h.lineEnd()):(h.point(U[1][0],U[1][1]),h.lineEnd(),h.lineStart(),h.point(U[0][0],U[0][1],3)))}x&&(!d||!oo(d,C))&&h.point(C[0],C[1]),d=C,m=x,p=M},lineEnd:function(){m&&h.lineEnd(),d=null},clean:function(){return E|(_&&m)<<1}}}function c(h,d,p){var m=Hr(h),_=Hr(d),E=[1,0,0],v=Vo(m,_),S=js(v,v),C=v[0],N=S-C*C;if(!N)return!p&&h;var x=t*S/N,M=-t*C/N,U=Vo(E,v),I=Hs(E,x),w=Hs(v,M);su(I,w);var T=U,R=js(I,T),b=js(T,T),P=R*R-b*(js(I,I)-1);if(!(P<0)){var A=Er(P),X=Hs(T,(-R-A)/b);if(su(X,I),X=Mu(X),!p)return X;var F=h[0],Y=d[0],ct=h[1],_t=d[1],Ot;Y<F&&(Ot=F,F=Y,Y=Ot);var ke=Y-F,ye=Et(ke-ot)<gt,Ft=ye||ke<gt;if(!ye&&_t<ct&&(Ot=ct,ct=_t,_t=Ot),Ft?ye?ct+_t>0^X[1]<(Et(X[0]-F)<gt?ct:_t):ct<=X[1]&&X[1]<=_t:ke>ot^(F<=X[0]&&X[0]<=Y)){var ht=Hs(T,(-R+A)/b);return su(ht,I),[X,Mu(ht)]}}}function l(h,d){var p=r?e:ot-e,m=0;return h<-p?m|=1:h>p&&(m|=2),d<-p?m|=4:d>p&&(m|=8),m}return Vg(o,u,s,r?[0,-e]:[-ot,e-ot])}function uA(e,t,n,r,i,s){var o=e[0],u=e[1],c=t[0],l=t[1],h=0,d=1,p=c-o,m=l-u,_;if(_=n-o,!(!p&&_>0)){if(_/=p,p<0){if(_<h)return;_<d&&(d=_)}else if(p>0){if(_>d)return;_>h&&(h=_)}if(_=i-o,!(!p&&_<0)){if(_/=p,p<0){if(_>d)return;_>h&&(h=_)}else if(p>0){if(_<h)return;_<d&&(d=_)}if(_=r-u,!(!m&&_>0)){if(_/=m,m<0){if(_<h)return;_<d&&(d=_)}else if(m>0){if(_>d)return;_>h&&(h=_)}if(_=s-u,!(!m&&_<0)){if(_/=m,m<0){if(_>d)return;_>h&&(h=_)}else if(m>0){if(_<h)return;_<d&&(d=_)}return h>0&&(e[0]=o+h*p,e[1]=u+h*m),d<1&&(t[0]=o+d*p,t[1]=u+d*m),!0}}}}}var Vi=1e9,Ws=-Vi;function lA(e,t,n,r){function i(l,h){return e<=l&&l<=n&&t<=h&&h<=r}function s(l,h,d,p){var m=0,_=0;if(l==null||(m=o(l,d))!==(_=o(h,d))||c(l,h)<0^d>0)do p.point(m===0||m===3?e:n,m>1?r:t);while((m=(m+d+4)%4)!==_);else p.point(h[0],h[1])}function o(l,h){return Et(l[0]-e)<gt?h>0?0:3:Et(l[0]-n)<gt?h>0?2:1:Et(l[1]-t)<gt?h>0?1:0:h>0?3:2}function u(l,h){return c(l.x,h.x)}function c(l,h){var d=o(l,1),p=o(h,1);return d!==p?d-p:d===0?h[1]-l[1]:d===1?l[0]-h[0]:d===2?l[1]-h[1]:h[0]-l[0]}return function(l){var h=l,d=Pg(),p,m,_,E,v,S,C,N,x,M,U,I={point:w,lineStart:P,lineEnd:A,polygonStart:R,polygonEnd:b};function w(F,Y){i(F,Y)&&h.point(F,Y)}function T(){for(var F=0,Y=0,ct=m.length;Y<ct;++Y)for(var _t=m[Y],Ot=1,ke=_t.length,ye=_t[0],Ft,ht,In=ye[0],ue=ye[1];Ot<ke;++Ot)Ft=In,ht=ue,ye=_t[Ot],In=ye[0],ue=ye[1],ht<=r?ue>r&&(In-Ft)*(r-ht)>(ue-ht)*(e-Ft)&&++F:ue<=r&&(In-Ft)*(r-ht)<(ue-ht)*(e-Ft)&&--F;return F}function R(){h=d,p=[],m=[],U=!0}function b(){var F=T(),Y=U&&F,ct=(p=rg(p)).length;(Y||ct)&&(l.polygonStart(),Y&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),ct&&xg(p,u,F,s,l),l.polygonEnd()),h=l,p=m=_=null}function P(){I.point=X,m&&m.push(_=[]),M=!0,x=!1,C=N=NaN}function A(){p&&(X(E,v),S&&x&&d.rejoin(),p.push(d.result())),I.point=w,x&&h.lineEnd()}function X(F,Y){var ct=i(F,Y);if(m&&_.push([F,Y]),M)E=F,v=Y,S=ct,M=!1,ct&&(h.lineStart(),h.point(F,Y));else if(ct&&x)h.point(F,Y);else{var _t=[C=Math.max(Ws,Math.min(Vi,C)),N=Math.max(Ws,Math.min(Vi,N))],Ot=[F=Math.max(Ws,Math.min(Vi,F)),Y=Math.max(Ws,Math.min(Vi,Y))];uA(_t,Ot,e,t,n,r)?(x||(h.lineStart(),h.point(_t[0],_t[1])),h.point(Ot[0],Ot[1]),ct||h.lineEnd(),U=!1):ct&&(h.lineStart(),h.point(F,Y),U=!1)}C=F,N=Y,x=ct}return I}}const Bu=e=>e;var au=new gr,$u=new gr,Ng,Dg,qu,zu,fn={point:xe,lineStart:xe,lineEnd:xe,polygonStart:function(){fn.lineStart=cA,fn.lineEnd=fA},polygonEnd:function(){fn.lineStart=fn.lineEnd=fn.point=xe,au.add(Et($u)),$u=new gr},result:function(){var e=au/2;return au=new gr,e}};function cA(){fn.point=hA}function hA(e,t){fn.point=kg,Ng=qu=e,Dg=zu=t}function kg(e,t){$u.add(zu*e-qu*t),qu=e,zu=t}function fA(){kg(Ng,Dg)}var Gr=1/0,No=Gr,ns=-Gr,Do=ns,ko={point:dA,lineStart:xe,lineEnd:xe,polygonStart:xe,polygonEnd:xe,result:function(){var e=[[Gr,No],[ns,Do]];return ns=Do=-(No=Gr=1/0),e}};function dA(e,t){e<Gr&&(Gr=e),e>ns&&(ns=e),t<No&&(No=t),t>Do&&(Do=t)}var ju=0,Hu=0,Ni=0,Oo=0,Mo=0,Fr=0,Gu=0,Wu=0,Di=0,Og,Mg,We,Ke,Se={point:_r,lineStart:If,lineEnd:bf,polygonStart:function(){Se.lineStart=mA,Se.lineEnd=_A},polygonEnd:function(){Se.point=_r,Se.lineStart=If,Se.lineEnd=bf},result:function(){var e=Di?[Gu/Di,Wu/Di]:Fr?[Oo/Fr,Mo/Fr]:Ni?[ju/Ni,Hu/Ni]:[NaN,NaN];return ju=Hu=Ni=Oo=Mo=Fr=Gu=Wu=Di=0,e}};function _r(e,t){ju+=e,Hu+=t,++Ni}function If(){Se.point=pA}function pA(e,t){Se.point=gA,_r(We=e,Ke=t)}function gA(e,t){var n=e-We,r=t-Ke,i=Er(n*n+r*r);Oo+=i*(We+e)/2,Mo+=i*(Ke+t)/2,Fr+=i,_r(We=e,Ke=t)}function bf(){Se.point=_r}function mA(){Se.point=yA}function _A(){Lg(Og,Mg)}function yA(e,t){Se.point=Lg,_r(Og=We=e,Mg=Ke=t)}function Lg(e,t){var n=e-We,r=t-Ke,i=Er(n*n+r*r);Oo+=i*(We+e)/2,Mo+=i*(Ke+t)/2,Fr+=i,i=Ke*e-We*t,Gu+=i*(We+e),Wu+=i*(Ke+t),Di+=i*3,_r(We=e,Ke=t)}function Fg(e){this._context=e}Fg.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,De);break}}},result:xe};var Ku=new gr,uu,Ug,Bg,ki,Oi,rs={point:xe,lineStart:function(){rs.point=vA},lineEnd:function(){uu&&$g(Ug,Bg),rs.point=xe},polygonStart:function(){uu=!0},polygonEnd:function(){uu=null},result:function(){var e=+Ku;return Ku=new gr,e}};function vA(e,t){rs.point=$g,Ug=ki=e,Bg=Oi=t}function $g(e,t){ki-=e,Oi-=t,Ku.add(Er(ki*ki+Oi*Oi)),ki=e,Oi=t}let Rf,Lo,Sf,Cf;class Pf{constructor(t){this._append=t==null?qg:wA(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Sf||this._append!==Lo){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Sf=r,Lo=this._append,Cf=this._,this._=i}this._+=Cf;break}}}result(){const t=this._;return this._="",t.length?t:null}}function qg(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wA(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return qg;if(t!==Rf){const n=10**t;Rf=t,Lo=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return Lo}function EA(e,t){let n=3,r=4.5,i,s;function o(u){return u&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Nr(u,i(s))),s.result()}return o.area=function(u){return Nr(u,i(fn)),fn.result()},o.measure=function(u){return Nr(u,i(rs)),rs.result()},o.bounds=function(u){return Nr(u,i(ko)),ko.result()},o.centroid=function(u){return Nr(u,i(Se)),Se.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Bu):(e=u).stream,o):e},o.context=function(u){return arguments.length?(s=u==null?(t=null,new Pf(n)):new Fg(t=u),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(s.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const c=Math.floor(u);if(!(c>=0))throw new RangeError(`invalid digits: ${u}`);n=c}return t===null&&(s=new Pf(n)),o},o.projection(e).digits(n).context(t)}function Hl(e){return function(t){var n=new Qu;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Qu(){}Qu.prototype={constructor:Qu,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Gl(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Nr(n,e.stream(ko)),t(ko.result()),r!=null&&e.clipExtent(r),e}function zg(e,t,n){return Gl(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,c])},n)}function TA(e,t,n){return zg(e,[[0,0],t],n)}function AA(e,t,n){return Gl(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,u=-s*r[0][1];e.scale(150*s).translate([o,u])},n)}function IA(e,t,n){return Gl(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],u=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,u])},n)}var xf=16,bA=Pt(30*Te);function Vf(e,t){return+t?SA(e,t):RA(e)}function RA(e){return Hl({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function SA(e,t){function n(r,i,s,o,u,c,l,h,d,p,m,_,E,v){var S=l-r,C=h-i,N=S*S+C*C;if(N>4*t&&E--){var x=o+p,M=u+m,U=c+_,I=Er(x*x+M*M+U*U),w=es(U/=I),T=Et(Et(U)-1)<gt||Et(s-d)<gt?(s+d)/2:ts(M,x),R=e(T,w),b=R[0],P=R[1],A=b-r,X=P-i,F=C*A-S*X;(F*F/N>t||Et((S*A+C*X)/N-.5)>.3||o*p+u*m+c*_<bA)&&(n(r,i,s,o,u,c,b,P,T,x/=I,M/=I,U,E,v),v.point(b,P),n(b,P,T,x,M,U,l,h,d,p,m,_,E,v))}}return function(r){var i,s,o,u,c,l,h,d,p,m,_,E,v={point:S,lineStart:C,lineEnd:x,polygonStart:function(){r.polygonStart(),v.lineStart=M},polygonEnd:function(){r.polygonEnd(),v.lineStart=C}};function S(w,T){w=e(w,T),r.point(w[0],w[1])}function C(){d=NaN,v.point=N,r.lineStart()}function N(w,T){var R=Hr([w,T]),b=e(w,T);n(d,p,h,m,_,E,d=b[0],p=b[1],h=w,m=R[0],_=R[1],E=R[2],xf,r),r.point(d,p)}function x(){v.point=S,r.lineEnd()}function M(){C(),v.point=U,v.lineEnd=I}function U(w,T){N(i=w,T),s=d,o=p,u=m,c=_,l=E,v.point=N}function I(){n(d,p,h,m,_,E,s,o,i,u,c,l,xf,r),v.lineEnd=x,x()}return v}}var CA=Hl({point:function(e,t){this.stream.point(e*Te,t*Te)}});function PA(e){return Hl({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function xA(e,t,n,r,i){function s(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return s.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},s}function Nf(e,t,n,r,i,s){if(!s)return xA(e,t,n,r,i);var o=Pt(s),u=xt(s),c=o*e,l=u*e,h=o/e,d=u/e,p=(u*n-o*t)/e,m=(u*t+o*n)/e;function _(E,v){return E*=r,v*=i,[c*E-l*v+t,n-l*E-c*v]}return _.invert=function(E,v){return[r*(h*E-d*v+p),i*(m-d*E-h*v)]},_}function VA(e){return NA(function(){return e})()}function NA(e){var t,n=150,r=480,i=250,s=0,o=0,u=0,c=0,l=0,h,d=0,p=1,m=1,_=null,E=Af,v=null,S,C,N,x=Bu,M=.5,U,I,w,T,R;function b(F){return w(F[0]*Te,F[1]*Te)}function P(F){return F=w.invert(F[0],F[1]),F&&[F[0]*hn,F[1]*hn]}b.stream=function(F){return T&&R===F?T:T=CA(PA(h)(E(U(x(R=F)))))},b.preclip=function(F){return arguments.length?(E=F,_=void 0,X()):E},b.postclip=function(F){return arguments.length?(x=F,v=S=C=N=null,X()):x},b.clipAngle=function(F){return arguments.length?(E=+F?aA(_=F*Te):(_=null,Af),X()):_*hn},b.clipExtent=function(F){return arguments.length?(x=F==null?(v=S=C=N=null,Bu):lA(v=+F[0][0],S=+F[0][1],C=+F[1][0],N=+F[1][1]),X()):v==null?null:[[v,S],[C,N]]},b.scale=function(F){return arguments.length?(n=+F,A()):n},b.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],A()):[r,i]},b.center=function(F){return arguments.length?(s=F[0]%360*Te,o=F[1]%360*Te,A()):[s*hn,o*hn]},b.rotate=function(F){return arguments.length?(u=F[0]%360*Te,c=F[1]%360*Te,l=F.length>2?F[2]%360*Te:0,A()):[u*hn,c*hn,l*hn]},b.angle=function(F){return arguments.length?(d=F%360*Te,A()):d*hn},b.reflectX=function(F){return arguments.length?(p=F?-1:1,A()):p<0},b.reflectY=function(F){return arguments.length?(m=F?-1:1,A()):m<0},b.precision=function(F){return arguments.length?(U=Vf(I,M=F*F),X()):Er(M)},b.fitExtent=function(F,Y){return zg(b,F,Y)},b.fitSize=function(F,Y){return TA(b,F,Y)},b.fitWidth=function(F,Y){return AA(b,F,Y)},b.fitHeight=function(F,Y){return IA(b,F,Y)};function A(){var F=Nf(n,0,0,p,m,d).apply(null,t(s,o)),Y=Nf(n,r-F[0],i-F[1],p,m,d);return h=Z1(u,c,l),I=Fu(t,Y),w=Fu(h,I),U=Vf(I,M),X()}function X(){return T=R=null,b}return function(){return t=e.apply(this,arguments),b.invert=t.invert&&P,A()}}function jg(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}jg.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Et(i)>gt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function DA(){return VA(jg).scale(175.295)}function Mi(e,t,n){this.k=e,this.x=t,this.y=n}Mi.prototype={constructor:Mi,scale:function(e){return e===1?this:new Mi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Mi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Mi.prototype;function kA(e){return e}function OA(e){if(e==null)return kA;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(u,c){c||(t=n=0);var l=2,h=u.length,d=new Array(h);for(d[0]=(t+=u[0])*r+s,d[1]=(n+=u[1])*i+o;l<h;)d[l]=u[l],++l;return d}}function MA(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Df(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return kf(e,n)})}:kf(e,t)}function kf(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=LA(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function LA(e,t){var n=OA(e.transform),r=e.arcs;function i(h,d){d.length&&d.pop();for(var p=r[h<0?~h:h],m=0,_=p.length;m<_;++m)d.push(n(p[m],m));h<0&&MA(d,_)}function s(h){return n(h)}function o(h){for(var d=[],p=0,m=h.length;p<m;++p)i(h[p],d);return d.length<2&&d.push(d[0]),d}function u(h){for(var d=o(h);d.length<4;)d.push(d[0]);return d}function c(h){return h.map(u)}function l(h){var d=h.type,p;switch(d){case"GeometryCollection":return{type:d,geometries:h.geometries.map(l)};case"Point":p=s(h.coordinates);break;case"MultiPoint":p=h.coordinates.map(s);break;case"LineString":p=o(h.arcs);break;case"MultiLineString":p=h.arcs.map(o);break;case"Polygon":p=c(h.arcs);break;case"MultiPolygon":p=h.arcs.map(c);break;default:return null}return{type:d,coordinates:p}}return l(t)}const FA=()=>{};var Of={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},UA=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],u=e[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Gg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,u=o?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,h=s>>2,d=(s&3)<<4|u>>4;let p=(u&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(n[h],n[d],n[p],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Hg(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):UA(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],u=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||u==null||l==null||d==null)throw new BA;const p=s<<2|u>>4;if(r.push(p),l!==64){const m=u<<4&240|l>>2;if(r.push(m),d!==64){const _=l<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class BA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $A=function(e){const t=Hg(e);return Gg.encodeByteArray(t,!0)},Fo=function(e){return $A(e).replace(/\./g,"")},qA=function(e){try{return Gg.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=()=>zA().__FIREBASE_DEFAULTS__,HA=()=>{if(typeof process>"u"||typeof Of>"u")return;const e=Of.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},GA=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&qA(e[1]);return t&&JSON.parse(t)},Wl=()=>{try{return FA()||jA()||HA()||GA()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},WA=e=>{var t,n;return(n=(t=Wl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},KA=e=>{const t=WA(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Wg=()=>{var e;return(e=Wl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function XA(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fo(JSON.stringify(n)),Fo(JSON.stringify(o)),""].join(".")}const qi={};function YA(){const e={prod:[],emulator:[]};for(const t of Object.keys(qi))qi[t]?e.emulator.push(t):e.prod.push(t);return e}function ZA(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Mf=!1;function tI(e,t){if(typeof window>"u"||typeof document>"u"||!Kl(window.location.host)||qi[e]===t||qi[e]||Mf)return;qi[e]=t;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=YA().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function u(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function l(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Mf=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=ZA(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),E=n("learnmore"),v=document.getElementById(E)||document.createElement("a"),S=n("preprendIcon"),C=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const N=p.element;u(N),h(v,E);const x=l();c(C,S),N.append(C,_,v,x),document.body.appendChild(N)}s?(_.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nI(){var e;const t=(e=Wl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rI(){return!nI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iI(){try{return typeof indexedDB=="object"}catch{return!1}}function sI(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="FirebaseError";class ii extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=oI,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kg.prototype.create)}}class Kg{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?aI(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new ii(i,u,r)}}function aI(e,t){return e.replace(uI,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const uI=/\{\$([^}]+)}/g;function Uo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Lf(s)&&Lf(o)){if(!Uo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lf(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(e){return e&&e._delegate?e._delegate:e}class is{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new QA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hI(t))try{this.getOrInitializeService({instanceIdentifier:sr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=sr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=sr){return this.instances.has(t)}getOptions(t=sr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cI(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=sr){return this.component?this.component.multipleInstances?t:sr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cI(e){return e===sr?void 0:e}function hI(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new lI(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(st||(st={}));const dI={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},pI=st.INFO,gI={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},mI=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=gI[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Qg{constructor(t){this.name=t,this._logLevel=pI,this._logHandler=mI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in st))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?dI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...t),this._logHandler(this,st.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...t),this._logHandler(this,st.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,st.INFO,...t),this._logHandler(this,st.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,st.WARN,...t),this._logHandler(this,st.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...t),this._logHandler(this,st.ERROR,...t)}}const _I=(e,t)=>t.some(n=>e instanceof n);let Ff,Uf;function yI(){return Ff||(Ff=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vI(){return Uf||(Uf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xg=new WeakMap,Xu=new WeakMap,Jg=new WeakMap,lu=new WeakMap,Ql=new WeakMap;function wI(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Nn(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Xg.set(n,e)}).catch(()=>{}),Ql.set(t,e),t}function EI(e){if(Xu.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Xu.set(e,t)}let Ju={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Xu.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Jg.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function TI(e){Ju=e(Ju)}function AI(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(cu(this),t,...n);return Jg.set(r,t.sort?t.sort():[t]),Nn(r)}:vI().includes(e)?function(...t){return e.apply(cu(this),t),Nn(Xg.get(this))}:function(...t){return Nn(e.apply(cu(this),t))}}function II(e){return typeof e=="function"?AI(e):(e instanceof IDBTransaction&&EI(e),_I(e,yI())?new Proxy(e,Ju):e)}function Nn(e){if(e instanceof IDBRequest)return wI(e);if(lu.has(e))return lu.get(e);const t=II(e);return t!==e&&(lu.set(e,t),Ql.set(t,e)),t}const cu=e=>Ql.get(e);function bI(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),u=Nn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Nn(o.result),c.oldVersion,c.newVersion,Nn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),u}const RI=["get","getKey","getAll","getAllKeys","count"],SI=["put","add","delete","clear"],hu=new Map;function Bf(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(hu.get(t))return hu.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=SI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RI.includes(n)))return;const s=async function(o,...u){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(await Promise.all([l[n](...u),i&&c.done]))[0]};return hu.set(t,s),s}TI(e=>({...e,get:(t,n,r)=>Bf(t,n)||e.get(t,n,r),has:(t,n)=>!!Bf(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PI(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Yu="@firebase/app",$f="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn=new Qg("@firebase/app"),xI="@firebase/app-compat",VI="@firebase/analytics-compat",NI="@firebase/analytics",DI="@firebase/app-check-compat",kI="@firebase/app-check",OI="@firebase/auth",MI="@firebase/auth-compat",LI="@firebase/database",FI="@firebase/data-connect",UI="@firebase/database-compat",BI="@firebase/functions",$I="@firebase/functions-compat",qI="@firebase/installations",zI="@firebase/installations-compat",jI="@firebase/messaging",HI="@firebase/messaging-compat",GI="@firebase/performance",WI="@firebase/performance-compat",KI="@firebase/remote-config",QI="@firebase/remote-config-compat",XI="@firebase/storage",JI="@firebase/storage-compat",YI="@firebase/firestore",ZI="@firebase/ai",tb="@firebase/firestore-compat",eb="firebase",nb="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu="[DEFAULT]",rb={[Yu]:"fire-core",[xI]:"fire-core-compat",[NI]:"fire-analytics",[VI]:"fire-analytics-compat",[kI]:"fire-app-check",[DI]:"fire-app-check-compat",[OI]:"fire-auth",[MI]:"fire-auth-compat",[LI]:"fire-rtdb",[FI]:"fire-data-connect",[UI]:"fire-rtdb-compat",[BI]:"fire-fn",[$I]:"fire-fn-compat",[qI]:"fire-iid",[zI]:"fire-iid-compat",[jI]:"fire-fcm",[HI]:"fire-fcm-compat",[GI]:"fire-perf",[WI]:"fire-perf-compat",[KI]:"fire-rc",[QI]:"fire-rc-compat",[XI]:"fire-gcs",[JI]:"fire-gcs-compat",[YI]:"fire-fst",[tb]:"fire-fst-compat",[ZI]:"fire-vertex","fire-js":"fire-js",[eb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Map,ib=new Map,tl=new Map;function qf(e,t){try{e.container.addComponent(t)}catch(n){vn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $o(e){const t=e.name;if(tl.has(t))return vn.debug(`There were multiple attempts to register component ${t}.`),!1;tl.set(t,e);for(const n of Bo.values())qf(n,e);for(const n of ib.values())qf(n,e);return!0}function sb(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ob(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dn=new Kg("app","Firebase",ab);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=nb;function Yg(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Zu,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Dn.create("bad-app-name",{appName:String(i)});if(n||(n=Wg()),!n)throw Dn.create("no-options");const s=Bo.get(i);if(s){if(Uo(n,s.options)&&Uo(r,s.config))return s;throw Dn.create("duplicate-app",{appName:i})}const o=new fI(i);for(const c of tl.values())o.addComponent(c);const u=new ub(n,r,o);return Bo.set(i,u),u}function cb(e=Zu){const t=Bo.get(e);if(!t&&e===Zu&&Wg())return Yg();if(!t)throw Dn.create("no-app",{appName:e});return t}function Br(e,t,n){var r;let i=(r=rb[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${t}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vn.warn(u.join(" "));return}$o(new is(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="firebase-heartbeat-database",fb=1,ss="firebase-heartbeat-store";let fu=null;function Zg(){return fu||(fu=bI(hb,fb,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ss)}catch(n){console.warn(n)}}}}).catch(e=>{throw Dn.create("idb-open",{originalErrorMessage:e.message})})),fu}async function db(e){try{const n=(await Zg()).transaction(ss),r=await n.objectStore(ss).get(tm(e));return await n.done,r}catch(t){if(t instanceof ii)vn.warn(t.message);else{const n=Dn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});vn.warn(n.message)}}}async function zf(e,t){try{const r=(await Zg()).transaction(ss,"readwrite");await r.objectStore(ss).put(t,tm(e)),await r.done}catch(n){if(n instanceof ii)vn.warn(n.message);else{const r=Dn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vn.warn(r.message)}}}function tm(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=1024,gb=30;class mb{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jf();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>gb){const o=vb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jf(),{heartbeatsToSend:r,unsentEntries:i}=_b(this._heartbeatsCache.heartbeats),s=Fo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return vn.warn(n),""}}}function jf(){return new Date().toISOString().substring(0,10)}function _b(e,t=pb){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hf(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hf(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iI()?sI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await db(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zf(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zf(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Hf(e){return Fo(JSON.stringify({version:2,heartbeats:e})).length}function vb(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(e){$o(new is("platform-logger",t=>new CI(t),"PRIVATE")),$o(new is("heartbeat",t=>new mb(t),"PRIVATE")),Br(Yu,$f,e),Br(Yu,$f,"esm2017"),Br("fire-js","")}wb("");var Eb="firebase",Tb="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(Eb,Tb,"app");var Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kn,em;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,w){function T(){}T.prototype=w.prototype,I.D=w.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(R,b,P){for(var A=Array(arguments.length-2),X=2;X<arguments.length;X++)A[X-2]=arguments[X];return w.prototype[b].apply(R,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,T){T||(T=0);var R=Array(16);if(typeof w=="string")for(var b=0;16>b;++b)R[b]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(b=0;16>b;++b)R[b]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=I.g[0],T=I.g[1],b=I.g[2];var P=I.g[3],A=w+(P^T&(b^P))+R[0]+3614090360&4294967295;w=T+(A<<7&4294967295|A>>>25),A=P+(b^w&(T^b))+R[1]+3905402710&4294967295,P=w+(A<<12&4294967295|A>>>20),A=b+(T^P&(w^T))+R[2]+606105819&4294967295,b=P+(A<<17&4294967295|A>>>15),A=T+(w^b&(P^w))+R[3]+3250441966&4294967295,T=b+(A<<22&4294967295|A>>>10),A=w+(P^T&(b^P))+R[4]+4118548399&4294967295,w=T+(A<<7&4294967295|A>>>25),A=P+(b^w&(T^b))+R[5]+1200080426&4294967295,P=w+(A<<12&4294967295|A>>>20),A=b+(T^P&(w^T))+R[6]+2821735955&4294967295,b=P+(A<<17&4294967295|A>>>15),A=T+(w^b&(P^w))+R[7]+4249261313&4294967295,T=b+(A<<22&4294967295|A>>>10),A=w+(P^T&(b^P))+R[8]+1770035416&4294967295,w=T+(A<<7&4294967295|A>>>25),A=P+(b^w&(T^b))+R[9]+2336552879&4294967295,P=w+(A<<12&4294967295|A>>>20),A=b+(T^P&(w^T))+R[10]+4294925233&4294967295,b=P+(A<<17&4294967295|A>>>15),A=T+(w^b&(P^w))+R[11]+2304563134&4294967295,T=b+(A<<22&4294967295|A>>>10),A=w+(P^T&(b^P))+R[12]+1804603682&4294967295,w=T+(A<<7&4294967295|A>>>25),A=P+(b^w&(T^b))+R[13]+4254626195&4294967295,P=w+(A<<12&4294967295|A>>>20),A=b+(T^P&(w^T))+R[14]+2792965006&4294967295,b=P+(A<<17&4294967295|A>>>15),A=T+(w^b&(P^w))+R[15]+1236535329&4294967295,T=b+(A<<22&4294967295|A>>>10),A=w+(b^P&(T^b))+R[1]+4129170786&4294967295,w=T+(A<<5&4294967295|A>>>27),A=P+(T^b&(w^T))+R[6]+3225465664&4294967295,P=w+(A<<9&4294967295|A>>>23),A=b+(w^T&(P^w))+R[11]+643717713&4294967295,b=P+(A<<14&4294967295|A>>>18),A=T+(P^w&(b^P))+R[0]+3921069994&4294967295,T=b+(A<<20&4294967295|A>>>12),A=w+(b^P&(T^b))+R[5]+3593408605&4294967295,w=T+(A<<5&4294967295|A>>>27),A=P+(T^b&(w^T))+R[10]+38016083&4294967295,P=w+(A<<9&4294967295|A>>>23),A=b+(w^T&(P^w))+R[15]+3634488961&4294967295,b=P+(A<<14&4294967295|A>>>18),A=T+(P^w&(b^P))+R[4]+3889429448&4294967295,T=b+(A<<20&4294967295|A>>>12),A=w+(b^P&(T^b))+R[9]+568446438&4294967295,w=T+(A<<5&4294967295|A>>>27),A=P+(T^b&(w^T))+R[14]+3275163606&4294967295,P=w+(A<<9&4294967295|A>>>23),A=b+(w^T&(P^w))+R[3]+4107603335&4294967295,b=P+(A<<14&4294967295|A>>>18),A=T+(P^w&(b^P))+R[8]+1163531501&4294967295,T=b+(A<<20&4294967295|A>>>12),A=w+(b^P&(T^b))+R[13]+2850285829&4294967295,w=T+(A<<5&4294967295|A>>>27),A=P+(T^b&(w^T))+R[2]+4243563512&4294967295,P=w+(A<<9&4294967295|A>>>23),A=b+(w^T&(P^w))+R[7]+1735328473&4294967295,b=P+(A<<14&4294967295|A>>>18),A=T+(P^w&(b^P))+R[12]+2368359562&4294967295,T=b+(A<<20&4294967295|A>>>12),A=w+(T^b^P)+R[5]+4294588738&4294967295,w=T+(A<<4&4294967295|A>>>28),A=P+(w^T^b)+R[8]+2272392833&4294967295,P=w+(A<<11&4294967295|A>>>21),A=b+(P^w^T)+R[11]+1839030562&4294967295,b=P+(A<<16&4294967295|A>>>16),A=T+(b^P^w)+R[14]+4259657740&4294967295,T=b+(A<<23&4294967295|A>>>9),A=w+(T^b^P)+R[1]+2763975236&4294967295,w=T+(A<<4&4294967295|A>>>28),A=P+(w^T^b)+R[4]+1272893353&4294967295,P=w+(A<<11&4294967295|A>>>21),A=b+(P^w^T)+R[7]+4139469664&4294967295,b=P+(A<<16&4294967295|A>>>16),A=T+(b^P^w)+R[10]+3200236656&4294967295,T=b+(A<<23&4294967295|A>>>9),A=w+(T^b^P)+R[13]+681279174&4294967295,w=T+(A<<4&4294967295|A>>>28),A=P+(w^T^b)+R[0]+3936430074&4294967295,P=w+(A<<11&4294967295|A>>>21),A=b+(P^w^T)+R[3]+3572445317&4294967295,b=P+(A<<16&4294967295|A>>>16),A=T+(b^P^w)+R[6]+76029189&4294967295,T=b+(A<<23&4294967295|A>>>9),A=w+(T^b^P)+R[9]+3654602809&4294967295,w=T+(A<<4&4294967295|A>>>28),A=P+(w^T^b)+R[12]+3873151461&4294967295,P=w+(A<<11&4294967295|A>>>21),A=b+(P^w^T)+R[15]+530742520&4294967295,b=P+(A<<16&4294967295|A>>>16),A=T+(b^P^w)+R[2]+3299628645&4294967295,T=b+(A<<23&4294967295|A>>>9),A=w+(b^(T|~P))+R[0]+4096336452&4294967295,w=T+(A<<6&4294967295|A>>>26),A=P+(T^(w|~b))+R[7]+1126891415&4294967295,P=w+(A<<10&4294967295|A>>>22),A=b+(w^(P|~T))+R[14]+2878612391&4294967295,b=P+(A<<15&4294967295|A>>>17),A=T+(P^(b|~w))+R[5]+4237533241&4294967295,T=b+(A<<21&4294967295|A>>>11),A=w+(b^(T|~P))+R[12]+1700485571&4294967295,w=T+(A<<6&4294967295|A>>>26),A=P+(T^(w|~b))+R[3]+2399980690&4294967295,P=w+(A<<10&4294967295|A>>>22),A=b+(w^(P|~T))+R[10]+4293915773&4294967295,b=P+(A<<15&4294967295|A>>>17),A=T+(P^(b|~w))+R[1]+2240044497&4294967295,T=b+(A<<21&4294967295|A>>>11),A=w+(b^(T|~P))+R[8]+1873313359&4294967295,w=T+(A<<6&4294967295|A>>>26),A=P+(T^(w|~b))+R[15]+4264355552&4294967295,P=w+(A<<10&4294967295|A>>>22),A=b+(w^(P|~T))+R[6]+2734768916&4294967295,b=P+(A<<15&4294967295|A>>>17),A=T+(P^(b|~w))+R[13]+1309151649&4294967295,T=b+(A<<21&4294967295|A>>>11),A=w+(b^(T|~P))+R[4]+4149444226&4294967295,w=T+(A<<6&4294967295|A>>>26),A=P+(T^(w|~b))+R[11]+3174756917&4294967295,P=w+(A<<10&4294967295|A>>>22),A=b+(w^(P|~T))+R[2]+718787259&4294967295,b=P+(A<<15&4294967295|A>>>17),A=T+(P^(b|~w))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(b+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var T=w-this.blockSize,R=this.B,b=this.h,P=0;P<w;){if(b==0)for(;P<=T;)i(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(R[b++]=I.charCodeAt(P++),b==this.blockSize){i(this,R),b=0;break}}else for(;P<w;)if(R[b++]=I[P++],b==this.blockSize){i(this,R),b=0;break}}this.h=b,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var T=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=T&255,T/=256;for(this.u(I),I=Array(16),w=T=0;4>w;++w)for(var R=0;32>R;R+=8)I[T++]=this.g[w]>>>R&255;return I};function s(I,w){var T=u;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=w(I)}function o(I,w){this.h=w;for(var T=[],R=!0,b=I.length-1;0<=b;b--){var P=I[b]|0;R&&P==w||(T[b]=P,R=!1)}this.g=T}var u={};function c(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return v(l(-I));for(var w=[],T=1,R=0;I>=T;R++)w[R]=I/T|0,T*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return v(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=l(Math.pow(w,8)),R=d,b=0;b<I.length;b+=8){var P=Math.min(8,I.length-b),A=parseInt(I.substring(b,b+P),w);8>P?(P=l(Math.pow(w,P)),R=R.j(P).add(l(A))):(R=R.j(T),R=R.add(l(A)))}return R}var d=c(0),p=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(E(this))return-v(this).m();for(var I=0,w=1,T=0;T<this.g.length;T++){var R=this.i(T);I+=(0<=R?R:4294967296+R)*w,w*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(E(this))return"-"+v(this).toString(I);for(var w=l(Math.pow(I,6)),T=this,R="";;){var b=x(T,w).g;T=S(T,b.j(w));var P=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=b,_(T))return P+R;for(;6>P.length;)P="0"+P;R=P+R}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function E(I){return I.h==-1}e.l=function(I){return I=S(this,I),E(I)?-1:_(I)?0:1};function v(I){for(var w=I.g.length,T=[],R=0;R<w;R++)T[R]=~I.g[R];return new o(T,~I.h).add(p)}e.abs=function(){return E(this)?v(this):this},e.add=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],R=0,b=0;b<=w;b++){var P=R+(this.i(b)&65535)+(I.i(b)&65535),A=(P>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);R=A>>>16,P&=65535,A&=65535,T[b]=A<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function S(I,w){return I.add(v(w))}e.j=function(I){if(_(this)||_(I))return d;if(E(this))return E(I)?v(this).j(v(I)):v(v(this).j(I));if(E(I))return v(this.j(v(I)));if(0>this.l(m)&&0>I.l(m))return l(this.m()*I.m());for(var w=this.g.length+I.g.length,T=[],R=0;R<2*w;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var b=0;b<I.g.length;b++){var P=this.i(R)>>>16,A=this.i(R)&65535,X=I.i(b)>>>16,F=I.i(b)&65535;T[2*R+2*b]+=A*F,C(T,2*R+2*b),T[2*R+2*b+1]+=P*F,C(T,2*R+2*b+1),T[2*R+2*b+1]+=A*X,C(T,2*R+2*b+1),T[2*R+2*b+2]+=P*X,C(T,2*R+2*b+2)}for(R=0;R<w;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=w;R<2*w;R++)T[R]=0;return new o(T,0)};function C(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function N(I,w){this.g=I,this.h=w}function x(I,w){if(_(w))throw Error("division by zero");if(_(I))return new N(d,d);if(E(I))return w=x(v(I),w),new N(v(w.g),v(w.h));if(E(w))return w=x(I,v(w)),new N(v(w.g),w.h);if(30<I.g.length){if(E(I)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var T=p,R=w;0>=R.l(I);)T=M(T),R=M(R);var b=U(T,1),P=U(R,1);for(R=U(R,2),T=U(T,2);!_(R);){var A=P.add(R);0>=A.l(I)&&(b=b.add(T),P=A),R=U(R,1),T=U(T,1)}return w=S(I,b.j(w)),new N(b,w)}for(b=d;0<=I.l(w);){for(T=Math.max(1,Math.floor(I.m()/w.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),P=l(T),A=P.j(w);E(A)||0<A.l(I);)T-=R,P=l(T),A=P.j(w);_(P)&&(P=p),b=b.add(P),I=S(I,A)}return new N(b,I)}e.A=function(I){return x(this,I).h},e.and=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],R=0;R<w;R++)T[R]=this.i(R)&I.i(R);return new o(T,this.h&I.h)},e.or=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],R=0;R<w;R++)T[R]=this.i(R)|I.i(R);return new o(T,this.h|I.h)},e.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],R=0;R<w;R++)T[R]=this.i(R)^I.i(R);return new o(T,this.h^I.h)};function M(I){for(var w=I.g.length+1,T=[],R=0;R<w;R++)T[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(T,I.h)}function U(I,w){var T=w>>5;w%=32;for(var R=I.g.length-T,b=[],P=0;P<R;P++)b[P]=0<w?I.i(P+T)>>>w|I.i(P+T+1)<<32-w:I.i(P+T);return new o(b,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,em=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,kn=o}).apply(typeof Gf<"u"?Gf:typeof self<"u"?self:typeof window<"u"?window:{});var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nm,Li,rm,ao,el,im,sm,om;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,g){return a==Array.prototype||a==Object.prototype||(a[f]=g.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ks=="object"&&Ks];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(a,f){if(f)t:{var g=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var V=a[y];if(!(V in g))break t;g=g[V]}a=a[a.length-1],y=g[a],f=f(y),f!=y&&f!=null&&t(g,a,{configurable:!0,writable:!0,value:f})}}function s(a,f){a instanceof String&&(a+="");var g=0,y=!1,V={next:function(){if(!y&&g<a.length){var k=g++;return{value:f(k,a[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(a){return a||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,g){return a.call.apply(a.bind,arguments)}function d(a,f,g){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,y),a.apply(f,V)}}return function(){return a.apply(f,arguments)}}function p(a,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function _(a,f){function g(){}g.prototype=f.prototype,a.aa=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Qb=function(y,V,k){for(var $=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)$[pt-2]=arguments[pt];return f.prototype[V].apply(y,$)}}function E(a){const f=a.length;if(0<f){const g=Array(f);for(let y=0;y<f;y++)g[y]=a[y];return g}return[]}function v(a,f){for(let g=1;g<arguments.length;g++){const y=arguments[g];if(c(y)){const V=a.length||0,k=y.length||0;a.length=V+k;for(let $=0;$<k;$++)a[V+$]=y[$]}else a.push(y)}}class S{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function C(a){return/^[\s\xa0]*$/.test(a)}function N(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function x(a){return x[" "](a),a}x[" "]=function(){};var M=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function U(a,f,g){for(const y in a)f.call(g,a[y],y,a)}function I(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function w(a){const f={};for(const g in a)f[g]=a[g];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(a,f){let g,y;for(let V=1;V<arguments.length;V++){y=arguments[V];for(g in y)a[g]=y[g];for(let k=0;k<T.length;k++)g=T[k],Object.prototype.hasOwnProperty.call(y,g)&&(a[g]=y[g])}}function b(a){var f=1;a=a.split(":");const g=[];for(;0<f&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function P(a){u.setTimeout(()=>{throw a},0)}function A(){var a=Ot;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class X{constructor(){this.h=this.g=null}add(f,g){const y=F.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}}var F=new S(()=>new Y,a=>a.reset());class Y{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,_t=!1,Ot=new X,ke=()=>{const a=u.Promise.resolve(void 0);ct=()=>{a.then(ye)}};var ye=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(g){P(g)}var f=F;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}_t=!1};function Ft(){this.s=this.s,this.C=this.C}Ft.prototype.s=!1,Ft.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ft.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var In=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};u.addEventListener("test",g,f),u.removeEventListener("test",g,f)}catch{}return a}();function ue(a,f){if(ht.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var g=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(M){t:{try{x(f.nodeName);var V=!0;break t}catch{}V=!1}V||(f=null)}}else g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:xa[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ue.aa.h.call(this)}}_(ue,ht);var xa={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ir="closure_listenable_"+(1e6*Math.random()|0),Va=0;function Is(a,f,g,y,V){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=V,this.key=++Va,this.da=this.fa=!1}function br(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Qn(a){this.src=a,this.g={},this.h=0}Qn.prototype.add=function(a,f,g,y,V){var k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);var $=hi(a,f,y,V);return-1<$?(f=a[$],g||(f.fa=!1)):(f=new Is(f,this.src,k,!!y,V),f.fa=g,a.push(f)),f};function ci(a,f){var g=f.type;if(g in a.g){var y=a.g[g],V=Array.prototype.indexOf.call(y,f,void 0),k;(k=0<=V)&&Array.prototype.splice.call(y,V,1),k&&(br(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function hi(a,f,g,y){for(var V=0;V<a.length;++V){var k=a[V];if(!k.da&&k.listener==f&&k.capture==!!g&&k.ha==y)return V}return-1}var fi="closure_lm_"+(1e6*Math.random()|0),H={};function z(a,f,g,y,V){if(Array.isArray(f)){for(var k=0;k<f.length;k++)z(a,f[k],g,y,V);return null}return g=le(g),a&&a[Ir]?a.K(f,g,l(y)?!!y.capture:!1,V):K(a,f,g,!1,y,V)}function K(a,f,g,y,V,k){if(!f)throw Error("Invalid event type");var $=l(V)?!!V.capture:!!V,pt=Qt(a);if(pt||(a[fi]=pt=new Qn(a)),g=pt.add(f,g,y,$,k),g.proxy)return g;if(y=nt(),g.proxy=y,y.src=a,y.listener=g,a.addEventListener)In||(V=$),V===void 0&&(V=!1),a.addEventListener(f.toString(),y,V);else if(a.attachEvent)a.attachEvent(Kt(f.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function nt(){function a(g){return f.call(a.src,a.listener,g)}const f=Ut;return a}function yt(a,f,g,y,V){if(Array.isArray(f))for(var k=0;k<f.length;k++)yt(a,f[k],g,y,V);else y=l(y)?!!y.capture:!!y,g=le(g),a&&a[Ir]?(a=a.i,f=String(f).toString(),f in a.g&&(k=a.g[f],g=hi(k,g,y,V),-1<g&&(br(k[g]),Array.prototype.splice.call(k,g,1),k.length==0&&(delete a.g[f],a.h--)))):a&&(a=Qt(a))&&(f=a.g[f.toString()],a=-1,f&&(a=hi(f,g,y,V)),(g=-1<a?f[a]:null)&&St(g))}function St(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Ir])ci(f.i,a);else{var g=a.type,y=a.proxy;f.removeEventListener?f.removeEventListener(g,y,a.capture):f.detachEvent?f.detachEvent(Kt(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=Qt(f))?(ci(g,a),g.h==0&&(g.src=null,f[fi]=null)):br(a)}}}function Kt(a){return a in H?H[a]:H[a]="on"+a}function Ut(a,f){if(a.da)a=!0;else{f=new ue(f,this);var g=a.listener,y=a.ha||a.src;a.fa&&St(a),a=g.call(y,f)}return a}function Qt(a){return a=a[fi],a instanceof Qn?a:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(a){return typeof a=="function"?a:(a[ve]||(a[ve]=function(f){return a.handleEvent(f)}),a[ve])}function ft(){Ft.call(this),this.i=new Qn(this),this.M=this,this.F=null}_(ft,Ft),ft.prototype[Ir]=!0,ft.prototype.removeEventListener=function(a,f,g,y){yt(this,a,f,g,y)};function bt(a,f){var g,y=a.F;if(y)for(g=[];y;y=y.F)g.push(y);if(a=a.M,y=f.type||f,typeof f=="string")f=new ht(f,a);else if(f instanceof ht)f.target=f.target||a;else{var V=f;f=new ht(y,a),R(f,V)}if(V=!0,g)for(var k=g.length-1;0<=k;k--){var $=f.g=g[k];V=ce($,y,!0,f)&&V}if($=f.g=a,V=ce($,y,!0,f)&&V,V=ce($,y,!1,f)&&V,g)for(k=0;k<g.length;k++)$=f.g=g[k],V=ce($,y,!1,f)&&V}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var g=a.g[f],y=0;y<g.length;y++)br(g[y]);delete a.g[f],a.h--}}this.F=null},ft.prototype.K=function(a,f,g,y){return this.i.add(String(a),f,!1,g,y)},ft.prototype.L=function(a,f,g,y){return this.i.add(String(a),f,!0,g,y)};function ce(a,f,g,y){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,k=0;k<f.length;++k){var $=f[k];if($&&!$.da&&$.capture==g){var pt=$.listener,jt=$.ha||$.src;$.fa&&ci(a.i,$),V=pt.call(jt,y)!==!1&&V}}return V&&!y.defaultPrevented}function Xn(a,f,g){if(typeof a=="function")g&&(a=p(a,g));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:u.setTimeout(a,f||0)}function Oe(a){a.g=Xn(()=>{a.g=null,a.i&&(a.i=!1,Oe(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class on extends Ft{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(a){Ft.call(this),this.h=a,this.g={}}_(Xt,Ft);var Jn=[];function Yn(a){U(a.g,function(f,g){this.g.hasOwnProperty(g)&&St(f)},a),a.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),Yn(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Na=u.JSON.stringify,U_=u.JSON.parse,B_=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Da(){}Da.prototype.h=null;function kc(a){return a.h||(a.h=a.i())}function Oc(){}var di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ka(){ht.call(this,"d")}_(ka,ht);function Oa(){ht.call(this,"c")}_(Oa,ht);var Zn={},Mc=null;function bs(){return Mc=Mc||new ft}Zn.La="serverreachability";function Lc(a){ht.call(this,Zn.La,a)}_(Lc,ht);function pi(a){const f=bs();bt(f,new Lc(f))}Zn.STAT_EVENT="statevent";function Fc(a,f){ht.call(this,Zn.STAT_EVENT,a),this.stat=f}_(Fc,ht);function re(a){const f=bs();bt(f,new Fc(f,a))}Zn.Ma="timingevent";function Uc(a,f){ht.call(this,Zn.Ma,a),this.size=f}_(Uc,ht);function gi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},f)}function mi(){this.g=!0}mi.prototype.xa=function(){this.g=!1};function $_(a,f,g,y,V,k){a.info(function(){if(a.g)if(k)for(var $="",pt=k.split("&"),jt=0;jt<pt.length;jt++){var at=pt[jt].split("=");if(1<at.length){var Jt=at[0];at=at[1];var Yt=Jt.split("_");$=2<=Yt.length&&Yt[1]=="type"?$+(Jt+"="+at+"&"):$+(Jt+"=redacted&")}}else $=null;else $=k;return"XMLHTTP REQ ("+y+") [attempt "+V+"]: "+f+`
`+g+`
`+$})}function q_(a,f,g,y,V,k,$){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+V+"]: "+f+`
`+g+`
`+k+" "+$})}function Rr(a,f,g,y){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+j_(a,g)+(y?" "+y:"")})}function z_(a,f){a.info(function(){return"TIMEOUT: "+f})}mi.prototype.info=function(){};function j_(a,f){if(!a.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(a=0;a<g.length;a++)if(Array.isArray(g[a])){var y=g[a];if(!(2>y.length)){var V=y[1];if(Array.isArray(V)&&!(1>V.length)){var k=V[0];if(k!="noop"&&k!="stop"&&k!="close")for(var $=1;$<V.length;$++)V[$]=""}}}}return Na(g)}catch{return f}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ma;function Ss(){}_(Ss,Da),Ss.prototype.g=function(){return new XMLHttpRequest},Ss.prototype.i=function(){return{}},Ma=new Ss;function bn(a,f,g,y){this.j=a,this.i=f,this.l=g,this.R=y||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $c}function $c(){this.i=null,this.g="",this.h=!1}var qc={},La={};function Fa(a,f,g){a.L=1,a.v=Vs(an(f)),a.m=g,a.P=!0,zc(a,null)}function zc(a,f){a.F=Date.now(),Cs(a),a.A=an(a.v);var g=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),rh(g.i,"t",y),a.C=0,g=a.j.J,a.h=new $c,a.g=Eh(a.j,g?f:null,!a.m),0<a.O&&(a.M=new on(p(a.Y,a,a.g),a.O)),f=a.U,g=a.g,y=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Jn[0]=V.toString()),V=Jn);for(var k=0;k<V.length;k++){var $=z(g,V[k],y||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),pi(),$_(a.i,a.u,a.A,a.l,a.R,a.m)}bn.prototype.ca=function(a){a=a.target;const f=this.M;f&&un(a)==3?f.j():this.Y(a)},bn.prototype.Y=function(a){try{if(a==this.g)t:{const Yt=un(this.g);var f=this.g.Ba();const Pr=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||ch(this.g)))){this.J||Yt!=4||f==7||(f==8||0>=Pr?pi(3):pi(2)),Ua(this);var g=this.g.Z();this.X=g;e:if(jc(this)){var y=ch(this.g);a="";var V=y.length,k=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tr(this),_i(this);var $="";break e}this.h.i=new u.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,a+=this.h.i.decode(y[f],{stream:!(k&&f==V-1)});y.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,q_(this.i,this.u,this.A,this.l,this.R,Yt,g),this.o){if(this.T&&!this.K){e:{if(this.g){var pt,jt=this.g;if((pt=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(pt)){var at=pt;break e}}at=null}if(g=at)Rr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ba(this,g);else{this.o=!1,this.s=3,re(12),tr(this),_i(this);break t}}if(this.P){g=!0;let Me;for(;!this.J&&this.C<$.length;)if(Me=H_(this,$),Me==La){Yt==4&&(this.s=4,re(14),g=!1),Rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Me==qc){this.s=4,re(15),Rr(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else Rr(this.i,this.l,Me,null),Ba(this,Me);if(jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||$.length!=0||this.h.h||(this.s=1,re(16),g=!1),this.o=this.o&&g,!g)Rr(this.i,this.l,$,"[Invalid Chunked Response]"),tr(this),_i(this);else if(0<$.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Ga(Jt),Jt.M=!0,re(11))}}else Rr(this.i,this.l,$,null),Ba(this,$);Yt==4&&tr(this),this.o&&!this.J&&(Yt==4?_h(this.j,this):(this.o=!1,Cs(this)))}else uy(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),tr(this),_i(this)}}}catch{}finally{}};function jc(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function H_(a,f){var g=a.C,y=f.indexOf(`
`,g);return y==-1?La:(g=Number(f.substring(g,y)),isNaN(g)?qc:(y+=1,y+g>f.length?La:(f=f.slice(y,y+g),a.C=y+g,f)))}bn.prototype.cancel=function(){this.J=!0,tr(this)};function Cs(a){a.S=Date.now()+a.I,Hc(a,a.I)}function Hc(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=gi(p(a.ba,a),f)}function Ua(a){a.B&&(u.clearTimeout(a.B),a.B=null)}bn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(z_(this.i,this.A),this.L!=2&&(pi(),re(17)),tr(this),this.s=2,_i(this)):Hc(this,this.S-a)};function _i(a){a.j.G==0||a.J||_h(a.j,a)}function tr(a){Ua(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,Yn(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function Ba(a,f){try{var g=a.j;if(g.G!=0&&(g.g==a||$a(g.h,a))){if(!a.K&&$a(g.h,a)&&g.G==3){try{var y=g.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var V=y;if(V[0]==0){t:if(!g.u){if(g.g)if(g.g.F+3e3<a.F)Ls(g),Os(g);else break t;Ha(g),re(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=gi(p(g.Za,g),6e3));if(1>=Kc(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else nr(g,11)}else if((a.K||g.g==a)&&Ls(g),!C(f))for(V=g.Da.g.parse(f),f=0;f<V.length;f++){let at=V[f];if(g.T=at[0],at=at[1],g.G==2)if(at[0]=="c"){g.K=at[1],g.ia=at[2];const Jt=at[3];Jt!=null&&(g.la=Jt,g.j.info("VER="+g.la));const Yt=at[4];Yt!=null&&(g.Aa=Yt,g.j.info("SVER="+g.Aa));const Pr=at[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(y=1.5*Pr,g.L=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const Me=a.g;if(Me){const Us=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Us){var k=y.h;k.g||Us.indexOf("spdy")==-1&&Us.indexOf("quic")==-1&&Us.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(qa(k,k.h),k.h=null))}if(y.D){const Wa=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(y.ya=Wa,vt(y.I,y.D,Wa))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-a.F,g.j.info("Handshake RTT: "+g.R+"ms")),y=g;var $=a;if(y.qa=wh(y,y.J?y.ia:null,y.W),$.K){Qc(y.h,$);var pt=$,jt=y.L;jt&&(pt.I=jt),pt.B&&(Ua(pt),Cs(pt)),y.g=$}else gh(y);0<g.i.length&&Ms(g)}else at[0]!="stop"&&at[0]!="close"||nr(g,7);else g.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?nr(g,7):ja(g):at[0]!="noop"&&g.l&&g.l.ta(at),g.v=0)}}pi(4)}catch{}}var G_=class{constructor(a,f){this.g=a,this.map=f}};function Gc(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wc(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Kc(a){return a.h?1:a.g?a.g.size:0}function $a(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function qa(a,f){a.g?a.g.add(f):a.h=f}function Qc(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}Gc.prototype.cancel=function(){if(this.i=Xc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Xc(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.D);return f}return E(a.i)}function W_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var f=[],g=a.length,y=0;y<g;y++)f.push(a[y]);return f}f=[],g=0;for(y in a)f[g++]=a[y];return f}function K_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var f=[];a=a.length;for(var g=0;g<a;g++)f.push(g);return f}f=[],g=0;for(const y in a)f[g++]=y;return f}}}function Jc(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var g=K_(a),y=W_(a),V=y.length,k=0;k<V;k++)f.call(void 0,y[k],g&&g[k],a)}var Yc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Q_(a,f){if(a){a=a.split("&");for(var g=0;g<a.length;g++){var y=a[g].indexOf("="),V=null;if(0<=y){var k=a[g].substring(0,y);V=a[g].substring(y+1)}else k=a[g];f(k,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function er(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof er){this.h=a.h,Ps(this,a.j),this.o=a.o,this.g=a.g,xs(this,a.s),this.l=a.l;var f=a.i,g=new wi;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Zc(this,g),this.m=a.m}else a&&(f=String(a).match(Yc))?(this.h=!1,Ps(this,f[1]||"",!0),this.o=yi(f[2]||""),this.g=yi(f[3]||"",!0),xs(this,f[4]),this.l=yi(f[5]||"",!0),Zc(this,f[6]||"",!0),this.m=yi(f[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}er.prototype.toString=function(){var a=[],f=this.j;f&&a.push(vi(f,th,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(vi(f,th,!0),"@"),a.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&a.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(vi(g,g.charAt(0)=="/"?Y_:J_,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",vi(g,ty)),a.join("")};function an(a){return new er(a)}function Ps(a,f,g){a.j=g?yi(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function xs(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function Zc(a,f,g){f instanceof wi?(a.i=f,ey(a.i,a.h)):(g||(f=vi(f,Z_)),a.i=new wi(f,a.h))}function vt(a,f,g){a.i.set(f,g)}function Vs(a){return vt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function yi(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function vi(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,X_),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function X_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var th=/[#\/\?@]/g,J_=/[#\?:]/g,Y_=/[#\?]/g,Z_=/[#\?@]/g,ty=/#/g;function wi(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Rn(a){a.g||(a.g=new Map,a.h=0,a.i&&Q_(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}e=wi.prototype,e.add=function(a,f){Rn(this),this.i=null,a=Sr(this,a);var g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function eh(a,f){Rn(a),f=Sr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function nh(a,f){return Rn(a),f=Sr(a,f),a.g.has(f)}e.forEach=function(a,f){Rn(this),this.g.forEach(function(g,y){g.forEach(function(V){a.call(f,V,y,this)},this)},this)},e.na=function(){Rn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let y=0;y<f.length;y++){const V=a[y];for(let k=0;k<V.length;k++)g.push(f[y])}return g},e.V=function(a){Rn(this);let f=[];if(typeof a=="string")nh(this,a)&&(f=f.concat(this.g.get(Sr(this,a))));else{a=Array.from(this.g.values());for(let g=0;g<a.length;g++)f=f.concat(a[g])}return f},e.set=function(a,f){return Rn(this),this.i=null,a=Sr(this,a),nh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},e.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function rh(a,f,g){eh(a,f),0<g.length&&(a.i=null,a.g.set(Sr(a,f),E(g)),a.h+=g.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var y=f[g];const k=encodeURIComponent(String(y)),$=this.V(y);for(y=0;y<$.length;y++){var V=k;$[y]!==""&&(V+="="+encodeURIComponent(String($[y]))),a.push(V)}}return this.i=a.join("&")};function Sr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function ey(a,f){f&&!a.j&&(Rn(a),a.i=null,a.g.forEach(function(g,y){var V=y.toLowerCase();y!=V&&(eh(this,y),rh(this,V,g))},a)),a.j=f}function ny(a,f){const g=new mi;if(u.Image){const y=new Image;y.onload=m(Sn,g,"TestLoadImage: loaded",!0,f,y),y.onerror=m(Sn,g,"TestLoadImage: error",!1,f,y),y.onabort=m(Sn,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=m(Sn,g,"TestLoadImage: timeout",!1,f,y),u.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else f(!1)}function ry(a,f){const g=new mi,y=new AbortController,V=setTimeout(()=>{y.abort(),Sn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:y.signal}).then(k=>{clearTimeout(V),k.ok?Sn(g,"TestPingServer: ok",!0,f):Sn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Sn(g,"TestPingServer: error",!1,f)})}function Sn(a,f,g,y,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),y(g)}catch{}}function iy(){this.g=new B_}function sy(a,f,g){const y=g||"";try{Jc(a,function(V,k){let $=V;l(V)&&($=Na(V)),f.push(y+k+"="+encodeURIComponent($))})}catch(V){throw f.push(y+"type="+encodeURIComponent("_badmap")),V}}function Ns(a){this.l=a.Ub||null,this.j=a.eb||!1}_(Ns,Da),Ns.prototype.g=function(){return new Ds(this.l,this.j)},Ns.prototype.i=function(a){return function(){return a}}({});function Ds(a,f){ft.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Ds,ft),e=Ds.prototype,e.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,Ti(this)},e.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||u).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},e.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ih(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ih(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}e.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Ei(this):Ti(this),this.readyState==3&&ih(this)}},e.Ra=function(a){this.g&&(this.response=this.responseText=a,Ei(this))},e.Qa=function(a){this.g&&(this.response=a,Ei(this))},e.ga=function(){this.g&&Ei(this)};function Ei(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ti(a)}e.setRequestHeader=function(a,f){this.u.append(a,f)},e.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function Ti(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function sh(a){let f="";return U(a,function(g,y){f+=y,f+=":",f+=g,f+=`\r
`}),f}function za(a,f,g){t:{for(y in g){var y=!1;break t}y=!0}y||(g=sh(g),typeof a=="string"?g!=null&&encodeURIComponent(String(g)):vt(a,f,g))}function Rt(a){ft.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Rt,ft);var oy=/^https?$/i,ay=["POST","PUT"];e=Rt.prototype,e.Ha=function(a){this.J=a},e.ea=function(a,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ma.g(),this.v=this.o?kc(this.o):kc(Ma),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(k){oh(this,k);return}if(a=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var V in y)g.set(V,y[V]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const k of y.keys())g.set(k,y.get(k));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(k=>k.toLowerCase()=="content-type"),V=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ay,f,void 0))||y||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,$]of g)this.g.setRequestHeader(k,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lh(this),this.u=!0,this.g.send(a),this.u=!1}catch(k){oh(this,k)}};function oh(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,ah(a),ks(a)}function ah(a){a.A||(a.A=!0,bt(a,"complete"),bt(a,"error"))}e.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,bt(this,"complete"),bt(this,"abort"),ks(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?uh(this):this.bb())},e.bb=function(){uh(this)};function uh(a){if(a.h&&typeof o<"u"&&(!a.v[1]||un(a)!=4||a.Z()!=2)){if(a.u&&un(a)==4)Xn(a.Ea,0,a);else if(bt(a,"readystatechange"),un(a)==4){a.h=!1;try{const $=a.Z();t:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var g;if(!(g=f)){var y;if(y=$===0){var V=String(a.D).match(Yc)[1]||null;!V&&u.self&&u.self.location&&(V=u.self.location.protocol.slice(0,-1)),y=!oy.test(V?V.toLowerCase():"")}g=y}if(g)bt(a,"complete"),bt(a,"success");else{a.m=6;try{var k=2<un(a)?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.Z()+"]",ah(a)}}finally{ks(a)}}}}function ks(a,f){if(a.g){lh(a);const g=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||bt(a,"ready");try{g.onreadystatechange=y}catch{}}}function lh(a){a.I&&(u.clearTimeout(a.I),a.I=null)}e.isActive=function(){return!!this.g};function un(a){return a.g?a.g.readyState:0}e.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),U_(f)}};function ch(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function uy(a){const f={};a=(a.g&&2<=un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(C(a[y]))continue;var g=b(a[y]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const k=f[V]||[];f[V]=k,k.push(g)}I(f,function(y){return y.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function hh(a){this.Aa=0,this.i=[],this.j=new mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ai("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ai("baseRetryDelayMs",5e3,a),this.cb=Ai("retryDelaySeedMs",1e4,a),this.Wa=Ai("forwardChannelMaxRetries",2,a),this.wa=Ai("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Gc(a&&a.concurrentRequestLimit),this.Da=new iy,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=hh.prototype,e.la=8,e.G=1,e.connect=function(a,f,g,y){re(0),this.W=a,this.H=f||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=wh(this,null,this.W),Ms(this)};function ja(a){if(fh(a),a.G==3){var f=a.U++,g=an(a.I);if(vt(g,"SID",a.K),vt(g,"RID",f),vt(g,"TYPE","terminate"),Ii(a,g),f=new bn(a,a.j,f),f.L=2,f.v=Vs(an(g)),g=!1,u.navigator&&u.navigator.sendBeacon)try{g=u.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&u.Image&&(new Image().src=f.v,g=!0),g||(f.g=Eh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Cs(f)}vh(a)}function Os(a){a.g&&(Ga(a),a.g.cancel(),a.g=null)}function fh(a){Os(a),a.u&&(u.clearTimeout(a.u),a.u=null),Ls(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Ms(a){if(!Wc(a.h)&&!a.s){a.s=!0;var f=a.Ga;ct||ke(),_t||(ct(),_t=!0),Ot.add(f,a),a.B=0}}function ly(a,f){return Kc(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=gi(p(a.Ga,a,f),yh(a,a.B)),a.B++,!0)}e.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new bn(this,this.j,a);let k=this.o;if(this.S&&(k?(k=w(k),R(k,this.S)):k=this.S),this.m!==null||this.O||(V.H=k,k=null),this.P)t:{for(var f=0,g=0;g<this.i.length;g++){e:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break e}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=g;break t}if(f===4096||g===this.i.length-1){f=g+1;break t}}f=1e3}else f=1e3;f=ph(this,V,f),g=an(this.I),vt(g,"RID",a),vt(g,"CVER",22),this.D&&vt(g,"X-HTTP-Session-Id",this.D),Ii(this,g),k&&(this.O?f="headers="+encodeURIComponent(String(sh(k)))+"&"+f:this.m&&za(g,this.m,k)),qa(this.h,V),this.Ua&&vt(g,"TYPE","init"),this.P?(vt(g,"$req",f),vt(g,"SID","null"),V.T=!0,Fa(V,g,null)):Fa(V,g,f),this.G=2}}else this.G==3&&(a?dh(this,a):this.i.length==0||Wc(this.h)||dh(this))};function dh(a,f){var g;f?g=f.l:g=a.U++;const y=an(a.I);vt(y,"SID",a.K),vt(y,"RID",g),vt(y,"AID",a.T),Ii(a,y),a.m&&a.o&&za(y,a.m,a.o),g=new bn(a,a.j,g,a.B+1),a.m===null&&(g.H=a.o),f&&(a.i=f.D.concat(a.i)),f=ph(a,g,1e3),g.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),qa(a.h,g),Fa(g,y,f)}function Ii(a,f){a.H&&U(a.H,function(g,y){vt(f,y,g)}),a.l&&Jc({},function(g,y){vt(f,y,g)})}function ph(a,f,g){g=Math.min(a.i.length,g);var y=a.l?p(a.l.Na,a.l,a):null;t:{var V=a.i;let k=-1;for(;;){const $=["count="+g];k==-1?0<g?(k=V[0].g,$.push("ofs="+k)):k=0:$.push("ofs="+k);let pt=!0;for(let jt=0;jt<g;jt++){let at=V[jt].g;const Jt=V[jt].map;if(at-=k,0>at)k=Math.max(0,V[jt].g-100),pt=!1;else try{sy(Jt,$,"req"+at+"_")}catch{y&&y(Jt)}}if(pt){y=$.join("&");break t}}}return a=a.i.splice(0,g),f.D=a,y}function gh(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;ct||ke(),_t||(ct(),_t=!0),Ot.add(f,a),a.v=0}}function Ha(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=gi(p(a.Fa,a),yh(a,a.v)),a.v++,!0)}e.Fa=function(){if(this.u=null,mh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=gi(p(this.ab,this),a)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),Os(this),mh(this))};function Ga(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function mh(a){a.g=new bn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=an(a.qa);vt(f,"RID","rpc"),vt(f,"SID",a.K),vt(f,"AID",a.T),vt(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&vt(f,"TO",a.ja),vt(f,"TYPE","xmlhttp"),Ii(a,f),a.m&&a.o&&za(f,a.m,a.o),a.L&&(a.g.I=a.L);var g=a.g;a=a.ia,g.L=1,g.v=Vs(an(f)),g.m=null,g.P=!0,zc(g,a)}e.Za=function(){this.C!=null&&(this.C=null,Os(this),Ha(this),re(19))};function Ls(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function _h(a,f){var g=null;if(a.g==f){Ls(a),Ga(a),a.g=null;var y=2}else if($a(a.h,f))g=f.D,Qc(a.h,f),y=1;else return;if(a.G!=0){if(f.o)if(y==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var V=a.B;y=bs(),bt(y,new Uc(y,g)),Ms(a)}else gh(a);else if(V=f.s,V==3||V==0&&0<f.X||!(y==1&&ly(a,f)||y==2&&Ha(a)))switch(g&&0<g.length&&(f=a.h,f.i=f.i.concat(g)),V){case 1:nr(a,5);break;case 4:nr(a,10);break;case 3:nr(a,6);break;default:nr(a,2)}}}function yh(a,f){let g=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(g*=2),g*f}function nr(a,f){if(a.j.info("Error code "+f),f==2){var g=p(a.fb,a),y=a.Xa;const V=!y;y=new er(y||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ps(y,"https"),Vs(y),V?ny(y.toString(),g):ry(y.toString(),g)}else re(2);a.G=0,a.l&&a.l.sa(f),vh(a),fh(a)}e.fb=function(a){a?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function vh(a){if(a.G=0,a.ka=[],a.l){const f=Xc(a.h);(f.length!=0||a.i.length!=0)&&(v(a.ka,f),v(a.ka,a.i),a.h.i.length=0,E(a.i),a.i.length=0),a.l.ra()}}function wh(a,f,g){var y=g instanceof er?an(g):new er(g);if(y.g!="")f&&(y.g=f+"."+y.g),xs(y,y.s);else{var V=u.location;y=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var k=new er(null);y&&Ps(k,y),f&&(k.g=f),V&&xs(k,V),g&&(k.l=g),y=k}return g=a.D,f=a.ya,g&&f&&vt(y,g,f),vt(y,"VER",a.la),Ii(a,y),y}function Eh(a,f,g){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new Rt(new Ns({eb:g})):new Rt(a.pa),f.Ha(a.J),f}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Th(){}e=Th.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Fs(){}Fs.prototype.g=function(a,f){return new we(a,f)};function we(a,f){ft.call(this),this.g=new hh(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!C(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!C(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Cr(this)}_(we,ft),we.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){ja(this.g)},we.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.u&&(g={},g.__data__=Na(a),a=g);f.i.push(new G_(f.Ya++,a)),f.G==3&&Ms(f)},we.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,we.aa.N.call(this)};function Ah(a){ka.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const g in f){a=g;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}_(Ah,ka);function Ih(){Oa.call(this),this.status=1}_(Ih,Oa);function Cr(a){this.g=a}_(Cr,Th),Cr.prototype.ua=function(){bt(this.g,"a")},Cr.prototype.ta=function(a){bt(this.g,new Ah(a))},Cr.prototype.sa=function(a){bt(this.g,new Ih)},Cr.prototype.ra=function(){bt(this.g,"b")},Fs.prototype.createWebChannel=Fs.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,om=function(){return new Fs},sm=function(){return bs()},im=Zn,el={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,ao=Rs,Bc.COMPLETE="complete",rm=Bc,Oc.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Li=Oc,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,nm=Rt}).apply(typeof Ks<"u"?Ks:typeof self<"u"?self:typeof window<"u"?window:{});const Wf="@firebase/firestore",Kf="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}te.UNAUTHENTICATED=new te(null),te.GOOGLE_CREDENTIALS=new te("google-credentials-uid"),te.FIRST_PARTY=new te("first-party-uid"),te.MOCK_USER=new te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let si="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new Qg("@firebase/firestore");function Dr(){return yr.logLevel}function j(e,...t){if(yr.logLevel<=st.DEBUG){const n=t.map(Xl);yr.debug(`Firestore (${si}): ${e}`,...n)}}function wn(e,...t){if(yr.logLevel<=st.ERROR){const n=t.map(Xl);yr.error(`Firestore (${si}): ${e}`,...n)}}function Fn(e,...t){if(yr.logLevel<=st.WARN){const n=t.map(Xl);yr.warn(`Firestore (${si}): ${e}`,...n)}}function Xl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,am(e,r,n)}function am(e,t,n){let r=`FIRESTORE (${si}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wn(r),new Error(r)}function lt(e,t,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,e||am(t,i,r)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends ii{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ab{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(te.UNAUTHENTICATED))}shutdown(){}}class Ib{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bb{constructor(t){this.t=t,this.currentUser=te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){lt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gn,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string",31837,{l:r}),new um(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return lt(t===null||typeof t=="string",2055,{h:t}),new te(t)}}class Rb{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sb{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Rb(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qf{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cb{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ob(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){lt(this.o===void 0,3512);const r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qf(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Qf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Pb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%62))}return r}}function tt(e,t){return e<t?-1:e>t?1:0}function nl(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return tt(r,i);{const s=lm(),o=xb(s.encode(Xf(e,n)),s.encode(Xf(t,n)));return o!==0?o:tt(r,i)}}n+=r>65535?2:1}return tt(e.length,t.length)}function Xf(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function xb(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return tt(e[n],t[n]);return tt(e.length,t.length)}function Wr(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="__name__";class je{constructor(t,n,r){n===void 0?n=0:n>t.length&&W(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&W(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return je.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof je?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=je.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return tt(t.length,n.length)}static compareSegments(t,n){const r=je.isNumericId(t),i=je.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?je.extractNumericId(t).compare(je.extractNumericId(n)):nl(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return kn.fromString(t.substring(4,t.length-2))}}class mt extends je{construct(t,n,r){return new mt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new q(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const Vb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends je{construct(t,n,r){return new Gt(t,n,r)}static isValidIdentifier(t){return Vb.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jf}static keyField(){return new Gt([Jf])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const u=t[i];if(u==="\\"){if(i+1===t.length)throw new q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gt(n)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(mt.fromString(t))}static fromName(t){return new G(mt.fromString(t).popFirst(5))}static empty(){return new G(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&mt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return mt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new mt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(e,t,n){if(!n)throw new q(O.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Nb(e,t,n,r){if(t===!0&&r===!0)throw new q(O.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Yf(e){if(!G.isDocumentKey(e))throw new q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Zf(e){if(G.isDocumentKey(e))throw new q(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function hm(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function pa(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":W(12329,{type:typeof e})}function En(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pa(e);throw new q(O.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Db(e,t){if(t<=0)throw new q(O.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(e,t){const n={typeString:e};return t&&(n.value=t),n}function _s(e,t){if(!hm(e))throw new q(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new q(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=-62135596800,ed=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(t){return wt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*ed);return new wt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<td)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ed}_compareTo(t){return this.seconds===t.seconds?tt(this.nanoseconds,t.nanoseconds):tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(_s(t,wt._jsonSchema))return new wt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-td;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:kt("string",wt._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{static fromTimestamp(t){return new Q(t)}static min(){return new Q(new wt(0,0))}static max(){return new Q(new wt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=-1;function kb(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new Un(i,G.empty(),t)}function Ob(e){return new Un(e.readTime,e.key,os)}class Un{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Un(Q.min(),G.empty(),os)}static max(){return new Un(Q.max(),G.empty(),os)}}function Mb(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:tt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==Lb)throw e;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):L.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):L.reject(n)}static resolve(t){return new L((n,r)=>{n(t)})}static reject(t){return new L((n,r)=>{r(t)})}static waitFor(t){return new L((n,r)=>{let i=0,s=0,o=!1;t.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(t){let n=L.resolve(!1);for(const r of t)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new L((r,i)=>{const s=t.length,o=new Array(s);let u=0;for(let c=0;c<s;c++){const l=c;n(t[l]).next(h=>{o[l]=h,++u,u===s&&r(o)},h=>i(h))}})}static doWhile(t,n){return new L((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Ub(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ai(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}ga.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=-1;function ma(e){return e==null}function qo(e){return e===0&&1/e==-1/0}function Bb(e){return typeof e=="number"&&Number.isInteger(e)&&!qo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="";function $b(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=nd(t)),t=qb(e.get(n),t);return nd(t)}function qb(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case fm:n+="";break;default:n+=s}}return n}function nd(e){return e+fm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t,n){this.comparator=t,this.root=n||Ht.EMPTY}insert(t,n){return new It(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(t){return new It(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Qs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Qs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Qs(this.root,t,this.comparator,!0)}}class Qs{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ht{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Ht.RED,this.left=i??Ht.EMPTY,this.right=s??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Ht(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw W(27949);return t+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(t,n,r,i,s){return this}insert(t,n,r){return new Ht(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.comparator=t,this.data=new It(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new id(this.data.getIterator())}getIteratorFrom(t){return new id(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Lt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Lt(this.comparator);return n.data=t,n}}class id{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.fields=t,t.sort(Gt.comparator)}static empty(){return new Ie([])}unionWith(t){let n=new Lt(Gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ie(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Wr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pm("Invalid base64 string: "+s):s}}(t);return new Wt(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Wt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const zb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bn(e){if(lt(!!e,39018),typeof e=="string"){let t=0;const n=zb.exec(e);if(lt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ct(e.seconds),nanos:Ct(e.nanos)}}function Ct(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function $n(e){return typeof e=="string"?Wt.fromBase64String(e):Wt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="server_timestamp",mm="__type__",_m="__previous_value__",ym="__local_write_time__";function Zl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[mm])===null||n===void 0?void 0:n.stringValue)===gm}function _a(e){const t=e.mapValue.fields[_m];return Zl(t)?_a(t):t}function as(e){const t=Bn(e.mapValue.fields[ym].timestampValue);return new wt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(t,n,r,i,s,o,u,c,l,h){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}}const zo="(default)";class us{constructor(t,n){this.projectId=t,this.database=n||zo}static empty(){return new us("","")}get isDefaultDatabase(){return this.database===zo}isEqual(t){return t instanceof us&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="__type__",Hb="__max__",Xs={mapValue:{}},wm="__vector__",jo="value";function qn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zl(e)?4:Wb(e)?9007199254740991:Gb(e)?10:11:W(28295,{value:e})}function rn(e,t){if(e===t)return!0;const n=qn(e);if(n!==qn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return as(e).isEqual(as(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bn(i.timestampValue),u=Bn(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return $n(i.bytesValue).isEqual($n(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ct(i.geoPointValue.latitude)===Ct(s.geoPointValue.latitude)&&Ct(i.geoPointValue.longitude)===Ct(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ct(i.integerValue)===Ct(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ct(i.doubleValue),u=Ct(s.doubleValue);return o===u?qo(o)===qo(u):isNaN(o)&&isNaN(u)}return!1}(e,t);case 9:return Wr(e.arrayValue.values||[],t.arrayValue.values||[],rn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(rd(o)!==rd(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!rn(o[c],u[c])))return!1;return!0}(e,t);default:return W(52216,{left:e})}}function ls(e,t){return(e.values||[]).find(n=>rn(n,t))!==void 0}function Kr(e,t){if(e===t)return 0;const n=qn(e),r=qn(t);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(e.booleanValue,t.booleanValue);case 2:return function(s,o){const u=Ct(s.integerValue||s.doubleValue),c=Ct(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(e,t);case 3:return sd(e.timestampValue,t.timestampValue);case 4:return sd(as(e),as(t));case 5:return nl(e.stringValue,t.stringValue);case 6:return function(s,o){const u=$n(s),c=$n(o);return u.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const u=s.split("/"),c=o.split("/");for(let l=0;l<u.length&&l<c.length;l++){const h=tt(u[l],c[l]);if(h!==0)return h}return tt(u.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const u=tt(Ct(s.latitude),Ct(o.latitude));return u!==0?u:tt(Ct(s.longitude),Ct(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return od(e.arrayValue,t.arrayValue);case 10:return function(s,o){var u,c,l,h;const d=s.fields||{},p=o.fields||{},m=(u=d[jo])===null||u===void 0?void 0:u.arrayValue,_=(c=p[jo])===null||c===void 0?void 0:c.arrayValue,E=tt(((l=m==null?void 0:m.values)===null||l===void 0?void 0:l.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:od(m,_)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===Xs.mapValue&&o===Xs.mapValue)return 0;if(s===Xs.mapValue)return 1;if(o===Xs.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const p=nl(c[d],h[d]);if(p!==0)return p;const m=Kr(u[c[d]],l[h[d]]);if(m!==0)return m}return tt(c.length,h.length)}(e.mapValue,t.mapValue);default:throw W(23264,{le:n})}}function sd(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return tt(e,t);const n=Bn(e),r=Bn(t),i=tt(n.seconds,r.seconds);return i!==0?i:tt(n.nanos,r.nanos)}function od(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Kr(n[i],r[i]);if(s)return s}return tt(n.length,r.length)}function Qr(e){return rl(e)}function rl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Bn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return $n(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rl(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rl(n.fields[o])}`;return i+"}"}(e.mapValue):W(61005,{value:e})}function uo(e){switch(qn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_a(e);return t?16+uo(t):16;case 5:return 2*e.stringValue.length;case 6:return $n(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+uo(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return Gn(r.fields,(s,o)=>{i+=s.length+uo(o)}),i}(e.mapValue);default:throw W(13486,{value:e})}}function ad(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function il(e){return!!e&&"integerValue"in e}function tc(e){return!!e&&"arrayValue"in e}function ud(e){return!!e&&"nullValue"in e}function ld(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lo(e){return!!e&&"mapValue"in e}function Gb(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[vm])===null||n===void 0?void 0:n.stringValue)===wm}function zi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gn(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=zi(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zi(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Wb(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Hb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.value=t}static empty(){return new de({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!lo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=zi(n)}setAll(t){let n=Gt.emptyPath(),r={},i=[];t.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=zi(o):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());lo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return rn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];lo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Gn(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new de(zi(this.value))}}function Em(e){const t=[];return Gn(e.fields,(n,r)=>{const i=new Gt([n]);if(lo(r)){const s=Em(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Ie(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t,n,r,i,s,o,u){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(t){return new ee(t,0,Q.min(),Q.min(),Q.min(),de.empty(),0)}static newFoundDocument(t,n,r,i){return new ee(t,1,n,Q.min(),r,i,0)}static newNoDocument(t,n){return new ee(t,2,n,Q.min(),Q.min(),de.empty(),0)}static newUnknownDocument(t,n){return new ee(t,3,n,Q.min(),Q.min(),de.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=de.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=de.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t,n){this.position=t,this.inclusive=n}}function cd(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Kr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hd(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,n="asc"){this.field=t,this.dir=n}}function Kb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{}class Dt extends Tm{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Xb(t,n,r):n==="array-contains"?new Zb(t,r):n==="in"?new tR(t,r):n==="not-in"?new eR(t,r):n==="array-contains-any"?new nR(t,r):new Dt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Jb(t,r):new Yb(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Kr(n,this.value)):n!==null&&qn(this.value)===qn(n)&&this.matchesComparison(Kr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends Tm{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new Be(t,n)}matches(t){return Am(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Am(e){return e.op==="and"}function Im(e){return Qb(e)&&Am(e)}function Qb(e){for(const t of e.filters)if(t instanceof Be)return!1;return!0}function sl(e){if(e instanceof Dt)return e.field.canonicalString()+e.op.toString()+Qr(e.value);if(Im(e))return e.filters.map(t=>sl(t)).join(",");{const t=e.filters.map(n=>sl(n)).join(",");return`${e.op}(${t})`}}function bm(e,t){return e instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&rn(r.value,i.value)}(e,t):e instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&bm(o,i.filters[u]),!0):!1}(e,t):void W(19439)}function Rm(e){return e instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Qr(n.value)}`}(e):e instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(Rm).join(" ,")+"}"}(e):"Filter"}class Xb extends Dt{constructor(t,n,r){super(t,n,r),this.key=G.fromName(r.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class Jb extends Dt{constructor(t,n){super(t,"in",n),this.keys=Sm("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Yb extends Dt{constructor(t,n){super(t,"not-in",n),this.keys=Sm("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Sm(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class Zb extends Dt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return tc(n)&&ls(n.arrayValue,this.value)}}class tR extends Dt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ls(this.value.arrayValue,n)}}class eR extends Dt{constructor(t,n){super(t,"not-in",n)}matches(t){if(ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ls(this.value.arrayValue,n)}}class nR extends Dt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!tc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ls(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(t,n=null,r=[],i=[],s=null,o=null,u=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.Pe=null}}function fd(e,t=null,n=[],r=[],i=null,s=null,o=null){return new rR(e,t,n,r,i,s,o)}function ec(e){const t=J(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>sl(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ma(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Qr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Qr(r)).join(",")),t.Pe=n}return t.Pe}function nc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Kb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bm(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hd(e.startAt,t.startAt)&&hd(e.endAt,t.endAt)}function ol(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t,n=null,r=[],i=[],s=null,o="F",u=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function iR(e,t,n,r,i,s,o,u){return new ui(e,t,n,r,i,s,o,u)}function rc(e){return new ui(e)}function dd(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Cm(e){return e.collectionGroup!==null}function ji(e){const t=J(e);if(t.Te===null){t.Te=[];const n=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Lt(Gt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(u=u.add(l.field))})}),u})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Te.push(new cs(s,r))}),n.has(Gt.keyField().canonicalString())||t.Te.push(new cs(Gt.keyField(),r))}return t.Te}function Xe(e){const t=J(e);return t.Ie||(t.Ie=sR(t,ji(e))),t.Ie}function sR(e,t){if(e.limitType==="F")return fd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new cs(i.field,s)});const n=e.endAt?new Ho(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ho(e.startAt.position,e.startAt.inclusive):null;return fd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function al(e,t){const n=e.filters.concat([t]);return new ui(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Go(e,t,n){return new ui(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ya(e,t){return nc(Xe(e),Xe(t))&&e.limitType===t.limitType}function Pm(e){return`${ec(Xe(e))}|lt:${e.limitType}`}function kr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Rm(i)).join(", ")}]`),ma(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qr(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qr(i)).join(",")),`Target(${r})`}(Xe(e))}; limitType=${e.limitType})`}function va(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of ji(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,u,c){const l=cd(o,u,c);return o.inclusive?l<=0:l<0}(r.startAt,ji(r),i)||r.endAt&&!function(o,u,c){const l=cd(o,u,c);return o.inclusive?l>=0:l>0}(r.endAt,ji(r),i))}(e,t)}function oR(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xm(e){return(t,n)=>{let r=!1;for(const i of ji(e)){const s=aR(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aR(e,t,n){const r=e.field.isKeyField()?G.comparator(t.key,n.key):function(s,o,u){const c=o.data.field(s),l=u.data.field(s);return c!==null&&l!==null?Kr(c,l):W(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Gn(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return dm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new It(G.comparator);function Tn(){return uR}const Vm=new It(G.comparator);function Fi(...e){let t=Vm;for(const n of e)t=t.insert(n.key,n);return t}function Nm(e){let t=Vm;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function ur(){return Hi()}function Dm(){return Hi()}function Hi(){return new Tr(e=>e.toString(),(e,t)=>e.isEqual(t))}const lR=new It(G.comparator),cR=new Lt(G.comparator);function rt(...e){let t=cR;for(const n of e)t=t.add(n);return t}const hR=new Lt(tt);function fR(){return hR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qo(t)?"-0":t}}function km(e){return{integerValue:""+e}}function dR(e,t){return Bb(t)?km(t):ic(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this._=void 0}}function pR(e,t,n){return e instanceof Wo?function(i,s){const o={fields:{[mm]:{stringValue:gm},[ym]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zl(s)&&(s=_a(s)),s&&(o.fields[_m]=s),{mapValue:o}}(n,t):e instanceof hs?Mm(e,t):e instanceof fs?Lm(e,t):function(i,s){const o=Om(i,s),u=pd(o)+pd(i.Ee);return il(o)&&il(i.Ee)?km(u):ic(i.serializer,u)}(e,t)}function gR(e,t,n){return e instanceof hs?Mm(e,t):e instanceof fs?Lm(e,t):n}function Om(e,t){return e instanceof Ko?function(r){return il(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class Wo extends wa{}class hs extends wa{constructor(t){super(),this.elements=t}}function Mm(e,t){const n=Fm(t);for(const r of e.elements)n.some(i=>rn(i,r))||n.push(r);return{arrayValue:{values:n}}}class fs extends wa{constructor(t){super(),this.elements=t}}function Lm(e,t){let n=Fm(t);for(const r of e.elements)n=n.filter(i=>!rn(i,r));return{arrayValue:{values:n}}}class Ko extends wa{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function pd(e){return Ct(e.integerValue||e.doubleValue)}function Fm(e){return tc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function mR(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof hs&&i instanceof hs||r instanceof fs&&i instanceof fs?Wr(r.elements,i.elements,rn):r instanceof Ko&&i instanceof Ko?rn(r.Ee,i.Ee):r instanceof Wo&&i instanceof Wo}(e.transform,t.transform)}class _R{constructor(t,n){this.version=t,this.transformResults=n}}class Je{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Je}static exists(t){return new Je(void 0,t)}static updateTime(t){return new Je(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function co(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ea{}function Um(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new $m(e.key,Je.none()):new ys(e.key,e.data,Je.none());{const n=e.data,r=de.empty();let i=new Lt(Gt.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Wn(e.key,r,new Ie(i.toArray()),Je.none())}}function yR(e,t,n){e instanceof ys?function(i,s,o){const u=i.value.clone(),c=md(i.fieldTransforms,s,o.transformResults);u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):e instanceof Wn?function(i,s,o){if(!co(i.precondition,s))return void s.convertToUnknownDocument(o.version);const u=md(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Bm(i)),c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Gi(e,t,n,r){return e instanceof ys?function(s,o,u,c){if(!co(s.precondition,o))return u;const l=s.value.clone(),h=_d(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wn?function(s,o,u,c){if(!co(s.precondition,o))return u;const l=_d(s.fieldTransforms,c,o),h=o.data;return h.setAll(Bm(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,r):function(s,o,u){return co(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(e,t,n)}function vR(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Om(r.transform,i||null);s!=null&&(n===null&&(n=de.empty()),n.set(r.field,s))}return n||null}function gd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wr(r,i,(s,o)=>mR(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ys extends Ea{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wn extends Ea{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Bm(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function md(e,t,n){const r=new Map;lt(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,u=t.data.field(s.field);r.set(s.field,gR(o,u,n[i]))}return r}function _d(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,pR(s,o,t))}return r}class $m extends Ea{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wR extends Ea{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&yR(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Gi(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Gi(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Dm();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=n.has(i.key)?null:u;const c=Um(o,u);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),rt())}isEqual(t){return this.batchId===t.batchId&&Wr(this.mutations,t.mutations,(n,r)=>gd(n,r))&&Wr(this.baseMutations,t.baseMutations,(n,r)=>gd(n,r))}}class sc{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){lt(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return lR}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sc(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,it;function IR(e){switch(e){case O.OK:return W(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return W(15467,{code:e})}}function qm(e){if(e===void 0)return wn("GRPC error has no .code"),O.UNKNOWN;switch(e){case Nt.OK:return O.OK;case Nt.CANCELLED:return O.CANCELLED;case Nt.UNKNOWN:return O.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return O.INTERNAL;case Nt.UNAVAILABLE:return O.UNAVAILABLE;case Nt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Nt.NOT_FOUND:return O.NOT_FOUND;case Nt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Nt.ABORTED:return O.ABORTED;case Nt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Nt.DATA_LOSS:return O.DATA_LOSS;default:return W(39323,{code:e})}}(it=Nt||(Nt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new kn([4294967295,4294967295],0);function yd(e){const t=lm().encode(e),n=new em;return n.update(t),new Uint8Array(n.digest())}function vd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new kn([n,r],0),new kn([i,s],0)]}class oc{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ui(`Invalid padding: ${n}`);if(r<0)throw new Ui(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Ui(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Ui(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=kn.fromNumber(this.fe)}pe(t,n,r){let i=t.add(n.multiply(kn.fromNumber(r)));return i.compare(bR)===1&&(i=new kn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=yd(t),[r,i]=vd(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new oc(s,i,n);return r.forEach(u=>o.insert(u)),o}insert(t){if(this.fe===0)return;const n=yd(t),[r,i]=vd(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Ui extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,vs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Ta(Q.min(),i,new It(tt),Tn(),rt())}}class vs{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new vs(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,n,r,i){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=i}}class zm{constructor(t,n){this.targetId=t,this.De=n}}class jm{constructor(t,n,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wd{constructor(){this.ve=0,this.Ce=Ed(),this.Fe=Wt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=rt(),n=rt(),r=rt();return this.Ce.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:s})}}),new vs(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=Ed()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class RR{constructor(t){this.We=t,this.Ge=new Map,this.ze=Tn(),this.je=Js(),this.Je=Js(),this.He=new It(tt)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:W(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(t){const n=t.targetId,r=t.De.count,i=this.st(n);if(i){const s=i.target;if(ol(s))if(r===0){const o=new G(s.path);this.Xe(n,o,ee.newNoDocument(o,Q.min()))}else lt(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const u=this._t(t),c=u?this.ut(u,t,o):1;if(c!==0){this.rt(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,u;try{o=$n(r).toUint8Array()}catch(c){if(c instanceof pm)return Fn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new oc(o,i,s)}catch(c){return Fn(c instanceof Ui?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.fe===0?null:u}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(u)||(this.Xe(n,s,null),i++)}),i}Pt(t){const n=new Map;this.Ge.forEach((s,o)=>{const u=this.st(o);if(u){if(s.current&&ol(u.target)){const c=new G(u.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,ee.newNoDocument(c,t))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=rt();this.Je.forEach((s,o)=>{let u=!0;o.forEachWhile(c=>{const l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(t));const i=new Ta(t,n,this.He,this.ze,r);return this.ze=Tn(),this.je=Js(),this.Je=Js(),this.He=new It(tt),i}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const i=this.tt(t);this.It(t,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new wd,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Lt(tt),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Lt(tt),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||j("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new wd),this.We.getRemoteKeysForTarget(t).forEach(n=>{this.Xe(t,n,null)})}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function Js(){return new It(G.comparator)}function Ed(){return new It(G.comparator)}const SR={asc:"ASCENDING",desc:"DESCENDING"},CR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PR={and:"AND",or:"OR"};class xR{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ul(e,t){return e.useProto3Json||ma(t)?t:{value:t}}function Qo(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function VR(e,t){return Qo(e,t.toTimestamp())}function Ye(e){return lt(!!e,49232),Q.fromTimestamp(function(n){const r=Bn(n);return new wt(r.seconds,r.nanos)}(e))}function ac(e,t){return ll(e,t).canonicalString()}function ll(e,t){const n=function(i){return new mt(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Gm(e){const t=mt.fromString(e);return lt(Jm(t),10190,{key:t.toString()}),t}function cl(e,t){return ac(e.databaseId,t.path)}function du(e,t){const n=Gm(t);if(n.get(1)!==e.databaseId.projectId)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(Km(n))}function Wm(e,t){return ac(e.databaseId,t)}function NR(e){const t=Gm(e);return t.length===4?mt.emptyPath():Km(t)}function hl(e){return new mt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Km(e){return lt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Td(e,t,n){return{name:cl(e,t),fields:n.value.mapValue.fields}}function DR(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(lt(h===void 0||typeof h=="string",58123),Wt.fromBase64String(h||"")):(lt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Wt.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(l){const h=l.code===void 0?O.UNKNOWN:qm(l.code);return new q(h,l.message||"")}(o);n=new jm(r,i,s,u||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=du(e,r.document.name),s=Ye(r.document.updateTime),o=r.document.createTime?Ye(r.document.createTime):Q.min(),u=new de({mapValue:{fields:r.document.fields}}),c=ee.newFoundDocument(i,s,o,u),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ho(l,h,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=du(e,r.document),s=r.readTime?Ye(r.readTime):Q.min(),o=ee.newNoDocument(i,s),u=r.removedTargetIds||[];n=new ho([],u,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=du(e,r.document),s=r.removedTargetIds||[];n=new ho([],s,i,null)}else{if(!("filter"in t))return W(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new AR(i,s),u=r.targetId;n=new zm(u,o)}}return n}function kR(e,t){let n;if(t instanceof ys)n={update:Td(e,t.key,t.value)};else if(t instanceof $m)n={delete:cl(e,t.key)};else if(t instanceof Wn)n={update:Td(e,t.key,t.data),updateMask:zR(t.fieldMask)};else{if(!(t instanceof wR))return W(16599,{Rt:t.type});n={verify:cl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const u=o.transform;if(u instanceof Wo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof fs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ko)return{fieldPath:o.field.canonicalString(),increment:u.Ee};throw W(20930,{transform:o.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:VR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W(27497)}(e,t.precondition)),n}function OR(e,t){return e&&e.length>0?(lt(t!==void 0,14353),e.map(n=>function(i,s){let o=i.updateTime?Ye(i.updateTime):Ye(s);return o.isEqual(Q.min())&&(o=Ye(s)),new _R(o,i.transformResults||[])}(n,t))):[]}function MR(e,t){return{documents:[Wm(e,t.path)]}}function LR(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Wm(e,i);const s=function(l){if(l.length!==0)return Xm(Be.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(h=>function(p){return{field:Or(p.field),direction:BR(p.dir)}}(h))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const u=ul(e,t.limit);return u!==null&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{Vt:n,parent:i}}function FR(e){let t=NR(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){lt(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=Qm(d);return p instanceof Be&&Im(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(_){return new cs(Mr(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let u=null;n.limit&&(u=function(d){let p;return p=typeof d=="object"?d.value:d,ma(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(d){const p=!!d.before,m=d.values||[];return new Ho(m,p)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const p=!d.before,m=d.values||[];return new Ho(m,p)}(n.endAt)),iR(t,i,o,s,u,"F",c,l)}function UR(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Qm(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mr(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mr(n.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Mr(n.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mr(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(e):e.fieldFilter!==void 0?function(n){return Dt.create(Mr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>Qm(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(e):W(30097,{filter:e})}function BR(e){return SR[e]}function $R(e){return CR[e]}function qR(e){return PR[e]}function Or(e){return{fieldPath:e.canonicalString()}}function Mr(e){return Gt.fromServerFormat(e.fieldPath)}function Xm(e){return e instanceof Dt?function(n){if(n.op==="=="){if(ld(n.value))return{unaryFilter:{field:Or(n.field),op:"IS_NAN"}};if(ud(n.value))return{unaryFilter:{field:Or(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ld(n.value))return{unaryFilter:{field:Or(n.field),op:"IS_NOT_NAN"}};if(ud(n.value))return{unaryFilter:{field:Or(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Or(n.field),op:$R(n.op),value:n.value}}}(e):e instanceof Be?function(n){const r=n.getFilters().map(i=>Xm(i));return r.length===1?r[0]:{compositeFilter:{op:qR(n.op),filters:r}}}(e):W(54877,{filter:e})}function zR(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Jm(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,n,r,i,s=Q.min(),o=Q.min(),u=Wt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(t){return new Vn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(t){this.gt=t}}function HR(e){const t=FR({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Go(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.Dn=new WR}addToCollectionParentIndex(t,n){return this.Dn.add(n),L.resolve()}getCollectionParents(t,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return L.resolve()}deleteFieldIndex(t,n){return L.resolve()}deleteAllFieldIndexes(t){return L.resolve()}createTargetIndexes(t,n){return L.resolve()}getDocumentsMatchingTarget(t,n){return L.resolve(null)}getIndexType(t,n){return L.resolve(0)}getFieldIndexes(t,n){return L.resolve([])}getNextCollectionGroupToUpdate(t){return L.resolve(null)}getMinOffset(t,n){return L.resolve(Un.min())}getMinOffsetFromCollectionGroup(t,n){return L.resolve(Un.min())}updateCollectionGroup(t,n,r){return L.resolve()}updateIndexEntries(t,n){return L.resolve()}}class WR{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Lt(mt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Lt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ym=41943040;class fe{static withCacheSize(t){return new fe(t,fe.DEFAULT_COLLECTION_PERCENTILE,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fe.DEFAULT_COLLECTION_PERCENTILE=10,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fe.DEFAULT=new fe(Ym,fe.DEFAULT_COLLECTION_PERCENTILE,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fe.DISABLED=new fe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Xr(0)}static ur(){return new Xr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="LruGarbageCollector",KR=1048576;function bd([e,t],[n,r]){const i=tt(e,n);return i===0?tt(t,r):i}class QR{constructor(t){this.Tr=t,this.buffer=new Lt(bd),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bd(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XR{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){j(Id,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ai(n)?j(Id,"Ignoring IndexedDB error during garbage collection: ",n):await oi(n)}await this.Rr(3e5)})}}class JR{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return L.resolve(ga.ue);const r=new QR(n);return this.Vr.forEachTarget(t,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Ad)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ad):this.pr(t,n))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,i,s,o,u,c,l;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i))).next(d=>(r=d,u=Date.now(),this.removeTargets(t,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(d=>(l=Date.now(),Dr()<=st.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function YR(e,t){return new JR(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.changes=new Tr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ee.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Gi(r.mutation,i,Ie.empty(),wt.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,rt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=rt()){const i=ur();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=Fi();return s.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=ur();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,rt()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,u)=>{n.set(o,u)})})}computeViews(t,n,r,i){let s=Tn();const o=Hi(),u=function(){return Hi()}();return n.forEach((c,l)=>{const h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Wn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Gi(h.mutation,l,h.mutation.getFieldMask(),wt.now())):o.set(l.key,Ie.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var d;return u.set(l,new tS(h,(d=o.get(l))!==null&&d!==void 0?d:null))}),u))}recalculateAndSaveOverlays(t,n){const r=Hi();let i=new It((o,u)=>o-u),s=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let h=r.get(c)||Ie.empty();h=u.applyToLocalView(l,h),r.set(c,h);const d=(i.get(u.batchId)||rt()).add(c);i=i.insert(u.batchId,d)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),l=c.key,h=c.value,d=Dm();h.forEach(p=>{if(!s.has(p)){const m=Um(n.get(p),r.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,d))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Cm(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):L.resolve(ur());let u=os,c=s;return o.next(l=>L.forEach(l,(h,d)=>(u<d.largestBatchId&&(u=d.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(t,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,c,l,rt())).next(h=>({batchId:u,changes:Nm(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(r=>{let i=Fi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=Fi();return this.indexManager.getCollectionParents(t,s).next(u=>L.forEach(u,c=>{const l=function(d,p){return new ui(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((c,l)=>{const h=l.getKey();o.get(h)===null&&(o=o.insert(h,ee.newInvalidDocument(h)))});let u=Fi();return o.forEach((c,l)=>{const h=s.get(c);h!==void 0&&Gi(h.mutation,l,Ie.empty(),wt.now()),va(n,l)&&(u=u.insert(c,l))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ye(i.createTime)}}(n)),L.resolve()}getNamedQuery(t,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:HR(i.bundledQuery),readTime:Ye(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.overlays=new It(G.comparator),this.kr=new Map}getOverlay(t,n){return L.resolve(this.overlays.get(n))}getOverlays(t,n){const r=ur();return L.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.wt(t,n,s)}),L.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(t,n,r){const i=ur(),s=n.length+1,o=new G(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new It((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ur(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const u=ur(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>u.set(l,h)),!(u.size()>=i)););return L.resolve(u)}wt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new TR(n,r));let s=this.kr.get(n);s===void 0&&(s=rt(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(t){return L.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.qr=new Lt(qt.Qr),this.$r=new Lt(qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new qt(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Wr(new qt(t,n))}Gr(t,n){t.forEach(r=>this.removeReference(r,n))}zr(t){const n=new G(new mt([])),r=new qt(n,t),i=new qt(n,t+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new G(new mt([])),r=new qt(n,t),i=new qt(n,t+1);let s=rt();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new qt(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class qt{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return G.comparator(t.key,n.key)||tt(t.Hr,n.Hr)}static Ur(t,n){return tt(t.Hr,n.Hr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Lt(qt.Qr)}checkEmpty(t){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ER(s,n,r,i);this.mutationQueue.push(o);for(const u of i)this.Yr=this.Yr.add(new qt(u.key,s)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return L.resolve(o)}lookupMutationBatch(t,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Yl:this.er-1)}getAllMutationBatches(t){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new qt(n,0),i=new qt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const u=this.Zr(o.Hr);s.push(u)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Lt(tt);return n.forEach(i=>{const s=new qt(i,0),o=new qt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],u=>{r=r.add(u.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new qt(new G(s),0);let u=new Lt(tt);return this.Yr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(u=u.add(c.Hr)),!0)},o),L.resolve(this.ei(u))}ei(t){const n=[];return t.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){lt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,i=>{const s=new qt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=r})}rr(t){}containsKey(t,n){const r=new qt(n,0),i=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,L.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t){this.ni=t,this.docs=function(){return new It(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ee.newInvalidDocument(n))}getEntries(t,n){let r=Tn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ee.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Tn();const o=n.path,u=new G(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Mb(Ob(h),r)<=0||(i.has(h.key)||va(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(t,n,r,i){W(9500)}ri(t,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new aS(this)}getSize(t){return L.resolve(this.size)}}class aS extends ZR{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(t,i)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(t){this.persistence=t,this.ii=new Tr(n=>ec(n),nc),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.si=0,this.oi=new uc,this.targetCount=0,this._i=Xr.ar()}forEachTarget(t,n){return this.ii.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(t){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return L.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new Xr(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(t,n){return this.hr(n),L.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.ii.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(t,u.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(t){return L.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(t,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n){this.ai={},this.overlays={},this.ui=new ga(0),this.ci=!1,this.ci=!0,this.li=new iS,this.referenceDelegate=t(this),this.hi=new uS(this),this.indexManager=new GR,this.remoteDocumentCache=function(i){return new oS(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new jR(n),this.Ti=new nS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new rS,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new sS(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){j("MemoryPersistence","Starting transaction:",t);const i=new lS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(t,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(t,n)))}}class lS extends Fb{constructor(t){super(),this.currentSequenceNumber=t}}class lc{constructor(t){this.persistence=t,this.Ai=new uc,this.Ri=null}static Vi(t){return new lc(t)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const i=G.fromPath(r);return this.fi(t,i).next(s=>{s||n.removeEntry(i,Q.min())})}).next(()=>(this.Ri=null,n.apply(t)))}updateLimboDocument(t,n){return this.fi(t,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(t){return 0}fi(t,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class Xo{constructor(t,n){this.persistence=t,this.gi=new Tr(r=>$b(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=YR(this,n)}static Vi(t,n){return new Xo(t,n)}Ii(){}di(t){return L.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}yr(t){let n=0;return this.gr(t,r=>{n++}).next(()=>n)}gr(t,n){return L.forEach(this.gi,(r,i)=>this.Sr(t,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(t,o=>this.Sr(t,o,n).next(u=>{u||(r++,s.removeEntry(o,Q.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),L.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),L.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),L.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),L.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=uo(t.data.value)),n}Sr(t,n,r){return L.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.gi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=i}static Es(t,n){let r=rt(),i=rt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cc(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return rI()?8:Ub(eI())>0?6:4}()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ps(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cS;return this.ws(t,n,o).next(u=>{if(s.result=u,this.Rs)return this.Ss(t,n,o,u.size)})}).next(()=>s.result)}Ss(t,n,r,i){return r.documentReadCount<this.Vs?(Dr()<=st.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Dr()<=st.DEBUG&&j("QueryEngine","Query:",kr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Dr()<=st.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Xe(n))):L.resolve())}ps(t,n){if(dd(n))return L.resolve(null);let r=Xe(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Go(n,null,"F"),r=Xe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=rt(...s);return this.gs.getDocuments(t,o).next(u=>this.indexManager.getMinOffset(t,r).next(c=>{const l=this.bs(n,u);return this.Ds(n,l,o,c.readTime)?this.ps(t,Go(n,null,"F")):this.vs(t,l,n,c)}))})))}ys(t,n,r,i){return dd(n)||i.isEqual(Q.min())?L.resolve(null):this.gs.getDocuments(t,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?L.resolve(null):(Dr()<=st.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kr(n)),this.vs(t,o,n,kb(i,os)).next(u=>u))})}bs(t,n){let r=new Lt(xm(t));return n.forEach((i,s)=>{va(t,s)&&(r=r.add(s))}),r}Ds(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(t,n,r){return Dr()<=st.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",kr(n)),this.gs.getDocumentsMatchingQuery(t,n,Un.min(),r)}vs(t,n,r,i){return this.gs.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="LocalStore",fS=3e8;class dS{constructor(t,n,r,i){this.persistence=t,this.Cs=n,this.serializer=i,this.Fs=new It(tt),this.Ms=new Tr(s=>ec(s),nc),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new eS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Fs))}}function pS(e,t,n,r){return new dS(e,t,n,r)}async function t_(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let c=rt();for(const l of i){o.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of s){u.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:u}))})})}function gS(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,c,l,h){const d=l.batch,p=d.keys();let m=L.resolve();return p.forEach(_=>{m=m.next(()=>h.getEntry(c,_)).next(E=>{const v=l.docVersions.get(_);lt(v!==null,48541),E.version.compareTo(v)<0&&(d.applyToRemoteDocument(E,l),E.isValidDocument()&&(E.setReadTime(l.commitVersion),h.addEntry(E)))})}),m.next(()=>u.mutationQueue.removeMutationBatch(c,d))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=rt();for(let l=0;l<u.mutationResults.length;++l)u.mutationResults[l].transformResults.length>0&&(c=c.add(u.batch.mutations[l].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function e_(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.hi.getLastRemoteSnapshotVersion(n))}function mS(e,t){const n=J(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];t.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;u.push(n.hi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?m=m.withResumeToken(Wt.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(E,v,S){return E.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=fS?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,m,h)&&u.push(n.hi.updateTargetData(s,m))});let c=Tn(),l=rt();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),u.push(_S(s,o,t.documentUpdates).next(h=>{c=h.Ls,l=h.ks})),!r.isEqual(Q.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(h)}return L.waitFor(u).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.Fs=i,s))}function _S(e,t,n){let r=rt(),i=rt();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Tn();return n.forEach((u,c)=>{const l=s.get(u);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Q.min())?(t.removeEntry(u,c.readTime),o=o.insert(u,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),o=o.insert(u,c)):j(hc,"Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function yS(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Yl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function vS(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,t).next(s=>s?(i=s,L.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Vn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r})}async function fl(e,t,n){const r=J(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ai(o))throw o;j(hc,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Rd(e,t,n){const r=J(e);let i=Q.min(),s=rt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){const d=J(c),p=d.Ms.get(h);return p!==void 0?L.resolve(d.Fs.get(p)):d.hi.getTargetData(l,h)}(r,o,Xe(t)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,t,n?i:Q.min(),n?s:rt())).next(u=>(wS(r,oR(t),u),{documents:u,qs:s})))}function wS(e,t,n){let r=e.xs.get(t)||Q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.xs.set(t,r)}class Sd{constructor(){this.activeTargetIds=fR()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ES{constructor(){this.Fo=new Sd,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new Sd,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="ConnectivityMonitor";class Pd{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(Cd,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){j(Cd,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ys=null;function dl(){return Ys===null?Ys=function(){return 268435456+Math.round(2147483648*Math.random())}():Ys++,"0x"+Ys.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu="RestConnection",AS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IS{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===zo?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(t,n,r,i,s){const o=dl(),u=this.Go(t,n.toUriEncodedString());j(pu,`Sending RPC '${t}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);const{host:l}=new URL(u),h=Kl(l);return this.jo(t,u,c,r,h).then(d=>(j(pu,`Received RPC '${t}' ${o}: `,d),d),d=>{throw Fn(pu,`RPC '${t}' ${o} failed with error: `,d,"url: ",u,"request:",r),d})}Jo(t,n,r,i,s,o){return this.Wo(t,n,r,i,s)}zo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+si}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}Go(t,n){const r=AS[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class RS extends IS{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,i,s){const o=dl();return new Promise((u,c)=>{const l=new nm;l.setWithCredentials(!0),l.listenOnce(rm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ao.NO_ERROR:const d=l.getResponseJson();j(Zt,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),u(d);break;case ao.TIMEOUT:j(Zt,`RPC '${t}' ${o} timed out`),c(new q(O.DEADLINE_EXCEEDED,"Request time out"));break;case ao.HTTP_ERROR:const p=l.getStatus();if(j(Zt,`RPC '${t}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const E=function(S){const C=S.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(C)>=0?C:O.UNKNOWN}(_.status);c(new q(E,_.message))}else c(new q(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new q(O.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:t,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{j(Zt,`RPC '${t}' ${o} completed.`)}});const h=JSON.stringify(i);j(Zt,`RPC '${t}' ${o} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(t,n,r){const i=dl(),s=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=om(),u=sm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=s.join("");j(Zt,`Creating RPC '${t}' stream ${i}: ${h}`,c);const d=o.createWebChannel(h,c);this.T_(d);let p=!1,m=!1;const _=new bS({Ho:v=>{m?j(Zt,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(p||(j(Zt,`Opening RPC '${t}' stream ${i} transport.`),d.open(),p=!0),j(Zt,`RPC '${t}' stream ${i} sending:`,v),d.send(v))},Yo:()=>d.close()}),E=(v,S,C)=>{v.listen(S,N=>{try{C(N)}catch(x){setTimeout(()=>{throw x},0)}})};return E(d,Li.EventType.OPEN,()=>{m||(j(Zt,`RPC '${t}' stream ${i} transport opened.`),_.s_())}),E(d,Li.EventType.CLOSE,()=>{m||(m=!0,j(Zt,`RPC '${t}' stream ${i} transport closed`),_.__(),this.I_(d))}),E(d,Li.EventType.ERROR,v=>{m||(m=!0,Fn(Zt,`RPC '${t}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),_.__(new q(O.UNAVAILABLE,"The operation could not be completed")))}),E(d,Li.EventType.MESSAGE,v=>{var S;if(!m){const C=v.data[0];lt(!!C,16349);const N=C,x=(N==null?void 0:N.error)||((S=N[0])===null||S===void 0?void 0:S.error);if(x){j(Zt,`RPC '${t}' stream ${i} received error:`,x);const M=x.status;let U=function(T){const R=Nt[T];if(R!==void 0)return qm(R)}(M),I=x.message;U===void 0&&(U=O.INTERNAL,I="Unknown error status: "+M+" with message "+x.message),m=!0,_.__(new q(U,I)),d.close()}else j(Zt,`RPC '${t}' stream ${i} received:`,C),_.a_(C)}}),E(u,im.STAT_EVENT,v=>{v.stat===el.PROXY?j(Zt,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===el.NOPROXY&&j(Zt,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(n=>n===t)}}function gu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(e){return new xR(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(t,n,r=1e3,i=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="PersistentStream";class r_{constructor(t,n,r,i,s,o,u,c){this.Fi=t,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new n_(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{t(()=>{const i=new q(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return j(xd,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget(()=>this.b_===t?n():(j(xd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SS extends r_{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=DR(this.serializer,t),r=function(s){if(!("targetChange"in s))return Q.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?Ye(o.readTime):Q.min()}(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=hl(this.serializer),n.addTarget=function(s,o){let u;const c=o.target;if(u=ol(c)?{documents:MR(s,c)}:{query:LR(s,c).Vt},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Hm(s,o.resumeToken);const l=ul(s,o.expectedCount);l!==null&&(u.expectedCount=l)}else if(o.snapshotVersion.compareTo(Q.min())>0){u.readTime=Qo(s,o.snapshotVersion.toTimestamp());const l=ul(s,o.expectedCount);l!==null&&(u.expectedCount=l)}return u}(this.serializer,t);const r=UR(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=hl(this.serializer),n.removeTarget=t,this.k_(n)}}class CS extends r_{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return lt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,lt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){lt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=OR(t.writeResults,t.commitTime),r=Ye(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=hl(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>kR(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{}class xS extends PS{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(t,ll(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(O.UNKNOWN,s.toString())})}Jo(t,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Jo(t,ll(n,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(O.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class VS{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(wn(n),this._a=!1):j("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="RemoteStore";class NS{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ar(this)&&(j(vr,"Restarting streams for network reachability change."),await async function(c){const l=J(c);l.Ia.add(4),await ws(l),l.Aa.set("Unknown"),l.Ia.delete(4),await Ia(l)}(this))})}),this.Aa=new VS(r,i)}}async function Ia(e){if(Ar(e))for(const t of e.da)await t(!0)}async function ws(e){for(const t of e.da)await t(!1)}function i_(e,t){const n=J(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),gc(n)?pc(n):li(n).x_()&&dc(n,t))}function fc(e,t){const n=J(e),r=li(n);n.Ta.delete(t),r.x_()&&s_(n,t),n.Ta.size===0&&(r.x_()?r.B_():Ar(n)&&n.Aa.set("Unknown"))}function dc(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Q.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}li(e).H_(t)}function s_(e,t){e.Ra.$e(t),li(e).Y_(t)}function pc(e){e.Ra=new RR({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),li(e).start(),e.Aa.aa()}function gc(e){return Ar(e)&&!li(e).M_()&&e.Ta.size>0}function Ar(e){return J(e).Ia.size===0}function o_(e){e.Ra=void 0}async function DS(e){e.Aa.set("Online")}async function kS(e){e.Ta.forEach((t,n)=>{dc(e,t)})}async function OS(e,t){o_(e),gc(e)?(e.Aa.la(t),pc(e)):e.Aa.set("Unknown")}async function MS(e,t,n){if(e.Aa.set("Online"),t instanceof jm&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const u of s.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.Ta.delete(u),i.Ra.removeTarget(u))}(e,t)}catch(r){j(vr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Jo(e,r)}else if(t instanceof ho?e.Ra.Ye(t):t instanceof zm?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Q.min()))try{const r=await e_(e.localStore);n.compareTo(r)>=0&&await function(s,o){const u=s.Ra.Pt(o);return u.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.Ta.get(l);h&&s.Ta.set(l,h.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,l)=>{const h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(Wt.EMPTY_BYTE_STRING,h.snapshotVersion)),s_(s,c);const d=new Vn(h.target,c,l,h.sequenceNumber);dc(s,d)}),s.remoteSyncer.applyRemoteEvent(u)}(e,n)}catch(r){j(vr,"Failed to raise snapshot:",r),await Jo(e,r)}}async function Jo(e,t,n){if(!ai(t))throw t;e.Ia.add(1),await ws(e),e.Aa.set("Offline"),n||(n=()=>e_(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{j(vr,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Ia(e)})}function a_(e,t){return t().catch(n=>Jo(e,n,t))}async function ba(e){const t=J(e),n=zn(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Yl;for(;LS(t);)try{const i=await yS(t.localStore,r);if(i===null){t.Pa.length===0&&n.B_();break}r=i.batchId,FS(t,i)}catch(i){await Jo(t,i)}u_(t)&&l_(t)}function LS(e){return Ar(e)&&e.Pa.length<10}function FS(e,t){e.Pa.push(t);const n=zn(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function u_(e){return Ar(e)&&!zn(e).M_()&&e.Pa.length>0}function l_(e){zn(e).start()}async function US(e){zn(e).na()}async function BS(e){const t=zn(e);for(const n of e.Pa)t.X_(n.mutations)}async function $S(e,t,n){const r=e.Pa.shift(),i=sc.from(r,t,n);await a_(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ba(e)}async function qS(e,t){t&&zn(e).Z_&&await async function(r,i){if(function(o){return IR(o)&&o!==O.ABORTED}(i.code)){const s=r.Pa.shift();zn(r).N_(),await a_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ba(r)}}(e,t),u_(e)&&l_(e)}async function Vd(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),j(vr,"RemoteStore received new credentials");const r=Ar(n);n.Ia.add(3),await ws(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Ia(n)}async function zS(e,t){const n=J(e);t?(n.Ia.delete(2),await Ia(n)):t||(n.Ia.add(2),await ws(n),n.Aa.set("Unknown"))}function li(e){return e.Va||(e.Va=function(n,r,i){const s=J(n);return s.ia(),new SS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Zo:DS.bind(null,e),e_:kS.bind(null,e),n_:OS.bind(null,e),J_:MS.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),gc(e)?pc(e):e.Aa.set("Unknown")):(await e.Va.stop(),o_(e))})),e.Va}function zn(e){return e.ma||(e.ma=function(n,r,i){const s=J(n);return s.ia(),new CS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:US.bind(null,e),n_:qS.bind(null,e),ea:BS.bind(null,e),ta:$S.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await ba(e)):(await e.ma.stop(),e.Pa.length>0&&(j(vr,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,u=new mc(t,n,o,i,s);return u.start(r),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _c(e,t){if(wn("AsyncQueue",`${t}: ${e}`),ai(e))return new q(O.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{static emptySet(t){return new $r(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Fi(),this.sortedSet=new It(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof $r)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new $r;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this.fa=new It(G.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):W(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal((n,r)=>{t.push(r)}),t}}class Jr{constructor(t,n,r,i,s,o,u,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Jr(t,n,$r.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ya(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class HS{constructor(){this.queries=Dd(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=Dd(),s.forEach((o,u)=>{for(const c of u.wa)c.onError(r)})})(this,new q(O.ABORTED,"Firestore shutting down"))}}function Dd(){return new Tr(e=>Pm(e),ya)}async function c_(e,t){const n=J(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new jS,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const u=_c(o,`Initialization of query '${kr(t.query)}' failed`);return void t.onError(u)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&yc(n)}async function h_(e,t){const n=J(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(t);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GS(e,t){const n=J(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const u of o.wa)u.Ca(i)&&(r=!0);o.ya=i}}r&&yc(n)}function WS(e,t,n){const r=J(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function yc(e){e.Da.forEach(t=>{t.next()})}var pl,kd;(kd=pl||(pl={})).Fa="default",kd.Cache="cache";class f_{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Jr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Jr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==pl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(t){this.key=t}}class p_{constructor(t){this.key=t}}class KS{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=rt(),this.mutatedKeys=rt(),this.Xa=xm(t),this.eu=new $r(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new Nd,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((h,d)=>{const p=i.get(h),m=va(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),E=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;p&&m?p.data.isEqual(m.data)?_!==E&&(r.track({type:3,doc:m}),v=!0):this.iu(p,m)||(r.track({type:2,doc:m}),v=!0,(c&&this.Xa(m,c)>0||l&&this.Xa(m,l)<0)&&(u=!0)):!p&&m?(r.track({type:0,doc:m}),v=!0):p&&!m&&(r.track({type:1,doc:p}),v=!0,(c||l)&&(u=!0)),v&&(m?(o=o.add(m),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:u,mutatedKeys:s}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const o=t.ru.pa();o.sort((h,d)=>function(m,_){const E=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:v})}};return E(m)-E(_)}(h.type,d.type)||this.Xa(h.doc,d.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new Jr(this.query,t.eu,s,o,t.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Nd,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=rt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return t.forEach(r=>{this.Za.has(r)||n.push(new p_(r))}),this.Za.forEach(r=>{t.has(r)||n.push(new d_(r))}),n}uu(t){this.Ha=t.qs,this.Za=rt();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Jr.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const vc="SyncEngine";class QS{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class XS{constructor(t){this.key=t,this.lu=!1}}class JS{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Tr(u=>Pm(u),ya),this.Tu=new Map,this.Iu=new Set,this.du=new It(G.comparator),this.Eu=new Map,this.Au=new uc,this.Ru={},this.Vu=new Map,this.mu=Xr.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function YS(e,t,n=!0){const r=w_(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await g_(r,t,n,!0),i}async function ZS(e,t){const n=w_(e);await g_(n,t,!0,!1)}async function g_(e,t,n,r){const i=await vS(e.localStore,Xe(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await tC(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&i_(e.remoteStore,i),u}async function tC(e,t,n,r,i){e.gu=(d,p,m)=>async function(E,v,S,C){let N=v.view.nu(S);N.Ds&&(N=await Rd(E.localStore,v.query,!1).then(({documents:I})=>v.view.nu(I,N)));const x=C&&C.targetChanges.get(v.targetId),M=C&&C.targetMismatches.get(v.targetId)!=null,U=v.view.applyChanges(N,E.isPrimaryClient,x,M);return Md(E,v.targetId,U._u),U.snapshot}(e,d,p,m);const s=await Rd(e.localStore,t,!0),o=new KS(t,s.qs),u=o.nu(s.documents),c=vs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(u,e.isPrimaryClient,c);Md(e,n,l._u);const h=new QS(t,n,o);return e.Pu.set(t,h),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),l.snapshot}async function eC(e,t,n){const r=J(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!ya(o,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fc(r.remoteStore,i.targetId),gl(r,i.targetId)}).catch(oi)):(gl(r,i.targetId),await fl(r.localStore,i.targetId,!0))}async function nC(e,t){const n=J(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fc(n.remoteStore,r.targetId))}async function rC(e,t,n){const r=cC(e);try{const i=await function(o,u){const c=J(o),l=wt.now(),h=u.reduce((m,_)=>m.add(_.key),rt());let d,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Tn(),E=rt();return c.Os.getEntries(m,h).next(v=>{_=v,_.forEach((S,C)=>{C.isValidDocument()||(E=E.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,_)).next(v=>{d=v;const S=[];for(const C of u){const N=vR(C,d.get(C.key).overlayedDocument);N!=null&&S.push(new Wn(C.key,N,Em(N.value.mapValue),Je.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,S,u)}).next(v=>{p=v;const S=v.applyToLocalDocumentSet(d,E);return c.documentOverlayCache.saveOverlays(m,v.batchId,S)})}).then(()=>({batchId:p.batchId,changes:Nm(d)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new It(tt)),l=l.insert(u,c),o.Ru[o.currentUser.toKey()]=l}(r,i.batchId,n),await Es(r,i.changes),await ba(r.remoteStore)}catch(i){const s=_c(i,"Failed to persist write");n.reject(s)}}async function m_(e,t){const n=J(e);try{const r=await mS(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?lt(o.lu,14607):i.removedDocuments.size>0&&(lt(o.lu,42227),o.lu=!1))}),await Es(n,r,t)}catch(r){await oi(r)}}function Od(e,t,n){const r=J(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const u=o.view.va(t);u.snapshot&&i.push(u.snapshot)}),function(o,u){const c=J(o);c.onlineState=u;let l=!1;c.queries.forEach((h,d)=>{for(const p of d.wa)p.va(u)&&(l=!0)}),l&&yc(c)}(r.eventManager,t),i.length&&r.hu.J_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function iC(e,t,n){const r=J(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let o=new It(G.comparator);o=o.insert(s,ee.newNoDocument(s,Q.min()));const u=rt().add(s),c=new Ta(Q.min(),new Map,new It(tt),o,u);await m_(r,c),r.du=r.du.remove(s),r.Eu.delete(t),wc(r)}else await fl(r.localStore,t,!1).then(()=>gl(r,t,n)).catch(oi)}async function sC(e,t){const n=J(e),r=t.batch.batchId;try{const i=await gS(n.localStore,t);y_(n,r,null),__(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Es(n,i)}catch(i){await oi(i)}}async function oC(e,t,n){const r=J(e);try{const i=await function(o,u){const c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,u).next(d=>(lt(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,t);y_(r,t,n),__(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Es(r,i)}catch(i){await oi(i)}}function __(e,t){(e.Vu.get(t)||[]).forEach(n=>{n.resolve()}),e.Vu.delete(t)}function y_(e,t,n){const r=J(e);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function gl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(r=>{e.Au.containsKey(r)||v_(e,r)})}function v_(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(fc(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),wc(e))}function Md(e,t,n){for(const r of n)r instanceof d_?(e.Au.addReference(r.key,t),aC(e,r)):r instanceof p_?(j(vc,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||v_(e,r.key)):W(19791,{yu:r})}function aC(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(j(vc,"New document in limbo: "+n),e.Iu.add(r),wc(e))}function wc(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new G(mt.fromString(t)),r=e.mu.next();e.Eu.set(r,new XS(n)),e.du=e.du.insert(n,r),i_(e.remoteStore,new Vn(Xe(rc(n.path)),r,"TargetPurposeLimboResolution",ga.ue))}}async function Es(e,t,n){const r=J(e),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((u,c)=>{o.push(r.gu(c,t,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){const d=l?!l.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);const d=cc.Es(c.targetId,l);s.push(d)}}))}),await Promise.all(o),r.hu.J_(i),await async function(c,l){const h=J(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(l,p=>L.forEach(p.Is,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>L.forEach(p.ds,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!ai(d))throw d;j(hc,"Failed to update sequence numbers: "+d)}for(const d of l){const p=d.targetId;if(!d.fromCache){const m=h.Fs.get(p),_=m.snapshotVersion,E=m.withLastLimboFreeSnapshotVersion(_);h.Fs=h.Fs.insert(p,E)}}}(r.localStore,s))}async function uC(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){j(vc,"User change. New user:",t.toKey());const r=await t_(n.localStore,t);n.currentUser=t,function(s,o){s.Vu.forEach(u=>{u.forEach(c=>{c.reject(new q(O.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Es(n,r.Bs)}}function lC(e,t){const n=J(e),r=n.Eu.get(t);if(r&&r.lu)return rt().add(r.key);{let i=rt();const s=n.Tu.get(t);if(!s)return i;for(const o of s){const u=n.Pu.get(o);i=i.unionWith(u.view.tu)}return i}}function w_(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=m_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=lC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=iC.bind(null,t),t.hu.J_=GS.bind(null,t.eventManager),t.hu.pu=WS.bind(null,t.eventManager),t}function cC(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oC.bind(null,t),t}class Yo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Aa(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return pS(this.persistence,new hS,t.initialUser,this.serializer)}Du(t){return new Zm(lc.Vi,this.serializer)}bu(t){return new ES}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yo.provider={build:()=>new Yo};class hC extends Yo{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){lt(this.persistence.referenceDelegate instanceof Xo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new XR(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?fe.withCacheSize(this.cacheSizeBytes):fe.DEFAULT;return new Zm(r=>Xo.Vi(r,n),this.serializer)}}class ml{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Od(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uC.bind(null,this.syncEngine),await zS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new HS}()}createDatastore(t){const n=Aa(t.databaseInfo.databaseId),r=function(s){return new RS(s)}(t.databaseInfo);return function(s,o,u,c){return new xS(s,o,u,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,u){return new NS(r,i,s,o,u)}(this.localStore,this.datastore,t.asyncQueue,n=>Od(this.syncEngine,n,0),function(){return Pd.C()?new Pd:new TS}())}createSyncEngine(t,n){return function(i,s,o,u,c,l,h){const d=new JS(i,s,o,u,c,l);return h&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=J(i);j(vr,"RemoteStore shutting down."),s.Ia.add(5),await ws(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ml.provider={build:()=>new ml};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):wn("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="FirestoreClient";class fC{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=te.UNAUTHENTICATED,this.clientId=Jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{j(jn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(j(jn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=_c(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function mu(e,t){e.asyncQueue.verifyOperationInProgress(),j(jn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await t_(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>{Fn("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Fn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),e._offlineComponents=t}async function Ld(e,t){e.asyncQueue.verifyOperationInProgress();const n=await dC(e);j(jn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Vd(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Vd(t.remoteStore,i)),e._onlineComponents=t}async function dC(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){j(jn,"Using user provided OfflineComponentProvider");try{await mu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fn("Error using user provided cache. Falling back to memory cache: "+n),await mu(e,new Yo)}}else j(jn,"Using default OfflineComponentProvider"),await mu(e,new hC(void 0));return e._offlineComponents}async function T_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(j(jn,"Using user provided OnlineComponentProvider"),await Ld(e,e._uninitializedComponentsProvider._online)):(j(jn,"Using default OnlineComponentProvider"),await Ld(e,new ml))),e._onlineComponents}function pC(e){return T_(e).then(t=>t.syncEngine)}async function A_(e){const t=await T_(e),n=t.eventManager;return n.onListen=YS.bind(null,t.syncEngine),n.onUnlisten=eC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ZS.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=nC.bind(null,t.syncEngine),n}function gC(e,t,n={}){const r=new gn;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,u,c,l){const h=new E_({next:p=>{h.Ou(),o.enqueueAndForget(()=>h_(s,d));const m=p.docs.has(u);!m&&p.fromCache?l.reject(new q(O.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new q(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),d=new f_(rc(u.path),h,{includeMetadataChanges:!0,ka:!0});return c_(s,d)}(await A_(e),e.asyncQueue,t,n,r)),r.promise}function mC(e,t,n={}){const r=new gn;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,u,c,l){const h=new E_({next:p=>{h.Ou(),o.enqueueAndForget(()=>h_(s,d)),p.fromCache&&c.source==="server"?l.reject(new q(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),d=new f_(u,h,{includeMetadataChanges:!0,ka:!0});return c_(s,d)}(await A_(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="firestore.googleapis.com",Ud=!0;class Bd{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b_,this.ssl=Ud}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Ud;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ym;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<KR)throw new q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Nb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I_((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ra{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bd(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ab;switch(r.type){case"firstParty":return new Sb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fd.get(n);r&&(j("ComponentProvider","Removing Datastore"),Fd.delete(n),r.terminate())}(this),Promise.resolve()}}function _C(e,t,n,r={}){var i;e=En(e,Ra);const s=Kl(t),o=e._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;s&&(XA(`https://${c}`),tI("Firestore",!0)),o.host!==b_&&o.host!==c&&Fn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Uo(l,u)&&(e._setSettings(l),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=te.MOCK_USER;else{h=JA(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new te(p)}e._authCredentials=new Ib(new um(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Kn(this.firestore,t,this._query)}}class Vt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new On(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Vt(this.firestore,t,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(_s(n,Vt._jsonSchema))return new Vt(t,r||null,new G(mt.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:kt("string",Vt._jsonSchemaVersion),referencePath:kt("string")};class On extends Kn{constructor(t,n,r){super(t,n,rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Vt(this.firestore,null,new G(t))}withConverter(t){return new On(this.firestore,t,this._path)}}function R_(e,t,...n){if(e=yn(e),cm("collection","path",t),e instanceof Ra){const r=mt.fromString(t,...n);return Zf(r),new On(e,null,r)}{if(!(e instanceof Vt||e instanceof On))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(mt.fromString(t,...n));return Zf(r),new On(e.firestore,null,r)}}function S_(e,t,...n){if(e=yn(e),arguments.length===1&&(t=Jl.newId()),cm("doc","path",t),e instanceof Ra){const r=mt.fromString(t,...n);return Yf(r),new Vt(e,null,new G(r))}{if(!(e instanceof Vt||e instanceof On))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(mt.fromString(t,...n));return Yf(r),new Vt(e.firestore,e instanceof On?e.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="AsyncQueue";class qd{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new n_(this,"async_queue_retry"),this.oc=()=>{const r=gu();r&&j($d,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=gu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=gu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new gn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!ai(t))throw t;j($d,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const n=this._c.then(()=>(this.nc=!0,t().catch(r=>{throw this.tc=r,this.nc=!1,wn("INTERNAL UNHANDLED ERROR: ",zd(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const i=mc.createAndSchedule(this,t,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&W(47125,{hc:zd(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function zd(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ts extends Ra{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new qd,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new qd(t),this._firestoreClient=void 0,await t}}}function yC(e,t){const n=typeof e=="object"?e:cb(),r=typeof e=="string"?e:zo,i=sb(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=KA("firestore");s&&_C(i,...s)}return i}function Ec(e){if(e._terminated)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||vC(e),e._firestoreClient}function vC(e){var t,n,r;const i=e._freezeSettings(),s=function(u,c,l,h){return new jb(u,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,I_(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new fC(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ce(Wt.fromBase64String(t))}catch(n){throw new q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ce(Wt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ce._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(_s(t,Ce._jsonSchema))return Ce.fromBase64String(t.bytes)}}Ce._jsonSchemaVersion="firestore/bytes/1.0",Ce._jsonSchema={type:kt("string",Ce._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return tt(this._lat,t._lat)||tt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ze._jsonSchemaVersion}}static fromJSON(t){if(_s(t,Ze._jsonSchema))return new Ze(t.latitude,t.longitude)}}Ze._jsonSchemaVersion="firestore/geoPoint/1.0",Ze._jsonSchema={type:kt("string",Ze._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:tn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(_s(t,tn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new tn(t.vectorValues);throw new q(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tn._jsonSchemaVersion="firestore/vectorValue/1.0",tn._jsonSchema={type:kt("string",tn._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=/^__.*__$/;class EC{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Wn(t,this.data,this.fieldMask,n,this.fieldTransforms):new ys(t,this.data,n,this.fieldTransforms)}}class C_{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Wn(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function P_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:e})}}class Ac{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Ac(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.fc(t),i}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Zo(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(P_(this.Ec)&&wC.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class TC{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Aa(t)}Dc(t,n,r,i=!1){return new Ac({Ec:t,methodName:n,bc:r,path:Gt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ic(e){const t=e._freezeSettings(),n=Aa(e._databaseId);return new TC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function AC(e,t,n,r,i,s={}){const o=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);bc("Data must be an object, but it was:",o,r);const u=x_(r,o);let c,l;if(s.merge)c=new Ie(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=_l(t,d,n);if(!o.contains(p))throw new q(O.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);N_(h,p)||h.push(p)}c=new Ie(h),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new EC(new de(u),c,l)}class Ca extends Tc{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ca}}function IC(e,t,n,r){const i=e.Dc(1,t,n);bc("Data must be an object, but it was:",i,r);const s=[],o=de.empty();Gn(r,(c,l)=>{const h=Rc(t,c,n);l=yn(l);const d=i.gc(h);if(l instanceof Ca)s.push(h);else{const p=As(l,d);p!=null&&(s.push(h),o.set(h,p))}});const u=new Ie(s);return new C_(o,u,i.fieldTransforms)}function bC(e,t,n,r,i,s){const o=e.Dc(1,t,n),u=[_l(t,r,n)],c=[i];if(s.length%2!=0)throw new q(O.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)u.push(_l(t,s[p])),c.push(s[p+1]);const l=[],h=de.empty();for(let p=u.length-1;p>=0;--p)if(!N_(l,u[p])){const m=u[p];let _=c[p];_=yn(_);const E=o.gc(m);if(_ instanceof Ca)l.push(m);else{const v=As(_,E);v!=null&&(l.push(m),h.set(m,v))}}const d=new Ie(l);return new C_(h,d,o.fieldTransforms)}function RC(e,t,n,r=!1){return As(n,e.Dc(r?4:3,t))}function As(e,t){if(V_(e=yn(e)))return bc("Unsupported field value:",t,e),x_(e,t);if(e instanceof Tc)return function(r,i){if(!P_(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const u of r){let c=As(u,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=yn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=wt.fromDate(r);return{timestampValue:Qo(i.serializer,s)}}if(r instanceof wt){const s=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qo(i.serializer,s)}}if(r instanceof Ze)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ce)return{bytesValue:Hm(i.serializer,r._byteString)};if(r instanceof Vt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ac(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof tn)return function(o,u){return{mapValue:{fields:{[vm]:{stringValue:wm},[jo]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw u.wc("VectorValues must only contain numeric values.");return ic(u.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${pa(r)}`)}(e,t)}function x_(e,t){const n={};return dm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gn(e,(r,i)=>{const s=As(i,t.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function V_(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof wt||e instanceof Ze||e instanceof Ce||e instanceof Vt||e instanceof Tc||e instanceof tn)}function bc(e,t,n){if(!V_(n)||!hm(n)){const r=pa(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function _l(e,t,n){if((t=yn(t))instanceof Sa)return t._internalPath;if(typeof t=="string")return Rc(e,t);throw Zo("Field path arguments must be of type string or ",e,!1,void 0,n)}const SC=new RegExp("[~\\*/\\[\\]]");function Rc(e,t,n){if(t.search(SC)>=0)throw Zo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Sa(...t.split("."))._internalPath}catch{throw Zo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Zo(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${t}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new q(O.INVALID_ARGUMENT,u+e+c)}function N_(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new CC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Sc("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CC extends D_{data(){return super.data()}}function Sc(e,t){return typeof t=="string"?Rc(e,t):t instanceof Sa?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new q(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cc{}class Pc extends Cc{}function xC(e,t,...n){let r=[];t instanceof Cc&&r.push(t),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof Vc).length,u=s.filter(c=>c instanceof xc).length;if(o>1||o>0&&u>0)throw new q(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class xc extends Pc{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new xc(t,n,r)}_apply(t){const n=this._parse(t);return k_(t._query,n),new Kn(t.firestore,t.converter,al(t._query,n))}_parse(t){const n=Ic(t.firestore);return function(s,o,u,c,l,h,d){let p;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Hd(d,h);const _=[];for(const E of d)_.push(jd(c,s,E));p={arrayValue:{values:_}}}else p=jd(c,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Hd(d,h),p=RC(u,o,d,h==="in"||h==="not-in");return Dt.create(l,h,p)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Vc extends Cc{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Vc(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const u=s.getFlattenedFilters();for(const c of u)k_(o,c),o=al(o,c)}(t._query,n),new Kn(t.firestore,t.converter,al(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nc extends Pc{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Nc(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cs(s,o)}(t._query,this._field,this._direction);return new Kn(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ui(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function VC(e,t="asc"){const n=t,r=Sc("orderBy",e);return Nc._create(r,n)}class Dc extends Pc{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new Dc(t,n,r)}_apply(t){return new Kn(t.firestore,t.converter,Go(t._query,this._limit,this._limitType))}}function NC(e){return Db("limit",e),Dc._create("limit",e,"F")}function jd(e,t,n){if(typeof(n=yn(n))=="string"){if(n==="")throw new q(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cm(t)&&n.indexOf("/")!==-1)throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(mt.fromString(n));if(!G.isDocumentKey(r))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ad(e,new G(r))}if(n instanceof Vt)return ad(e,n._key);throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pa(n)}.`)}function Hd(e,t){if(!Array.isArray(e)||e.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function k_(e,t){const n=function(i,s){for(const o of i)for(const u of o.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class DC{convertValue(t,n="none"){switch(qn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ct(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes($n(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw W(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Gn(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n[jo].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ct(o.doubleValue));return new tn(s)}convertGeoPoint(t){return new Ze(Ct(t.latitude),Ct(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=_a(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(as(t));default:return null}}convertTimestamp(t){const n=Bn(t);return new wt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=mt.fromString(t);lt(Jm(r),9688,{name:t});const i=new us(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||wn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class Bi{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class fr extends D_{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new fo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Sc("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=fr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fr._jsonSchemaVersion="firestore/documentSnapshot/1.0",fr._jsonSchema={type:kt("string",fr._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class fo extends fr{data(t={}){return super.data(t)}}class qr{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new fo(this._firestore,this._userDataWriter,r.key,r,new Bi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{const c=new fo(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Bi(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new fo(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Bi(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return u.type!==0&&(l=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),h=o.indexOf(u.doc.key)),{type:OC(u.type),doc:c,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=qr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Jl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function OC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(e){e=En(e,Vt);const t=En(e.firestore,Ts);return gC(Ec(t),e._key).then(n=>FC(t,e,n))}qr._jsonSchemaVersion="firestore/querySnapshot/1.0",qr._jsonSchema={type:kt("string",qr._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class M_ extends DC{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ce(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function L_(e){e=En(e,Kn);const t=En(e.firestore,Ts),n=Ec(t),r=new M_(t);return PC(e._query),mC(n,e._query).then(i=>new qr(t,r,e,i))}function MC(e,t,n){e=En(e,Vt);const r=En(e.firestore,Ts),i=kC(e.converter,t);return F_(r,[AC(Ic(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Je.none())])}function LC(e,t,n,...r){e=En(e,Vt);const i=En(e.firestore,Ts),s=Ic(i);let o;return o=typeof(t=yn(t))=="string"||t instanceof Sa?bC(s,"updateDoc",e._key,t,n,r):IC(s,"updateDoc",e._key,t),F_(i,[o.toMutation(e._key,Je.exists(!0))])}function F_(e,t){return function(r,i){const s=new gn;return r.asyncQueue.enqueueAndForget(async()=>rC(await pC(r),i,s)),s.promise}(Ec(e),t)}function FC(e,t,n){const r=n.docs.get(t._key),i=new M_(e);return new fr(e,i,t._key,r,new Bi(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){si=i})(lb),$o(new is("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),u=new Ts(new bb(r.getProvider("auth-internal")),new Cb(o,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new us(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Br(Wf,Kf,t),Br(Wf,Kf,"esm2017")})();const UC={apiKey:"AIzaSyAZsdXZU6WbM33SaKP5PoYm7G0V2ABYUSU",authDomain:"great-wave-everywhere.firebaseapp.com",projectId:"great-wave-everywhere",storageBucket:"great-wave-everywhere.firebasestorage.app",messagingSenderId:"636756607685",appId:"1:636756607685:web:2199075bc12821f89466ac",measurementId:"G-XRVYGKFWJ8"},BC=Yg(UC),Pa=yC(BC);async function $C(e){const t=S_(Pa,"words",e.toLowerCase()),n=await O_(t);n.exists()?await LC(t,{count:n.data().count+1}):await MC(t,{count:1})}async function Gd(){return(await L_(R_(Pa,"words"))).docs.map(t=>({id:t.id,count:t.data().count}))}async function Wd(e=5){const t=xC(R_(Pa,"words"),VC("count","desc"),NC(e));return(await L_(t)).docs.map(r=>({id:r.id,count:r.data().count}))}async function qC(e){const t=S_(Pa,"words",e.toLowerCase()),n=await O_(t);return console.log("fetchImagesForWord:",{word:e,ref:t,exists:n.exists(),data:n.data()}),n.exists()?n.data().images||[]:[]}var zC=Hn('<div class="loading-indicator svelte-1ebz1p7">Loading...</div>'),jC=Hn('<img alt="Header image"/>'),HC=(e,t)=>{e.key==="Enter"&&t()},GC=ei('<path fill="#ADC2CE" stroke="#377293" stroke-width="0.5"></path>'),WC=(e,t,n,r)=>{et(t,B(n).domain,!0),et(r,B(n).city||B(n).country||"Unknown location",!0)},KC=(e,t,n)=>{et(t,null),et(n,"")},QC=ei('<g class="location-pin svelte-1ebz1p7"><circle class="pin svelte-1ebz1p7"></circle></g>'),XC=ei(" <!>",1),JC=ei('<svg width="200" height="125" viewBox="0 0 200 125" class="world-map svelte-1ebz1p7"><!><!></svg>'),YC=Hn('<span style="color: #377293; font-weight: bold; font-size: 0.95rem;"> </span>'),ZC=(e,t,n,r,i,s)=>{et(t,n(B(r).link),!0);const o=B(i).find(u=>u.domain===B(t));et(s,o?o.city||o.country||o.domain||"Unknown location":B(t)||"Unknown location",!0),console.log("Hovered Domain:",B(t))},tP=(e,t,n)=>{et(t,null),et(n,"")},eP=Hn('<div class="image-with-title svelte-1ebz1p7"><a target="_blank" rel="noopener noreferrer"><img style="" class="svelte-1ebz1p7"/></a> <div class="image-title-box"><!></div></div>'),nP=Hn('<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;"><span style="color: #377293; font-weight: bold; font-size: 0.95rem;">Hover for image server locations:</span> <!></div> <div class="image-container svelte-1ebz1p7"></div>',1),rP=Hn(`<div class="no-images-placeholder svelte-1ebz1p7"><p class="svelte-1ebz1p7">Enter a search term above to query Google Images for "Great Wave off
            Kanagawa + [your search term]." Your search results will appear
            here.</p></div>`),iP=ei('<line stroke="#fff" stroke-opacity="0.6" stroke-width="2" class="svelte-1ebz1p7"></line>'),sP=(e,t,n)=>t(B(n).id),oP=ei('<text fill="steelblue" text-anchor="middle" alignment-baseline="middle" filter="url(#dropshadow)" style="cursor: pointer;" class="svelte-1ebz1p7"> </text>'),aP=Hn('<li class="svelte-1ebz1p7"> <span class="count svelte-1ebz1p7"> </span></li>'),uP=Hn(`<main class="svelte-1ebz1p7"><!>  <div class="header svelte-1ebz1p7"><div class="header-image-crossfade svelte-1ebz1p7"></div> <div><div class="title svelte-1ebz1p7">GREAT WAVE <span style="color: #F0BF91;">REMIX</span></div> <p class="subtitle svelte-1ebz1p7">Discover Hokusai's "Great Wave off Kanagawa" in unexpected contexts
        worldwide. Search Google Images for any term you associate with this
        iconic Japanese artwork to see how it has been reimagined in formats
        spanning diverse topics and cultures.</p></div></div> <div class="header-piping svelte-1ebz1p7"></div> <h1 class="svelte-1ebz1p7">HOKUSAI'S <em class="italic svelte-1ebz1p7">GREAT WAVE</em> CAN BE <input type="text" placeholder="ANYTHING" class="svelte-1ebz1p7"/> <div class="search-container svelte-1ebz1p7"><div class="button-wrapper svelte-1ebz1p7"><button class="svelte-1ebz1p7">Remix</button></div> <div class="call-to-action svelte-1ebz1p7">No images yet â enter a search term!</div></div></h1> <div class="main-grid svelte-1ebz1p7"><div class="left-column svelte-1ebz1p7"><div class="map-container svelte-1ebz1p7"><!></div> <!> <!></div> <div class="right-column svelte-1ebz1p7"><div class="word-cloud-container svelte-1ebz1p7"><div class="call-to-action svelte-1ebz1p7">Or click on a trending topic!</div> <svg width="120%" height="400" viewBox="0 0 480 400" class="svelte-1ebz1p7"><defs><filter id="dropshadow" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="1" dy="1" stdDeviation="1" flood-opacity="0.3"></feDropShadow></filter></defs><g style="transform: translate(0, -100px)"><!><!></g></svg> <div class="trending-panel svelte-1ebz1p7"><ul class="svelte-1ebz1p7"></ul></div></div></div></div> <div style="text-align: left; color: #377293; padding-top: 5rem;"><h2 class="svelte-1ebz1p7">Why remix the "Great Wave?"</h2> This project explores the impact of Hokusai's iconic artwork, allowing users
    to see for themselves how it continues to reverberate worldwide. Two centuries
    since its creation around 1831, scholars say Hokusaiâs print is possibly the
    most reproduced image in the history of art, with global recognition far beyond
    its original Japanese audience.</div> <div class="bottom-panel"><div class="chart-container svelte-1ebz1p7"><div><p class="svelte-1ebz1p7">The exponential-like rise in frequency of the phrase âGreat Wave off
          Kanagawaâ in millions of Google Books shows references to the artwork
          appearing more frequently over time, reflecting Japan's rise as a
          cultural superpower.</p> <p class="svelte-1ebz1p7">The print helped spark Japonisme in the West (influencing Monet, van
          Gogh, and others), and that early cultural exchange laid the
          foundation for global fame. European artists and critics rediscovered
          Japanese woodblocks after Japan opened to trade in the 19th century,
          elevating Hokusaiâs work in Western art circles.</p> <p class="svelte-1ebz1p7">"Great Wave" now appears everywhere â from high fashion and novelty
          goods to digital art, emojis, and even LEGO sets. It was chosen for
          the 2024 Japanese 1,000-yen note â a highly public national symbol.</p></div> <div><p class="chart-title svelte-1ebz1p7">Mentions of "Great Wave off Kanagawa" over time</p> <img src="/great-wave-everywhere/ngram_chart_great_wave_off_kanagawa.png" alt="Google Ngram Viewer chart for 'Great Wave off Kanagawa'" class="ngram-chart svelte-1ebz1p7"/> <p class="svelte-1ebz1p7">Source: Google Books Ngram Viewer, English corpus, 1900â2022</p></div></div></div></main>`);function lP(e,t){sp(t,!0);let n=Mt(0),r;const i=["/great-wave-everywhere/main-image.jpeg","/great-wave-everywhere/Hokusai-Great_Wave_off_Kanagawa-cat-end.jpg","/great-wave-everywhere/tomoko_nagao_hokusai-the_great_wave_of_kanagawa_with_mc_cupnoodle_kewpie_kikkoman_and_kitty_2012_digital_art_50_x_70_cm-_70_x_100_cm.jpe_3.jpg","/great-wave-everywhere/135e9cb8ff232a9c7e1f1be108eb670f.jpg","/great-wave-everywhere/2372ef58832305.5a0b25df284b7.jpg.webp","/great-wave-everywhere/image_BT0qjFvT31.png.jpeg"];Eu(()=>{r=setInterval(()=>{et(n,(B(n)+1)%i.length)},5e3)}),Rv(()=>{clearInterval(r)});async function s(H){et(l,await qC(H),!0),et(h,"");const z=B(l).map(nt=>nt.link).filter(Boolean);let K=[];if(z.length>0)try{K=(await At.post("https://great-wave-api-1muq.onrender.com/api/geolocate",{urls:z})).data}catch{}et(E,K.filter(nt=>{if(nt==null)return!1;const yt=Number(nt.lat),St=Number(nt.lng);return!(isNaN(yt)||isNaN(St)||yt===0&&St===0)}),!0)}function o(H){if(!H)return null;try{return H.replace(/^https?:\/\//,"").split("?")[0].replace(/\/$/,"")}catch{return null}}function u(H){if(!H)return null;try{const z=H.startsWith("http")?H:`https://${H}`;return new URL(z).hostname}catch{return H}}let c=Mt(null),l=Mt(He([])),h=Mt(""),d=Mt(He([])),p=Mt(He([])),m=Mt(He([])),_=Mt(!1),E=Mt(He([])),v=Mt(null),S=Mt("");async function C(){try{const H=await fetch("/great-wave-everywhere/ne_110m_admin_0_countries.json");if(!H.ok)throw new Error(`HTTP ${H.status}: ${H.statusText}`);const z=await H.json(),K=Object.keys(z.objects)[0];et(v,Df(z,z.objects[K]),!0)}catch{try{const z=await fetch("/ne_110m_admin_0_countries.json");if(z.ok){const K=await z.json(),nt=Object.keys(K.objects)[0];et(v,Df(K,K.objects[nt]),!0)}}catch{}}}Eu(async()=>{et(_,!0);try{try{et(d,await Gd(),!0),et(m,await Wd(5),!0),x(),M()}catch(H){console.warn("Firebase connection failed:",H),et(d,[],!0),et(m,[],!0)}await C()}finally{et(_,!1)}});async function N(){if(B(h)){et(_,!0);try{const H=await At.get(`https://great-wave-api-1muq.onrender.com/api/images?q=${B(h)}`);et(l,H.data,!0);const z=B(l).map(nt=>nt.link).filter(Boolean);let K=[];if(z.length>0)try{K=(await At.post("https://great-wave-api-1muq.onrender.com/api/geolocate",{urls:z})).data,console.log("Geolocation API data:",K)}catch{}et(E,K.filter(nt=>{if(nt==null)return!1;const yt=Number(nt.lat),St=Number(nt.lng);return!(isNaN(yt)||isNaN(St)||yt===0&&St===0)}),!0);try{await $C(B(h)),et(d,await Gd(),!0),et(m,await Wd(5),!0),x(),M()}catch(nt){console.warn("Firebase update failed:",nt)}et(h,"")}catch(H){console.error("Error fetching images",H)}finally{et(_,!1)}}}function x(){et(p,[],!0);for(let H=1;H<B(d).length;H++)B(p).push({source:B(d)[H-1].id,target:B(d)[H].id})}function M(){const H=Math.max(...B(d).map(z=>z.count));W1(B(d)).force("link",U1(B(p)).id(z=>z.id).distance(25)).force("charge",K1().strength(-100)).force("center",E1(200,300)).force("gravity",Q1(z=>150*(1-z.count/H),200,300).strength(.5)).force("boundary",()=>{B(d).forEach(z=>{z.x=Math.max(20,Math.min(380,z.x||0)),z.y=Math.max(20,Math.min(580,z.y||0))})}).on("tick",()=>{et(d,[...B(d)],!0)})}function U(H){return B(d).find(z=>z.id===H)}function I(H){const z=U(H.source),K=U(H.target);return{x1:(z==null?void 0:z.x)||0,y1:(z==null?void 0:z.y)||0,x2:(K==null?void 0:K.x)||0,y2:(K==null?void 0:K.y)||0}}var w=uP(),T=Tt(w);{var R=H=>{var z=zC();$t(H,z)};ln(T,H=>{B(_)&&H(R)})}var b=Bt(T,2),P=Tt(b);ir(P,21,()=>i,rr,(H,z,K)=>{var nt=jC();let yt;Le(St=>{ie(nt,"src",B(z)),yt=vv(nt,1,"svelte-1ebz1p7",null,yt,St)},[()=>({visible:B(n)===K,hidden:B(n)!==K})]),$t(H,nt)});var A=Bt(b,4),X=Bt(Tt(A),3);X.__keydown=[HC,N];var F=Bt(X,2),Y=Tt(F),ct=Tt(Y);ct.__click=N;var _t=Bt(A,2),Ot=Tt(_t),ke=Tt(Ot),ye=Tt(ke);{var Ft=H=>{var z=JC();const K=Bs(()=>DA().scale(40).translate([100,62.5])),nt=Bs(()=>EA().projection(B(K)));var yt=Tt(z);ir(yt,17,()=>B(v).features,rr,(Ut,Qt,ve)=>{var le=Ja();const ft=Bs(()=>B(nt)(B(Qt)));var bt=bi(le);{var ce=Oe=>{var on=GC();Le(()=>ie(on,"d",B(ft))),$t(Oe,on)},Xn=Oe=>{var on=uv();Le(Xt=>xr(on,Xt),[()=>{var Xt;return console.log(`No path data for country ${ve}:`,(Xt=B(Qt).geometry)==null?void 0:Xt.type)}]),$t(Oe,on)};ln(bt,Oe=>{B(ft)?Oe(ce):Oe(Xn,!1)})}$t(Ut,le)});var St=Bt(yt);{var Kt=Ut=>{var Qt=Ja(),ve=bi(Qt);ir(ve,17,()=>B(E),rr,(le,ft)=>{var bt=XC();const ce=Bs(()=>B(K)([B(ft).lng,B(ft).lat]));var Xn=bi(bt),Oe=Bt(Xn);{var on=Xt=>{var Jn=QC();Jn.__mouseover=[WC,c,ft,S],Jn.__mouseout=[KC,c,S];var Yn=Tt(Jn);Le(()=>{ie(Yn,"cx",B(ce)[0]),ie(Yn,"cy",B(ce)[1]),ie(Yn,"r",B(c)===B(ft).domain?7:4),ie(Yn,"fill",B(c)===B(ft).domain?"#ff4500":"#ff6b35")}),$t(Xt,Jn)};ln(Oe,Xt=>{B(ce)&&Xt(on)})}Le(Xt=>xr(Xn,Xt),[()=>console.log(B(ft))]),$t(le,bt)}),$t(Ut,Qt)};ln(St,Ut=>{B(E).length>0&&Ut(Kt)})}$t(H,z)};ln(ye,H=>{B(l).length>0&&B(v)&&H(Ft)})}var ht=Bt(ke,2);{var In=H=>{var z=nP(),K=bi(z),nt=Bt(Tt(K),2);{var yt=Kt=>{var Ut=YC(),Qt=Tt(Ut);Le(()=>xr(Qt,B(S))),$t(Kt,Ut)};ln(nt,Kt=>{B(S)&&Kt(yt)})}var St=Bt(K,2);ir(St,21,()=>B(l),rr,(Kt,Ut)=>{var Qt=eP(),ve=Tt(Qt),le=Tt(ve);le.__mouseover=[ZC,c,u,Ut,E,S],le.__mouseout=[tP,c,S];var ft=Bt(ve,2),bt=Tt(ft);mv(bt,()=>`<textarea readonly rows='2'>${B(Ut).title}</textarea>`),Le(ce=>{ie(ve,"href",B(Ut).link),ie(le,"src",B(Ut).link),wv(ft,`background: ${ce??""};`)},[()=>B(c)===o(B(Ut).link)?"#ffe5d0":"#f9f9f9"]),sv("error",le,ce=>{ce.target.src=""}),$t(Kt,Qt)}),$t(H,z)};ln(ht,H=>{B(l).length>0&&H(In)})}var ue=Bt(ht,2);{var xa=H=>{var z=rP();$t(H,z)};ln(ue,H=>{B(l).length===0&&H(xa)})}var Ir=Bt(Ot,2),Va=Tt(Ir),Is=Bt(Tt(Va),2),br=Bt(Tt(Is)),Qn=Tt(br);ir(Qn,17,()=>B(p),rr,(H,z)=>{var K=Ja(),nt=bi(K);{var yt=St=>{var Kt=iP();Le((Ut,Qt,ve,le)=>{ie(Kt,"x1",Ut),ie(Kt,"y1",Qt),ie(Kt,"x2",ve),ie(Kt,"y2",le)},[()=>I(B(z)).x1,()=>I(B(z)).y1,()=>I(B(z)).x2,()=>I(B(z)).y2]),$t(St,Kt)};ln(nt,St=>{U(B(z).source)&&U(B(z).target)&&St(yt)})}$t(H,K)});var ci=Bt(Qn);ir(ci,17,()=>B(d),rr,(H,z)=>{var K=oP();K.__click=[sP,s,z],K.__mouseover=yt=>{yt.target.style.fill="#ff6b35",yt.target.style.cursor="pointer"},K.__mouseout=yt=>{yt.target.style.fill="steelblue"};var nt=Tt(K);Le(()=>{ie(K,"x",B(z).x),ie(K,"y",B(z).y),ie(K,"font-size",`${8+B(z).count}px`),xr(nt,B(z).id)}),$t(H,K)});var hi=Bt(Is,2),fi=Tt(hi);ir(fi,21,()=>B(m),rr,(H,z)=>{var K=aP(),nt=Tt(K),yt=Bt(nt),St=Tt(yt);Le(()=>{xr(nt,`${B(z).id??""} `),xr(St,`(${B(z).count??""})`)}),$t(H,K)}),bv(X,()=>B(h),H=>et(h,H)),$t(e,w),op()}ov(["keydown","click","mouseover","mouseout"]);lv(lP,{target:document.getElementById("app")});

var Iy=Object.defineProperty;var Ry=(e,t,n)=>t in e?Iy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var nu=(e,t,n)=>Ry(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Lh=!1;var xl=Array.isArray,by=Array.prototype.indexOf,Vl=Array.from,Sy=Object.defineProperty,Qi=Object.getOwnPropertyDescriptor,Cy=Object.getOwnPropertyDescriptors,Py=Object.prototype,xy=Array.prototype,up=Object.getPrototypeOf,Fh=Object.isExtensible;function Vy(e){for(var t=0;t<e.length;t++)e[t]()}const Ce=2,lp=4,ha=8,Nl=16,bn=32,ai=64,Dl=128,Ee=256,Ao=512,Pe=1024,vn=2048,Ar=4096,_n=8192,kl=16384,cp=32768,Ol=65536,Uh=1<<17,Ny=1<<18,hp=1<<19,Cu=1<<20,ru=Symbol("$state"),Dy=Symbol(""),fp=new class extends Error{constructor(){super(...arguments);nu(this,"name","StaleReactionError");nu(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function dp(e){return e===this.v}function ky(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function pp(e){return!ky(e,this.v)}function Oy(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function My(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ly(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Fy(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Uy(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function By(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function $y(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let qy=!1;const Ml=1,Ll=2,gp=4,jy=8,zy=16,Hy=1,Gy=2,ce=Symbol(),Wy="http://www.w3.org/1999/xhtml";function mp(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let de=null;function Bh(e){de=e}function _p(e,t=!1,n){var r=de={p:de,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Sp(()=>{r.d=!0})}function yp(e){const t=de;if(t!==null){const o=t.e;if(o!==null){var n=gt,r=ut;t.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];qn(s.effect),Ze(s.reaction),Cp(s.fn)}}finally{qn(n),Ze(r)}}de=t.p,t.m=!0}return{}}function vp(){return!0}function qe(e){if(typeof e!="object"||e===null||ru in e)return e;const t=up(e);if(t!==Py&&t!==xy)return e;var n=new Map,r=xl(e),i=Ot(0),s=ut,o=u=>{var l=ut;Ze(s);var c=u();return Ze(l),c};return r&&n.set("length",Ot(e.length)),new Proxy(e,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Uy();var h=n.get(l);return h===void 0?h=o(()=>{var d=Ot(c.value);return n.set(l,d),d}):tt(h,c.value,!0),!0},deleteProperty(u,l){var c=n.get(l);if(c===void 0){if(l in u){const p=o(()=>Ot(ce));n.set(l,p),iu(i)}}else{if(r&&typeof l=="string"){var h=n.get("length"),d=Number(l);Number.isInteger(d)&&d<h.v&&tt(h,d)}tt(c,ce),iu(i)}return!0},get(u,l,c){var m;if(l===ru)return e;var h=n.get(l),d=l in u;if(h===void 0&&(!d||(m=Qi(u,l))!=null&&m.writable)&&(h=o(()=>{var _=qe(d?u[l]:ce),E=Ot(_);return E}),n.set(l,h)),h!==void 0){var p=U(h);return p===ce?void 0:p}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var h=n.get(l);h&&(c.value=U(h))}else if(c===void 0){var d=n.get(l),p=d==null?void 0:d.v;if(d!==void 0&&p!==ce)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(u,l){var p;if(l===ru)return!0;var c=n.get(l),h=c!==void 0&&c.v!==ce||Reflect.has(u,l);if(c!==void 0||gt!==null&&(!h||(p=Qi(u,l))!=null&&p.writable)){c===void 0&&(c=o(()=>{var m=h?qe(u[l]):ce,_=Ot(m);return _}),n.set(l,c));var d=U(c);if(d===ce)return!1}return h},set(u,l,c,h){var N;var d=n.get(l),p=l in u;if(r&&l==="length")for(var m=c;m<d.v;m+=1){var _=n.get(m+"");_!==void 0?tt(_,ce):m in u&&(_=o(()=>Ot(ce)),n.set(m+"",_))}if(d===void 0)(!p||(N=Qi(u,l))!=null&&N.writable)&&(d=o(()=>Ot(void 0)),tt(d,qe(c)),n.set(l,d));else{p=d.v!==ce;var E=o(()=>qe(c));tt(d,E)}var v=Reflect.getOwnPropertyDescriptor(u,l);if(v!=null&&v.set&&v.set.call(h,c),!p){if(r&&typeof l=="string"){var P=n.get("length"),S=Number(l);Number.isInteger(S)&&S>=P.v&&tt(P,S+1)}iu(i)}return!0},ownKeys(u){U(i);var l=Reflect.ownKeys(u).filter(d=>{var p=n.get(d);return p===void 0||p.v!==ce});for(var[c,h]of n)h.v!==ce&&!(c in u)&&l.push(c);return l},setPrototypeOf(){By()}})}function iu(e,t=1){tt(e,e.v+t)}function Fl(e){var t=Ce|vn,n=ut!==null&&(ut.f&Ce)!==0?ut:null;return gt===null||n!==null&&(n.f&Ee)!==0?t|=Ee:gt.f|=hp,{ctx:de,deps:null,effects:null,equals:dp,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??gt,ac:null}}function Vn(e){const t=Fl(e);return Mp(t),t}function Ky(e){const t=Fl(e);return t.equals=pp,t}function wp(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)$n(t[n])}}function Qy(e){for(var t=e.parent;t!==null;){if((t.f&Ce)===0)return t;t=t.parent}return null}function Ep(e){var t,n=gt;qn(Qy(e));try{wp(e),t=Bp(e)}finally{qn(n)}return t}function Tp(e){var t=Ep(e);if(e.equals(t)||(e.v=t,e.wv=Fp()),!li){var n=(On||(e.f&Ee)!==0)&&e.deps!==null?Ar:Pe;tn(e,n)}}const es=new Map;function Io(e,t){var n={f:0,v:e,reactions:null,equals:dp,rv:0,wv:0};return n}function Ot(e,t){const n=Io(e);return Mp(n),n}function Xy(e,t=!1,n=!0){const r=Io(e);return t||(r.equals=pp),r}function tt(e,t,n=!1){ut!==null&&(!je||(ut.f&Uh)!==0)&&vp()&&(ut.f&(Ce|Nl|Uh))!==0&&!(Bt!=null&&Bt[1].includes(e)&&Bt[0]===ut)&&$y();let r=n?qe(t):t;return Pu(e,r)}function Pu(e,t){if(!e.equals(t)){var n=e.v;li?es.set(e,t):es.set(e,n),e.v=t,(e.f&Ce)!==0&&((e.f&vn)!==0&&Ep(e),tn(e,(e.f&Ee)===0?Pe:Ar)),e.wv=Fp(),Ap(e,vn),gt!==null&&(gt.f&Pe)!==0&&(gt.f&(bn|ai))===0&&(Ae===null?lv([e]):Ae.push(e))}return t}function Ap(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],o=s.f;(o&vn)===0&&(tn(s,t),(o&(Pe|Ee))!==0&&((o&Ce)!==0?Ap(s,Ar):jl(s)))}}let Jy=!1;var $h,Ip,Rp,bp;function Yy(){if($h===void 0){$h=window,Ip=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Rp=Qi(t,"firstChild").get,bp=Qi(t,"nextSibling").get,Fh(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Fh(n)&&(n.__t=void 0)}}function Ul(e=""){return document.createTextNode(e)}function Jr(e){return Rp.call(e)}function fa(e){return bp.call(e)}function It(e,t){return Jr(e)}function Ni(e,t){{var n=Jr(e);return n instanceof Comment&&n.data===""?fa(n):n}}function zt(e,t=1,n=!1){let r=e;for(;t--;)r=fa(r);return r}function Zy(e){e.textContent=""}function tv(e){gt===null&&ut===null&&Ly(),ut!==null&&(ut.f&Ee)!==0&&gt===null&&My(),li&&Oy()}function ev(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ui(e,t,n,r=!0){var i=gt,s={ctx:de,deps:null,nodes_start:null,nodes_end:null,f:e|vn,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ql(s),s.f|=cp}catch(l){throw $n(s),l}else t!==null&&jl(s);var o=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(hp|Dl))===0;if(!o&&r&&(i!==null&&ev(s,i),ut!==null&&(ut.f&Ce)!==0)){var u=ut;(u.effects??(u.effects=[])).push(s)}return s}function Sp(e){const t=ui(ha,null,!1);return tn(t,Pe),t.teardown=e,t}function nv(e){tv();var t=gt!==null&&(gt.f&bn)!==0&&de!==null&&!de.m;if(t){var n=de;(n.e??(n.e=[])).push({fn:e,effect:gt,reaction:ut})}else{var r=Cp(e);return r}}function rv(e){const t=ui(ai,e,!0);return(n={})=>new Promise(r=>{n.outro?Ro(t,()=>{$n(t),r(void 0)}):($n(t),r(void 0))})}function Cp(e){return ui(lp,e,!1)}function iv(e){return ui(ha,e,!0)}function Nn(e,t=[],n=Fl){const r=t.map(n);return Bl(()=>e(...r.map(U)))}function Bl(e,t=0){var n=ui(ha|Nl|t,e,!0);return n}function ns(e,t=!0){return ui(ha|bn,e,!0,t)}function Pp(e){var t=e.teardown;if(t!==null){const n=li,r=ut;qh(!0),Ze(null);try{t.call(null)}finally{qh(n),Ze(r)}}}function xp(e,t=!1){var i;var n=e.first;for(e.first=e.last=null;n!==null;){(i=n.ac)==null||i.abort(fp);var r=n.next;(n.f&ai)!==0?n.parent=null:$n(n,t),n=r}}function sv(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&bn)===0&&$n(t),t=n}}function $n(e,t=!0){var n=!1;(t||(e.f&Ny)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(ov(e.nodes_start,e.nodes_end),n=!0),xp(e,t&&!n),xo(e,0),tn(e,kl);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Pp(e);var i=e.parent;i!==null&&i.first!==null&&Vp(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ov(e,t){for(;e!==null;){var n=e===t?null:fa(e);e.remove(),e=n}}function Vp(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ro(e,t){var n=[];$l(e,n,!0),Np(n,()=>{$n(e),t&&t()})}function Np(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function $l(e,t,n){if((e.f&_n)===0){if(e.f^=_n,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Ol)!==0||(r.f&bn)!==0;$l(r,t,s?n:!1),r=i}}}function bo(e){Dp(e,!0)}function Dp(e,t){if((e.f&_n)!==0){e.f^=_n;for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Ol)!==0||(n.f&bn)!==0;Dp(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let So=[];function av(){var e=So;So=[],Vy(e)}function kp(e){So.length===0&&queueMicrotask(av),So.push(e)}function uv(e){var t=gt;if((t.f&cp)===0){if((t.f&Dl)===0)throw e;t.fn(e)}else Op(e,t)}function Op(e,t){for(;t!==null;){if((t.f&Dl)!==0)try{t.b.error(e);return}catch{}t=t.parent}throw e}let xu=!1,Co=null,dr=!1,li=!1;function qh(e){li=e}let uo=[];let ut=null,je=!1;function Ze(e){ut=e}let gt=null;function qn(e){gt=e}let Bt=null;function Mp(e){ut!==null&&ut.f&Cu&&(Bt===null?Bt=[ut,[e]]:Bt[1].push(e))}let se=null,ye=0,Ae=null;function lv(e){Ae=e}let Lp=1,Po=0,On=!1;function Fp(){return++Lp}function da(e){var d;var t=e.f;if((t&vn)!==0)return!0;if((t&Ar)!==0){var n=e.deps,r=(t&Ee)!==0;if(n!==null){var i,s,o=(t&Ao)!==0,u=r&&gt!==null&&!On,l=n.length;if(o||u){var c=e,h=c.parent;for(i=0;i<l;i++)s=n[i],(o||!((d=s==null?void 0:s.reactions)!=null&&d.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);o&&(c.f^=Ao),u&&h!==null&&(h.f&Ee)===0&&(c.f^=Ee)}for(i=0;i<l;i++)if(s=n[i],da(s)&&Tp(s),s.wv>e.wv)return!0}(!r||gt!==null&&!On)&&tn(e,Pe)}return!1}function Up(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];Bt!=null&&Bt[1].includes(e)&&Bt[0]===ut||((s.f&Ce)!==0?Up(s,t,!1):t===s&&(n?tn(s,vn):(s.f&Pe)!==0&&tn(s,Ar),jl(s)))}}function Bp(e){var m;var t=se,n=ye,r=Ae,i=ut,s=On,o=Bt,u=de,l=je,c=e.f;se=null,ye=0,Ae=null,On=(c&Ee)!==0&&(je||!dr||ut===null),ut=(c&(bn|ai))===0?e:null,Bt=null,Bh(e.ctx),je=!1,Po++,e.f|=Cu,e.ac!==null&&(e.ac.abort(fp),e.ac=null);try{var h=(0,e.fn)(),d=e.deps;if(se!==null){var p;if(xo(e,ye),d!==null&&ye>0)for(d.length=ye+se.length,p=0;p<se.length;p++)d[ye+p]=se[p];else e.deps=d=se;if(!On||(c&Ce)!==0&&e.reactions!==null)for(p=ye;p<d.length;p++)((m=d[p]).reactions??(m.reactions=[])).push(e)}else d!==null&&ye<d.length&&(xo(e,ye),d.length=ye);if(vp()&&Ae!==null&&!je&&d!==null&&(e.f&(Ce|Ar|vn))===0)for(p=0;p<Ae.length;p++)Up(Ae[p],e);return i!==null&&i!==e&&(Po++,Ae!==null&&(r===null?r=Ae:r.push(...Ae))),h}catch(_){uv(_)}finally{se=t,ye=n,Ae=r,ut=i,On=s,Bt=o,Bh(u),je=l,e.f^=Cu}}function cv(e,t){let n=t.reactions;if(n!==null){var r=by.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&Ce)!==0&&(se===null||!se.includes(t))&&(tn(t,Ar),(t.f&(Ee|Ao))===0&&(t.f^=Ao),wp(t),xo(t,0))}function xo(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)cv(e,n[r])}function ql(e){var t=e.f;if((t&kl)===0){tn(e,Pe);var n=gt,r=dr;gt=e,dr=!0;try{(t&Nl)!==0?sv(e):xp(e),Pp(e);var i=Bp(e);e.teardown=typeof i=="function"?i:null,e.wv=Lp;var s;Lh&&qy&&(e.f&vn)!==0&&e.deps}finally{dr=r,gt=n}}}function hv(){try{Fy()}catch(e){if(Co!==null)Op(e,Co);else throw e}}function fv(){var e=dr;try{var t=0;for(dr=!0;uo.length>0;){t++>1e3&&hv();var n=uo,r=n.length;uo=[];for(var i=0;i<r;i++){var s=pv(n[i]);dv(s)}es.clear()}}finally{xu=!1,dr=e,Co=null}}function dv(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];(r.f&(kl|_n))===0&&da(r)&&(ql(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Vp(r):r.fn=null))}}function jl(e){xu||(xu=!0,queueMicrotask(fv));for(var t=Co=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(ai|bn))!==0){if((n&Pe)===0)return;t.f^=Pe}}uo.push(t)}function pv(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(bn|ai))!==0,s=i&&(r&Pe)!==0;if(!s&&(r&_n)===0){(r&lp)!==0?t.push(n):i?n.f^=Pe:da(n)&&ql(n);var o=n.first;if(o!==null){n=o;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}return t}function U(e){var t=e.f,n=(t&Ce)!==0;if(ut!==null&&!je){if(!(Bt!=null&&Bt[1].includes(e))||Bt[0]!==ut){var r=ut.deps;e.rv<Po&&(e.rv=Po,se===null&&r!==null&&r[ye]===e?ye++:se===null?se=[e]:(!On||!se.includes(e))&&se.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&Ee)===0&&(i.f^=Ee)}return n&&(i=e,da(i)&&Tp(i)),li&&es.has(e)?es.get(e):e.v}function zl(e){var t=je;try{return je=!0,e()}finally{je=t}}const gv=-7169;function tn(e,t){e.f=e.f&gv|t}const mv=["touchstart","touchmove"];function _v(e){return mv.includes(e)}let jh=!1;function yv(){jh||(jh=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function $p(e){var t=ut,n=gt;Ze(null),qn(null);try{return e()}finally{Ze(t),qn(n)}}function vv(e,t,n,r=n){e.addEventListener(t,()=>$p(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),yv()}const qp=new Set,Vu=new Set;function wv(e,t,n,r={}){function i(s){if(r.capture||Mi.call(t,s),!s.cancelBubble)return $p(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?kp(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Ev(e,t,n,r,i){var s={capture:r,passive:i},o=wv(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Sp(()=>{t.removeEventListener(e,o,s)})}function Tv(e){for(var t=0;t<e.length;t++)qp.add(e[t]);for(var n of Vu)n(e)}function Mi(e){var S;var t=this,n=t.ownerDocument,r=e.type,i=((S=e.composedPath)==null?void 0:S.call(e))||[],s=i[0]||e.target,o=0,u=e.__root;if(u){var l=i.indexOf(u);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(o=l)}if(s=i[o]||e.target,s!==t){Sy(e,"currentTarget",{configurable:!0,get(){return s||n}});var h=ut,d=gt;Ze(null),qn(null);try{for(var p,m=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var E=s["__"+r];if(E!=null&&(!s.disabled||e.target===s))if(xl(E)){var[v,...P]=E;v.apply(s,[e,...P])}else E.call(s,e)}catch(N){p?m.push(N):p=N}if(e.cancelBubble||_===t||_===null)break;s=_}if(p){for(let N of m)queueMicrotask(()=>{throw N});throw p}}finally{e.__root=t,delete e.currentTarget,Ze(h),qn(d)}}}function jp(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Vo(e,t){var n=gt;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Xn(e,t){var n=(t&Hy)!==0,r=(t&Gy)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=jp(s?e:"<!>"+e),n||(i=Jr(i)));var o=r||Ip?document.importNode(i,!0):i.cloneNode(!0);if(n){var u=Jr(o),l=o.lastChild;Vo(u,l)}else Vo(o,o);return o}}function Av(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var o=jp(i),u=Jr(o);s=Jr(u)}var l=s.cloneNode(!0);return Vo(l,l),l}}function Es(e,t){return Av(e,t,"svg")}function Qs(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ul();return e.append(t,n),Vo(t,n),e}function Ht(e,t){e!==null&&e.before(t)}function Di(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Iv(e,t){return Rv(e,t)}const Mr=new Map;function Rv(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:o=!0}){Yy();var u=new Set,l=d=>{for(var p=0;p<d.length;p++){var m=d[p];if(!u.has(m)){u.add(m);var _=_v(m);t.addEventListener(m,Mi,{passive:_});var E=Mr.get(m);E===void 0?(document.addEventListener(m,Mi,{passive:_}),Mr.set(m,1)):Mr.set(m,E+1)}}};l(Vl(qp)),Vu.add(l);var c=void 0,h=rv(()=>{var d=n??t.appendChild(Ul());return ns(()=>{if(s){_p({});var p=de;p.c=s}i&&(r.$$events=i),c=e(d,r)||{},s&&yp()}),()=>{var _;for(var p of u){t.removeEventListener(p,Mi);var m=Mr.get(p);--m===0?(document.removeEventListener(p,Mi),Mr.delete(p)):Mr.set(p,m)}Vu.delete(l),d!==n&&((_=d.parentNode)==null||_.removeChild(d))}});return bv.set(c,h),c}let bv=new WeakMap;function hn(e,t,[n,r]=[0,0]){var i=e,s=null,o=null,u=ce,l=n>0?Ol:0,c=!1;const h=(p,m=!0)=>{c=!0,d(m,p)},d=(p,m)=>{u!==(u=p)&&(u?(s?bo(s):m&&(s=ns(()=>m(i))),o&&Ro(o,()=>{o=null})):(o?bo(o):m&&(o=ns(()=>m(i,[n+1,r]))),s&&Ro(s,()=>{s=null})))};Bl(()=>{c=!1,t(h),c||d(null,null)},l)}function Lr(e,t){return t}function Sv(e,t,n,r){for(var i=[],s=t.length,o=0;o<s;o++)$l(t[o].e,i,!0);var u=s>0&&i.length===0&&n!==null;if(u){var l=n.parentNode;Zy(l),l.append(n),r.clear(),Dn(e,t[0].prev,t[s-1].next)}Np(i,()=>{for(var c=0;c<s;c++){var h=t[c];u||(r.delete(h.k),Dn(e,h.prev,h.next)),$n(h.e,!u)}})}function ur(e,t,n,r,i,s=null){var o=e,u={flags:t,items:new Map,first:null},l=(t&gp)!==0;if(l){var c=e;o=c.appendChild(Ul())}var h=null,d=!1,p=Ky(()=>{var m=n();return xl(m)?m:m==null?[]:Vl(m)});Bl(()=>{var m=U(p),_=m.length;d&&_===0||(d=_===0,Cv(m,u,o,i,t,r,n),s!==null&&(_===0?h?bo(h):h=ns(()=>s(o)):h!==null&&Ro(h,()=>{h=null})),U(p))})}function Cv(e,t,n,r,i,s,o){var X,F,Y,lt;var u=(i&jy)!==0,l=(i&(Ml|Ll))!==0,c=e.length,h=t.items,d=t.first,p=d,m,_=null,E,v=[],P=[],S,N,x,M;if(u)for(M=0;M<c;M+=1)S=e[M],N=s(S,M),x=h.get(N),x!==void 0&&((X=x.a)==null||X.measure(),(E??(E=new Set)).add(x));for(M=0;M<c;M+=1){if(S=e[M],N=s(S,M),x=h.get(N),x===void 0){var B=p?p.e.nodes_start:n;_=xv(B,t,_,_===null?t.first:_.next,S,N,M,r,i,o),h.set(N,_),v=[],P=[],p=_.next;continue}if(l&&Pv(x,S,M,i),(x.e.f&_n)!==0&&(bo(x.e),u&&((F=x.a)==null||F.unfix(),(E??(E=new Set)).delete(x))),x!==p){if(m!==void 0&&m.has(x)){if(v.length<P.length){var I=P[0],w;_=I.prev;var T=v[0],b=v[v.length-1];for(w=0;w<v.length;w+=1)zh(v[w],I,n);for(w=0;w<P.length;w+=1)m.delete(P[w]);Dn(t,T.prev,b.next),Dn(t,_,T),Dn(t,b,I),p=I,_=b,M-=1,v=[],P=[]}else m.delete(x),zh(x,p,n),Dn(t,x.prev,x.next),Dn(t,x,_===null?t.first:_.next),Dn(t,_,x),_=x;continue}for(v=[],P=[];p!==null&&p.k!==N;)(p.e.f&_n)===0&&(m??(m=new Set)).add(p),P.push(p),p=p.next;if(p===null)continue;x=p}v.push(x),_=x,p=x.next}if(p!==null||m!==void 0){for(var R=m===void 0?[]:Vl(m);p!==null;)(p.e.f&_n)===0&&R.push(p),p=p.next;var C=R.length;if(C>0){var A=(i&gp)!==0&&c===0?n:null;if(u){for(M=0;M<C;M+=1)(Y=R[M].a)==null||Y.measure();for(M=0;M<C;M+=1)(lt=R[M].a)==null||lt.fix()}Sv(t,R,A,h)}}u&&kp(()=>{var mt;if(E!==void 0)for(x of E)(mt=x.a)==null||mt.apply()}),gt.first=t.first&&t.first.e,gt.last=_&&_.e}function Pv(e,t,n,r){(r&Ml)!==0&&Pu(e.v,t),(r&Ll)!==0?Pu(e.i,n):e.i=n}function xv(e,t,n,r,i,s,o,u,l,c){var h=(l&Ml)!==0,d=(l&zy)===0,p=h?d?Xy(i,!1,!1):Io(i):i,m=(l&Ll)===0?o:Io(o),_={i:m,v:p,k:s,a:null,e:null,prev:n,next:r};try{return _.e=ns(()=>u(e,p,m,c),Jy),_.e.prev=n&&n.e,_.e.next=r&&r.e,n===null?t.first=_:(n.next=_,n.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function zh(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var o=fa(s);i.before(s),s=o}}function Dn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}const Hh=[...` 	
\r\fÂ \v\uFEFF`];function Vv(e,t,n){var r=""+e;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,o=0;(o=r.indexOf(i,o))>=0;){var u=o+s;(o===0||Hh.includes(r[o-1]))&&(u===r.length||Hh.includes(r[u]))?r=(o===0?"":r.substring(0,o))+r.substring(u+1):o=u}}return r===""?null:r}function Nv(e,t,n,r,i,s){var o=e.__className;if(o!==n||o===void 0){var u=Vv(n,r,s);u==null?e.removeAttribute("class"):e.className=u,e.__className=n}else if(s&&i!==s)for(var l in s){var c=!!s[l];(i==null||c!==!!i[l])&&e.classList.toggle(l,c)}return s}const Dv=Symbol("is custom element"),kv=Symbol("is html");function Gt(e,t,n,r){var i=Ov(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Dy]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Mv(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ov(e){return e.__attributes??(e.__attributes={[Dv]:e.nodeName.includes("-"),[kv]:e.namespaceURI===Wy})}var Gh=new Map;function Mv(e){var t=Gh.get(e.nodeName);if(t)return t;Gh.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Cy(r);for(var s in n)n[s].set&&t.push(s);r=up(r)}return t}function Lv(e,t,n=t){vv(e,"input",r=>{var i=r?e.defaultValue:e.value;if(i=su(e)?ou(i):i,n(i),i!==(i=t())){var s=e.selectionStart,o=e.selectionEnd;e.value=i??"",o!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(o,e.value.length))}}),zl(t)==null&&e.value&&n(su(e)?ou(e.value):e.value),iv(()=>{var r=t();su(e)&&r===ou(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function su(e){var t=e.type;return t==="number"||t==="range"}function ou(e){return e===""?null:+e}function Nu(e){de===null&&mp(),nv(()=>{const t=zl(e);if(typeof t=="function")return t})}function Fv(e){de===null&&mp(),Nu(()=>()=>zl(e))}const Uv="5";var ap;typeof window<"u"&&((ap=window.__svelte??(window.__svelte={})).v??(ap.v=new Set)).add(Uv);function zp(e,t){return function(){return e.apply(t,arguments)}}const{toString:Bv}=Object.prototype,{getPrototypeOf:Hl}=Object,{iterator:pa,toStringTag:Hp}=Symbol,ga=(e=>t=>{const n=Bv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Oe=e=>(e=e.toLowerCase(),t=>ga(t)===e),ma=e=>t=>typeof t===e,{isArray:ci}=Array,rs=ma("undefined");function $v(e){return e!==null&&!rs(e)&&e.constructor!==null&&!rs(e.constructor)&&pe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Gp=Oe("ArrayBuffer");function qv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Gp(e.buffer),t}const jv=ma("string"),pe=ma("function"),Wp=ma("number"),_a=e=>e!==null&&typeof e=="object",zv=e=>e===!0||e===!1,lo=e=>{if(ga(e)!=="object")return!1;const t=Hl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Hp in e)&&!(pa in e)},Hv=Oe("Date"),Gv=Oe("File"),Wv=Oe("Blob"),Kv=Oe("FileList"),Qv=e=>_a(e)&&pe(e.pipe),Xv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||pe(e.append)&&((t=ga(e))==="formdata"||t==="object"&&pe(e.toString)&&e.toString()==="[object FormData]"))},Jv=Oe("URLSearchParams"),[Yv,Zv,t0,e0]=["ReadableStream","Request","Response","Headers"].map(Oe),n0=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ts(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),ci(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let u;for(r=0;r<o;r++)u=s[r],t.call(null,e[u],u,e)}}function Kp(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const cr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qp=e=>!rs(e)&&e!==cr;function Du(){const{caseless:e}=Qp(this)&&this||{},t={},n=(r,i)=>{const s=e&&Kp(t,i)||i;lo(t[s])&&lo(r)?t[s]=Du(t[s],r):lo(r)?t[s]=Du({},r):ci(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ts(arguments[r],n);return t}const r0=(e,t,n,{allOwnKeys:r}={})=>(Ts(t,(i,s)=>{n&&pe(i)?e[s]=zp(i,n):e[s]=i},{allOwnKeys:r}),e),i0=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),s0=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},o0=(e,t,n,r)=>{let i,s,o;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!u[o]&&(t[o]=e[o],u[o]=!0);e=n!==!1&&Hl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},a0=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},u0=e=>{if(!e)return null;if(ci(e))return e;let t=e.length;if(!Wp(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},l0=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Hl(Uint8Array)),c0=(e,t)=>{const r=(e&&e[pa]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},h0=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},f0=Oe("HTMLFormElement"),d0=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Wh=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),p0=Oe("RegExp"),Xp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ts(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},g0=e=>{Xp(e,(t,n)=>{if(pe(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(pe(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},m0=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return ci(e)?r(e):r(String(e).split(t)),n},_0=()=>{},y0=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function v0(e){return!!(e&&pe(e.append)&&e[Hp]==="FormData"&&e[pa])}const w0=e=>{const t=new Array(10),n=(r,i)=>{if(_a(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=ci(r)?[]:{};return Ts(r,(o,u)=>{const l=n(o,i+1);!rs(l)&&(s[u]=l)}),t[i]=void 0,s}}return r};return n(e,0)},E0=Oe("AsyncFunction"),T0=e=>e&&(_a(e)||pe(e))&&pe(e.then)&&pe(e.catch),Jp=((e,t)=>e?setImmediate:t?((n,r)=>(cr.addEventListener("message",({source:i,data:s})=>{i===cr&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),cr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",pe(cr.postMessage)),A0=typeof queueMicrotask<"u"?queueMicrotask.bind(cr):typeof process<"u"&&process.nextTick||Jp,I0=e=>e!=null&&pe(e[pa]),D={isArray:ci,isArrayBuffer:Gp,isBuffer:$v,isFormData:Xv,isArrayBufferView:qv,isString:jv,isNumber:Wp,isBoolean:zv,isObject:_a,isPlainObject:lo,isReadableStream:Yv,isRequest:Zv,isResponse:t0,isHeaders:e0,isUndefined:rs,isDate:Hv,isFile:Gv,isBlob:Wv,isRegExp:p0,isFunction:pe,isStream:Qv,isURLSearchParams:Jv,isTypedArray:l0,isFileList:Kv,forEach:Ts,merge:Du,extend:r0,trim:n0,stripBOM:i0,inherits:s0,toFlatObject:o0,kindOf:ga,kindOfTest:Oe,endsWith:a0,toArray:u0,forEachEntry:c0,matchAll:h0,isHTMLForm:f0,hasOwnProperty:Wh,hasOwnProp:Wh,reduceDescriptors:Xp,freezeMethods:g0,toObjectSet:m0,toCamelCase:d0,noop:_0,toFiniteNumber:y0,findKey:Kp,global:cr,isContextDefined:Qp,isSpecCompliantForm:v0,toJSONObject:w0,isAsyncFn:E0,isThenable:T0,setImmediate:Jp,asap:A0,isIterable:I0};function Z(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}D.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const Yp=Z.prototype,Zp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Zp[e]={value:e}});Object.defineProperties(Z,Zp);Object.defineProperty(Yp,"isAxiosError",{value:!0});Z.from=(e,t,n,r,i,s)=>{const o=Object.create(Yp);return D.toFlatObject(e,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError"),Z.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const R0=null;function ku(e){return D.isPlainObject(e)||D.isArray(e)}function tg(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function Kh(e,t,n){return e?e.concat(t).map(function(i,s){return i=tg(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function b0(e){return D.isArray(e)&&!e.some(ku)}const S0=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function ya(e,t,n){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,v){return!D.isUndefined(v[E])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function c(_){if(_===null)return"";if(D.isDate(_))return _.toISOString();if(D.isBoolean(_))return _.toString();if(!l&&D.isBlob(_))throw new Z("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(_)||D.isTypedArray(_)?l&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,E,v){let P=_;if(_&&!v&&typeof _=="object"){if(D.endsWith(E,"{}"))E=r?E:E.slice(0,-2),_=JSON.stringify(_);else if(D.isArray(_)&&b0(_)||(D.isFileList(_)||D.endsWith(E,"[]"))&&(P=D.toArray(_)))return E=tg(E),P.forEach(function(N,x){!(D.isUndefined(N)||N===null)&&t.append(o===!0?Kh([E],x,s):o===null?E:E+"[]",c(N))}),!1}return ku(_)?!0:(t.append(Kh(v,E,s),c(_)),!1)}const d=[],p=Object.assign(S0,{defaultVisitor:h,convertValue:c,isVisitable:ku});function m(_,E){if(!D.isUndefined(_)){if(d.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));d.push(_),D.forEach(_,function(P,S){(!(D.isUndefined(P)||P===null)&&i.call(t,P,D.isString(S)?S.trim():S,E,p))===!0&&m(P,E?E.concat(S):[S])}),d.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Qh(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Gl(e,t){this._pairs=[],e&&ya(e,this,t)}const eg=Gl.prototype;eg.append=function(t,n){this._pairs.push([t,n])};eg.toString=function(t){const n=t?function(r){return t.call(this,r,Qh)}:Qh;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function C0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ng(e,t,n){if(!t)return e;const r=n&&n.encode||C0;D.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=D.isURLSearchParams(t)?t.toString():new Gl(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Xh{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(r){r!==null&&t(r)})}}const rg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},P0=typeof URLSearchParams<"u"?URLSearchParams:Gl,x0=typeof FormData<"u"?FormData:null,V0=typeof Blob<"u"?Blob:null,N0={isBrowser:!0,classes:{URLSearchParams:P0,FormData:x0,Blob:V0},protocols:["http","https","file","blob","url","data"]},Wl=typeof window<"u"&&typeof document<"u",Ou=typeof navigator=="object"&&navigator||void 0,D0=Wl&&(!Ou||["ReactNative","NativeScript","NS"].indexOf(Ou.product)<0),k0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",O0=Wl&&window.location.href||"http://localhost",M0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Wl,hasStandardBrowserEnv:D0,hasStandardBrowserWebWorkerEnv:k0,navigator:Ou,origin:O0},Symbol.toStringTag,{value:"Module"})),ne={...M0,...N0};function L0(e,t){return ya(e,new ne.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ne.isNode&&D.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function F0(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function U0(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function ig(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),l=s>=n.length;return o=!o&&D.isArray(i)?i.length:o,l?(D.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!D.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&D.isArray(i[o])&&(i[o]=U0(i[o])),!u)}if(D.isFormData(e)&&D.isFunction(e.entries)){const n={};return D.forEachEntry(e,(r,i)=>{t(F0(r),i,n,0)}),n}return null}function B0(e,t,n){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const As={transitional:rg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=D.isObject(t);if(s&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return i?JSON.stringify(ig(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return L0(t,this.formSerializer).toString();if((u=D.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ya(u?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),B0(t)):t}],transformResponse:[function(t){const n=this.transitional||As.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(u){if(o)throw u.name==="SyntaxError"?Z.from(u,Z.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ne.classes.FormData,Blob:ne.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{As.headers[e]={}});const $0=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q0=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&$0[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Jh=Symbol("internals");function ki(e){return e&&String(e).trim().toLowerCase()}function co(e){return e===!1||e==null?e:D.isArray(e)?e.map(co):String(e)}function j0(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const z0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function au(e,t,n,r,i){if(D.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!D.isString(t)){if(D.isString(r))return t.indexOf(r)!==-1;if(D.isRegExp(r))return r.test(t)}}function H0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function G0(e,t){const n=D.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}let ge=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(u,l,c){const h=ki(l);if(!h)throw new Error("header name must be a non-empty string");const d=D.findKey(i,h);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=co(u))}const o=(u,l)=>D.forEach(u,(c,h)=>s(c,h,l));if(D.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(D.isString(t)&&(t=t.trim())&&!z0(t))o(q0(t),n);else if(D.isObject(t)&&D.isIterable(t)){let u={},l,c;for(const h of t){if(!D.isArray(h))throw TypeError("Object iterator must return a key-value pair");u[c=h[0]]=(l=u[c])?D.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(u,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=ki(t),t){const r=D.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return j0(i);if(D.isFunction(n))return n.call(this,i,r);if(D.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ki(t),t){const r=D.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||au(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=ki(o),o){const u=D.findKey(r,o);u&&(!n||au(r,r[u],u,n))&&(delete r[u],i=!0)}}return D.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||au(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return D.forEach(this,(i,s)=>{const o=D.findKey(r,s);if(o){n[o]=co(i),delete n[s];return}const u=t?H0(s):String(s).trim();u!==s&&delete n[s],n[u]=co(i),r[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return D.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&D.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Jh]=this[Jh]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=ki(o);r[u]||(G0(i,o),r[u]=!0)}return D.isArray(t)?t.forEach(s):s(t),this}};ge.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(ge.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});D.freezeMethods(ge);function uu(e,t){const n=this||As,r=t||n,i=ge.from(r.headers);let s=r.data;return D.forEach(e,function(u){s=u.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function sg(e){return!!(e&&e.__CANCEL__)}function hi(e,t,n){Z.call(this,e??"canceled",Z.ERR_CANCELED,t,n),this.name="CanceledError"}D.inherits(hi,Z,{__CANCEL__:!0});function og(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Z("Request failed with status code "+n.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function W0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function K0(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,p=0;for(;d!==i;)p+=n[d++],d=d%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const m=h&&c-h;return m?Math.round(p*1e3/m):void 0}}function Q0(e,t){let n=0,r=1e3/t,i,s;const o=(c,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),e.apply(null,c)};return[(...c)=>{const h=Date.now(),d=h-n;d>=r?o(c,h):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const No=(e,t,n=3)=>{let r=0;const i=K0(50,250);return Q0(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=u;r=o;const d={loaded:o,total:u,progress:u?o/u:void 0,bytes:l,rate:c||void 0,estimated:c&&u&&h?(u-o)/c:void 0,event:s,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(d)},n)},Yh=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Zh=e=>(...t)=>D.asap(()=>e(...t)),X0=ne.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ne.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ne.origin),ne.navigator&&/(msie|trident)/i.test(ne.navigator.userAgent)):()=>!0,J0=ne.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(r)&&o.push("path="+r),D.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Y0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Z0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ag(e,t,n){let r=!Y0(t);return e&&(r||n==!1)?Z0(e,t):t}const tf=e=>e instanceof ge?{...e}:e;function _r(e,t){t=t||{};const n={};function r(c,h,d,p){return D.isPlainObject(c)&&D.isPlainObject(h)?D.merge.call({caseless:p},c,h):D.isPlainObject(h)?D.merge({},h):D.isArray(h)?h.slice():h}function i(c,h,d,p){if(D.isUndefined(h)){if(!D.isUndefined(c))return r(void 0,c,d,p)}else return r(c,h,d,p)}function s(c,h){if(!D.isUndefined(h))return r(void 0,h)}function o(c,h){if(D.isUndefined(h)){if(!D.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function u(c,h,d){if(d in t)return r(c,h);if(d in e)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(c,h,d)=>i(tf(c),tf(h),d,!0)};return D.forEach(Object.keys(Object.assign({},e,t)),function(h){const d=l[h]||i,p=d(e[h],t[h],h);D.isUndefined(p)&&d!==u||(n[h]=p)}),n}const ug=e=>{const t=_r({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=t;t.headers=o=ge.from(o),t.url=ng(ag(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let l;if(D.isFormData(n)){if(ne.hasStandardBrowserEnv||ne.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(ne.hasStandardBrowserEnv&&(r&&D.isFunction(r)&&(r=r(t)),r||r!==!1&&X0(t.url))){const c=i&&s&&J0.read(s);c&&o.set(i,c)}return t},tw=typeof XMLHttpRequest<"u",ew=tw&&function(e){return new Promise(function(n,r){const i=ug(e);let s=i.data;const o=ge.from(i.headers).normalize();let{responseType:u,onUploadProgress:l,onDownloadProgress:c}=i,h,d,p,m,_;function E(){m&&m(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function P(){if(!v)return;const N=ge.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),M={data:!u||u==="text"||u==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:N,config:e,request:v};og(function(I){n(I),E()},function(I){r(I),E()},M),v=null}"onloadend"in v?v.onloadend=P:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(P)},v.onabort=function(){v&&(r(new Z("Request aborted",Z.ECONNABORTED,e,v)),v=null)},v.onerror=function(){r(new Z("Network Error",Z.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||rg;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),r(new Z(x,M.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,e,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&D.forEach(o.toJSON(),function(x,M){v.setRequestHeader(M,x)}),D.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),u&&u!=="json"&&(v.responseType=i.responseType),c&&([p,_]=No(c,!0),v.addEventListener("progress",p)),l&&v.upload&&([d,m]=No(l),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(h=N=>{v&&(r(!N||N.type?new hi(null,e,v):N),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const S=W0(i.url);if(S&&ne.protocols.indexOf(S)===-1){r(new Z("Unsupported protocol "+S+":",Z.ERR_BAD_REQUEST,e));return}v.send(s||null)})},nw=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,u();const h=c instanceof Error?c:this.reason;r.abort(h instanceof Z?h:new hi(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,s(new Z(`timeout ${t} of ms exceeded`,Z.ETIMEDOUT))},t);const u=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>D.asap(u),l}},rw=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},iw=async function*(e,t){for await(const n of sw(e))yield*rw(n,t)},sw=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},ef=(e,t,n,r)=>{const i=iw(e,t);let s=0,o,u=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){u(),l.close();return}let d=h.byteLength;if(n){let p=s+=d;n(p)}l.enqueue(new Uint8Array(h))}catch(c){throw u(c),c}},cancel(l){return u(l),i.return()}},{highWaterMark:2})},va=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",lg=va&&typeof ReadableStream=="function",ow=va&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),cg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},aw=lg&&cg(()=>{let e=!1;const t=new Request(ne.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),nf=64*1024,Mu=lg&&cg(()=>D.isReadableStream(new Response("").body)),Do={stream:Mu&&(e=>e.body)};va&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Do[t]&&(Do[t]=D.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Z(`Response type '${t}' is not supported`,Z.ERR_NOT_SUPPORT,r)})})})(new Response);const uw=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(ne.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await ow(e)).byteLength},lw=async(e,t)=>{const n=D.toFiniteNumber(e.getContentLength());return n??uw(t)},cw=va&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:l,responseType:c,headers:h,withCredentials:d="same-origin",fetchOptions:p}=ug(e);c=c?(c+"").toLowerCase():"text";let m=nw([i,s&&s.toAbortSignal()],o),_;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(l&&aw&&n!=="get"&&n!=="head"&&(v=await lw(h,r))!==0){let M=new Request(t,{method:"POST",body:r,duplex:"half"}),B;if(D.isFormData(r)&&(B=M.headers.get("content-type"))&&h.setContentType(B),M.body){const[I,w]=Yh(v,No(Zh(l)));r=ef(M.body,nf,I,w)}}D.isString(d)||(d=d?"include":"omit");const P="credentials"in Request.prototype;_=new Request(t,{...p,signal:m,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:P?d:void 0});let S=await fetch(_,p);const N=Mu&&(c==="stream"||c==="response");if(Mu&&(u||N&&E)){const M={};["status","statusText","headers"].forEach(T=>{M[T]=S[T]});const B=D.toFiniteNumber(S.headers.get("content-length")),[I,w]=u&&Yh(B,No(Zh(u),!0))||[];S=new Response(ef(S.body,nf,I,()=>{w&&w(),E&&E()}),M)}c=c||"text";let x=await Do[D.findKey(Do,c)||"text"](S,e);return!N&&E&&E(),await new Promise((M,B)=>{og(M,B,{data:x,headers:ge.from(S.headers),status:S.status,statusText:S.statusText,config:e,request:_})})}catch(P){throw E&&E(),P&&P.name==="TypeError"&&/Load failed|fetch/i.test(P.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,e,_),{cause:P.cause||P}):Z.from(P,P&&P.code,e,_)}}),Lu={http:R0,xhr:ew,fetch:cw};D.forEach(Lu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const rf=e=>`- ${e}`,hw=e=>D.isFunction(e)||e===null||e===!1,hg={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!hw(n)&&(r=Lu[(o=String(n)).toLowerCase()],r===void 0))throw new Z(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,l])=>`adapter ${u} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(rf).join(`
`):" "+rf(s[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Lu};function lu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hi(null,e)}function sf(e){return lu(e),e.headers=ge.from(e.headers),e.data=uu.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),hg.getAdapter(e.adapter||As.adapter)(e).then(function(r){return lu(e),r.data=uu.call(e,e.transformResponse,r),r.headers=ge.from(r.headers),r},function(r){return sg(r)||(lu(e),r&&r.response&&(r.response.data=uu.call(e,e.transformResponse,r.response),r.response.headers=ge.from(r.response.headers))),Promise.reject(r)})}const fg="1.10.0",wa={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{wa[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const of={};wa.transitional=function(t,n,r){function i(s,o){return"[Axios v"+fg+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(t===!1)throw new Z(i(o," has been removed"+(n?" in "+n:"")),Z.ERR_DEPRECATED);return n&&!of[o]&&(of[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,u):!0}};wa.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function fw(e,t,n){if(typeof e!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const u=e[s],l=u===void 0||o(u,s,e);if(l!==!0)throw new Z("option "+s+" must be "+l,Z.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Z("Unknown option "+s,Z.ERR_BAD_OPTION)}}const ho={assertOptions:fw,validators:wa},Be=ho.validators;let pr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Xh,response:new Xh}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=_r(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ho.assertOptions(r,{silentJSONParsing:Be.transitional(Be.boolean),forcedJSONParsing:Be.transitional(Be.boolean),clarifyTimeoutError:Be.transitional(Be.boolean)},!1),i!=null&&(D.isFunction(i)?n.paramsSerializer={serialize:i}:ho.assertOptions(i,{encode:Be.function,serialize:Be.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ho.assertOptions(n,{baseUrl:Be.spelling("baseURL"),withXsrfToken:Be.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&D.merge(s.common,s[n.method]);s&&D.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=ge.concat(o,s);const u=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,u.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let h,d=0,p;if(!l){const _=[sf.bind(this),void 0];for(_.unshift.apply(_,u),_.push.apply(_,c),p=_.length,h=Promise.resolve(n);d<p;)h=h.then(_[d++],_[d++]);return h}p=u.length;let m=n;for(d=0;d<p;){const _=u[d++],E=u[d++];try{m=_(m)}catch(v){E.call(this,v);break}}try{h=sf.call(this,m)}catch(_){return Promise.reject(_)}for(d=0,p=c.length;d<p;)h=h.then(c[d++],c[d++]);return h}getUri(t){t=_r(this.defaults,t);const n=ag(t.baseURL,t.url,t.allowAbsoluteUrls);return ng(n,t.params,t.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(t){pr.prototype[t]=function(n,r){return this.request(_r(r||{},{method:t,url:n,data:(r||{}).data}))}});D.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,u){return this.request(_r(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}pr.prototype[t]=n(),pr.prototype[t+"Form"]=n(!0)});let dw=class dg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,u){r.reason||(r.reason=new hi(s,o,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new dg(function(i){t=i}),cancel:t}}};function pw(e){return function(n){return e.apply(null,n)}}function gw(e){return D.isObject(e)&&e.isAxiosError===!0}const Fu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fu).forEach(([e,t])=>{Fu[t]=e});function pg(e){const t=new pr(e),n=zp(pr.prototype.request,t);return D.extend(n,pr.prototype,t,{allOwnKeys:!0}),D.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return pg(_r(e,i))},n}const wt=pg(As);wt.Axios=pr;wt.CanceledError=hi;wt.CancelToken=dw;wt.isCancel=sg;wt.VERSION=fg;wt.toFormData=ya;wt.AxiosError=Z;wt.Cancel=wt.CanceledError;wt.all=function(t){return Promise.all(t)};wt.spread=pw;wt.isAxiosError=gw;wt.mergeConfig=_r;wt.AxiosHeaders=ge;wt.formToJSON=e=>ig(D.isHTMLForm(e)?new FormData(e):e);wt.getAdapter=hg.getAdapter;wt.HttpStatusCode=Fu;wt.default=wt;const{Axios:VP,AxiosError:NP,CanceledError:DP,isCancel:kP,CancelToken:OP,VERSION:MP,all:LP,Cancel:FP,isAxiosError:UP,spread:BP,toFormData:$P,AxiosHeaders:qP,HttpStatusCode:jP,formToJSON:zP,getAdapter:HP,mergeConfig:GP}=wt;class yr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,u=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*mw(e){for(const t of e)yield*t}function gg(e){return Array.from(mw(e))}var _w={value:()=>{}};function Kl(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new fo(n)}function fo(e){this._=e}function yw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}fo.prototype=Kl.prototype={constructor:fo,on:function(e,t){var n=this._,r=yw(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=vw(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=af(n[i],e.name,t);else if(t==null)for(i in n)n[i]=af(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function vw(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function af(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=_w,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Uu="http://www.w3.org/1999/xhtml";const uf={svg:"http://www.w3.org/2000/svg",xhtml:Uu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ea(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),uf.hasOwnProperty(t)?{space:uf[t],local:e}:e}function ww(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Uu&&t.documentElement.namespaceURI===Uu?t.createElement(e):t.createElementNS(n,e)}}function Ew(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function mg(e){var t=Ea(e);return(t.local?Ew:ww)(t)}function Tw(){}function Ql(e){return e==null?Tw:function(){return this.querySelector(e)}}function Aw(e){typeof e!="function"&&(e=Ql(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=new Array(o),l,c,h=0;h<o;++h)(l=s[h])&&(c=e.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),u[h]=c);return new De(r,this._parents)}function Iw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Rw(){return[]}function _g(e){return e==null?Rw:function(){return this.querySelectorAll(e)}}function bw(e){return function(){return Iw(e.apply(this,arguments))}}function Sw(e){typeof e=="function"?e=bw(e):e=_g(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],u=o.length,l,c=0;c<u;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),i.push(l));return new De(r,i)}function yg(e){return function(){return this.matches(e)}}function vg(e){return function(t){return t.matches(e)}}var Cw=Array.prototype.find;function Pw(e){return function(){return Cw.call(this.children,e)}}function xw(){return this.firstElementChild}function Vw(e){return this.select(e==null?xw:Pw(typeof e=="function"?e:vg(e)))}var Nw=Array.prototype.filter;function Dw(){return Array.from(this.children)}function kw(e){return function(){return Nw.call(this.children,e)}}function Ow(e){return this.selectAll(e==null?Dw:kw(typeof e=="function"?e:vg(e)))}function Mw(e){typeof e!="function"&&(e=yg(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&u.push(l);return new De(r,this._parents)}function wg(e){return new Array(e.length)}function Lw(){return new De(this._enter||this._groups.map(wg),this._parents)}function ko(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ko.prototype={constructor:ko,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fw(e){return function(){return e}}function Uw(e,t,n,r,i,s){for(var o=0,u,l=t.length,c=s.length;o<c;++o)(u=t[o])?(u.__data__=s[o],r[o]=u):n[o]=new ko(e,s[o]);for(;o<l;++o)(u=t[o])&&(i[o]=u)}function Bw(e,t,n,r,i,s,o){var u,l,c=new Map,h=t.length,d=s.length,p=new Array(h),m;for(u=0;u<h;++u)(l=t[u])&&(p[u]=m=o.call(l,l.__data__,u,t)+"",c.has(m)?i[u]=l:c.set(m,l));for(u=0;u<d;++u)m=o.call(e,s[u],u,s)+"",(l=c.get(m))?(r[u]=l,l.__data__=s[u],c.delete(m)):n[u]=new ko(e,s[u]);for(u=0;u<h;++u)(l=t[u])&&c.get(p[u])===l&&(i[u]=l)}function $w(e){return e.__data__}function qw(e,t){if(!arguments.length)return Array.from(this,$w);var n=t?Bw:Uw,r=this._parents,i=this._groups;typeof e!="function"&&(e=Fw(e));for(var s=i.length,o=new Array(s),u=new Array(s),l=new Array(s),c=0;c<s;++c){var h=r[c],d=i[c],p=d.length,m=jw(e.call(h,h&&h.__data__,c,r)),_=m.length,E=u[c]=new Array(_),v=o[c]=new Array(_),P=l[c]=new Array(p);n(h,d,E,v,P,m,t);for(var S=0,N=0,x,M;S<_;++S)if(x=E[S]){for(S>=N&&(N=S+1);!(M=v[N])&&++N<_;);x._next=M||null}}return o=new De(o,r),o._enter=u,o._exit=l,o}function jw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zw(){return new De(this._exit||this._groups.map(wg),this._parents)}function Hw(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Gw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),u=new Array(i),l=0;l<o;++l)for(var c=n[l],h=r[l],d=c.length,p=u[l]=new Array(d),m,_=0;_<d;++_)(m=c[_]||h[_])&&(p[_]=m);for(;l<i;++l)u[l]=n[l];return new De(u,this._parents)}function Ww(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Kw(e){e||(e=Qw);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],u=o.length,l=i[s]=new Array(u),c,h=0;h<u;++h)(c=o[h])&&(l[h]=c);l.sort(t)}return new De(i,this._parents).order()}function Qw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Jw(){return Array.from(this)}function Yw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Zw(){let e=0;for(const t of this)++e;return e}function tE(){return!this.node()}function eE(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,u;s<o;++s)(u=i[s])&&e.call(u,u.__data__,s,i);return this}function nE(e){return function(){this.removeAttribute(e)}}function rE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iE(e,t){return function(){this.setAttribute(e,t)}}function sE(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oE(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function aE(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function uE(e,t){var n=Ea(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?rE:nE:typeof t=="function"?n.local?aE:oE:n.local?sE:iE)(n,t))}function Eg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lE(e){return function(){this.style.removeProperty(e)}}function cE(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hE(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fE(e,t,n){return arguments.length>1?this.each((t==null?lE:typeof t=="function"?hE:cE)(e,t,n??"")):Yr(this.node(),e)}function Yr(e,t){return e.style.getPropertyValue(t)||Eg(e).getComputedStyle(e,null).getPropertyValue(t)}function dE(e){return function(){delete this[e]}}function pE(e,t){return function(){this[e]=t}}function gE(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mE(e,t){return arguments.length>1?this.each((t==null?dE:typeof t=="function"?gE:pE)(e,t)):this.node()[e]}function Tg(e){return e.trim().split(/^|\s+/)}function Xl(e){return e.classList||new Ag(e)}function Ag(e){this._node=e,this._names=Tg(e.getAttribute("class")||"")}Ag.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ig(e,t){for(var n=Xl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Rg(e,t){for(var n=Xl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function _E(e){return function(){Ig(this,e)}}function yE(e){return function(){Rg(this,e)}}function vE(e,t){return function(){(t.apply(this,arguments)?Ig:Rg)(this,e)}}function wE(e,t){var n=Tg(e+"");if(arguments.length<2){for(var r=Xl(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?vE:t?_E:yE)(n,t))}function EE(){this.textContent=""}function TE(e){return function(){this.textContent=e}}function AE(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function IE(e){return arguments.length?this.each(e==null?EE:(typeof e=="function"?AE:TE)(e)):this.node().textContent}function RE(){this.innerHTML=""}function bE(e){return function(){this.innerHTML=e}}function SE(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function CE(e){return arguments.length?this.each(e==null?RE:(typeof e=="function"?SE:bE)(e)):this.node().innerHTML}function PE(){this.nextSibling&&this.parentNode.appendChild(this)}function xE(){return this.each(PE)}function VE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function NE(){return this.each(VE)}function DE(e){var t=typeof e=="function"?e:mg(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kE(){return null}function OE(e,t){var n=typeof e=="function"?e:mg(e),r=t==null?kE:typeof t=="function"?t:Ql(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ME(){var e=this.parentNode;e&&e.removeChild(this)}function LE(){return this.each(ME)}function FE(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function UE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BE(e){return this.select(e?UE:FE)}function $E(e){return arguments.length?this.property("__data__",e):this.node().__data__}function qE(e){return function(t){e.call(this,t,this.__data__)}}function jE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function HE(e,t,n){return function(){var r=this.__on,i,s=qE(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function GE(e,t,n){var r=jE(e+""),i,s=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,c=u.length,h;l<c;++l)for(i=0,h=u[l];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(u=t?HE:zE,i=0;i<s;++i)this.each(u(r[i],t,n));return this}function bg(e,t,n){var r=Eg(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function WE(e,t){return function(){return bg(this,e,t)}}function KE(e,t){return function(){return bg(this,e,t.apply(this,arguments))}}function QE(e,t){return this.each((typeof t=="function"?KE:WE)(e,t))}function*XE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var JE=[null];function De(e,t){this._groups=e,this._parents=t}function Is(){return new De([[document.documentElement]],JE)}function YE(){return this}De.prototype=Is.prototype={constructor:De,select:Aw,selectAll:Sw,selectChild:Vw,selectChildren:Ow,filter:Mw,data:qw,enter:Lw,exit:zw,join:Hw,merge:Gw,selection:YE,order:Ww,sort:Kw,call:Xw,nodes:Jw,node:Yw,size:Zw,empty:tE,each:eE,attr:uE,style:fE,property:mE,classed:wE,text:IE,html:CE,raise:xE,lower:NE,append:DE,insert:OE,remove:LE,clone:BE,datum:$E,on:GE,dispatch:QE,[Symbol.iterator]:XE};function Rs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ta(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ir(){}var is=.7,Oo=1/is,Gr="\\s*([+-]?\\d+)\\s*",ss="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZE=/^#([0-9a-f]{3,8})$/,tT=new RegExp(`^rgb\\(${Gr},${Gr},${Gr}\\)$`),eT=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),nT=new RegExp(`^rgba\\(${Gr},${Gr},${Gr},${ss}\\)$`),rT=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${ss}\\)$`),iT=new RegExp(`^hsl\\(${ss},${Ge},${Ge}\\)$`),sT=new RegExp(`^hsla\\(${ss},${Ge},${Ge},${ss}\\)$`),lf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rs(Ir,os,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cf,formatHex:cf,formatHex8:oT,formatHsl:aT,formatRgb:hf,toString:hf});function cf(){return this.rgb().formatHex()}function oT(){return this.rgb().formatHex8()}function aT(){return Cg(this).formatHsl()}function hf(){return this.rgb().formatRgb()}function os(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ZE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ff(t):n===3?new re(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xs(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tT.exec(e))?new re(t[1],t[2],t[3],1):(t=eT.exec(e))?new re(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nT.exec(e))?Xs(t[1],t[2],t[3],t[4]):(t=rT.exec(e))?Xs(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iT.exec(e))?gf(t[1],t[2]/100,t[3]/100,1):(t=sT.exec(e))?gf(t[1],t[2]/100,t[3]/100,t[4]):lf.hasOwnProperty(e)?ff(lf[e]):e==="transparent"?new re(NaN,NaN,NaN,0):null}function ff(e){return new re(e>>16&255,e>>8&255,e&255,1)}function Xs(e,t,n,r){return r<=0&&(e=t=n=NaN),new re(e,t,n,r)}function Sg(e){return e instanceof Ir||(e=os(e)),e?(e=e.rgb(),new re(e.r,e.g,e.b,e.opacity)):new re}function Bu(e,t,n,r){return arguments.length===1?Sg(e):new re(e,t,n,r??1)}function re(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Rs(re,Bu,Ta(Ir,{brighter(e){return e=e==null?Oo:Math.pow(Oo,e),new re(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?is:Math.pow(is,e),new re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new re(gr(this.r),gr(this.g),gr(this.b),Mo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:df,formatHex:df,formatHex8:uT,formatRgb:pf,toString:pf}));function df(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}`}function uT(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}${hr((isNaN(this.opacity)?1:this.opacity)*255)}`}function pf(){const e=Mo(this.opacity);return`${e===1?"rgb(":"rgba("}${gr(this.r)}, ${gr(this.g)}, ${gr(this.b)}${e===1?")":`, ${e})`}`}function Mo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hr(e){return e=gr(e),(e<16?"0":"")+e.toString(16)}function gf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ne(e,t,n,r)}function Cg(e){if(e instanceof Ne)return new Ne(e.h,e.s,e.l,e.opacity);if(e instanceof Ir||(e=os(e)),!e)return new Ne;if(e instanceof Ne)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,u=s-i,l=(s+i)/2;return u?(t===s?o=(n-r)/u+(n<r)*6:n===s?o=(r-t)/u+2:o=(t-n)/u+4,u/=l<.5?s+i:2-s-i,o*=60):u=l>0&&l<1?0:o,new Ne(o,u,l,e.opacity)}function lT(e,t,n,r){return arguments.length===1?Cg(e):new Ne(e,t,n,r??1)}function Ne(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Rs(Ne,lT,Ta(Ir,{brighter(e){return e=e==null?Oo:Math.pow(Oo,e),new Ne(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?is:Math.pow(is,e),new Ne(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new re(cu(e>=240?e-240:e+120,i,r),cu(e,i,r),cu(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ne(mf(this.h),Js(this.s),Js(this.l),Mo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mo(this.opacity);return`${e===1?"hsl(":"hsla("}${mf(this.h)}, ${Js(this.s)*100}%, ${Js(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mf(e){return e=(e||0)%360,e<0?e+360:e}function Js(e){return Math.max(0,Math.min(1,e||0))}function cu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const cT=Math.PI/180,hT=180/Math.PI,Lo=18,Pg=.96422,xg=1,Vg=.82521,Ng=4/29,Wr=6/29,Dg=3*Wr*Wr,fT=Wr*Wr*Wr;function kg(e){if(e instanceof We)return new We(e.l,e.a,e.b,e.opacity);if(e instanceof gn)return Og(e);e instanceof re||(e=Sg(e));var t=pu(e.r),n=pu(e.g),r=pu(e.b),i=hu((.2225045*t+.7168786*n+.0606169*r)/xg),s,o;return t===n&&n===r?s=o=i:(s=hu((.4360747*t+.3850649*n+.1430804*r)/Pg),o=hu((.0139322*t+.0971045*n+.7141733*r)/Vg)),new We(116*i-16,500*(s-i),200*(i-o),e.opacity)}function $u(e,t,n,r){return arguments.length===1?kg(e):new We(e,t,n,r??1)}function We(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Rs(We,$u,Ta(Ir,{brighter(e){return new We(this.l+Lo*(e??1),this.a,this.b,this.opacity)},darker(e){return new We(this.l-Lo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Pg*fu(t),e=xg*fu(e),n=Vg*fu(n),new re(du(3.1338561*t-1.6168667*e-.4906146*n),du(-.9787684*t+1.9161415*e+.033454*n),du(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function hu(e){return e>fT?Math.pow(e,1/3):e/Dg+Ng}function fu(e){return e>Wr?e*e*e:Dg*(e-Ng)}function du(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function pu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function dT(e){if(e instanceof gn)return new gn(e.h,e.c,e.l,e.opacity);if(e instanceof We||(e=kg(e)),e.a===0&&e.b===0)return new gn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*hT;return new gn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function pT(e,t,n,r){return arguments.length===1?dT(e):new gn(e,t,n,r??1)}function gn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Og(e){if(isNaN(e.h))return new We(e.l,0,0,e.opacity);var t=e.h*cT;return new We(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Rs(gn,pT,Ta(Ir,{brighter(e){return new gn(this.h,this.c,this.l+Lo*(e??1),this.opacity)},darker(e){return new gn(this.h,this.c,this.l-Lo*(e??1),this.opacity)},rgb(){return Og(this).rgb()}}));const Mg=e=>()=>e;function gT(e,t){return function(n){return e+n*t}}function mT(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function _T(e){return(e=+e)==1?jr:function(t,n){return n-t?mT(t,n,e):Mg(isNaN(t)?n:t)}}function jr(e,t){var n=t-e;return n?gT(e,n):Mg(isNaN(e)?t:e)}const _f=function e(t){var n=_T(t);function r(i,s){var o=n((i=Bu(i)).r,(s=Bu(s)).r),u=n(i.g,s.g),l=n(i.b,s.b),c=jr(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=u(h),i.b=l(h),i.opacity=c(h),i+""}}return r.gamma=e,r}(1);function kn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var qu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gu=new RegExp(qu.source,"g");function yT(e){return function(){return e}}function vT(e){return function(t){return e(t)+""}}function wT(e,t){var n=qu.lastIndex=gu.lastIndex=0,r,i,s,o=-1,u=[],l=[];for(e=e+"",t=t+"";(r=qu.exec(e))&&(i=gu.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,l.push({i:o,x:kn(r,i)})),n=gu.lastIndex;return n<t.length&&(s=t.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?l[0]?vT(l[0].x):yT(t):(t=l.length,function(c){for(var h=0,d;h<t;++h)u[(d=l[h]).i]=d.x(c);return u.join("")})}var yf=180/Math.PI,ju={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lg(e,t,n,r,i,s){var o,u,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,l/=u),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*yf,skewX:Math.atan(l)*yf,scaleX:o,scaleY:u}}var Ys;function ET(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ju:Lg(t.a,t.b,t.c,t.d,t.e,t.f)}function TT(e){return e==null||(Ys||(Ys=document.createElementNS("http://www.w3.org/2000/svg","g")),Ys.setAttribute("transform",e),!(e=Ys.transform.baseVal.consolidate()))?ju:(e=e.matrix,Lg(e.a,e.b,e.c,e.d,e.e,e.f))}function Fg(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,h,d,p,m,_){if(c!==d||h!==p){var E=m.push("translate(",null,t,null,n);_.push({i:E-4,x:kn(c,d)},{i:E-2,x:kn(h,p)})}else(d||p)&&m.push("translate("+d+t+p+n)}function o(c,h,d,p){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:kn(c,h)})):h&&d.push(i(d)+"rotate("+h+r)}function u(c,h,d,p){c!==h?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:kn(c,h)}):h&&d.push(i(d)+"skewX("+h+r)}function l(c,h,d,p,m,_){if(c!==d||h!==p){var E=m.push(i(m)+"scale(",null,",",null,")");_.push({i:E-4,x:kn(c,d)},{i:E-2,x:kn(h,p)})}else(d!==1||p!==1)&&m.push(i(m)+"scale("+d+","+p+")")}return function(c,h){var d=[],p=[];return c=e(c),h=e(h),s(c.translateX,c.translateY,h.translateX,h.translateY,d,p),o(c.rotate,h.rotate,d,p),u(c.skewX,h.skewX,d,p),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,d,p),c=h=null,function(m){for(var _=-1,E=p.length,v;++_<E;)d[(v=p[_]).i]=v.x(m);return d.join("")}}}var AT=Fg(ET,"px, ","px)","deg)"),IT=Fg(TT,", ",")",")");function vf(e,t){var n=jr((e=$u(e)).l,(t=$u(t)).l),r=jr(e.a,t.a),i=jr(e.b,t.b),s=jr(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}var Zr=0,Li=0,Oi=0,Ug=1e3,Fo,Fi,Uo=0,vr=0,Aa=0,as=typeof performance=="object"&&performance.now?performance:Date,Bg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Jl(){return vr||(Bg(RT),vr=as.now()+Aa)}function RT(){vr=0}function Bo(){this._call=this._time=this._next=null}Bo.prototype=Yl.prototype={constructor:Bo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Jl():+n)+(t==null?0:+t),!this._next&&Fi!==this&&(Fi?Fi._next=this:Fo=this,Fi=this),this._call=e,this._time=n,zu()},stop:function(){this._call&&(this._call=null,this._time=1/0,zu())}};function Yl(e,t,n){var r=new Bo;return r.restart(e,t,n),r}function bT(){Jl(),++Zr;for(var e=Fo,t;e;)(t=vr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Zr}function wf(){vr=(Uo=as.now())+Aa,Zr=Li=0;try{bT()}finally{Zr=0,CT(),vr=0}}function ST(){var e=as.now(),t=e-Uo;t>Ug&&(Aa-=t,Uo=e)}function CT(){for(var e,t=Fo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fo=n);Fi=e,zu(r)}function zu(e){if(!Zr){Li&&(Li=clearTimeout(Li));var t=e-vr;t>24?(e<1/0&&(Li=setTimeout(wf,e-as.now()-Aa)),Oi&&(Oi=clearInterval(Oi))):(Oi||(Uo=as.now(),Oi=setInterval(ST,Ug)),Zr=1,Bg(wf))}}function Ef(e,t,n){var r=new Bo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var PT=Kl("start","end","cancel","interrupt"),xT=[],$g=0,Tf=1,Hu=2,po=3,Af=4,Gu=5,go=6;function Ia(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;VT(e,n,{name:t,index:r,group:i,on:PT,tween:xT,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$g})}function Zl(e,t){var n=Me(e,t);if(n.state>$g)throw new Error("too late; already scheduled");return n}function nn(e,t){var n=Me(e,t);if(n.state>po)throw new Error("too late; already running");return n}function Me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function VT(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Yl(s,0,n.time);function s(c){n.state=Tf,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var h,d,p,m;if(n.state!==Tf)return l();for(h in r)if(m=r[h],m.name===n.name){if(m.state===po)return Ef(o);m.state===Af?(m.state=go,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[h]):+h<t&&(m.state=go,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[h])}if(Ef(function(){n.state===po&&(n.state=Af,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=Hu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Hu){for(n.state=po,i=new Array(p=n.tween.length),h=0,d=-1;h<p;++h)(m=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=m);i.length=d+1}}function u(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Gu,1),d=-1,p=i.length;++d<p;)i[d].call(e,h);n.state===Gu&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=go,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function NT(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Hu&&r.state<Gu,r.state=go,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function DT(e){return this.each(function(){NT(this,e)})}function kT(e,t){var n,r;return function(){var i=nn(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function OT(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=nn(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=u;break}l===c&&i.push(u)}s.tween=i}}function MT(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Me(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?kT:OT)(n,e,t))}function tc(e,t,n){var r=e._id;return e.each(function(){var i=nn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Me(i,r).value[t]}}function qg(e,t){var n;return(typeof t=="number"?kn:t instanceof os?_f:(n=os(t))?(t=n,_f):wT)(e,t)}function LT(e){return function(){this.removeAttribute(e)}}function FT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function UT(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function BT(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function $T(e,t,n){var r,i,s;return function(){var o,u=n(this),l;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=u+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,u)))}}function qT(e,t,n){var r,i,s;return function(){var o,u=n(this),l;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=u+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,u)))}}function jT(e,t){var n=Ea(e),r=n==="transform"?IT:qg;return this.attrTween(e,typeof t=="function"?(n.local?qT:$T)(n,r,tc(this,"attr."+e,t)):t==null?(n.local?FT:LT)(n):(n.local?BT:UT)(n,r,t))}function zT(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function HT(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function GT(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&HT(e,s)),n}return i._value=t,i}function WT(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&zT(e,s)),n}return i._value=t,i}function KT(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ea(e);return this.tween(n,(r.local?GT:WT)(r,t))}function QT(e,t){return function(){Zl(this,e).delay=+t.apply(this,arguments)}}function XT(e,t){return t=+t,function(){Zl(this,e).delay=t}}function JT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QT:XT)(t,e)):Me(this.node(),t).delay}function YT(e,t){return function(){nn(this,e).duration=+t.apply(this,arguments)}}function ZT(e,t){return t=+t,function(){nn(this,e).duration=t}}function t1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?YT:ZT)(t,e)):Me(this.node(),t).duration}function e1(e,t){if(typeof t!="function")throw new Error;return function(){nn(this,e).ease=t}}function n1(e){var t=this._id;return arguments.length?this.each(e1(t,e)):Me(this.node(),t).ease}function r1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;nn(this,e).ease=n}}function i1(e){if(typeof e!="function")throw new Error;return this.each(r1(this._id,e))}function s1(e){typeof e!="function"&&(e=yg(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&u.push(l);return new wn(r,this._parents,this._name,this._id)}function o1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),u=0;u<s;++u)for(var l=t[u],c=n[u],h=l.length,d=o[u]=new Array(h),p,m=0;m<h;++m)(p=l[m]||c[m])&&(d[m]=p);for(;u<r;++u)o[u]=t[u];return new wn(o,this._parents,this._name,this._id)}function a1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function u1(e,t,n){var r,i,s=a1(t)?Zl:nn;return function(){var o=s(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function l1(e,t){var n=this._id;return arguments.length<2?Me(this.node(),n).on.on(e):this.each(u1(n,e,t))}function c1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function h1(){return this.on("end.remove",c1(this._id))}function f1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ql(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var u=r[o],l=u.length,c=s[o]=new Array(l),h,d,p=0;p<l;++p)(h=u[p])&&(d=e.call(h,h.__data__,p,u))&&("__data__"in h&&(d.__data__=h.__data__),c[p]=d,Ia(c[p],t,n,p,c,Me(h,n)));return new wn(s,this._parents,t,n)}function d1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_g(e));for(var r=this._groups,i=r.length,s=[],o=[],u=0;u<i;++u)for(var l=r[u],c=l.length,h,d=0;d<c;++d)if(h=l[d]){for(var p=e.call(h,h.__data__,d,l),m,_=Me(h,n),E=0,v=p.length;E<v;++E)(m=p[E])&&Ia(m,t,n,E,p,_);s.push(p),o.push(h)}return new wn(s,o,t,n)}var p1=Is.prototype.constructor;function g1(){return new p1(this._groups,this._parents)}function m1(e,t){var n,r,i;return function(){var s=Yr(this,e),o=(this.style.removeProperty(e),Yr(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function jg(e){return function(){this.style.removeProperty(e)}}function _1(e,t,n){var r,i=n+"",s;return function(){var o=Yr(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function y1(e,t,n){var r,i,s;return function(){var o=Yr(this,e),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(e),Yr(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,u))}}function v1(e,t){var n,r,i,s="style."+t,o="end."+s,u;return function(){var l=nn(this,e),c=l.on,h=l.value[s]==null?u||(u=jg(t)):void 0;(c!==n||i!==h)&&(r=(n=c).copy()).on(o,i=h),l.on=r}}function w1(e,t,n){var r=(e+="")=="transform"?AT:qg;return t==null?this.styleTween(e,m1(e,r)).on("end.style."+e,jg(e)):typeof t=="function"?this.styleTween(e,y1(e,r,tc(this,"style."+e,t))).each(v1(this._id,e)):this.styleTween(e,_1(e,r,t),n).on("end.style."+e,null)}function E1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function T1(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&E1(e,o,n)),r}return s._value=t,s}function A1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,T1(e,t,n??""))}function I1(e){return function(){this.textContent=e}}function R1(e){return function(){var t=e(this);this.textContent=t??""}}function b1(e){return this.tween("text",typeof e=="function"?R1(tc(this,"text",e)):I1(e==null?"":e+""))}function S1(e){return function(t){this.textContent=e.call(this,t)}}function C1(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&S1(i)),t}return r._value=e,r}function P1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,C1(e))}function x1(){for(var e=this._name,t=this._id,n=zg(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,l,c=0;c<u;++c)if(l=o[c]){var h=Me(l,t);Ia(l,e,n,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new wn(r,this._parents,e,n)}function V1(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var u={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=nn(this,r),h=c.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(l)),c.on=t}),i===0&&s()})}var N1=0;function wn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zg(){return++N1}var fn=Is.prototype;wn.prototype={constructor:wn,select:f1,selectAll:d1,selectChild:fn.selectChild,selectChildren:fn.selectChildren,filter:s1,merge:o1,selection:g1,transition:x1,call:fn.call,nodes:fn.nodes,node:fn.node,size:fn.size,empty:fn.empty,each:fn.each,on:l1,attr:jT,attrTween:KT,style:w1,styleTween:A1,text:b1,textTween:P1,remove:h1,tween:MT,delay:JT,duration:t1,ease:n1,easeVarying:i1,end:V1,[Symbol.iterator]:fn[Symbol.iterator]};function D1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var k1={time:null,delay:0,duration:250,ease:D1};function O1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function M1(e){var t,n;e instanceof wn?(t=e._id,e=e._name):(t=zg(),(n=k1).time=Jl(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,l,c=0;c<u;++c)(l=o[c])&&Ia(l,e,t,c,o,n||O1(l,t));return new wn(r,this._parents,e,t)}Is.prototype.interrupt=DT;Is.prototype.transition=M1;function L1(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,u,l=0,c=0;for(s=0;s<o;++s)u=n[s],l+=u.x,c+=u.y;for(l=(l/o-e)*r,c=(c/o-t)*r,s=0;s<o;++s)u=n[s],u.x-=l,u.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function F1(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Hg(this.cover(t,n),t,n,e)}function Hg(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},u=e._x0,l=e._y0,c=e._x1,h=e._y1,d,p,m,_,E,v,P,S;if(!s)return e._root=o,e;for(;s.length;)if((E=t>=(d=(u+c)/2))?u=d:c=d,(v=n>=(p=(l+h)/2))?l=p:h=p,i=s,!(s=s[P=v<<1|E]))return i[P]=o,e;if(m=+e._x.call(null,s.data),_=+e._y.call(null,s.data),t===m&&n===_)return o.next=s,i?i[P]=o:e._root=o,e;do i=i?i[P]=new Array(4):e._root=new Array(4),(E=t>=(d=(u+c)/2))?u=d:c=d,(v=n>=(p=(l+h)/2))?l=p:h=p;while((P=v<<1|E)===(S=(_>=p)<<1|m>=d));return i[S]=s,i[P]=o,e}function U1(e){var t,n,r=e.length,i,s,o=new Array(r),u=new Array(r),l=1/0,c=1/0,h=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,u[n]=s,i<l&&(l=i),i>h&&(h=i),s<c&&(c=s),s>d&&(d=s));if(l>h||c>d)return this;for(this.cover(l,c).cover(h,d),n=0;n<r;++n)Hg(this,o[n],u[n],e[n]);return this}function B1(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,u=this._root,l,c;n>e||e>=i||r>t||t>=s;)switch(c=(t<r)<<1|e<n,l=new Array(4),l[c]=u,u=l,o*=2,c){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function $1(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function q1(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function oe(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function j1(e,t,n){var r,i=this._x0,s=this._y0,o,u,l,c,h=this._x1,d=this._y1,p=[],m=this._root,_,E;for(m&&p.push(new oe(m,i,s,h,d)),n==null?n=1/0:(i=e-n,s=t-n,h=e+n,d=t+n,n*=n);_=p.pop();)if(!(!(m=_.node)||(o=_.x0)>h||(u=_.y0)>d||(l=_.x1)<i||(c=_.y1)<s))if(m.length){var v=(o+l)/2,P=(u+c)/2;p.push(new oe(m[3],v,P,l,c),new oe(m[2],o,P,v,c),new oe(m[1],v,u,l,P),new oe(m[0],o,u,v,P)),(E=(t>=P)<<1|e>=v)&&(_=p[p.length-1],p[p.length-1]=p[p.length-1-E],p[p.length-1-E]=_)}else{var S=e-+this._x.call(null,m.data),N=t-+this._y.call(null,m.data),x=S*S+N*N;if(x<n){var M=Math.sqrt(n=x);i=e-M,s=t-M,h=e+M,d=t+M,r=m.data}}return r}function z1(e){if(isNaN(h=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,u=this._y0,l=this._x1,c=this._y1,h,d,p,m,_,E,v,P;if(!n)return this;if(n.length)for(;;){if((_=h>=(p=(o+l)/2))?o=p:l=p,(E=d>=(m=(u+c)/2))?u=m:c=m,t=n,!(n=n[v=E<<1|_]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(r=t,P=v)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[v]=s:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[P]=n:this._root=n),this):(this._root=s,this)}function H1(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function G1(){return this._root}function W1(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function K1(e){var t=[],n,r=this._root,i,s,o,u,l;for(r&&t.push(new oe(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,u=n.x1,l=n.y1)&&r.length){var c=(s+u)/2,h=(o+l)/2;(i=r[3])&&t.push(new oe(i,c,h,u,l)),(i=r[2])&&t.push(new oe(i,s,h,c,l)),(i=r[1])&&t.push(new oe(i,c,o,u,h)),(i=r[0])&&t.push(new oe(i,s,o,c,h))}return this}function Q1(e){var t=[],n=[],r;for(this._root&&t.push(new oe(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,u=r.y0,l=r.x1,c=r.y1,h=(o+l)/2,d=(u+c)/2;(s=i[0])&&t.push(new oe(s,o,u,h,d)),(s=i[1])&&t.push(new oe(s,h,u,l,d)),(s=i[2])&&t.push(new oe(s,o,d,h,c)),(s=i[3])&&t.push(new oe(s,h,d,l,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function X1(e){return e[0]}function J1(e){return arguments.length?(this._x=e,this):this._x}function Y1(e){return e[1]}function Z1(e){return arguments.length?(this._y=e,this):this._y}function Gg(e,t,n){var r=new ec(t??X1,n??Y1,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function ec(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function If(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ae=Gg.prototype=ec.prototype;ae.copy=function(){var e=new ec(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=If(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=If(r));return e};ae.add=F1;ae.addAll=U1;ae.cover=B1;ae.data=$1;ae.extent=q1;ae.find=j1;ae.remove=z1;ae.removeAll=H1;ae.root=G1;ae.size=W1;ae.visit=K1;ae.visitAfter=Q1;ae.x=J1;ae.y=Z1;function mn(e){return function(){return e}}function zr(e){return(e()-.5)*1e-6}function tA(e){return e.index}function Rf(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function eA(e){var t=tA,n=d,r,i=mn(30),s,o,u,l,c,h=1;e==null&&(e=[]);function d(v){return 1/Math.min(u[v.source.index],u[v.target.index])}function p(v){for(var P=0,S=e.length;P<h;++P)for(var N=0,x,M,B,I,w,T,b;N<S;++N)x=e[N],M=x.source,B=x.target,I=B.x+B.vx-M.x-M.vx||zr(c),w=B.y+B.vy-M.y-M.vy||zr(c),T=Math.sqrt(I*I+w*w),T=(T-s[N])/T*v*r[N],I*=T,w*=T,B.vx-=I*(b=l[N]),B.vy-=w*b,M.vx+=I*(b=1-b),M.vy+=w*b}function m(){if(o){var v,P=o.length,S=e.length,N=new Map(o.map((M,B)=>[t(M,B,o),M])),x;for(v=0,u=new Array(P);v<S;++v)x=e[v],x.index=v,typeof x.source!="object"&&(x.source=Rf(N,x.source)),typeof x.target!="object"&&(x.target=Rf(N,x.target)),u[x.source.index]=(u[x.source.index]||0)+1,u[x.target.index]=(u[x.target.index]||0)+1;for(v=0,l=new Array(S);v<S;++v)x=e[v],l[v]=u[x.source.index]/(u[x.source.index]+u[x.target.index]);r=new Array(S),_(),s=new Array(S),E()}}function _(){if(o)for(var v=0,P=e.length;v<P;++v)r[v]=+n(e[v],v,e)}function E(){if(o)for(var v=0,P=e.length;v<P;++v)s[v]=+i(e[v],v,e)}return p.initialize=function(v,P){o=v,c=P,m()},p.links=function(v){return arguments.length?(e=v,m(),p):e},p.id=function(v){return arguments.length?(t=v,p):t},p.iterations=function(v){return arguments.length?(h=+v,p):h},p.strength=function(v){return arguments.length?(n=typeof v=="function"?v:mn(+v),_(),p):n},p.distance=function(v){return arguments.length?(i=typeof v=="function"?v:mn(+v),E(),p):i},p}const nA=1664525,rA=1013904223,bf=4294967296;function iA(){let e=1;return()=>(e=(nA*e+rA)%bf)/bf}function sA(e){return e.x}function oA(e){return e.y}var aA=10,uA=Math.PI*(3-Math.sqrt(5));function lA(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,u=new Map,l=Yl(d),c=Kl("tick","end"),h=iA();e==null&&(e=[]);function d(){p(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function p(E){var v,P=e.length,S;E===void 0&&(E=1);for(var N=0;N<E;++N)for(n+=(s-n)*i,u.forEach(function(x){x(n)}),v=0;v<P;++v)S=e[v],S.fx==null?S.x+=S.vx*=o:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=o:(S.y=S.fy,S.vy=0);return t}function m(){for(var E=0,v=e.length,P;E<v;++E){if(P=e[E],P.index=E,P.fx!=null&&(P.x=P.fx),P.fy!=null&&(P.y=P.fy),isNaN(P.x)||isNaN(P.y)){var S=aA*Math.sqrt(.5+E),N=E*uA;P.x=S*Math.cos(N),P.y=S*Math.sin(N)}(isNaN(P.vx)||isNaN(P.vy))&&(P.vx=P.vy=0)}}function _(E){return E.initialize&&E.initialize(e,h),E}return m(),t={tick:p,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(E){return arguments.length?(e=E,m(),u.forEach(_),t):e},alpha:function(E){return arguments.length?(n=+E,t):n},alphaMin:function(E){return arguments.length?(r=+E,t):r},alphaDecay:function(E){return arguments.length?(i=+E,t):+i},alphaTarget:function(E){return arguments.length?(s=+E,t):s},velocityDecay:function(E){return arguments.length?(o=1-E,t):1-o},randomSource:function(E){return arguments.length?(h=E,u.forEach(_),t):h},force:function(E,v){return arguments.length>1?(v==null?u.delete(E):u.set(E,_(v)),t):u.get(E)},find:function(E,v,P){var S=0,N=e.length,x,M,B,I,w;for(P==null?P=1/0:P*=P,S=0;S<N;++S)I=e[S],x=E-I.x,M=v-I.y,B=x*x+M*M,B<P&&(w=I,P=B);return w},on:function(E,v){return arguments.length>1?(c.on(E,v),t):c.on(E)}}}function cA(){var e,t,n,r,i=mn(-30),s,o=1,u=1/0,l=.81;function c(m){var _,E=e.length,v=Gg(e,sA,oA).visitAfter(d);for(r=m,_=0;_<E;++_)t=e[_],v.visit(p)}function h(){if(e){var m,_=e.length,E;for(s=new Array(_),m=0;m<_;++m)E=e[m],s[E.index]=+i(E,m,e)}}function d(m){var _=0,E,v,P=0,S,N,x;if(m.length){for(S=N=x=0;x<4;++x)(E=m[x])&&(v=Math.abs(E.value))&&(_+=E.value,P+=v,S+=v*E.x,N+=v*E.y);m.x=S/P,m.y=N/P}else{E=m,E.x=E.data.x,E.y=E.data.y;do _+=s[E.data.index];while(E=E.next)}m.value=_}function p(m,_,E,v){if(!m.value)return!0;var P=m.x-t.x,S=m.y-t.y,N=v-_,x=P*P+S*S;if(N*N/l<x)return x<u&&(P===0&&(P=zr(n),x+=P*P),S===0&&(S=zr(n),x+=S*S),x<o&&(x=Math.sqrt(o*x)),t.vx+=P*m.value*r/x,t.vy+=S*m.value*r/x),!0;if(m.length||x>=u)return;(m.data!==t||m.next)&&(P===0&&(P=zr(n),x+=P*P),S===0&&(S=zr(n),x+=S*S),x<o&&(x=Math.sqrt(o*x)));do m.data!==t&&(N=s[m.data.index]*r/x,t.vx+=P*N,t.vy+=S*N);while(m=m.next)}return c.initialize=function(m,_){e=m,n=_,h()},c.strength=function(m){return arguments.length?(i=typeof m=="function"?m:mn(+m),h(),c):i},c.distanceMin=function(m){return arguments.length?(o=m*m,c):Math.sqrt(o)},c.distanceMax=function(m){return arguments.length?(u=m*m,c):Math.sqrt(u)},c.theta=function(m){return arguments.length?(l=m*m,c):Math.sqrt(l)},c}function hA(e,t,n){var r,i=mn(.1),s,o;typeof e!="function"&&(e=mn(+e)),t==null&&(t=0),n==null&&(n=0);function u(c){for(var h=0,d=r.length;h<d;++h){var p=r[h],m=p.x-t||1e-6,_=p.y-n||1e-6,E=Math.sqrt(m*m+_*_),v=(o[h]-E)*s[h]*c/E;p.vx+=m*v,p.vy+=_*v}}function l(){if(r){var c,h=r.length;for(s=new Array(h),o=new Array(h),c=0;c<h;++c)o[c]=+e(r[c],c,r),s[c]=isNaN(o[c])?0:+i(r[c],c,r)}}return u.initialize=function(c){r=c,l()},u.strength=function(c){return arguments.length?(i=typeof c=="function"?c:mn(+c),l(),u):i},u.radius=function(c){return arguments.length?(e=typeof c=="function"?c:mn(+c),l(),u):e},u.x=function(c){return arguments.length?(t=+c,u):t},u.y=function(c){return arguments.length?(n=+c,u):n},u}var pt=1e-6,ot=Math.PI,be=ot/2,Sf=ot/4,xe=ot*2,dn=180/ot,ve=ot/180,Et=Math.abs,fA=Math.atan,us=Math.atan2,Ct=Math.cos,Pt=Math.sin,dA=Math.sign||function(e){return e>0?1:e<0?-1:0},Rr=Math.sqrt;function pA(e){return e>1?0:e<-1?ot:Math.acos(e)}function ls(e){return e>1?be:e<-1?-be:Math.asin(e)}function Se(){}function $o(e,t){e&&Pf.hasOwnProperty(e.type)&&Pf[e.type](e,t)}var Cf={Feature:function(e,t){$o(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)$o(n[r].geometry,t)}},Pf={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Wu(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Wu(n[r],t,0)},Polygon:function(e,t){xf(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)xf(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)$o(n[r],t)}};function Wu(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function xf(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Wu(e[n],t,1);t.polygonEnd()}function Fr(e,t){e&&Cf.hasOwnProperty(e.type)?Cf[e.type](e,t):$o(e,t)}function Ku(e){return[us(e[1],e[0]),ls(e[2])]}function ti(e){var t=e[0],n=e[1],r=Ct(n);return[r*Ct(t),r*Pt(t),Pt(n)]}function Zs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function qo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function mu(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function to(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Qu(e){var t=Rr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Xu(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Ju(e,t){return Et(e)>ot&&(e-=Math.round(e/xe)*xe),[e,t]}Ju.invert=Ju;function gA(e,t,n){return(e%=xe)?t||n?Xu(Nf(e),Df(t,n)):Nf(e):t||n?Df(t,n):Ju}function Vf(e){return function(t,n){return t+=e,Et(t)>ot&&(t-=Math.round(t/xe)*xe),[t,n]}}function Nf(e){var t=Vf(e);return t.invert=Vf(-e),t}function Df(e,t){var n=Ct(e),r=Pt(e),i=Ct(t),s=Pt(t);function o(u,l){var c=Ct(l),h=Ct(u)*c,d=Pt(u)*c,p=Pt(l),m=p*n+h*r;return[us(d*i-m*s,h*n-p*r),ls(m*i+d*s)]}return o.invert=function(u,l){var c=Ct(l),h=Ct(u)*c,d=Pt(u)*c,p=Pt(l),m=p*i-d*s;return[us(d*i+p*s,h*n+m*r),ls(m*n-h*r)]},o}function mA(e,t,n,r,i,s){if(n){var o=Ct(t),u=Pt(t),l=r*n;i==null?(i=t+r*xe,s=t-l/2):(i=kf(o,i),s=kf(o,s),(r>0?i<s:i>s)&&(i+=r*xe));for(var c,h=i;r>0?h>s:h<s;h-=l)c=Ku([o,-u*Ct(h),-u*Pt(h)]),e.point(c[0],c[1])}}function kf(e,t){t=ti(t),t[0]-=e,Qu(t);var n=pA(-t[1]);return((-t[2]<0?-n:n)+xe-pt)%xe}function Wg(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Se,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function mo(e,t){return Et(e[0]-t[0])<pt&&Et(e[1]-t[1])<pt}function eo(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Kg(e,t,n,r,i){var s=[],o=[],u,l;if(e.forEach(function(_){if(!((E=_.length-1)<=0)){var E,v=_[0],P=_[E],S;if(mo(v,P)){if(!v[2]&&!P[2]){for(i.lineStart(),u=0;u<E;++u)i.point((v=_[u])[0],v[1]);i.lineEnd();return}P[0]+=2*pt}s.push(S=new eo(v,_,null,!0)),o.push(S.o=new eo(v,null,S,!1)),s.push(S=new eo(P,_,null,!1)),o.push(S.o=new eo(P,null,S,!0))}}),!!s.length){for(o.sort(t),Of(s),Of(o),u=0,l=o.length;u<l;++u)o[u].e=n=!n;for(var c=s[0],h,d;;){for(var p=c,m=!0;p.v;)if((p=p.n)===c)return;h=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(u=0,l=h.length;u<l;++u)i.point((d=h[u])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(m)for(h=p.p.z,u=h.length-1;u>=0;--u)i.point((d=h[u])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,h=p.z,m=!m}while(!p.v);i.lineEnd()}}}function Of(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function _u(e){return Et(e[0])<=ot?e[0]:dA(e[0])*((Et(e[0])+ot)%xe-ot)}function _A(e,t){var n=_u(t),r=t[1],i=Pt(r),s=[Pt(n),-Ct(n),0],o=0,u=0,l=new yr;i===1?r=be+pt:i===-1&&(r=-be-pt);for(var c=0,h=e.length;c<h;++c)if(p=(d=e[c]).length)for(var d,p,m=d[p-1],_=_u(m),E=m[1]/2+Sf,v=Pt(E),P=Ct(E),S=0;S<p;++S,_=x,v=B,P=I,m=N){var N=d[S],x=_u(N),M=N[1]/2+Sf,B=Pt(M),I=Ct(M),w=x-_,T=w>=0?1:-1,b=T*w,R=b>ot,C=v*B;if(l.add(us(C*T*Pt(b),P*I+C*Ct(b))),o+=R?w+T*xe:w,R^_>=n^x>=n){var A=qo(ti(m),ti(N));Qu(A);var X=qo(s,A);Qu(X);var F=(R^w>=0?-1:1)*ls(X[2]);(r>F||r===F&&(A[0]||A[1]))&&(u+=R^w>=0?1:-1)}}return(o<-pt||o<pt&&l<-1e-12)^u&1}function Qg(e,t,n,r){return function(i){var s=t(i),o=Wg(),u=t(o),l=!1,c,h,d,p={point:m,lineStart:E,lineEnd:v,polygonStart:function(){p.point=P,p.lineStart=S,p.lineEnd=N,h=[],c=[]},polygonEnd:function(){p.point=m,p.lineStart=E,p.lineEnd=v,h=gg(h);var x=_A(c,r);h.length?(l||(i.polygonStart(),l=!0),Kg(h,vA,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),h=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(x,M){e(x,M)&&i.point(x,M)}function _(x,M){s.point(x,M)}function E(){p.point=_,s.lineStart()}function v(){p.point=m,s.lineEnd()}function P(x,M){d.push([x,M]),u.point(x,M)}function S(){u.lineStart(),d=[]}function N(){P(d[0][0],d[0][1]),u.lineEnd();var x=u.clean(),M=o.result(),B,I=M.length,w,T,b;if(d.pop(),c.push(d),d=null,!!I){if(x&1){if(T=M[0],(w=T.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),B=0;B<w;++B)i.point((b=T[B])[0],b[1]);i.lineEnd()}return}I>1&&x&2&&M.push(M.pop().concat(M.shift())),h.push(M.filter(yA))}}return p}}function yA(e){return e.length>1}function vA(e,t){return((e=e.x)[0]<0?e[1]-be-pt:be-e[1])-((t=t.x)[0]<0?t[1]-be-pt:be-t[1])}const Mf=Qg(function(){return!0},wA,TA,[-ot,-be]);function wA(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?ot:-ot,l=Et(s-t);Et(l-ot)<pt?(e.point(t,n=(n+o)/2>0?be:-be),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&l>=ot&&(Et(t-r)<pt&&(t-=r*pt),Et(s-u)<pt&&(s-=u*pt),n=EA(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function EA(e,t,n,r){var i,s,o=Pt(e-n);return Et(o)>pt?fA((Pt(t)*(s=Ct(r))*Pt(n)-Pt(r)*(i=Ct(t))*Pt(e))/(i*s*o)):(t+r)/2}function TA(e,t,n,r){var i;if(e==null)i=n*be,r.point(-ot,i),r.point(0,i),r.point(ot,i),r.point(ot,0),r.point(ot,-i),r.point(0,-i),r.point(-ot,-i),r.point(-ot,0),r.point(-ot,i);else if(Et(e[0]-t[0])>pt){var s=e[0]<t[0]?ot:-ot;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function AA(e){var t=Ct(e),n=2*ve,r=t>0,i=Et(t)>pt;function s(h,d,p,m){mA(m,e,n,p,h,d)}function o(h,d){return Ct(h)*Ct(d)>t}function u(h){var d,p,m,_,E;return{lineStart:function(){_=m=!1,E=1},point:function(v,P){var S=[v,P],N,x=o(v,P),M=r?x?0:c(v,P):x?c(v+(v<0?ot:-ot),P):0;if(!d&&(_=m=x)&&h.lineStart(),x!==m&&(N=l(d,S),(!N||mo(d,N)||mo(S,N))&&(S[2]=1)),x!==m)E=0,x?(h.lineStart(),N=l(S,d),h.point(N[0],N[1])):(N=l(d,S),h.point(N[0],N[1],2),h.lineEnd()),d=N;else if(i&&d&&r^x){var B;!(M&p)&&(B=l(S,d,!0))&&(E=0,r?(h.lineStart(),h.point(B[0][0],B[0][1]),h.point(B[1][0],B[1][1]),h.lineEnd()):(h.point(B[1][0],B[1][1]),h.lineEnd(),h.lineStart(),h.point(B[0][0],B[0][1],3)))}x&&(!d||!mo(d,S))&&h.point(S[0],S[1]),d=S,m=x,p=M},lineEnd:function(){m&&h.lineEnd(),d=null},clean:function(){return E|(_&&m)<<1}}}function l(h,d,p){var m=ti(h),_=ti(d),E=[1,0,0],v=qo(m,_),P=Zs(v,v),S=v[0],N=P-S*S;if(!N)return!p&&h;var x=t*P/N,M=-t*S/N,B=qo(E,v),I=to(E,x),w=to(v,M);mu(I,w);var T=B,b=Zs(I,T),R=Zs(T,T),C=b*b-R*(Zs(I,I)-1);if(!(C<0)){var A=Rr(C),X=to(T,(-b-A)/R);if(mu(X,I),X=Ku(X),!p)return X;var F=h[0],Y=d[0],lt=h[1],mt=d[1],Lt;Y<F&&(Lt=F,F=Y,Y=Lt);var Le=Y-F,me=Et(Le-ot)<pt,Ft=me||Le<pt;if(!me&&mt<lt&&(Lt=lt,lt=mt,mt=Lt),Ft?me?lt+mt>0^X[1]<(Et(X[0]-F)<pt?lt:mt):lt<=X[1]&&X[1]<=mt:Le>ot^(F<=X[0]&&X[0]<=Y)){var ht=to(T,(-b+A)/R);return mu(ht,I),[X,Ku(ht)]}}}function c(h,d){var p=r?e:ot-e,m=0;return h<-p?m|=1:h>p&&(m|=2),d<-p?m|=4:d>p&&(m|=8),m}return Qg(o,u,s,r?[0,-e]:[-ot,e-ot])}function IA(e,t,n,r,i,s){var o=e[0],u=e[1],l=t[0],c=t[1],h=0,d=1,p=l-o,m=c-u,_;if(_=n-o,!(!p&&_>0)){if(_/=p,p<0){if(_<h)return;_<d&&(d=_)}else if(p>0){if(_>d)return;_>h&&(h=_)}if(_=i-o,!(!p&&_<0)){if(_/=p,p<0){if(_>d)return;_>h&&(h=_)}else if(p>0){if(_<h)return;_<d&&(d=_)}if(_=r-u,!(!m&&_>0)){if(_/=m,m<0){if(_<h)return;_<d&&(d=_)}else if(m>0){if(_>d)return;_>h&&(h=_)}if(_=s-u,!(!m&&_<0)){if(_/=m,m<0){if(_>d)return;_>h&&(h=_)}else if(m>0){if(_<h)return;_<d&&(d=_)}return h>0&&(e[0]=o+h*p,e[1]=u+h*m),d<1&&(t[0]=o+d*p,t[1]=u+d*m),!0}}}}}var Ui=1e9,no=-Ui;function RA(e,t,n,r){function i(c,h){return e<=c&&c<=n&&t<=h&&h<=r}function s(c,h,d,p){var m=0,_=0;if(c==null||(m=o(c,d))!==(_=o(h,d))||l(c,h)<0^d>0)do p.point(m===0||m===3?e:n,m>1?r:t);while((m=(m+d+4)%4)!==_);else p.point(h[0],h[1])}function o(c,h){return Et(c[0]-e)<pt?h>0?0:3:Et(c[0]-n)<pt?h>0?2:1:Et(c[1]-t)<pt?h>0?1:0:h>0?3:2}function u(c,h){return l(c.x,h.x)}function l(c,h){var d=o(c,1),p=o(h,1);return d!==p?d-p:d===0?h[1]-c[1]:d===1?c[0]-h[0]:d===2?c[1]-h[1]:h[0]-c[0]}return function(c){var h=c,d=Wg(),p,m,_,E,v,P,S,N,x,M,B,I={point:w,lineStart:C,lineEnd:A,polygonStart:b,polygonEnd:R};function w(F,Y){i(F,Y)&&h.point(F,Y)}function T(){for(var F=0,Y=0,lt=m.length;Y<lt;++Y)for(var mt=m[Y],Lt=1,Le=mt.length,me=mt[0],Ft,ht,rn=me[0],ue=me[1];Lt<Le;++Lt)Ft=rn,ht=ue,me=mt[Lt],rn=me[0],ue=me[1],ht<=r?ue>r&&(rn-Ft)*(r-ht)>(ue-ht)*(e-Ft)&&++F:ue<=r&&(rn-Ft)*(r-ht)<(ue-ht)*(e-Ft)&&--F;return F}function b(){h=d,p=[],m=[],B=!0}function R(){var F=T(),Y=B&&F,lt=(p=gg(p)).length;(Y||lt)&&(c.polygonStart(),Y&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),lt&&Kg(p,u,F,s,c),c.polygonEnd()),h=c,p=m=_=null}function C(){I.point=X,m&&m.push(_=[]),M=!0,x=!1,S=N=NaN}function A(){p&&(X(E,v),P&&x&&d.rejoin(),p.push(d.result())),I.point=w,x&&h.lineEnd()}function X(F,Y){var lt=i(F,Y);if(m&&_.push([F,Y]),M)E=F,v=Y,P=lt,M=!1,lt&&(h.lineStart(),h.point(F,Y));else if(lt&&x)h.point(F,Y);else{var mt=[S=Math.max(no,Math.min(Ui,S)),N=Math.max(no,Math.min(Ui,N))],Lt=[F=Math.max(no,Math.min(Ui,F)),Y=Math.max(no,Math.min(Ui,Y))];IA(mt,Lt,e,t,n,r)?(x||(h.lineStart(),h.point(mt[0],mt[1])),h.point(Lt[0],Lt[1]),lt||h.lineEnd(),B=!1):lt&&(h.lineStart(),h.point(F,Y),B=!1)}S=F,N=Y,x=lt}return I}}const Yu=e=>e;var yu=new yr,Zu=new yr,Xg,Jg,tl,el,pn={point:Se,lineStart:Se,lineEnd:Se,polygonStart:function(){pn.lineStart=bA,pn.lineEnd=CA},polygonEnd:function(){pn.lineStart=pn.lineEnd=pn.point=Se,yu.add(Et(Zu)),Zu=new yr},result:function(){var e=yu/2;return yu=new yr,e}};function bA(){pn.point=SA}function SA(e,t){pn.point=Yg,Xg=tl=e,Jg=el=t}function Yg(e,t){Zu.add(el*e-tl*t),tl=e,el=t}function CA(){Yg(Xg,Jg)}var ei=1/0,jo=ei,cs=-ei,zo=cs,Ho={point:PA,lineStart:Se,lineEnd:Se,polygonStart:Se,polygonEnd:Se,result:function(){var e=[[ei,jo],[cs,zo]];return cs=zo=-(jo=ei=1/0),e}};function PA(e,t){e<ei&&(ei=e),e>cs&&(cs=e),t<jo&&(jo=t),t>zo&&(zo=t)}var nl=0,rl=0,Bi=0,Go=0,Wo=0,Hr=0,il=0,sl=0,$i=0,Zg,tm,ze,He,Ie={point:wr,lineStart:Lf,lineEnd:Ff,polygonStart:function(){Ie.lineStart=NA,Ie.lineEnd=DA},polygonEnd:function(){Ie.point=wr,Ie.lineStart=Lf,Ie.lineEnd=Ff},result:function(){var e=$i?[il/$i,sl/$i]:Hr?[Go/Hr,Wo/Hr]:Bi?[nl/Bi,rl/Bi]:[NaN,NaN];return nl=rl=Bi=Go=Wo=Hr=il=sl=$i=0,e}};function wr(e,t){nl+=e,rl+=t,++Bi}function Lf(){Ie.point=xA}function xA(e,t){Ie.point=VA,wr(ze=e,He=t)}function VA(e,t){var n=e-ze,r=t-He,i=Rr(n*n+r*r);Go+=i*(ze+e)/2,Wo+=i*(He+t)/2,Hr+=i,wr(ze=e,He=t)}function Ff(){Ie.point=wr}function NA(){Ie.point=kA}function DA(){em(Zg,tm)}function kA(e,t){Ie.point=em,wr(Zg=ze=e,tm=He=t)}function em(e,t){var n=e-ze,r=t-He,i=Rr(n*n+r*r);Go+=i*(ze+e)/2,Wo+=i*(He+t)/2,Hr+=i,i=He*e-ze*t,il+=i*(ze+e),sl+=i*(He+t),$i+=i*3,wr(ze=e,He=t)}function nm(e){this._context=e}nm.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,xe);break}}},result:Se};var ol=new yr,vu,rm,im,qi,ji,hs={point:Se,lineStart:function(){hs.point=OA},lineEnd:function(){vu&&sm(rm,im),hs.point=Se},polygonStart:function(){vu=!0},polygonEnd:function(){vu=null},result:function(){var e=+ol;return ol=new yr,e}};function OA(e,t){hs.point=sm,rm=qi=e,im=ji=t}function sm(e,t){qi-=e,ji-=t,ol.add(Rr(qi*qi+ji*ji)),qi=e,ji=t}let Uf,Ko,Bf,$f;class qf{constructor(t){this._append=t==null?om:MA(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Bf||this._append!==Ko){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Bf=r,Ko=this._append,$f=this._,this._=i}this._+=$f;break}}}result(){const t=this._;return this._="",t.length?t:null}}function om(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function MA(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return om;if(t!==Uf){const n=10**t;Uf=t,Ko=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return Ko}function LA(e,t){let n=3,r=4.5,i,s;function o(u){return u&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Fr(u,i(s))),s.result()}return o.area=function(u){return Fr(u,i(pn)),pn.result()},o.measure=function(u){return Fr(u,i(hs)),hs.result()},o.bounds=function(u){return Fr(u,i(Ho)),Ho.result()},o.centroid=function(u){return Fr(u,i(Ie)),Ie.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Yu):(e=u).stream,o):e},o.context=function(u){return arguments.length?(s=u==null?(t=null,new qf(n)):new nm(t=u),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(s.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const l=Math.floor(u);if(!(l>=0))throw new RangeError(`invalid digits: ${u}`);n=l}return t===null&&(s=new qf(n)),o},o.projection(e).digits(n).context(t)}function nc(e){return function(t){var n=new al;for(var r in e)n[r]=e[r];return n.stream=t,n}}function al(){}al.prototype={constructor:al,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function rc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Fr(n,e.stream(Ho)),t(Ho.result()),r!=null&&e.clipExtent(r),e}function am(e,t,n){return rc(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,l])},n)}function FA(e,t,n){return am(e,[[0,0],t],n)}function UA(e,t,n){return rc(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,u=-s*r[0][1];e.scale(150*s).translate([o,u])},n)}function BA(e,t,n){return rc(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],u=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,u])},n)}var jf=16,$A=Ct(30*ve);function zf(e,t){return+t?jA(e,t):qA(e)}function qA(e){return nc({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function jA(e,t){function n(r,i,s,o,u,l,c,h,d,p,m,_,E,v){var P=c-r,S=h-i,N=P*P+S*S;if(N>4*t&&E--){var x=o+p,M=u+m,B=l+_,I=Rr(x*x+M*M+B*B),w=ls(B/=I),T=Et(Et(B)-1)<pt||Et(s-d)<pt?(s+d)/2:us(M,x),b=e(T,w),R=b[0],C=b[1],A=R-r,X=C-i,F=S*A-P*X;(F*F/N>t||Et((P*A+S*X)/N-.5)>.3||o*p+u*m+l*_<$A)&&(n(r,i,s,o,u,l,R,C,T,x/=I,M/=I,B,E,v),v.point(R,C),n(R,C,T,x,M,B,c,h,d,p,m,_,E,v))}}return function(r){var i,s,o,u,l,c,h,d,p,m,_,E,v={point:P,lineStart:S,lineEnd:x,polygonStart:function(){r.polygonStart(),v.lineStart=M},polygonEnd:function(){r.polygonEnd(),v.lineStart=S}};function P(w,T){w=e(w,T),r.point(w[0],w[1])}function S(){d=NaN,v.point=N,r.lineStart()}function N(w,T){var b=ti([w,T]),R=e(w,T);n(d,p,h,m,_,E,d=R[0],p=R[1],h=w,m=b[0],_=b[1],E=b[2],jf,r),r.point(d,p)}function x(){v.point=P,r.lineEnd()}function M(){S(),v.point=B,v.lineEnd=I}function B(w,T){N(i=w,T),s=d,o=p,u=m,l=_,c=E,v.point=N}function I(){n(d,p,h,m,_,E,s,o,i,u,l,c,jf,r),v.lineEnd=x,x()}return v}}var zA=nc({point:function(e,t){this.stream.point(e*ve,t*ve)}});function HA(e){return nc({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function GA(e,t,n,r,i){function s(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return s.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},s}function Hf(e,t,n,r,i,s){if(!s)return GA(e,t,n,r,i);var o=Ct(s),u=Pt(s),l=o*e,c=u*e,h=o/e,d=u/e,p=(u*n-o*t)/e,m=(u*t+o*n)/e;function _(E,v){return E*=r,v*=i,[l*E-c*v+t,n-c*E-l*v]}return _.invert=function(E,v){return[r*(h*E-d*v+p),i*(m-d*E-h*v)]},_}function WA(e){return KA(function(){return e})()}function KA(e){var t,n=150,r=480,i=250,s=0,o=0,u=0,l=0,c=0,h,d=0,p=1,m=1,_=null,E=Mf,v=null,P,S,N,x=Yu,M=.5,B,I,w,T,b;function R(F){return w(F[0]*ve,F[1]*ve)}function C(F){return F=w.invert(F[0],F[1]),F&&[F[0]*dn,F[1]*dn]}R.stream=function(F){return T&&b===F?T:T=zA(HA(h)(E(B(x(b=F)))))},R.preclip=function(F){return arguments.length?(E=F,_=void 0,X()):E},R.postclip=function(F){return arguments.length?(x=F,v=P=S=N=null,X()):x},R.clipAngle=function(F){return arguments.length?(E=+F?AA(_=F*ve):(_=null,Mf),X()):_*dn},R.clipExtent=function(F){return arguments.length?(x=F==null?(v=P=S=N=null,Yu):RA(v=+F[0][0],P=+F[0][1],S=+F[1][0],N=+F[1][1]),X()):v==null?null:[[v,P],[S,N]]},R.scale=function(F){return arguments.length?(n=+F,A()):n},R.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],A()):[r,i]},R.center=function(F){return arguments.length?(s=F[0]%360*ve,o=F[1]%360*ve,A()):[s*dn,o*dn]},R.rotate=function(F){return arguments.length?(u=F[0]%360*ve,l=F[1]%360*ve,c=F.length>2?F[2]%360*ve:0,A()):[u*dn,l*dn,c*dn]},R.angle=function(F){return arguments.length?(d=F%360*ve,A()):d*dn},R.reflectX=function(F){return arguments.length?(p=F?-1:1,A()):p<0},R.reflectY=function(F){return arguments.length?(m=F?-1:1,A()):m<0},R.precision=function(F){return arguments.length?(B=zf(I,M=F*F),X()):Rr(M)},R.fitExtent=function(F,Y){return am(R,F,Y)},R.fitSize=function(F,Y){return FA(R,F,Y)},R.fitWidth=function(F,Y){return UA(R,F,Y)},R.fitHeight=function(F,Y){return BA(R,F,Y)};function A(){var F=Hf(n,0,0,p,m,d).apply(null,t(s,o)),Y=Hf(n,r-F[0],i-F[1],p,m,d);return h=gA(u,l,c),I=Xu(t,Y),w=Xu(h,I),B=zf(I,M),X()}function X(){return T=b=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&C,A()}}function um(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}um.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Et(i)>pt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function QA(){return WA(um).scale(175.295)}function zi(e,t,n){this.k=e,this.x=t,this.y=n}zi.prototype={constructor:zi,scale:function(e){return e===1?this:new zi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new zi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};zi.prototype;function XA(e){return e}function JA(e){if(e==null)return XA;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(u,l){l||(t=n=0);var c=2,h=u.length,d=new Array(h);for(d[0]=(t+=u[0])*r+s,d[1]=(n+=u[1])*i+o;c<h;)d[c]=u[c],++c;return d}}function YA(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Gf(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Wf(e,n)})}:Wf(e,t)}function Wf(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=ZA(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function ZA(e,t){var n=JA(e.transform),r=e.arcs;function i(h,d){d.length&&d.pop();for(var p=r[h<0?~h:h],m=0,_=p.length;m<_;++m)d.push(n(p[m],m));h<0&&YA(d,_)}function s(h){return n(h)}function o(h){for(var d=[],p=0,m=h.length;p<m;++p)i(h[p],d);return d.length<2&&d.push(d[0]),d}function u(h){for(var d=o(h);d.length<4;)d.push(d[0]);return d}function l(h){return h.map(u)}function c(h){var d=h.type,p;switch(d){case"GeometryCollection":return{type:d,geometries:h.geometries.map(c)};case"Point":p=s(h.coordinates);break;case"MultiPoint":p=h.coordinates.map(s);break;case"LineString":p=o(h.arcs);break;case"MultiLineString":p=h.arcs.map(o);break;case"Polygon":p=l(h.arcs);break;case"MultiPolygon":p=h.arcs.map(l);break;default:return null}return{type:d,coordinates:p}}return c(t)}const tI=()=>{};var Kf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},eI=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],u=e[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},cm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,u=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,h=s>>2,d=(s&3)<<4|u>>4;let p=(u&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[h],n[d],n[p],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lm(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):eI(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],u=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||u==null||c==null||d==null)throw new nI;const p=s<<2|u>>4;if(r.push(p),c!==64){const m=u<<4&240|c>>2;if(r.push(m),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rI=function(e){const t=lm(e);return cm.encodeByteArray(t,!0)},Qo=function(e){return rI(e).replace(/\./g,"")},iI=function(e){try{return cm.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=()=>sI().__FIREBASE_DEFAULTS__,aI=()=>{if(typeof process>"u"||typeof Kf>"u")return;const e=Kf.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},uI=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&iI(e[1]);return t&&JSON.parse(t)},ic=()=>{try{return tI()||oI()||aI()||uI()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},lI=e=>{var t,n;return(n=(t=ic())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},cI=e=>{const t=lI(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},hm=()=>{var e;return(e=ic())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fI(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Qo(JSON.stringify(n)),Qo(JSON.stringify(o)),""].join(".")}const Xi={};function pI(){const e={prod:[],emulator:[]};for(const t of Object.keys(Xi))Xi[t]?e.emulator.push(t):e.prod.push(t);return e}function gI(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Qf=!1;function mI(e,t){if(typeof window>"u"||typeof document>"u"||!sc(window.location.host)||Xi[e]===t||Xi[e]||Qf)return;Xi[e]=t;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=pI().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function u(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Qf=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=gI(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),E=n("learnmore"),v=document.getElementById(E)||document.createElement("a"),P=n("preprendIcon"),S=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const N=p.element;u(N),h(v,E);const x=c();l(S,P),N.append(S,_,v,x),document.body.appendChild(N)}s?(_.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yI(){var e;const t=(e=ic())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vI(){return!yI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wI(){try{return typeof indexedDB=="object"}catch{return!1}}function EI(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="FirebaseError";class fi extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=TI,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fm.prototype.create)}}class fm{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?AI(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new fi(i,u,r)}}function AI(e,t){return e.replace(II,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const II=/\{\$([^}]+)}/g;function Xo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Xf(s)&&Xf(o)){if(!Xo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Xf(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(e){return e&&e._delegate?e._delegate:e}class fs{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new hI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(SI(t))try{this.getOrInitializeService({instanceIdentifier:lr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=lr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=lr){return this.instances.has(t)}getOptions(t=lr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bI(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=lr){return this.component?this.component.multipleInstances?t:lr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bI(e){return e===lr?void 0:e}function SI(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new RI(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(st||(st={}));const PI={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},xI=st.INFO,VI={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},NI=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=VI[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dm{constructor(t){this.name=t,this._logLevel=xI,this._logHandler=NI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in st))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...t),this._logHandler(this,st.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...t),this._logHandler(this,st.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,st.INFO,...t),this._logHandler(this,st.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,st.WARN,...t),this._logHandler(this,st.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...t),this._logHandler(this,st.ERROR,...t)}}const DI=(e,t)=>t.some(n=>e instanceof n);let Jf,Yf;function kI(){return Jf||(Jf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OI(){return Yf||(Yf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pm=new WeakMap,ul=new WeakMap,gm=new WeakMap,wu=new WeakMap,oc=new WeakMap;function MI(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Ln(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&pm.set(n,e)}).catch(()=>{}),oc.set(t,e),t}function LI(e){if(ul.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});ul.set(e,t)}let ll={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ul.get(e);if(t==="objectStoreNames")return e.objectStoreNames||gm.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ln(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function FI(e){ll=e(ll)}function UI(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Eu(this),t,...n);return gm.set(r,t.sort?t.sort():[t]),Ln(r)}:OI().includes(e)?function(...t){return e.apply(Eu(this),t),Ln(pm.get(this))}:function(...t){return Ln(e.apply(Eu(this),t))}}function BI(e){return typeof e=="function"?UI(e):(e instanceof IDBTransaction&&LI(e),DI(e,kI())?new Proxy(e,ll):e)}function Ln(e){if(e instanceof IDBRequest)return MI(e);if(wu.has(e))return wu.get(e);const t=BI(e);return t!==e&&(wu.set(e,t),oc.set(t,e)),t}const Eu=e=>oc.get(e);function $I(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),u=Ln(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ln(o.result),l.oldVersion,l.newVersion,Ln(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),u.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),u}const qI=["get","getKey","getAll","getAllKeys","count"],jI=["put","add","delete","clear"],Tu=new Map;function Zf(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Tu.get(t))return Tu.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=jI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qI.includes(n)))return;const s=async function(o,...u){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(await Promise.all([c[n](...u),i&&l.done]))[0]};return Tu.set(t,s),s}FI(e=>({...e,get:(t,n,r)=>Zf(t,n)||e.get(t,n,r),has:(t,n)=>!!Zf(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HI(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const cl="@firebase/app",td="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new dm("@firebase/app"),GI="@firebase/app-compat",WI="@firebase/analytics-compat",KI="@firebase/analytics",QI="@firebase/app-check-compat",XI="@firebase/app-check",JI="@firebase/auth",YI="@firebase/auth-compat",ZI="@firebase/database",tR="@firebase/data-connect",eR="@firebase/database-compat",nR="@firebase/functions",rR="@firebase/functions-compat",iR="@firebase/installations",sR="@firebase/installations-compat",oR="@firebase/messaging",aR="@firebase/messaging-compat",uR="@firebase/performance",lR="@firebase/performance-compat",cR="@firebase/remote-config",hR="@firebase/remote-config-compat",fR="@firebase/storage",dR="@firebase/storage-compat",pR="@firebase/firestore",gR="@firebase/ai",mR="@firebase/firestore-compat",_R="firebase",yR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="[DEFAULT]",vR={[cl]:"fire-core",[GI]:"fire-core-compat",[KI]:"fire-analytics",[WI]:"fire-analytics-compat",[XI]:"fire-app-check",[QI]:"fire-app-check-compat",[JI]:"fire-auth",[YI]:"fire-auth-compat",[ZI]:"fire-rtdb",[tR]:"fire-data-connect",[eR]:"fire-rtdb-compat",[nR]:"fire-fn",[rR]:"fire-fn-compat",[iR]:"fire-iid",[sR]:"fire-iid-compat",[oR]:"fire-fcm",[aR]:"fire-fcm-compat",[uR]:"fire-perf",[lR]:"fire-perf-compat",[cR]:"fire-rc",[hR]:"fire-rc-compat",[fR]:"fire-gcs",[dR]:"fire-gcs-compat",[pR]:"fire-fst",[mR]:"fire-fst-compat",[gR]:"fire-vertex","fire-js":"fire-js",[_R]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Map,wR=new Map,fl=new Map;function ed(e,t){try{e.container.addComponent(t)}catch(n){Tn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Yo(e){const t=e.name;if(fl.has(t))return Tn.debug(`There were multiple attempts to register component ${t}.`),!1;fl.set(t,e);for(const n of Jo.values())ed(n,e);for(const n of wR.values())ed(n,e);return!0}function ER(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function TR(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new fm("app","Firebase",AR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=yR;function mm(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:hl,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Fn.create("bad-app-name",{appName:String(i)});if(n||(n=hm()),!n)throw Fn.create("no-options");const s=Jo.get(i);if(s){if(Xo(n,s.options)&&Xo(r,s.config))return s;throw Fn.create("duplicate-app",{appName:i})}const o=new CI(i);for(const l of fl.values())o.addComponent(l);const u=new IR(n,r,o);return Jo.set(i,u),u}function bR(e=hl){const t=Jo.get(e);if(!t&&e===hl&&hm())return mm();if(!t)throw Fn.create("no-app",{appName:e});return t}function Kr(e,t,n){var r;let i=(r=vR[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${t}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Tn.warn(u.join(" "));return}Yo(new fs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="firebase-heartbeat-database",CR=1,ds="firebase-heartbeat-store";let Au=null;function _m(){return Au||(Au=$I(SR,CR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ds)}catch(n){console.warn(n)}}}}).catch(e=>{throw Fn.create("idb-open",{originalErrorMessage:e.message})})),Au}async function PR(e){try{const n=(await _m()).transaction(ds),r=await n.objectStore(ds).get(ym(e));return await n.done,r}catch(t){if(t instanceof fi)Tn.warn(t.message);else{const n=Fn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Tn.warn(n.message)}}}async function nd(e,t){try{const r=(await _m()).transaction(ds,"readwrite");await r.objectStore(ds).put(t,ym(e)),await r.done}catch(n){if(n instanceof fi)Tn.warn(n.message);else{const r=Fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tn.warn(r.message)}}}function ym(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=1024,VR=30;class NR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rd();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>VR){const o=OR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rd(),{heartbeatsToSend:r,unsentEntries:i}=DR(this._heartbeatsCache.heartbeats),s=Qo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Tn.warn(n),""}}}function rd(){return new Date().toISOString().substring(0,10)}function DR(e,t=xR){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),id(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),id(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wI()?EI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nd(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nd(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function id(e){return Qo(JSON.stringify({version:2,heartbeats:e})).length}function OR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(e){Yo(new fs("platform-logger",t=>new zI(t),"PRIVATE")),Yo(new fs("heartbeat",t=>new NR(t),"PRIVATE")),Kr(cl,td,e),Kr(cl,td,"esm2017"),Kr("fire-js","")}MR("");var LR="firebase",FR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(LR,FR,"app");var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Un,vm;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,w){function T(){}T.prototype=w.prototype,I.D=w.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(b,R,C){for(var A=Array(arguments.length-2),X=2;X<arguments.length;X++)A[X-2]=arguments[X];return w.prototype[R].apply(b,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,T){T||(T=0);var b=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)b[R]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(R=0;16>R;++R)b[R]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=I.g[0],T=I.g[1],R=I.g[2];var C=I.g[3],A=w+(C^T&(R^C))+b[0]+3614090360&4294967295;w=T+(A<<7&4294967295|A>>>25),A=C+(R^w&(T^R))+b[1]+3905402710&4294967295,C=w+(A<<12&4294967295|A>>>20),A=R+(T^C&(w^T))+b[2]+606105819&4294967295,R=C+(A<<17&4294967295|A>>>15),A=T+(w^R&(C^w))+b[3]+3250441966&4294967295,T=R+(A<<22&4294967295|A>>>10),A=w+(C^T&(R^C))+b[4]+4118548399&4294967295,w=T+(A<<7&4294967295|A>>>25),A=C+(R^w&(T^R))+b[5]+1200080426&4294967295,C=w+(A<<12&4294967295|A>>>20),A=R+(T^C&(w^T))+b[6]+2821735955&4294967295,R=C+(A<<17&4294967295|A>>>15),A=T+(w^R&(C^w))+b[7]+4249261313&4294967295,T=R+(A<<22&4294967295|A>>>10),A=w+(C^T&(R^C))+b[8]+1770035416&4294967295,w=T+(A<<7&4294967295|A>>>25),A=C+(R^w&(T^R))+b[9]+2336552879&4294967295,C=w+(A<<12&4294967295|A>>>20),A=R+(T^C&(w^T))+b[10]+4294925233&4294967295,R=C+(A<<17&4294967295|A>>>15),A=T+(w^R&(C^w))+b[11]+2304563134&4294967295,T=R+(A<<22&4294967295|A>>>10),A=w+(C^T&(R^C))+b[12]+1804603682&4294967295,w=T+(A<<7&4294967295|A>>>25),A=C+(R^w&(T^R))+b[13]+4254626195&4294967295,C=w+(A<<12&4294967295|A>>>20),A=R+(T^C&(w^T))+b[14]+2792965006&4294967295,R=C+(A<<17&4294967295|A>>>15),A=T+(w^R&(C^w))+b[15]+1236535329&4294967295,T=R+(A<<22&4294967295|A>>>10),A=w+(R^C&(T^R))+b[1]+4129170786&4294967295,w=T+(A<<5&4294967295|A>>>27),A=C+(T^R&(w^T))+b[6]+3225465664&4294967295,C=w+(A<<9&4294967295|A>>>23),A=R+(w^T&(C^w))+b[11]+643717713&4294967295,R=C+(A<<14&4294967295|A>>>18),A=T+(C^w&(R^C))+b[0]+3921069994&4294967295,T=R+(A<<20&4294967295|A>>>12),A=w+(R^C&(T^R))+b[5]+3593408605&4294967295,w=T+(A<<5&4294967295|A>>>27),A=C+(T^R&(w^T))+b[10]+38016083&4294967295,C=w+(A<<9&4294967295|A>>>23),A=R+(w^T&(C^w))+b[15]+3634488961&4294967295,R=C+(A<<14&4294967295|A>>>18),A=T+(C^w&(R^C))+b[4]+3889429448&4294967295,T=R+(A<<20&4294967295|A>>>12),A=w+(R^C&(T^R))+b[9]+568446438&4294967295,w=T+(A<<5&4294967295|A>>>27),A=C+(T^R&(w^T))+b[14]+3275163606&4294967295,C=w+(A<<9&4294967295|A>>>23),A=R+(w^T&(C^w))+b[3]+4107603335&4294967295,R=C+(A<<14&4294967295|A>>>18),A=T+(C^w&(R^C))+b[8]+1163531501&4294967295,T=R+(A<<20&4294967295|A>>>12),A=w+(R^C&(T^R))+b[13]+2850285829&4294967295,w=T+(A<<5&4294967295|A>>>27),A=C+(T^R&(w^T))+b[2]+4243563512&4294967295,C=w+(A<<9&4294967295|A>>>23),A=R+(w^T&(C^w))+b[7]+1735328473&4294967295,R=C+(A<<14&4294967295|A>>>18),A=T+(C^w&(R^C))+b[12]+2368359562&4294967295,T=R+(A<<20&4294967295|A>>>12),A=w+(T^R^C)+b[5]+4294588738&4294967295,w=T+(A<<4&4294967295|A>>>28),A=C+(w^T^R)+b[8]+2272392833&4294967295,C=w+(A<<11&4294967295|A>>>21),A=R+(C^w^T)+b[11]+1839030562&4294967295,R=C+(A<<16&4294967295|A>>>16),A=T+(R^C^w)+b[14]+4259657740&4294967295,T=R+(A<<23&4294967295|A>>>9),A=w+(T^R^C)+b[1]+2763975236&4294967295,w=T+(A<<4&4294967295|A>>>28),A=C+(w^T^R)+b[4]+1272893353&4294967295,C=w+(A<<11&4294967295|A>>>21),A=R+(C^w^T)+b[7]+4139469664&4294967295,R=C+(A<<16&4294967295|A>>>16),A=T+(R^C^w)+b[10]+3200236656&4294967295,T=R+(A<<23&4294967295|A>>>9),A=w+(T^R^C)+b[13]+681279174&4294967295,w=T+(A<<4&4294967295|A>>>28),A=C+(w^T^R)+b[0]+3936430074&4294967295,C=w+(A<<11&4294967295|A>>>21),A=R+(C^w^T)+b[3]+3572445317&4294967295,R=C+(A<<16&4294967295|A>>>16),A=T+(R^C^w)+b[6]+76029189&4294967295,T=R+(A<<23&4294967295|A>>>9),A=w+(T^R^C)+b[9]+3654602809&4294967295,w=T+(A<<4&4294967295|A>>>28),A=C+(w^T^R)+b[12]+3873151461&4294967295,C=w+(A<<11&4294967295|A>>>21),A=R+(C^w^T)+b[15]+530742520&4294967295,R=C+(A<<16&4294967295|A>>>16),A=T+(R^C^w)+b[2]+3299628645&4294967295,T=R+(A<<23&4294967295|A>>>9),A=w+(R^(T|~C))+b[0]+4096336452&4294967295,w=T+(A<<6&4294967295|A>>>26),A=C+(T^(w|~R))+b[7]+1126891415&4294967295,C=w+(A<<10&4294967295|A>>>22),A=R+(w^(C|~T))+b[14]+2878612391&4294967295,R=C+(A<<15&4294967295|A>>>17),A=T+(C^(R|~w))+b[5]+4237533241&4294967295,T=R+(A<<21&4294967295|A>>>11),A=w+(R^(T|~C))+b[12]+1700485571&4294967295,w=T+(A<<6&4294967295|A>>>26),A=C+(T^(w|~R))+b[3]+2399980690&4294967295,C=w+(A<<10&4294967295|A>>>22),A=R+(w^(C|~T))+b[10]+4293915773&4294967295,R=C+(A<<15&4294967295|A>>>17),A=T+(C^(R|~w))+b[1]+2240044497&4294967295,T=R+(A<<21&4294967295|A>>>11),A=w+(R^(T|~C))+b[8]+1873313359&4294967295,w=T+(A<<6&4294967295|A>>>26),A=C+(T^(w|~R))+b[15]+4264355552&4294967295,C=w+(A<<10&4294967295|A>>>22),A=R+(w^(C|~T))+b[6]+2734768916&4294967295,R=C+(A<<15&4294967295|A>>>17),A=T+(C^(R|~w))+b[13]+1309151649&4294967295,T=R+(A<<21&4294967295|A>>>11),A=w+(R^(T|~C))+b[4]+4149444226&4294967295,w=T+(A<<6&4294967295|A>>>26),A=C+(T^(w|~R))+b[11]+3174756917&4294967295,C=w+(A<<10&4294967295|A>>>22),A=R+(w^(C|~T))+b[2]+718787259&4294967295,R=C+(A<<15&4294967295|A>>>17),A=T+(C^(R|~w))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+C&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var T=w-this.blockSize,b=this.B,R=this.h,C=0;C<w;){if(R==0)for(;C<=T;)i(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<w;)if(b[R++]=I.charCodeAt(C++),R==this.blockSize){i(this,b),R=0;break}}else for(;C<w;)if(b[R++]=I[C++],R==this.blockSize){i(this,b),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var T=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=T&255,T/=256;for(this.u(I),I=Array(16),w=T=0;4>w;++w)for(var b=0;32>b;b+=8)I[T++]=this.g[w]>>>b&255;return I};function s(I,w){var T=u;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=w(I)}function o(I,w){this.h=w;for(var T=[],b=!0,R=I.length-1;0<=R;R--){var C=I[R]|0;b&&C==w||(T[R]=C,b=!1)}this.g=T}var u={};function l(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return v(c(-I));for(var w=[],T=1,b=0;I>=T;b++)w[b]=I/T|0,T*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return v(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(w,8)),b=d,R=0;R<I.length;R+=8){var C=Math.min(8,I.length-R),A=parseInt(I.substring(R,R+C),w);8>C?(C=c(Math.pow(w,C)),b=b.j(C).add(c(A))):(b=b.j(T),b=b.add(c(A)))}return b}var d=l(0),p=l(1),m=l(16777216);e=o.prototype,e.m=function(){if(E(this))return-v(this).m();for(var I=0,w=1,T=0;T<this.g.length;T++){var b=this.i(T);I+=(0<=b?b:4294967296+b)*w,w*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(E(this))return"-"+v(this).toString(I);for(var w=c(Math.pow(I,6)),T=this,b="";;){var R=x(T,w).g;T=P(T,R.j(w));var C=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=R,_(T))return C+b;for(;6>C.length;)C="0"+C;b=C+b}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function E(I){return I.h==-1}e.l=function(I){return I=P(this,I),E(I)?-1:_(I)?0:1};function v(I){for(var w=I.g.length,T=[],b=0;b<w;b++)T[b]=~I.g[b];return new o(T,~I.h).add(p)}e.abs=function(){return E(this)?v(this):this},e.add=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],b=0,R=0;R<=w;R++){var C=b+(this.i(R)&65535)+(I.i(R)&65535),A=(C>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);b=A>>>16,C&=65535,A&=65535,T[R]=A<<16|C}return new o(T,T[T.length-1]&-2147483648?-1:0)};function P(I,w){return I.add(v(w))}e.j=function(I){if(_(this)||_(I))return d;if(E(this))return E(I)?v(this).j(v(I)):v(v(this).j(I));if(E(I))return v(this.j(v(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,T=[],b=0;b<2*w;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<I.g.length;R++){var C=this.i(b)>>>16,A=this.i(b)&65535,X=I.i(R)>>>16,F=I.i(R)&65535;T[2*b+2*R]+=A*F,S(T,2*b+2*R),T[2*b+2*R+1]+=C*F,S(T,2*b+2*R+1),T[2*b+2*R+1]+=A*X,S(T,2*b+2*R+1),T[2*b+2*R+2]+=C*X,S(T,2*b+2*R+2)}for(b=0;b<w;b++)T[b]=T[2*b+1]<<16|T[2*b];for(b=w;b<2*w;b++)T[b]=0;return new o(T,0)};function S(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function N(I,w){this.g=I,this.h=w}function x(I,w){if(_(w))throw Error("division by zero");if(_(I))return new N(d,d);if(E(I))return w=x(v(I),w),new N(v(w.g),v(w.h));if(E(w))return w=x(I,v(w)),new N(v(w.g),w.h);if(30<I.g.length){if(E(I)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var T=p,b=w;0>=b.l(I);)T=M(T),b=M(b);var R=B(T,1),C=B(b,1);for(b=B(b,2),T=B(T,2);!_(b);){var A=C.add(b);0>=A.l(I)&&(R=R.add(T),C=A),b=B(b,1),T=B(T,1)}return w=P(I,R.j(w)),new N(R,w)}for(R=d;0<=I.l(w);){for(T=Math.max(1,Math.floor(I.m()/w.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),C=c(T),A=C.j(w);E(A)||0<A.l(I);)T-=b,C=c(T),A=C.j(w);_(C)&&(C=p),R=R.add(C),I=P(I,A)}return new N(R,I)}e.A=function(I){return x(this,I).h},e.and=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],b=0;b<w;b++)T[b]=this.i(b)&I.i(b);return new o(T,this.h&I.h)},e.or=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],b=0;b<w;b++)T[b]=this.i(b)|I.i(b);return new o(T,this.h|I.h)},e.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],b=0;b<w;b++)T[b]=this.i(b)^I.i(b);return new o(T,this.h^I.h)};function M(I){for(var w=I.g.length+1,T=[],b=0;b<w;b++)T[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(T,I.h)}function B(I,w){var T=w>>5;w%=32;for(var b=I.g.length-T,R=[],C=0;C<b;C++)R[C]=0<w?I.i(C+T)>>>w|I.i(C+T+1)<<32-w:I.i(C+T);return new o(R,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vm=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Un=o}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});var ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wm,Hi,Em,_o,dl,Tm,Am,Im;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,g){return a==Array.prototype||a==Object.prototype||(a[f]=g.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ro=="object"&&ro];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(a,f){if(f)t:{var g=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var V=a[y];if(!(V in g))break t;g=g[V]}a=a[a.length-1],y=g[a],f=f(y),f!=y&&f!=null&&t(g,a,{configurable:!0,writable:!0,value:f})}}function s(a,f){a instanceof String&&(a+="");var g=0,y=!1,V={next:function(){if(!y&&g<a.length){var k=g++;return{value:f(k,a[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(a){return a||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function l(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,g){return a.call.apply(a.bind,arguments)}function d(a,f,g){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,y),a.apply(f,V)}}return function(){return a.apply(f,arguments)}}function p(a,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function _(a,f){function g(){}g.prototype=f.prototype,a.aa=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Qb=function(y,V,k){for(var $=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)$[dt-2]=arguments[dt];return f.prototype[V].apply(y,$)}}function E(a){const f=a.length;if(0<f){const g=Array(f);for(let y=0;y<f;y++)g[y]=a[y];return g}return[]}function v(a,f){for(let g=1;g<arguments.length;g++){const y=arguments[g];if(l(y)){const V=a.length||0,k=y.length||0;a.length=V+k;for(let $=0;$<k;$++)a[V+$]=y[$]}else a.push(y)}}class P{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function S(a){return/^[\s\xa0]*$/.test(a)}function N(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function x(a){return x[" "](a),a}x[" "]=function(){};var M=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function B(a,f,g){for(const y in a)f.call(g,a[y],y,a)}function I(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function w(a){const f={};for(const g in a)f[g]=a[g];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,f){let g,y;for(let V=1;V<arguments.length;V++){y=arguments[V];for(g in y)a[g]=y[g];for(let k=0;k<T.length;k++)g=T[k],Object.prototype.hasOwnProperty.call(y,g)&&(a[g]=y[g])}}function R(a){var f=1;a=a.split(":");const g=[];for(;0<f&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function C(a){u.setTimeout(()=>{throw a},0)}function A(){var a=Lt;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class X{constructor(){this.h=this.g=null}add(f,g){const y=F.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}}var F=new P(()=>new Y,a=>a.reset());class Y{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,mt=!1,Lt=new X,Le=()=>{const a=u.Promise.resolve(void 0);lt=()=>{a.then(me)}};var me=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(g){C(g)}var f=F;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}mt=!1};function Ft(){this.s=this.s,this.C=this.C}Ft.prototype.s=!1,Ft.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ft.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var rn=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};u.addEventListener("test",g,f),u.removeEventListener("test",g,f)}catch{}return a}();function ue(a,f){if(ht.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var g=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(M){t:{try{x(f.nodeName);var V=!0;break t}catch{}V=!1}V||(f=null)}}else g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ds[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ue.aa.h.call(this)}}_(ue,ht);var Ds={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Cr="closure_listenable_"+(1e6*Math.random()|0),Ba=0;function $a(a,f,g,y,V){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=V,this.key=++Ba,this.da=this.fa=!1}function H(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function j(a){this.src=a,this.g={},this.h=0}j.prototype.add=function(a,f,g,y,V){var k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);var $=rt(a,f,y,V);return-1<$?(f=a[$],g||(f.fa=!1)):(f=new $a(f,this.src,k,!!y,V),f.fa=g,a.push(f)),f};function K(a,f){var g=f.type;if(g in a.g){var y=a.g[g],V=Array.prototype.indexOf.call(y,f,void 0),k;(k=0<=V)&&Array.prototype.splice.call(y,V,1),k&&(H(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function rt(a,f,g,y){for(var V=0;V<a.length;++V){var k=a[V];if(!k.da&&k.listener==f&&k.capture==!!g&&k.ha==y)return V}return-1}var ft="closure_lm_"+(1e6*Math.random()|0),Tt={};function $t(a,f,g,y,V){if(Array.isArray(f)){for(var k=0;k<f.length;k++)$t(a,f[k],g,y,V);return null}return g=xr(g),a&&a[Cr]?a.K(f,g,c(y)?!!y.capture:!1,V):tr(a,f,g,!1,y,V)}function tr(a,f,g,y,V,k){if(!f)throw Error("Invalid event type");var $=c(V)?!!V.capture:!!V,dt=on(a);if(dt||(a[ft]=dt=new j(a)),g=dt.add(f,g,y,$,k),g.proxy)return g;if(y=le(),g.proxy=y,y.src=a,y.listener=g,a.addEventListener)rn||(V=$),V===void 0&&(V=!1),a.addEventListener(f.toString(),y,V);else if(a.attachEvent)a.attachEvent(Xt(f.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function le(){function a(g){return f.call(a.src,a.listener,g)}const f=sn;return a}function Pr(a,f,g,y,V){if(Array.isArray(f))for(var k=0;k<f.length;k++)Pr(a,f[k],g,y,V);else y=c(y)?!!y.capture:!!y,g=xr(g),a&&a[Cr]?(a=a.i,f=String(f).toString(),f in a.g&&(k=a.g[f],g=rt(k,g,y,V),-1<g&&(H(k[g]),Array.prototype.splice.call(k,g,1),k.length==0&&(delete a.g[f],a.h--)))):a&&(a=on(a))&&(f=a.g[f.toString()],a=-1,f&&(a=rt(f,g,y,V)),(g=-1<a?f[a]:null)&&qt(g))}function qt(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Cr])K(f.i,a);else{var g=a.type,y=a.proxy;f.removeEventListener?f.removeEventListener(g,y,a.capture):f.detachEvent?f.detachEvent(Xt(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=on(f))?(K(g,a),g.h==0&&(g.src=null,f[ft]=null)):H(a)}}}function Xt(a){return a in Tt?Tt[a]:Tt[a]="on"+a}function sn(a,f){if(a.da)a=!0;else{f=new ue(f,this);var g=a.listener,y=a.ha||a.src;a.fa&&qt(a),a=g.call(y,f)}return a}function on(a){return a=a[ft],a instanceof j?a:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function xr(a){return typeof a=="function"?a:(a[Te]||(a[Te]=function(f){return a.handleEvent(f)}),a[Te])}function Vt(){Ft.call(this),this.i=new j(this),this.M=this,this.F=null}_(Vt,Ft),Vt.prototype[Cr]=!0,Vt.prototype.removeEventListener=function(a,f,g,y){Pr(this,a,f,g,y)};function At(a,f){var g,y=a.F;if(y)for(g=[];y;y=y.F)g.push(y);if(a=a.M,y=f.type||f,typeof f=="string")f=new ht(f,a);else if(f instanceof ht)f.target=f.target||a;else{var V=f;f=new ht(y,a),b(f,V)}if(V=!0,g)for(var k=g.length-1;0<=k;k--){var $=f.g=g[k];V=an($,y,!0,f)&&V}if($=f.g=a,V=an($,y,!0,f)&&V,V=an($,y,!1,f)&&V,g)for(k=0;k<g.length;k++)$=f.g=g[k],V=an($,y,!1,f)&&V}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var g=a.g[f],y=0;y<g.length;y++)H(g[y]);delete a.g[f],a.h--}}this.F=null},Vt.prototype.K=function(a,f,g,y){return this.i.add(String(a),f,!1,g,y)},Vt.prototype.L=function(a,f,g,y){return this.i.add(String(a),f,!0,g,y)};function an(a,f,g,y){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,k=0;k<f.length;++k){var $=f[k];if($&&!$.da&&$.capture==g){var dt=$.listener,jt=$.ha||$.src;$.fa&&K(a.i,$),V=dt.call(jt,y)!==!1&&V}}return V&&!y.defaultPrevented}function er(a,f,g){if(typeof a=="function")g&&(a=p(a,g));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:u.setTimeout(a,f||0)}function nr(a){a.g=er(()=>{a.g=null,a.i&&(a.i=!1,nr(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class un extends Ft{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:nr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(a){Ft.call(this),this.h=a,this.g={}}_(Fe,Ft);var Ue=[];function rr(a){B(a.g,function(f,g){this.g.hasOwnProperty(g)&&qt(f)},a),a.g={}}Fe.prototype.N=function(){Fe.aa.N.call(this),rr(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yi=u.JSON.stringify,vi=u.JSON.parse,Vr=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Sn(){}Sn.prototype.h=null;function Gc(a){return a.h||(a.h=a.i())}function Wc(){}var wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qa(){ht.call(this,"d")}_(qa,ht);function ja(){ht.call(this,"c")}_(ja,ht);var ir={},Kc=null;function ks(){return Kc=Kc||new Vt}ir.La="serverreachability";function Qc(a){ht.call(this,ir.La,a)}_(Qc,ht);function Ei(a){const f=ks();At(f,new Qc(f))}ir.STAT_EVENT="statevent";function Xc(a,f){ht.call(this,ir.STAT_EVENT,a),this.stat=f}_(Xc,ht);function ie(a){const f=ks();At(f,new Xc(f,a))}ir.Ma="timingevent";function Jc(a,f){ht.call(this,ir.Ma,a),this.size=f}_(Jc,ht);function Ti(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},f)}function Ai(){this.g=!0}Ai.prototype.xa=function(){this.g=!1};function ey(a,f,g,y,V,k){a.info(function(){if(a.g)if(k)for(var $="",dt=k.split("&"),jt=0;jt<dt.length;jt++){var at=dt[jt].split("=");if(1<at.length){var Jt=at[0];at=at[1];var Yt=Jt.split("_");$=2<=Yt.length&&Yt[1]=="type"?$+(Jt+"="+at+"&"):$+(Jt+"=redacted&")}}else $=null;else $=k;return"XMLHTTP REQ ("+y+") [attempt "+V+"]: "+f+`
`+g+`
`+$})}function ny(a,f,g,y,V,k,$){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+V+"]: "+f+`
`+g+`
`+k+" "+$})}function Nr(a,f,g,y){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+iy(a,g)+(y?" "+y:"")})}function ry(a,f){a.info(function(){return"TIMEOUT: "+f})}Ai.prototype.info=function(){};function iy(a,f){if(!a.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(a=0;a<g.length;a++)if(Array.isArray(g[a])){var y=g[a];if(!(2>y.length)){var V=y[1];if(Array.isArray(V)&&!(1>V.length)){var k=V[0];if(k!="noop"&&k!="stop"&&k!="close")for(var $=1;$<V.length;$++)V[$]=""}}}}return yi(g)}catch{return f}}var Os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},za;function Ms(){}_(Ms,Sn),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},za=new Ms;function Cn(a,f,g,y){this.j=a,this.i=f,this.l=g,this.R=y||1,this.U=new Fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zc}function Zc(){this.i=null,this.g="",this.h=!1}var th={},Ha={};function Ga(a,f,g){a.L=1,a.v=Bs(ln(f)),a.m=g,a.P=!0,eh(a,null)}function eh(a,f){a.F=Date.now(),Ls(a),a.A=ln(a.v);var g=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),gh(g.i,"t",y),a.C=0,g=a.j.J,a.h=new Zc,a.g=Dh(a.j,g?f:null,!a.m),0<a.O&&(a.M=new un(p(a.Y,a,a.g),a.O)),f=a.U,g=a.g,y=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ue[0]=V.toString()),V=Ue);for(var k=0;k<V.length;k++){var $=$t(g,V[k],y||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),Ei(),ey(a.i,a.u,a.A,a.l,a.R,a.m)}Cn.prototype.ca=function(a){a=a.target;const f=this.M;f&&cn(a)==3?f.j():this.Y(a)},Cn.prototype.Y=function(a){try{if(a==this.g)t:{const Yt=cn(this.g);var f=this.g.Ba();const Or=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||Th(this.g)))){this.J||Yt!=4||f==7||(f==8||0>=Or?Ei(3):Ei(2)),Wa(this);var g=this.g.Z();this.X=g;e:if(nh(this)){var y=Th(this.g);a="";var V=y.length,k=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),Ii(this);var $="";break e}this.h.i=new u.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,a+=this.h.i.decode(y[f],{stream:!(k&&f==V-1)});y.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,ny(this.i,this.u,this.A,this.l,this.R,Yt,g),this.o){if(this.T&&!this.K){e:{if(this.g){var dt,jt=this.g;if((dt=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(dt)){var at=dt;break e}}at=null}if(g=at)Nr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ka(this,g);else{this.o=!1,this.s=3,ie(12),sr(this),Ii(this);break t}}if(this.P){g=!0;let Ve;for(;!this.J&&this.C<$.length;)if(Ve=sy(this,$),Ve==Ha){Yt==4&&(this.s=4,ie(14),g=!1),Nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ve==th){this.s=4,ie(15),Nr(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else Nr(this.i,this.l,Ve,null),Ka(this,Ve);if(nh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||$.length!=0||this.h.h||(this.s=1,ie(16),g=!1),this.o=this.o&&g,!g)Nr(this.i,this.l,$,"[Invalid Chunked Response]"),sr(this),Ii(this);else if(0<$.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),tu(Jt),Jt.M=!0,ie(11))}}else Nr(this.i,this.l,$,null),Ka(this,$);Yt==4&&sr(this),this.o&&!this.J&&(Yt==4?Ph(this.j,this):(this.o=!1,Ls(this)))}else Ty(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),sr(this),Ii(this)}}}catch{}finally{}};function nh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function sy(a,f){var g=a.C,y=f.indexOf(`
`,g);return y==-1?Ha:(g=Number(f.substring(g,y)),isNaN(g)?th:(y+=1,y+g>f.length?Ha:(f=f.slice(y,y+g),a.C=y+g,f)))}Cn.prototype.cancel=function(){this.J=!0,sr(this)};function Ls(a){a.S=Date.now()+a.I,rh(a,a.I)}function rh(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ti(p(a.ba,a),f)}function Wa(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Cn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ry(this.i,this.A),this.L!=2&&(Ei(),ie(17)),sr(this),this.s=2,Ii(this)):rh(this,this.S-a)};function Ii(a){a.j.G==0||a.J||Ph(a.j,a)}function sr(a){Wa(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,rr(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function Ka(a,f){try{var g=a.j;if(g.G!=0&&(g.g==a||Qa(g.h,a))){if(!a.K&&Qa(g.h,a)&&g.G==3){try{var y=g.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var V=y;if(V[0]==0){t:if(!g.u){if(g.g)if(g.g.F+3e3<a.F)Gs(g),zs(g);else break t;Za(g),ie(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ti(p(g.Za,g),6e3));if(1>=oh(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ar(g,11)}else if((a.K||g.g==a)&&Gs(g),!S(f))for(V=g.Da.g.parse(f),f=0;f<V.length;f++){let at=V[f];if(g.T=at[0],at=at[1],g.G==2)if(at[0]=="c"){g.K=at[1],g.ia=at[2];const Jt=at[3];Jt!=null&&(g.la=Jt,g.j.info("VER="+g.la));const Yt=at[4];Yt!=null&&(g.Aa=Yt,g.j.info("SVER="+g.Aa));const Or=at[5];Or!=null&&typeof Or=="number"&&0<Or&&(y=1.5*Or,g.L=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const Ve=a.g;if(Ve){const Ks=Ve.g?Ve.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var k=y.h;k.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Xa(k,k.h),k.h=null))}if(y.D){const eu=Ve.g?Ve.g.getResponseHeader("X-HTTP-Session-Id"):null;eu&&(y.ya=eu,yt(y.I,y.D,eu))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-a.F,g.j.info("Handshake RTT: "+g.R+"ms")),y=g;var $=a;if(y.qa=Nh(y,y.J?y.ia:null,y.W),$.K){ah(y.h,$);var dt=$,jt=y.L;jt&&(dt.I=jt),dt.B&&(Wa(dt),Ls(dt)),y.g=$}else Sh(y);0<g.i.length&&Hs(g)}else at[0]!="stop"&&at[0]!="close"||ar(g,7);else g.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?ar(g,7):Ya(g):at[0]!="noop"&&g.l&&g.l.ta(at),g.v=0)}}Ei(4)}catch{}}var oy=class{constructor(a,f){this.g=a,this.map=f}};function ih(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function oh(a){return a.h?1:a.g?a.g.size:0}function Qa(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Xa(a,f){a.g?a.g.add(f):a.h=f}function ah(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}ih.prototype.cancel=function(){if(this.i=uh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function uh(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.D);return f}return E(a.i)}function ay(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var f=[],g=a.length,y=0;y<g;y++)f.push(a[y]);return f}f=[],g=0;for(y in a)f[g++]=a[y];return f}function uy(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var f=[];a=a.length;for(var g=0;g<a;g++)f.push(g);return f}f=[],g=0;for(const y in a)f[g++]=y;return f}}}function lh(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var g=uy(a),y=ay(a),V=y.length,k=0;k<V;k++)f.call(void 0,y[k],g&&g[k],a)}var ch=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ly(a,f){if(a){a=a.split("&");for(var g=0;g<a.length;g++){var y=a[g].indexOf("="),V=null;if(0<=y){var k=a[g].substring(0,y);V=a[g].substring(y+1)}else k=a[g];f(k,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function or(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof or){this.h=a.h,Fs(this,a.j),this.o=a.o,this.g=a.g,Us(this,a.s),this.l=a.l;var f=a.i,g=new Si;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),hh(this,g),this.m=a.m}else a&&(f=String(a).match(ch))?(this.h=!1,Fs(this,f[1]||"",!0),this.o=Ri(f[2]||""),this.g=Ri(f[3]||"",!0),Us(this,f[4]),this.l=Ri(f[5]||"",!0),hh(this,f[6]||"",!0),this.m=Ri(f[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}or.prototype.toString=function(){var a=[],f=this.j;f&&a.push(bi(f,fh,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(bi(f,fh,!0),"@"),a.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&a.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(bi(g,g.charAt(0)=="/"?fy:hy,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",bi(g,py)),a.join("")};function ln(a){return new or(a)}function Fs(a,f,g){a.j=g?Ri(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Us(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function hh(a,f,g){f instanceof Si?(a.i=f,gy(a.i,a.h)):(g||(f=bi(f,dy)),a.i=new Si(f,a.h))}function yt(a,f,g){a.i.set(f,g)}function Bs(a){return yt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ri(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function bi(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,cy),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function cy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fh=/[#\/\?@]/g,hy=/[#\?:]/g,fy=/[#\?]/g,dy=/[#\?@]/g,py=/#/g;function Si(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Pn(a){a.g||(a.g=new Map,a.h=0,a.i&&ly(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}e=Si.prototype,e.add=function(a,f){Pn(this),this.i=null,a=Dr(this,a);var g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function dh(a,f){Pn(a),f=Dr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function ph(a,f){return Pn(a),f=Dr(a,f),a.g.has(f)}e.forEach=function(a,f){Pn(this),this.g.forEach(function(g,y){g.forEach(function(V){a.call(f,V,y,this)},this)},this)},e.na=function(){Pn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let y=0;y<f.length;y++){const V=a[y];for(let k=0;k<V.length;k++)g.push(f[y])}return g},e.V=function(a){Pn(this);let f=[];if(typeof a=="string")ph(this,a)&&(f=f.concat(this.g.get(Dr(this,a))));else{a=Array.from(this.g.values());for(let g=0;g<a.length;g++)f=f.concat(a[g])}return f},e.set=function(a,f){return Pn(this),this.i=null,a=Dr(this,a),ph(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},e.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function gh(a,f,g){dh(a,f),0<g.length&&(a.i=null,a.g.set(Dr(a,f),E(g)),a.h+=g.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var y=f[g];const k=encodeURIComponent(String(y)),$=this.V(y);for(y=0;y<$.length;y++){var V=k;$[y]!==""&&(V+="="+encodeURIComponent(String($[y]))),a.push(V)}}return this.i=a.join("&")};function Dr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function gy(a,f){f&&!a.j&&(Pn(a),a.i=null,a.g.forEach(function(g,y){var V=y.toLowerCase();y!=V&&(dh(this,y),gh(this,V,g))},a)),a.j=f}function my(a,f){const g=new Ai;if(u.Image){const y=new Image;y.onload=m(xn,g,"TestLoadImage: loaded",!0,f,y),y.onerror=m(xn,g,"TestLoadImage: error",!1,f,y),y.onabort=m(xn,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=m(xn,g,"TestLoadImage: timeout",!1,f,y),u.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else f(!1)}function _y(a,f){const g=new Ai,y=new AbortController,V=setTimeout(()=>{y.abort(),xn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:y.signal}).then(k=>{clearTimeout(V),k.ok?xn(g,"TestPingServer: ok",!0,f):xn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),xn(g,"TestPingServer: error",!1,f)})}function xn(a,f,g,y,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),y(g)}catch{}}function yy(){this.g=new Vr}function vy(a,f,g){const y=g||"";try{lh(a,function(V,k){let $=V;c(V)&&($=yi(V)),f.push(y+k+"="+encodeURIComponent($))})}catch(V){throw f.push(y+"type="+encodeURIComponent("_badmap")),V}}function $s(a){this.l=a.Ub||null,this.j=a.eb||!1}_($s,Sn),$s.prototype.g=function(){return new qs(this.l,this.j)},$s.prototype.i=function(a){return function(){return a}}({});function qs(a,f){Vt.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(qs,Vt),e=qs.prototype,e.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,Pi(this)},e.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||u).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},e.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mh(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function mh(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}e.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Ci(this):Pi(this),this.readyState==3&&mh(this)}},e.Ra=function(a){this.g&&(this.response=this.responseText=a,Ci(this))},e.Qa=function(a){this.g&&(this.response=a,Ci(this))},e.ga=function(){this.g&&Ci(this)};function Ci(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Pi(a)}e.setRequestHeader=function(a,f){this.u.append(a,f)},e.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function Pi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function _h(a){let f="";return B(a,function(g,y){f+=y,f+=":",f+=g,f+=`\r
`}),f}function Ja(a,f,g){t:{for(y in g){var y=!1;break t}y=!0}y||(g=_h(g),typeof a=="string"?g!=null&&encodeURIComponent(String(g)):yt(a,f,g))}function bt(a){Vt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(bt,Vt);var wy=/^https?$/i,Ey=["POST","PUT"];e=bt.prototype,e.Ha=function(a){this.J=a},e.ea=function(a,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():za.g(),this.v=this.o?Gc(this.o):Gc(za),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(k){yh(this,k);return}if(a=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var V in y)g.set(V,y[V]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const k of y.keys())g.set(k,y.get(k));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(k=>k.toLowerCase()=="content-type"),V=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ey,f,void 0))||y||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,$]of g)this.g.setRequestHeader(k,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Eh(this),this.u=!0,this.g.send(a),this.u=!1}catch(k){yh(this,k)}};function yh(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,vh(a),js(a)}function vh(a){a.A||(a.A=!0,At(a,"complete"),At(a,"error"))}e.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,At(this,"complete"),At(this,"abort"),js(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),bt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?wh(this):this.bb())},e.bb=function(){wh(this)};function wh(a){if(a.h&&typeof o<"u"&&(!a.v[1]||cn(a)!=4||a.Z()!=2)){if(a.u&&cn(a)==4)er(a.Ea,0,a);else if(At(a,"readystatechange"),cn(a)==4){a.h=!1;try{const $=a.Z();t:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var g;if(!(g=f)){var y;if(y=$===0){var V=String(a.D).match(ch)[1]||null;!V&&u.self&&u.self.location&&(V=u.self.location.protocol.slice(0,-1)),y=!wy.test(V?V.toLowerCase():"")}g=y}if(g)At(a,"complete"),At(a,"success");else{a.m=6;try{var k=2<cn(a)?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.Z()+"]",vh(a)}}finally{js(a)}}}}function js(a,f){if(a.g){Eh(a);const g=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||At(a,"ready");try{g.onreadystatechange=y}catch{}}}function Eh(a){a.I&&(u.clearTimeout(a.I),a.I=null)}e.isActive=function(){return!!this.g};function cn(a){return a.g?a.g.readyState:0}e.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),vi(f)}};function Th(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ty(a){const f={};a=(a.g&&2<=cn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(S(a[y]))continue;var g=R(a[y]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const k=f[V]||[];f[V]=k,k.push(g)}I(f,function(y){return y.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function Ah(a){this.Aa=0,this.i=[],this.j=new Ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xi("baseRetryDelayMs",5e3,a),this.cb=xi("retryDelaySeedMs",1e4,a),this.Wa=xi("forwardChannelMaxRetries",2,a),this.wa=xi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ih(a&&a.concurrentRequestLimit),this.Da=new yy,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Ah.prototype,e.la=8,e.G=1,e.connect=function(a,f,g,y){ie(0),this.W=a,this.H=f||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=Nh(this,null,this.W),Hs(this)};function Ya(a){if(Ih(a),a.G==3){var f=a.U++,g=ln(a.I);if(yt(g,"SID",a.K),yt(g,"RID",f),yt(g,"TYPE","terminate"),Vi(a,g),f=new Cn(a,a.j,f),f.L=2,f.v=Bs(ln(g)),g=!1,u.navigator&&u.navigator.sendBeacon)try{g=u.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&u.Image&&(new Image().src=f.v,g=!0),g||(f.g=Dh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ls(f)}Vh(a)}function zs(a){a.g&&(tu(a),a.g.cancel(),a.g=null)}function Ih(a){zs(a),a.u&&(u.clearTimeout(a.u),a.u=null),Gs(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Hs(a){if(!sh(a.h)&&!a.s){a.s=!0;var f=a.Ga;lt||Le(),mt||(lt(),mt=!0),Lt.add(f,a),a.B=0}}function Ay(a,f){return oh(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ti(p(a.Ga,a,f),xh(a,a.B)),a.B++,!0)}e.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new Cn(this,this.j,a);let k=this.o;if(this.S&&(k?(k=w(k),b(k,this.S)):k=this.S),this.m!==null||this.O||(V.H=k,k=null),this.P)t:{for(var f=0,g=0;g<this.i.length;g++){e:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break e}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=g;break t}if(f===4096||g===this.i.length-1){f=g+1;break t}}f=1e3}else f=1e3;f=bh(this,V,f),g=ln(this.I),yt(g,"RID",a),yt(g,"CVER",22),this.D&&yt(g,"X-HTTP-Session-Id",this.D),Vi(this,g),k&&(this.O?f="headers="+encodeURIComponent(String(_h(k)))+"&"+f:this.m&&Ja(g,this.m,k)),Xa(this.h,V),this.Ua&&yt(g,"TYPE","init"),this.P?(yt(g,"$req",f),yt(g,"SID","null"),V.T=!0,Ga(V,g,null)):Ga(V,g,f),this.G=2}}else this.G==3&&(a?Rh(this,a):this.i.length==0||sh(this.h)||Rh(this))};function Rh(a,f){var g;f?g=f.l:g=a.U++;const y=ln(a.I);yt(y,"SID",a.K),yt(y,"RID",g),yt(y,"AID",a.T),Vi(a,y),a.m&&a.o&&Ja(y,a.m,a.o),g=new Cn(a,a.j,g,a.B+1),a.m===null&&(g.H=a.o),f&&(a.i=f.D.concat(a.i)),f=bh(a,g,1e3),g.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Xa(a.h,g),Ga(g,y,f)}function Vi(a,f){a.H&&B(a.H,function(g,y){yt(f,y,g)}),a.l&&lh({},function(g,y){yt(f,y,g)})}function bh(a,f,g){g=Math.min(a.i.length,g);var y=a.l?p(a.l.Na,a.l,a):null;t:{var V=a.i;let k=-1;for(;;){const $=["count="+g];k==-1?0<g?(k=V[0].g,$.push("ofs="+k)):k=0:$.push("ofs="+k);let dt=!0;for(let jt=0;jt<g;jt++){let at=V[jt].g;const Jt=V[jt].map;if(at-=k,0>at)k=Math.max(0,V[jt].g-100),dt=!1;else try{vy(Jt,$,"req"+at+"_")}catch{y&&y(Jt)}}if(dt){y=$.join("&");break t}}}return a=a.i.splice(0,g),f.D=a,y}function Sh(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;lt||Le(),mt||(lt(),mt=!0),Lt.add(f,a),a.v=0}}function Za(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ti(p(a.Fa,a),xh(a,a.v)),a.v++,!0)}e.Fa=function(){if(this.u=null,Ch(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ti(p(this.ab,this),a)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),zs(this),Ch(this))};function tu(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Ch(a){a.g=new Cn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=ln(a.qa);yt(f,"RID","rpc"),yt(f,"SID",a.K),yt(f,"AID",a.T),yt(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&yt(f,"TO",a.ja),yt(f,"TYPE","xmlhttp"),Vi(a,f),a.m&&a.o&&Ja(f,a.m,a.o),a.L&&(a.g.I=a.L);var g=a.g;a=a.ia,g.L=1,g.v=Bs(ln(f)),g.m=null,g.P=!0,eh(g,a)}e.Za=function(){this.C!=null&&(this.C=null,zs(this),Za(this),ie(19))};function Gs(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Ph(a,f){var g=null;if(a.g==f){Gs(a),tu(a),a.g=null;var y=2}else if(Qa(a.h,f))g=f.D,ah(a.h,f),y=1;else return;if(a.G!=0){if(f.o)if(y==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var V=a.B;y=ks(),At(y,new Jc(y,g)),Hs(a)}else Sh(a);else if(V=f.s,V==3||V==0&&0<f.X||!(y==1&&Ay(a,f)||y==2&&Za(a)))switch(g&&0<g.length&&(f=a.h,f.i=f.i.concat(g)),V){case 1:ar(a,5);break;case 4:ar(a,10);break;case 3:ar(a,6);break;default:ar(a,2)}}}function xh(a,f){let g=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(g*=2),g*f}function ar(a,f){if(a.j.info("Error code "+f),f==2){var g=p(a.fb,a),y=a.Xa;const V=!y;y=new or(y||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Fs(y,"https"),Bs(y),V?my(y.toString(),g):_y(y.toString(),g)}else ie(2);a.G=0,a.l&&a.l.sa(f),Vh(a),Ih(a)}e.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function Vh(a){if(a.G=0,a.ka=[],a.l){const f=uh(a.h);(f.length!=0||a.i.length!=0)&&(v(a.ka,f),v(a.ka,a.i),a.h.i.length=0,E(a.i),a.i.length=0),a.l.ra()}}function Nh(a,f,g){var y=g instanceof or?ln(g):new or(g);if(y.g!="")f&&(y.g=f+"."+y.g),Us(y,y.s);else{var V=u.location;y=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var k=new or(null);y&&Fs(k,y),f&&(k.g=f),V&&Us(k,V),g&&(k.l=g),y=k}return g=a.D,f=a.ya,g&&f&&yt(y,g,f),yt(y,"VER",a.la),Vi(a,y),y}function Dh(a,f,g){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new bt(new $s({eb:g})):new bt(a.pa),f.Ha(a.J),f}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function kh(){}e=kh.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ws(){}Ws.prototype.g=function(a,f){return new _e(a,f)};function _e(a,f){Vt.call(this),this.g=new Ah(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!S(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new kr(this)}_(_e,Vt),_e.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_e.prototype.close=function(){Ya(this.g)},_e.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.u&&(g={},g.__data__=yi(a),a=g);f.i.push(new oy(f.Ya++,a)),f.G==3&&Hs(f)},_e.prototype.N=function(){this.g.l=null,delete this.j,Ya(this.g),delete this.g,_e.aa.N.call(this)};function Oh(a){qa.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const g in f){a=g;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}_(Oh,qa);function Mh(){ja.call(this),this.status=1}_(Mh,ja);function kr(a){this.g=a}_(kr,kh),kr.prototype.ua=function(){At(this.g,"a")},kr.prototype.ta=function(a){At(this.g,new Oh(a))},kr.prototype.sa=function(a){At(this.g,new Mh)},kr.prototype.ra=function(){At(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,_e.prototype.send=_e.prototype.o,_e.prototype.open=_e.prototype.m,_e.prototype.close=_e.prototype.close,Im=function(){return new Ws},Am=function(){return ks()},Tm=ir,dl={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,_o=Os,Yc.COMPLETE="complete",Em=Yc,Wc.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Hi=Wc,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,wm=bt}).apply(typeof ro<"u"?ro:typeof self<"u"?self:typeof window<"u"?window:{});const od="@firebase/firestore",ad="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}te.UNAUTHENTICATED=new te(null),te.GOOGLE_CREDENTIALS=new te("google-credentials-uid"),te.FIRST_PARTY=new te("first-party-uid"),te.MOCK_USER=new te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new dm("@firebase/firestore");function Ur(){return Er.logLevel}function z(e,...t){if(Er.logLevel<=st.DEBUG){const n=t.map(ac);Er.debug(`Firestore (${di}): ${e}`,...n)}}function An(e,...t){if(Er.logLevel<=st.ERROR){const n=t.map(ac);Er.error(`Firestore (${di}): ${e}`,...n)}}function jn(e,...t){if(Er.logLevel<=st.WARN){const n=t.map(ac);Er.warn(`Firestore (${di}): ${e}`,...n)}}function ac(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Rm(e,r,n)}function Rm(e,t,n){let r=`FIRESTORE (${di}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function ct(e,t,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,e||Rm(t,i,r)}function J(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends fi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class UR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(te.UNAUTHENTICATED))}shutdown(){}}class BR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $R{constructor(t){this.t=t,this.currentUser=te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ct(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new yn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yn,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},u=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new bm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string",2055,{h:t}),new te(t)}}class qR{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jR{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new qR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ud{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,TR(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ct(this.o===void 0,3512);const r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ud(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ud(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=HR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%62))}return r}}function et(e,t){return e<t?-1:e>t?1:0}function pl(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return et(r,i);{const s=Sm(),o=GR(s.encode(ld(e,n)),s.encode(ld(t,n)));return o!==0?o:et(r,i)}}n+=r>65535?2:1}return et(e.length,t.length)}function ld(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function GR(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return et(e[n],t[n]);return et(e.length,t.length)}function ni(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="__name__";class $e{constructor(t,n,r){n===void 0?n=0:n>t.length&&W(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&W(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return $e.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof $e?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=$e.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return et(t.length,n.length)}static compareSegments(t,n){const r=$e.isNumericId(t),i=$e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?$e.extractNumericId(t).compare($e.extractNumericId(n)):pl(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Un.fromString(t.substring(4,t.length-2))}}class _t extends $e{construct(t,n,r){return new _t(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new q(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const WR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends $e{construct(t,n,r){return new Kt(t,n,r)}static isValidIdentifier(t){return WR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cd}static keyField(){return new Kt([cd])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const u=t[i];if(u==="\\"){if(i+1===t.length)throw new q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(_t.fromString(t))}static fromName(t){return new G(_t.fromString(t).popFirst(5))}static empty(){return new G(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_t.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _t.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new _t(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(e,t,n){if(!n)throw new q(O.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function KR(e,t,n,r){if(t===!0&&r===!0)throw new q(O.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function hd(e){if(!G.isDocumentKey(e))throw new q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fd(e){if(G.isDocumentKey(e))throw new q(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Pm(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ra(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":W(12329,{type:typeof e})}function In(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ra(e);throw new q(O.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function QR(e,t){if(t<=0)throw new q(O.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(e,t){const n={typeString:e};return t&&(n.value=t),n}function bs(e,t){if(!Pm(e))throw new q(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new q(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=-62135596800,pd=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(t){return vt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*pd);return new vt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<dd)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pd}_compareTo(t){return this.seconds===t.seconds?et(this.nanoseconds,t.nanoseconds):et(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(bs(t,vt._jsonSchema))return new vt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-dd;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:kt("string",vt._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{static fromTimestamp(t){return new Q(t)}static min(){return new Q(new vt(0,0))}static max(){return new Q(new vt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=-1;function XR(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new zn(i,G.empty(),t)}function JR(e){return new zn(e.readTime,e.key,ps)}class zn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new zn(Q.min(),G.empty(),ps)}static max(){return new zn(Q.max(),G.empty(),ps)}}function YR(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:et(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==ZR)throw e;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):L.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):L.reject(n)}static resolve(t){return new L((n,r)=>{n(t)})}static reject(t){return new L((n,r)=>{r(t)})}static waitFor(t){return new L((n,r)=>{let i=0,s=0,o=!1;t.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(t){let n=L.resolve(!1);for(const r of t)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new L((r,i)=>{const s=t.length,o=new Array(s);let u=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(h=>{o[c]=h,++u,u===s&&r(o)},h=>i(h))}})}static doWhile(t,n){return new L((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function eb(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gi(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}ba.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=-1;function Sa(e){return e==null}function Zo(e){return e===0&&1/e==-1/0}function nb(e){return typeof e=="number"&&Number.isInteger(e)&&!Zo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="";function rb(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=gd(t)),t=ib(e.get(n),t);return gd(t)}function ib(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case xm:n+="";break;default:n+=s}}return n}function gd(e){return e+xm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t,n){this.comparator=t,this.root=n||Wt.EMPTY}insert(t,n){return new Rt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(t){return new Rt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new io(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new io(this.root,t,this.comparator,!1)}getReverseIterator(){return new io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new io(this.root,t,this.comparator,!0)}}class io{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Wt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Wt.RED,this.left=i??Wt.EMPTY,this.right=s??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Wt(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw W(27949);return t+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(t,n,r,i,s){return this}insert(t,n,r){return new Wt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.comparator=t,this.data=new Rt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new _d(this.data.getIterator())}getIteratorFrom(t){return new _d(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Mt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Mt(this.comparator);return n.data=t,n}}class _d{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this.fields=t,t.sort(Kt.comparator)}static empty(){return new we([])}unionWith(t){let n=new Mt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new we(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ni(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nm("Invalid base64 string: "+s):s}}(t);return new Qt(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Qt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return et(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const sb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(e){if(ct(!!e,39018),typeof e=="string"){let t=0;const n=sb.exec(e);if(ct(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:St(e.seconds),nanos:St(e.nanos)}}function St(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Gn(e){return typeof e=="string"?Qt.fromBase64String(e):Qt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="server_timestamp",km="__type__",Om="__previous_value__",Mm="__local_write_time__";function cc(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[km])===null||n===void 0?void 0:n.stringValue)===Dm}function Ca(e){const t=e.mapValue.fields[Om];return cc(t)?Ca(t):t}function gs(e){const t=Hn(e.mapValue.fields[Mm].timestampValue);return new vt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,n,r,i,s,o,u,l,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const ta="(default)";class ms{constructor(t,n){this.projectId=t,this.database=n||ta}static empty(){return new ms("","")}get isDefaultDatabase(){return this.database===ta}isEqual(t){return t instanceof ms&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="__type__",ab="__max__",so={mapValue:{}},Fm="__vector__",ea="value";function Wn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cc(e)?4:lb(e)?9007199254740991:ub(e)?10:11:W(28295,{value:e})}function en(e,t){if(e===t)return!0;const n=Wn(e);if(n!==Wn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gs(e).isEqual(gs(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hn(i.timestampValue),u=Hn(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Gn(i.bytesValue).isEqual(Gn(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return St(i.geoPointValue.latitude)===St(s.geoPointValue.latitude)&&St(i.geoPointValue.longitude)===St(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return St(i.integerValue)===St(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=St(i.doubleValue),u=St(s.doubleValue);return o===u?Zo(o)===Zo(u):isNaN(o)&&isNaN(u)}return!1}(e,t);case 9:return ni(e.arrayValue.values||[],t.arrayValue.values||[],en);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(md(o)!==md(u))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(u[l]===void 0||!en(o[l],u[l])))return!1;return!0}(e,t);default:return W(52216,{left:e})}}function _s(e,t){return(e.values||[]).find(n=>en(n,t))!==void 0}function ri(e,t){if(e===t)return 0;const n=Wn(e),r=Wn(t);if(n!==r)return et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(e.booleanValue,t.booleanValue);case 2:return function(s,o){const u=St(s.integerValue||s.doubleValue),l=St(o.integerValue||o.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(e,t);case 3:return yd(e.timestampValue,t.timestampValue);case 4:return yd(gs(e),gs(t));case 5:return pl(e.stringValue,t.stringValue);case 6:return function(s,o){const u=Gn(s),l=Gn(o);return u.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const u=s.split("/"),l=o.split("/");for(let c=0;c<u.length&&c<l.length;c++){const h=et(u[c],l[c]);if(h!==0)return h}return et(u.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const u=et(St(s.latitude),St(o.latitude));return u!==0?u:et(St(s.longitude),St(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return vd(e.arrayValue,t.arrayValue);case 10:return function(s,o){var u,l,c,h;const d=s.fields||{},p=o.fields||{},m=(u=d[ea])===null||u===void 0?void 0:u.arrayValue,_=(l=p[ea])===null||l===void 0?void 0:l.arrayValue,E=et(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:vd(m,_)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===so.mapValue&&o===so.mapValue)return 0;if(s===so.mapValue)return 1;if(o===so.mapValue)return-1;const u=s.fields||{},l=Object.keys(u),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=pl(l[d],h[d]);if(p!==0)return p;const m=ri(u[l[d]],c[h[d]]);if(m!==0)return m}return et(l.length,h.length)}(e.mapValue,t.mapValue);default:throw W(23264,{le:n})}}function yd(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return et(e,t);const n=Hn(e),r=Hn(t),i=et(n.seconds,r.seconds);return i!==0?i:et(n.nanos,r.nanos)}function vd(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ri(n[i],r[i]);if(s)return s}return et(n.length,r.length)}function ii(e){return gl(e)}function gl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Hn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Gn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=gl(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${gl(n.fields[o])}`;return i+"}"}(e.mapValue):W(61005,{value:e})}function yo(e){switch(Wn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ca(e);return t?16+yo(t):16;case 5:return 2*e.stringValue.length;case 6:return Gn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+yo(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return Jn(r.fields,(s,o)=>{i+=s.length+yo(o)}),i}(e.mapValue);default:throw W(13486,{value:e})}}function wd(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ml(e){return!!e&&"integerValue"in e}function hc(e){return!!e&&"arrayValue"in e}function Ed(e){return!!e&&"nullValue"in e}function Td(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vo(e){return!!e&&"mapValue"in e}function ub(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Lm])===null||n===void 0?void 0:n.stringValue)===Fm}function Ji(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Jn(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Ji(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ji(e.arrayValue.values[n]);return t}return Object.assign({},e)}function lb(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ab}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.value=t}static empty(){return new fe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!vo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ji(n)}setAll(t){let n=Kt.emptyPath(),r={},i=[];t.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=Ji(o):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());vo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return en(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];vo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Jn(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new fe(Ji(this.value))}}function Um(e){const t=[];return Jn(e.fields,(n,r)=>{const i=new Kt([n]);if(vo(r)){const s=Um(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new we(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t,n,r,i,s,o,u){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(t){return new ee(t,0,Q.min(),Q.min(),Q.min(),fe.empty(),0)}static newFoundDocument(t,n,r,i){return new ee(t,1,n,Q.min(),r,i,0)}static newNoDocument(t,n){return new ee(t,2,n,Q.min(),Q.min(),fe.empty(),0)}static newUnknownDocument(t,n){return new ee(t,3,n,Q.min(),Q.min(),fe.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t,n){this.position=t,this.inclusive=n}}function Ad(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=ri(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Id(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!en(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t,n="asc"){this.field=t,this.dir=n}}function cb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{}class Dt extends Bm{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new fb(t,n,r):n==="array-contains"?new gb(t,r):n==="in"?new mb(t,r):n==="not-in"?new _b(t,r):n==="array-contains-any"?new yb(t,r):new Dt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new db(t,r):new pb(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ri(n,this.value)):n!==null&&Wn(this.value)===Wn(n)&&this.matchesComparison(ri(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ke extends Bm{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new ke(t,n)}matches(t){return $m(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function $m(e){return e.op==="and"}function qm(e){return hb(e)&&$m(e)}function hb(e){for(const t of e.filters)if(t instanceof ke)return!1;return!0}function _l(e){if(e instanceof Dt)return e.field.canonicalString()+e.op.toString()+ii(e.value);if(qm(e))return e.filters.map(t=>_l(t)).join(",");{const t=e.filters.map(n=>_l(n)).join(",");return`${e.op}(${t})`}}function jm(e,t){return e instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&en(r.value,i.value)}(e,t):e instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&jm(o,i.filters[u]),!0):!1}(e,t):void W(19439)}function zm(e){return e instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${ii(n.value)}`}(e):e instanceof ke?function(n){return n.op.toString()+" {"+n.getFilters().map(zm).join(" ,")+"}"}(e):"Filter"}class fb extends Dt{constructor(t,n,r){super(t,n,r),this.key=G.fromName(r.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class db extends Dt{constructor(t,n){super(t,"in",n),this.keys=Hm("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class pb extends Dt{constructor(t,n){super(t,"not-in",n),this.keys=Hm("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Hm(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class gb extends Dt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return hc(n)&&_s(n.arrayValue,this.value)}}class mb extends Dt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&_s(this.value.arrayValue,n)}}class _b extends Dt{constructor(t,n){super(t,"not-in",n)}matches(t){if(_s(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_s(this.value.arrayValue,n)}}class yb extends Dt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!hc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_s(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,n=null,r=[],i=[],s=null,o=null,u=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.Pe=null}}function Rd(e,t=null,n=[],r=[],i=null,s=null,o=null){return new vb(e,t,n,r,i,s,o)}function fc(e){const t=J(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>_l(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Sa(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>ii(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>ii(r)).join(",")),t.Pe=n}return t.Pe}function dc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!cb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!jm(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Id(e.startAt,t.startAt)&&Id(e.endAt,t.endAt)}function yl(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n=null,r=[],i=[],s=null,o="F",u=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function wb(e,t,n,r,i,s,o,u){return new mi(e,t,n,r,i,s,o,u)}function pc(e){return new mi(e)}function bd(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Gm(e){return e.collectionGroup!==null}function Yi(e){const t=J(e);if(t.Te===null){t.Te=[];const n=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Mt(Kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(u=u.add(c.field))})}),u})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Te.push(new ys(s,r))}),n.has(Kt.keyField().canonicalString())||t.Te.push(new ys(Kt.keyField(),r))}return t.Te}function Ke(e){const t=J(e);return t.Ie||(t.Ie=Eb(t,Yi(e))),t.Ie}function Eb(e,t){if(e.limitType==="F")return Rd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ys(i.field,s)});const n=e.endAt?new na(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new na(e.startAt.position,e.startAt.inclusive):null;return Rd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function vl(e,t){const n=e.filters.concat([t]);return new mi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ra(e,t,n){return new mi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Pa(e,t){return dc(Ke(e),Ke(t))&&e.limitType===t.limitType}function Wm(e){return`${fc(Ke(e))}|lt:${e.limitType}`}function Br(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zm(i)).join(", ")}]`),Sa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ii(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ii(i)).join(",")),`Target(${r})`}(Ke(e))}; limitType=${e.limitType})`}function xa(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Yi(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,u,l){const c=Ad(o,u,l);return o.inclusive?c<=0:c<0}(r.startAt,Yi(r),i)||r.endAt&&!function(o,u,l){const c=Ad(o,u,l);return o.inclusive?c>=0:c>0}(r.endAt,Yi(r),i))}(e,t)}function Tb(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Km(e){return(t,n)=>{let r=!1;for(const i of Yi(e)){const s=Ab(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Ab(e,t,n){const r=e.field.isKeyField()?G.comparator(t.key,n.key):function(s,o,u){const l=o.data.field(s),c=u.data.field(s);return l!==null&&c!==null?ri(l,c):W(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Jn(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return Vm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=new Rt(G.comparator);function Rn(){return Ib}const Qm=new Rt(G.comparator);function Gi(...e){let t=Qm;for(const n of e)t=t.insert(n.key,n);return t}function Xm(e){let t=Qm;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function fr(){return Zi()}function Jm(){return Zi()}function Zi(){return new br(e=>e.toString(),(e,t)=>e.isEqual(t))}const Rb=new Rt(G.comparator),bb=new Mt(G.comparator);function nt(...e){let t=bb;for(const n of e)t=t.add(n);return t}const Sb=new Mt(et);function Cb(){return Sb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zo(t)?"-0":t}}function Ym(e){return{integerValue:""+e}}function Pb(e,t){return nb(t)?Ym(t):gc(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this._=void 0}}function xb(e,t,n){return e instanceof ia?function(i,s){const o={fields:{[km]:{stringValue:Dm},[Mm]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cc(s)&&(s=Ca(s)),s&&(o.fields[Om]=s),{mapValue:o}}(n,t):e instanceof vs?t_(e,t):e instanceof ws?e_(e,t):function(i,s){const o=Zm(i,s),u=Sd(o)+Sd(i.Ee);return ml(o)&&ml(i.Ee)?Ym(u):gc(i.serializer,u)}(e,t)}function Vb(e,t,n){return e instanceof vs?t_(e,t):e instanceof ws?e_(e,t):n}function Zm(e,t){return e instanceof sa?function(r){return ml(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class ia extends Va{}class vs extends Va{constructor(t){super(),this.elements=t}}function t_(e,t){const n=n_(t);for(const r of e.elements)n.some(i=>en(i,r))||n.push(r);return{arrayValue:{values:n}}}class ws extends Va{constructor(t){super(),this.elements=t}}function e_(e,t){let n=n_(t);for(const r of e.elements)n=n.filter(i=>!en(i,r));return{arrayValue:{values:n}}}class sa extends Va{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function Sd(e){return St(e.integerValue||e.doubleValue)}function n_(e){return hc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Nb(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof vs&&i instanceof vs||r instanceof ws&&i instanceof ws?ni(r.elements,i.elements,en):r instanceof sa&&i instanceof sa?en(r.Ee,i.Ee):r instanceof ia&&i instanceof ia}(e.transform,t.transform)}class Db{constructor(t,n){this.version=t,this.transformResults=n}}class Qe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Qe}static exists(t){return new Qe(void 0,t)}static updateTime(t){return new Qe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wo(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Na{}function r_(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new s_(e.key,Qe.none()):new Ss(e.key,e.data,Qe.none());{const n=e.data,r=fe.empty();let i=new Mt(Kt.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yn(e.key,r,new we(i.toArray()),Qe.none())}}function kb(e,t,n){e instanceof Ss?function(i,s,o){const u=i.value.clone(),l=Pd(i.fieldTransforms,s,o.transformResults);u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):e instanceof Yn?function(i,s,o){if(!wo(i.precondition,s))return void s.convertToUnknownDocument(o.version);const u=Pd(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(i_(i)),l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function ts(e,t,n,r){return e instanceof Ss?function(s,o,u,l){if(!wo(s.precondition,o))return u;const c=s.value.clone(),h=xd(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yn?function(s,o,u,l){if(!wo(s.precondition,o))return u;const c=xd(s.fieldTransforms,l,o),h=o.data;return h.setAll(i_(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,r):function(s,o,u){return wo(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(e,t,n)}function Ob(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Zm(r.transform,i||null);s!=null&&(n===null&&(n=fe.empty()),n.set(r.field,s))}return n||null}function Cd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ni(r,i,(s,o)=>Nb(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ss extends Na{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yn extends Na{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function i_(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Pd(e,t,n){const r=new Map;ct(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,u=t.data.field(s.field);r.set(s.field,Vb(o,u,n[i]))}return r}function xd(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,xb(s,o,t))}return r}class s_ extends Na{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mb extends Na{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&kb(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ts(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ts(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Jm();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=n.has(i.key)?null:u;const l=r_(o,u);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&ni(this.mutations,t.mutations,(n,r)=>Cd(n,r))&&ni(this.baseMutations,t.baseMutations,(n,r)=>Cd(n,r))}}class mc{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ct(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return Rb}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new mc(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,it;function Bb(e){switch(e){case O.OK:return W(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return W(15467,{code:e})}}function o_(e){if(e===void 0)return An("GRPC error has no .code"),O.UNKNOWN;switch(e){case Nt.OK:return O.OK;case Nt.CANCELLED:return O.CANCELLED;case Nt.UNKNOWN:return O.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return O.INTERNAL;case Nt.UNAVAILABLE:return O.UNAVAILABLE;case Nt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Nt.NOT_FOUND:return O.NOT_FOUND;case Nt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Nt.ABORTED:return O.ABORTED;case Nt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Nt.DATA_LOSS:return O.DATA_LOSS;default:return W(39323,{code:e})}}(it=Nt||(Nt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new Un([4294967295,4294967295],0);function Vd(e){const t=Sm().encode(e),n=new vm;return n.update(t),new Uint8Array(n.digest())}function Nd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Un([n,r],0),new Un([i,s],0)]}class _c{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=Un.fromNumber(this.fe)}pe(t,n,r){let i=t.add(n.multiply(Un.fromNumber(r)));return i.compare($b)===1&&(i=new Un([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=Vd(t),[r,i]=Nd(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new _c(s,i,n);return r.forEach(u=>o.insert(u)),o}insert(t){if(this.fe===0)return;const n=Vd(t),[r,i]=Nd(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Cs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Da(Q.min(),i,new Rt(et),Rn(),nt())}}class Cs{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Cs(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t,n,r,i){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=i}}class a_{constructor(t,n){this.targetId=t,this.De=n}}class u_{constructor(t,n,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Dd{constructor(){this.ve=0,this.Ce=kd(),this.Fe=Qt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=nt(),n=nt(),r=nt();return this.Ce.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:s})}}),new Cs(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=kd()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class qb{constructor(t){this.We=t,this.Ge=new Map,this.ze=Rn(),this.je=oo(),this.Je=oo(),this.He=new Rt(et)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:W(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(t){const n=t.targetId,r=t.De.count,i=this.st(n);if(i){const s=i.target;if(yl(s))if(r===0){const o=new G(s.path);this.Xe(n,o,ee.newNoDocument(o,Q.min()))}else ct(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const u=this._t(t),l=u?this.ut(u,t,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,u;try{o=Gn(r).toUint8Array()}catch(l){if(l instanceof Nm)return jn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new _c(o,i,s)}catch(l){return jn(l instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.fe===0?null:u}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(u)||(this.Xe(n,s,null),i++)}),i}Pt(t){const n=new Map;this.Ge.forEach((s,o)=>{const u=this.st(o);if(u){if(s.current&&yl(u.target)){const l=new G(u.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,ee.newNoDocument(l,t))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=nt();this.Je.forEach((s,o)=>{let u=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(t));const i=new Da(t,n,this.He,this.ze,r);return this.ze=Rn(),this.je=oo(),this.Je=oo(),this.He=new Rt(et),i}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const i=this.tt(t);this.It(t,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new Dd,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Mt(et),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Mt(et),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||z("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new Dd),this.We.getRemoteKeysForTarget(t).forEach(n=>{this.Xe(t,n,null)})}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function oo(){return new Rt(G.comparator)}function kd(){return new Rt(G.comparator)}const jb={asc:"ASCENDING",desc:"DESCENDING"},zb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hb={and:"AND",or:"OR"};class Gb{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function wl(e,t){return e.useProto3Json||Sa(t)?t:{value:t}}function oa(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function l_(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wb(e,t){return oa(e,t.toTimestamp())}function Xe(e){return ct(!!e,49232),Q.fromTimestamp(function(n){const r=Hn(n);return new vt(r.seconds,r.nanos)}(e))}function yc(e,t){return El(e,t).canonicalString()}function El(e,t){const n=function(i){return new _t(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function c_(e){const t=_t.fromString(e);return ct(g_(t),10190,{key:t.toString()}),t}function Tl(e,t){return yc(e.databaseId,t.path)}function Iu(e,t){const n=c_(t);if(n.get(1)!==e.databaseId.projectId)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(f_(n))}function h_(e,t){return yc(e.databaseId,t)}function Kb(e){const t=c_(e);return t.length===4?_t.emptyPath():f_(t)}function Al(e){return new _t(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function f_(e){return ct(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Od(e,t,n){return{name:Tl(e,t),fields:n.value.mapValue.fields}}function Qb(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ct(h===void 0||typeof h=="string",58123),Qt.fromBase64String(h||"")):(ct(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Qt.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(c){const h=c.code===void 0?O.UNKNOWN:o_(c.code);return new q(h,c.message||"")}(o);n=new u_(r,i,s,u||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Iu(e,r.document.name),s=Xe(r.document.updateTime),o=r.document.createTime?Xe(r.document.createTime):Q.min(),u=new fe({mapValue:{fields:r.document.fields}}),l=ee.newFoundDocument(i,s,o,u),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Eo(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Iu(e,r.document),s=r.readTime?Xe(r.readTime):Q.min(),o=ee.newNoDocument(i,s),u=r.removedTargetIds||[];n=new Eo([],u,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Iu(e,r.document),s=r.removedTargetIds||[];n=new Eo([],s,i,null)}else{if(!("filter"in t))return W(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Ub(i,s),u=r.targetId;n=new a_(u,o)}}return n}function Xb(e,t){let n;if(t instanceof Ss)n={update:Od(e,t.key,t.value)};else if(t instanceof s_)n={delete:Tl(e,t.key)};else if(t instanceof Yn)n={update:Od(e,t.key,t.data),updateMask:sS(t.fieldMask)};else{if(!(t instanceof Mb))return W(16599,{Rt:t.type});n={verify:Tl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const u=o.transform;if(u instanceof ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof vs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ws)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof sa)return{fieldPath:o.field.canonicalString(),increment:u.Ee};throw W(20930,{transform:o.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Wb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W(27497)}(e,t.precondition)),n}function Jb(e,t){return e&&e.length>0?(ct(t!==void 0,14353),e.map(n=>function(i,s){let o=i.updateTime?Xe(i.updateTime):Xe(s);return o.isEqual(Q.min())&&(o=Xe(s)),new Db(o,i.transformResults||[])}(n,t))):[]}function Yb(e,t){return{documents:[h_(e,t.path)]}}function Zb(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=h_(e,i);const s=function(c){if(c.length!==0)return p_(ke.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:$r(p.field),direction:nS(p.dir)}}(h))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const u=wl(e,t.limit);return u!==null&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{Vt:n,parent:i}}function tS(e){let t=Kb(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ct(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=d_(d);return p instanceof ke&&qm(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(_){return new ys(qr(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let u=null;n.limit&&(u=function(d){let p;return p=typeof d=="object"?d.value:d,Sa(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new na(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new na(m,p)}(n.endAt)),wb(t,i,o,s,u,"F",l,c)}function eS(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function d_(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qr(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qr(n.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qr(n.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qr(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(e):e.fieldFilter!==void 0?function(n){return Dt.create(qr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ke.create(n.compositeFilter.filters.map(r=>d_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(e):W(30097,{filter:e})}function nS(e){return jb[e]}function rS(e){return zb[e]}function iS(e){return Hb[e]}function $r(e){return{fieldPath:e.canonicalString()}}function qr(e){return Kt.fromServerFormat(e.fieldPath)}function p_(e){return e instanceof Dt?function(n){if(n.op==="=="){if(Td(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NAN"}};if(Ed(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Td(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NOT_NAN"}};if(Ed(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$r(n.field),op:rS(n.op),value:n.value}}}(e):e instanceof ke?function(n){const r=n.getFilters().map(i=>p_(i));return r.length===1?r[0]:{compositeFilter:{op:iS(n.op),filters:r}}}(e):W(54877,{filter:e})}function sS(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function g_(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t,n,r,i,s=Q.min(),o=Q.min(),u=Qt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(t){return new Mn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t){this.gt=t}}function aS(e){const t=tS({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ra(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.Dn=new lS}addToCollectionParentIndex(t,n){return this.Dn.add(n),L.resolve()}getCollectionParents(t,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return L.resolve()}deleteFieldIndex(t,n){return L.resolve()}deleteAllFieldIndexes(t){return L.resolve()}createTargetIndexes(t,n){return L.resolve()}getDocumentsMatchingTarget(t,n){return L.resolve(null)}getIndexType(t,n){return L.resolve(0)}getFieldIndexes(t,n){return L.resolve([])}getNextCollectionGroupToUpdate(t){return L.resolve(null)}getMinOffset(t,n){return L.resolve(zn.min())}getMinOffsetFromCollectionGroup(t,n){return L.resolve(zn.min())}updateCollectionGroup(t,n,r){return L.resolve()}updateIndexEntries(t,n){return L.resolve()}}class lS{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Mt(_t.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Mt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},m_=41943040;class he{static withCacheSize(t){return new he(t,he.DEFAULT_COLLECTION_PERCENTILE,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */he.DEFAULT_COLLECTION_PERCENTILE=10,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,he.DEFAULT=new he(m_,he.DEFAULT_COLLECTION_PERCENTILE,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),he.DISABLED=new he(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new si(0)}static ur(){return new si(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="LruGarbageCollector",cS=1048576;function Fd([e,t],[n,r]){const i=et(e,n);return i===0?et(t,r):i}class hS{constructor(t){this.Tr=t,this.buffer=new Mt(Fd),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Fd(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fS{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){z(Ld,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){gi(n)?z(Ld,"Ignoring IndexedDB error during garbage collection: ",n):await pi(n)}await this.Rr(3e5)})}}class dS{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return L.resolve(ba.ue);const r=new hS(n);return this.Vr.forEachTarget(t,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Md)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Md):this.pr(t,n))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,i,s,o,u,l,c;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i))).next(d=>(r=d,u=Date.now(),this.removeTargets(t,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(d=>(c=Date.now(),Ur()<=st.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(l-u)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function pS(e,t){return new dS(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.changes=new br(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ee.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&ts(r.mutation,i,we.empty(),vt.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,nt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=nt()){const i=fr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=Gi();return s.forEach((u,l)=>{o=o.insert(u,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=fr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,nt()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,u)=>{n.set(o,u)})})}computeViews(t,n,r,i){let s=Rn();const o=Zi(),u=function(){return Zi()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Yn)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ts(h.mutation,c,h.mutation.getFieldMask(),vt.now())):o.set(c.key,we.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return u.set(c,new mS(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),u))}recalculateAndSaveOverlays(t,n){const r=Zi();let i=new Rt((o,u)=>o-u),s=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const u of o)u.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||we.empty();h=u.applyToLocalView(c,h),r.set(l,h);const d=(i.get(u.batchId)||nt()).add(l);i=i.insert(u.batchId,d)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const l=u.getNext(),c=l.key,h=l.value,d=Jm();h.forEach(p=>{if(!s.has(p)){const m=r_(n.get(p),r.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Gm(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):L.resolve(fr());let u=ps,l=s;return o.next(c=>L.forEach(c,(h,d)=>(u<d.largestBatchId&&(u=d.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(t,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,nt())).next(h=>({batchId:u,changes:Xm(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(r=>{let i=Gi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=Gi();return this.indexManager.getCollectionParents(t,s).next(u=>L.forEach(u,l=>{const c=function(d,p){return new mi(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ee.newInvalidDocument(h)))});let u=Gi();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ts(h.mutation,c,we.empty(),vt.now()),xa(n,c)&&(u=u.insert(l,c))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xe(i.createTime)}}(n)),L.resolve()}getNamedQuery(t,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:aS(i.bundledQuery),readTime:Xe(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.overlays=new Rt(G.comparator),this.kr=new Map}getOverlay(t,n){return L.resolve(this.overlays.get(n))}getOverlays(t,n){const r=fr();return L.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.wt(t,n,s)}),L.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(t,n,r){const i=fr(),s=n.length+1,o=new G(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const l=u.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Rt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=fr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const u=fr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>u.set(c,h)),!(u.size()>=i)););return L.resolve(u)}wt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Fb(n,r));let s=this.kr.get(n);s===void 0&&(s=nt(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(t){return L.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.qr=new Mt(Ut.Qr),this.$r=new Mt(Ut.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new Ut(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Wr(new Ut(t,n))}Gr(t,n){t.forEach(r=>this.removeReference(r,n))}zr(t){const n=new G(new _t([])),r=new Ut(n,t),i=new Ut(n,t+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new G(new _t([])),r=new Ut(n,t),i=new Ut(n,t+1);let s=nt();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ut(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ut{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return G.comparator(t.key,n.key)||et(t.Hr,n.Hr)}static Ur(t,n){return et(t.Hr,n.Hr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Mt(Ut.Qr)}checkEmpty(t){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lb(s,n,r,i);this.mutationQueue.push(o);for(const u of i)this.Yr=this.Yr.add(new Ut(u.key,s)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return L.resolve(o)}lookupMutationBatch(t,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?lc:this.er-1)}getAllMutationBatches(t){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ut(n,0),i=new Ut(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const u=this.Zr(o.Hr);s.push(u)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Mt(et);return n.forEach(i=>{const s=new Ut(i,0),o=new Ut(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],u=>{r=r.add(u.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Ut(new G(s),0);let u=new Mt(et);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(u=u.add(l.Hr)),!0)},o),L.resolve(this.ei(u))}ei(t){const n=[];return t.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ct(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,i=>{const s=new Ut(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=r})}rr(t){}containsKey(t,n){const r=new Ut(n,0),i=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,L.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(t){this.ni=t,this.docs=function(){return new Rt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ee.newInvalidDocument(n))}getEntries(t,n){let r=Rn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ee.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Rn();const o=n.path,u=new G(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||YR(JR(h),r)<=0||(i.has(h.key)||xa(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(t,n,r,i){W(9500)}ri(t,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new AS(this)}getSize(t){return L.resolve(this.size)}}class AS extends gS{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(t,i)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t){this.persistence=t,this.ii=new br(n=>fc(n),dc),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.si=0,this.oi=new vc,this.targetCount=0,this._i=si.ar()}forEachTarget(t,n){return this.ii.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(t){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return L.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new si(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(t,n){return this.hr(n),L.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.ii.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(t,u.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(t){return L.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(t,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(t,n){this.ai={},this.overlays={},this.ui=new ba(0),this.ci=!1,this.ci=!0,this.li=new wS,this.referenceDelegate=t(this),this.hi=new IS(this),this.indexManager=new uS,this.remoteDocumentCache=function(i){return new TS(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new oS(n),this.Ti=new yS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new vS,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new ES(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){z("MemoryPersistence","Starting transaction:",t);const i=new RS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(t,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(t,n)))}}class RS extends tb{constructor(t){super(),this.currentSequenceNumber=t}}class wc{constructor(t){this.persistence=t,this.Ai=new vc,this.Ri=null}static Vi(t){return new wc(t)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const i=G.fromPath(r);return this.fi(t,i).next(s=>{s||n.removeEntry(i,Q.min())})}).next(()=>(this.Ri=null,n.apply(t)))}updateLimboDocument(t,n){return this.fi(t,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(t){return 0}fi(t,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class aa{constructor(t,n){this.persistence=t,this.gi=new br(r=>rb(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=pS(this,n)}static Vi(t,n){return new aa(t,n)}Ii(){}di(t){return L.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}yr(t){let n=0;return this.gr(t,r=>{n++}).next(()=>n)}gr(t,n){return L.forEach(this.gi,(r,i)=>this.Sr(t,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(t,o=>this.Sr(t,o,n).next(u=>{u||(r++,s.removeEntry(o,Q.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),L.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),L.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),L.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),L.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=yo(t.data.value)),n}Sr(t,n,r){return L.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.gi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=i}static Es(t,n){let r=nt(),i=nt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ec(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return vI()?8:eb(_I())>0?6:4}()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ps(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new bS;return this.ws(t,n,o).next(u=>{if(s.result=u,this.Rs)return this.Ss(t,n,o,u.size)})}).next(()=>s.result)}Ss(t,n,r,i){return r.documentReadCount<this.Vs?(Ur()<=st.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Br(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Ur()<=st.DEBUG&&z("QueryEngine","Query:",Br(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ur()<=st.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Br(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ke(n))):L.resolve())}ps(t,n){if(bd(n))return L.resolve(null);let r=Ke(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ra(n,null,"F"),r=Ke(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=nt(...s);return this.gs.getDocuments(t,o).next(u=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.bs(n,u);return this.Ds(n,c,o,l.readTime)?this.ps(t,ra(n,null,"F")):this.vs(t,c,n,l)}))})))}ys(t,n,r,i){return bd(n)||i.isEqual(Q.min())?L.resolve(null):this.gs.getDocuments(t,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?L.resolve(null):(Ur()<=st.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Br(n)),this.vs(t,o,n,XR(i,ps)).next(u=>u))})}bs(t,n){let r=new Mt(Km(t));return n.forEach((i,s)=>{xa(t,s)&&(r=r.add(s))}),r}Ds(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(t,n,r){return Ur()<=st.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Br(n)),this.gs.getDocumentsMatchingQuery(t,n,zn.min(),r)}vs(t,n,r,i){return this.gs.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="LocalStore",CS=3e8;class PS{constructor(t,n,r,i){this.persistence=t,this.Cs=n,this.serializer=i,this.Fs=new Rt(et),this.Ms=new br(s=>fc(s),dc),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _S(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Fs))}}function xS(e,t,n,r){return new PS(e,t,n,r)}async function y_(e,t){const n=J(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let l=nt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){u.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:u}))})})}function VS(e,t){const n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,l,c,h){const d=c.batch,p=d.keys();let m=L.resolve();return p.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(E=>{const v=c.docVersions.get(_);ct(v!==null,48541),E.version.compareTo(v)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),m.next(()=>u.mutationQueue.removeMutationBatch(l,d))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let l=nt();for(let c=0;c<u.mutationResults.length;++c)u.mutationResults[c].transformResults.length>0&&(l=l.add(u.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function v_(e){const t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.hi.getLastRemoteSnapshotVersion(n))}function NS(e,t){const n=J(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];t.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;u.push(n.hi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?m=m.withResumeToken(Qt.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(E,v,P){return E.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=CS?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&u.push(n.hi.updateTargetData(s,m))});let l=Rn(),c=nt();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),u.push(DS(s,o,t.documentUpdates).next(h=>{l=h.Ls,c=h.ks})),!r.isEqual(Q.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(h)}return L.waitFor(u).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=i,s))}function DS(e,t,n){let r=nt(),i=nt();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Rn();return n.forEach((u,l)=>{const c=s.get(u);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(u)),l.isNoDocument()&&l.version.isEqual(Q.min())?(t.removeEntry(u,l.readTime),o=o.insert(u,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(u,l)):z(Tc,"Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function kS(e,t){const n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=lc),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function OS(e,t){const n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,t).next(s=>s?(i=s,L.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Mn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r})}async function Il(e,t,n){const r=J(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!gi(o))throw o;z(Tc,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Ud(e,t,n){const r=J(e);let i=Q.min(),s=nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=J(l),p=d.Ms.get(h);return p!==void 0?L.resolve(d.Fs.get(p)):d.hi.getTargetData(c,h)}(r,o,Ke(t)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,u.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,t,n?i:Q.min(),n?s:nt())).next(u=>(MS(r,Tb(t),u),{documents:u,qs:s})))}function MS(e,t,n){let r=e.xs.get(t)||Q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.xs.set(t,r)}class Bd{constructor(){this.activeTargetIds=Cb()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class LS{constructor(){this.Fo=new Bd,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new Bd,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="ConnectivityMonitor";class qd{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){z($d,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){z($d,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao=null;function Rl(){return ao===null?ao=function(){return 268435456+Math.round(2147483648*Math.random())}():ao++,"0x"+ao.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="RestConnection",US={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BS{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ta?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(t,n,r,i,s){const o=Rl(),u=this.Go(t,n.toUriEncodedString());z(Ru,`Sending RPC '${t}' ${o}:`,u,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:c}=new URL(u),h=sc(c);return this.jo(t,u,l,r,h).then(d=>(z(Ru,`Received RPC '${t}' ${o}: `,d),d),d=>{throw jn(Ru,`RPC '${t}' ${o} failed with error: `,d,"url: ",u,"request:",r),d})}Jo(t,n,r,i,s,o){return this.Wo(t,n,r,i,s)}zo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+di}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}Go(t,n){const r=US[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class qS extends BS{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,i,s){const o=Rl();return new Promise((u,l)=>{const c=new wm;c.setWithCredentials(!0),c.listenOnce(Em.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case _o.NO_ERROR:const d=c.getResponseJson();z(Zt,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),u(d);break;case _o.TIMEOUT:z(Zt,`RPC '${t}' ${o} timed out`),l(new q(O.DEADLINE_EXCEEDED,"Request time out"));break;case _o.HTTP_ERROR:const p=c.getStatus();if(z(Zt,`RPC '${t}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const E=function(P){const S=P.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(S)>=0?S:O.UNKNOWN}(_.status);l(new q(E,_.message))}else l(new q(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new q(O.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:t,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{z(Zt,`RPC '${t}' ${o} completed.`)}});const h=JSON.stringify(i);z(Zt,`RPC '${t}' ${o} sending request:`,i),c.send(n,"POST",h,r,15)})}P_(t,n,r){const i=Rl(),s=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Im(),u=Am(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");z(Zt,`Creating RPC '${t}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.T_(d);let p=!1,m=!1;const _=new $S({Ho:v=>{m?z(Zt,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(p||(z(Zt,`Opening RPC '${t}' stream ${i} transport.`),d.open(),p=!0),z(Zt,`RPC '${t}' stream ${i} sending:`,v),d.send(v))},Yo:()=>d.close()}),E=(v,P,S)=>{v.listen(P,N=>{try{S(N)}catch(x){setTimeout(()=>{throw x},0)}})};return E(d,Hi.EventType.OPEN,()=>{m||(z(Zt,`RPC '${t}' stream ${i} transport opened.`),_.s_())}),E(d,Hi.EventType.CLOSE,()=>{m||(m=!0,z(Zt,`RPC '${t}' stream ${i} transport closed`),_.__(),this.I_(d))}),E(d,Hi.EventType.ERROR,v=>{m||(m=!0,jn(Zt,`RPC '${t}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),_.__(new q(O.UNAVAILABLE,"The operation could not be completed")))}),E(d,Hi.EventType.MESSAGE,v=>{var P;if(!m){const S=v.data[0];ct(!!S,16349);const N=S,x=(N==null?void 0:N.error)||((P=N[0])===null||P===void 0?void 0:P.error);if(x){z(Zt,`RPC '${t}' stream ${i} received error:`,x);const M=x.status;let B=function(T){const b=Nt[T];if(b!==void 0)return o_(b)}(M),I=x.message;B===void 0&&(B=O.INTERNAL,I="Unknown error status: "+M+" with message "+x.message),m=!0,_.__(new q(B,I)),d.close()}else z(Zt,`RPC '${t}' stream ${i} received:`,S),_.a_(S)}}),E(u,Tm.STAT_EVENT,v=>{v.stat===dl.PROXY?z(Zt,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===dl.NOPROXY&&z(Zt,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(n=>n===t)}}function bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(e){return new Gb(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(t,n,r=1e3,i=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="PersistentStream";class E_{constructor(t,n,r,i,s,o,u,l){this.Fi=t,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new w_(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{t(()=>{const i=new q(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return z(jd,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget(()=>this.b_===t?n():(z(jd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jS extends E_{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=Qb(this.serializer,t),r=function(s){if(!("targetChange"in s))return Q.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?Xe(o.readTime):Q.min()}(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=Al(this.serializer),n.addTarget=function(s,o){let u;const l=o.target;if(u=yl(l)?{documents:Yb(s,l)}:{query:Zb(s,l).Vt},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=l_(s,o.resumeToken);const c=wl(s,o.expectedCount);c!==null&&(u.expectedCount=c)}else if(o.snapshotVersion.compareTo(Q.min())>0){u.readTime=oa(s,o.snapshotVersion.toTimestamp());const c=wl(s,o.expectedCount);c!==null&&(u.expectedCount=c)}return u}(this.serializer,t);const r=eS(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=Al(this.serializer),n.removeTarget=t,this.k_(n)}}class zS extends E_{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return ct(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ct(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){ct(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=Jb(t.writeResults,t.commitTime),r=Xe(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=Al(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Xb(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{}class GS extends HS{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(t,El(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(O.UNKNOWN,s.toString())})}Jo(t,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Jo(t,El(n,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(O.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class WS{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(An(n),this._a=!1):z("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="RemoteStore";class KS{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Sr(this)&&(z(Tr,"Restarting streams for network reachability change."),await async function(l){const c=J(l);c.Ia.add(4),await Ps(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Oa(c)}(this))})}),this.Aa=new WS(r,i)}}async function Oa(e){if(Sr(e))for(const t of e.da)await t(!0)}async function Ps(e){for(const t of e.da)await t(!1)}function T_(e,t){const n=J(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),bc(n)?Rc(n):_i(n).x_()&&Ic(n,t))}function Ac(e,t){const n=J(e),r=_i(n);n.Ta.delete(t),r.x_()&&A_(n,t),n.Ta.size===0&&(r.x_()?r.B_():Sr(n)&&n.Aa.set("Unknown"))}function Ic(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Q.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}_i(e).H_(t)}function A_(e,t){e.Ra.$e(t),_i(e).Y_(t)}function Rc(e){e.Ra=new qb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),_i(e).start(),e.Aa.aa()}function bc(e){return Sr(e)&&!_i(e).M_()&&e.Ta.size>0}function Sr(e){return J(e).Ia.size===0}function I_(e){e.Ra=void 0}async function QS(e){e.Aa.set("Online")}async function XS(e){e.Ta.forEach((t,n)=>{Ic(e,t)})}async function JS(e,t){I_(e),bc(e)?(e.Aa.la(t),Rc(e)):e.Aa.set("Unknown")}async function YS(e,t,n){if(e.Aa.set("Online"),t instanceof u_&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const u of s.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.Ta.delete(u),i.Ra.removeTarget(u))}(e,t)}catch(r){z(Tr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await ua(e,r)}else if(t instanceof Eo?e.Ra.Ye(t):t instanceof a_?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Q.min()))try{const r=await v_(e.localStore);n.compareTo(r)>=0&&await function(s,o){const u=s.Ra.Pt(o);return u.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ta.get(c);h&&s.Ta.set(c,h.withResumeToken(l.resumeToken,o))}}),u.targetMismatches.forEach((l,c)=>{const h=s.Ta.get(l);if(!h)return;s.Ta.set(l,h.withResumeToken(Qt.EMPTY_BYTE_STRING,h.snapshotVersion)),A_(s,l);const d=new Mn(h.target,l,c,h.sequenceNumber);Ic(s,d)}),s.remoteSyncer.applyRemoteEvent(u)}(e,n)}catch(r){z(Tr,"Failed to raise snapshot:",r),await ua(e,r)}}async function ua(e,t,n){if(!gi(t))throw t;e.Ia.add(1),await Ps(e),e.Aa.set("Offline"),n||(n=()=>v_(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{z(Tr,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Oa(e)})}function R_(e,t){return t().catch(n=>ua(e,n,t))}async function Ma(e){const t=J(e),n=Kn(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:lc;for(;ZS(t);)try{const i=await kS(t.localStore,r);if(i===null){t.Pa.length===0&&n.B_();break}r=i.batchId,tC(t,i)}catch(i){await ua(t,i)}b_(t)&&S_(t)}function ZS(e){return Sr(e)&&e.Pa.length<10}function tC(e,t){e.Pa.push(t);const n=Kn(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function b_(e){return Sr(e)&&!Kn(e).M_()&&e.Pa.length>0}function S_(e){Kn(e).start()}async function eC(e){Kn(e).na()}async function nC(e){const t=Kn(e);for(const n of e.Pa)t.X_(n.mutations)}async function rC(e,t,n){const r=e.Pa.shift(),i=mc.from(r,t,n);await R_(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ma(e)}async function iC(e,t){t&&Kn(e).Z_&&await async function(r,i){if(function(o){return Bb(o)&&o!==O.ABORTED}(i.code)){const s=r.Pa.shift();Kn(r).N_(),await R_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ma(r)}}(e,t),b_(e)&&S_(e)}async function zd(e,t){const n=J(e);n.asyncQueue.verifyOperationInProgress(),z(Tr,"RemoteStore received new credentials");const r=Sr(n);n.Ia.add(3),await Ps(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Oa(n)}async function sC(e,t){const n=J(e);t?(n.Ia.delete(2),await Oa(n)):t||(n.Ia.add(2),await Ps(n),n.Aa.set("Unknown"))}function _i(e){return e.Va||(e.Va=function(n,r,i){const s=J(n);return s.ia(),new jS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Zo:QS.bind(null,e),e_:XS.bind(null,e),n_:JS.bind(null,e),J_:YS.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),bc(e)?Rc(e):e.Aa.set("Unknown")):(await e.Va.stop(),I_(e))})),e.Va}function Kn(e){return e.ma||(e.ma=function(n,r,i){const s=J(n);return s.ia(),new zS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:eC.bind(null,e),n_:iC.bind(null,e),ea:nC.bind(null,e),ta:rC.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await Ma(e)):(await e.ma.stop(),e.Pa.length>0&&(z(Tr,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,u=new Sc(t,n,o,i,s);return u.start(r),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cc(e,t){if(An("AsyncQueue",`${t}: ${e}`),gi(e))return new q(O.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{static emptySet(t){return new Qr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Gi(),this.sortedSet=new Rt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Qr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Qr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this.fa=new Rt(G.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):W(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal((n,r)=>{t.push(r)}),t}}class oi{constructor(t,n,r,i,s,o,u,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new oi(t,n,Qr.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Pa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class aC{constructor(){this.queries=Gd(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=Gd(),s.forEach((o,u)=>{for(const l of u.wa)l.onError(r)})})(this,new q(O.ABORTED,"Firestore shutting down"))}}function Gd(){return new br(e=>Wm(e),Pa)}async function C_(e,t){const n=J(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new oC,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const u=Cc(o,`Initialization of query '${Br(t.query)}' failed`);return void t.onError(u)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&Pc(n)}async function P_(e,t){const n=J(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(t);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uC(e,t){const n=J(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const u of o.wa)u.Ca(i)&&(r=!0);o.ya=i}}r&&Pc(n)}function lC(e,t,n){const r=J(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function Pc(e){e.Da.forEach(t=>{t.next()})}var bl,Wd;(Wd=bl||(bl={})).Fa="default",Wd.Cache="cache";class x_{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new oi(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=oi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==bl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(t){this.key=t}}class N_{constructor(t){this.key=t}}class cC{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=nt(),this.mutatedKeys=nt(),this.Xa=Km(t),this.eu=new Qr(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new Hd,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((h,d)=>{const p=i.get(h),m=xa(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),E=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;p&&m?p.data.isEqual(m.data)?_!==E&&(r.track({type:3,doc:m}),v=!0):this.iu(p,m)||(r.track({type:2,doc:m}),v=!0,(l&&this.Xa(m,l)>0||c&&this.Xa(m,c)<0)&&(u=!0)):!p&&m?(r.track({type:0,doc:m}),v=!0):p&&!m&&(r.track({type:1,doc:p}),v=!0,(l||c)&&(u=!0)),v&&(m?(o=o.add(m),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:u,mutatedKeys:s}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const o=t.ru.pa();o.sort((h,d)=>function(m,_){const E=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:v})}};return E(m)-E(_)}(h.type,d.type)||this.Xa(h.doc,d.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new oi(this.query,t.eu,s,o,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Hd,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=nt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return t.forEach(r=>{this.Za.has(r)||n.push(new N_(r))}),this.Za.forEach(r=>{t.has(r)||n.push(new V_(r))}),n}uu(t){this.Ha=t.qs,this.Za=nt();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return oi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const xc="SyncEngine";class hC{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class fC{constructor(t){this.key=t,this.lu=!1}}class dC{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new br(u=>Wm(u),Pa),this.Tu=new Map,this.Iu=new Set,this.du=new Rt(G.comparator),this.Eu=new Map,this.Au=new vc,this.Ru={},this.Vu=new Map,this.mu=si.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function pC(e,t,n=!0){const r=F_(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await D_(r,t,n,!0),i}async function gC(e,t){const n=F_(e);await D_(n,t,!0,!1)}async function D_(e,t,n,r){const i=await OS(e.localStore,Ke(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await mC(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&T_(e.remoteStore,i),u}async function mC(e,t,n,r,i){e.gu=(d,p,m)=>async function(E,v,P,S){let N=v.view.nu(P);N.Ds&&(N=await Ud(E.localStore,v.query,!1).then(({documents:I})=>v.view.nu(I,N)));const x=S&&S.targetChanges.get(v.targetId),M=S&&S.targetMismatches.get(v.targetId)!=null,B=v.view.applyChanges(N,E.isPrimaryClient,x,M);return Qd(E,v.targetId,B._u),B.snapshot}(e,d,p,m);const s=await Ud(e.localStore,t,!0),o=new cC(t,s.qs),u=o.nu(s.documents),l=Cs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),c=o.applyChanges(u,e.isPrimaryClient,l);Qd(e,n,c._u);const h=new hC(t,n,o);return e.Pu.set(t,h),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function _C(e,t,n){const r=J(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Pa(o,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Il(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ac(r.remoteStore,i.targetId),Sl(r,i.targetId)}).catch(pi)):(Sl(r,i.targetId),await Il(r.localStore,i.targetId,!0))}async function yC(e,t){const n=J(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ac(n.remoteStore,r.targetId))}async function vC(e,t,n){const r=bC(e);try{const i=await function(o,u){const l=J(o),c=vt.now(),h=u.reduce((m,_)=>m.add(_.key),nt());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Rn(),E=nt();return l.Os.getEntries(m,h).next(v=>{_=v,_.forEach((P,S)=>{S.isValidDocument()||(E=E.add(P))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(v=>{d=v;const P=[];for(const S of u){const N=Ob(S,d.get(S.key).overlayedDocument);N!=null&&P.push(new Yn(S.key,N,Um(N.value.mapValue),Qe.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,P,u)}).next(v=>{p=v;const P=v.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(m,v.batchId,P)})}).then(()=>({batchId:p.batchId,changes:Xm(d)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new Rt(et)),c=c.insert(u,l),o.Ru[o.currentUser.toKey()]=c}(r,i.batchId,n),await xs(r,i.changes),await Ma(r.remoteStore)}catch(i){const s=Cc(i,"Failed to persist write");n.reject(s)}}async function k_(e,t){const n=J(e);try{const r=await NS(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ct(o.lu,14607):i.removedDocuments.size>0&&(ct(o.lu,42227),o.lu=!1))}),await xs(n,r,t)}catch(r){await pi(r)}}function Kd(e,t,n){const r=J(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const u=o.view.va(t);u.snapshot&&i.push(u.snapshot)}),function(o,u){const l=J(o);l.onlineState=u;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.wa)p.va(u)&&(c=!0)}),c&&Pc(l)}(r.eventManager,t),i.length&&r.hu.J_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function wC(e,t,n){const r=J(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let o=new Rt(G.comparator);o=o.insert(s,ee.newNoDocument(s,Q.min()));const u=nt().add(s),l=new Da(Q.min(),new Map,new Rt(et),o,u);await k_(r,l),r.du=r.du.remove(s),r.Eu.delete(t),Vc(r)}else await Il(r.localStore,t,!1).then(()=>Sl(r,t,n)).catch(pi)}async function EC(e,t){const n=J(e),r=t.batch.batchId;try{const i=await VS(n.localStore,t);M_(n,r,null),O_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xs(n,i)}catch(i){await pi(i)}}async function TC(e,t,n){const r=J(e);try{const i=await function(o,u){const l=J(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,u).next(d=>(ct(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,t);M_(r,t,n),O_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await xs(r,i)}catch(i){await pi(i)}}function O_(e,t){(e.Vu.get(t)||[]).forEach(n=>{n.resolve()}),e.Vu.delete(t)}function M_(e,t,n){const r=J(e);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Sl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(r=>{e.Au.containsKey(r)||L_(e,r)})}function L_(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ac(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Vc(e))}function Qd(e,t,n){for(const r of n)r instanceof V_?(e.Au.addReference(r.key,t),AC(e,r)):r instanceof N_?(z(xc,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||L_(e,r.key)):W(19791,{yu:r})}function AC(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(z(xc,"New document in limbo: "+n),e.Iu.add(r),Vc(e))}function Vc(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new G(_t.fromString(t)),r=e.mu.next();e.Eu.set(r,new fC(n)),e.du=e.du.insert(n,r),T_(e.remoteStore,new Mn(Ke(pc(n.path)),r,"TargetPurposeLimboResolution",ba.ue))}}async function xs(e,t,n){const r=J(e),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((u,l)=>{o.push(r.gu(l,t,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Ec.Es(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,c){const h=J(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(c,p=>L.forEach(p.Is,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>L.forEach(p.ds,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!gi(d))throw d;z(Tc,"Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.Fs.get(p),_=m.snapshotVersion,E=m.withLastLimboFreeSnapshotVersion(_);h.Fs=h.Fs.insert(p,E)}}}(r.localStore,s))}async function IC(e,t){const n=J(e);if(!n.currentUser.isEqual(t)){z(xc,"User change. New user:",t.toKey());const r=await y_(n.localStore,t);n.currentUser=t,function(s,o){s.Vu.forEach(u=>{u.forEach(l=>{l.reject(new q(O.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await xs(n,r.Bs)}}function RC(e,t){const n=J(e),r=n.Eu.get(t);if(r&&r.lu)return nt().add(r.key);{let i=nt();const s=n.Tu.get(t);if(!s)return i;for(const o of s){const u=n.Pu.get(o);i=i.unionWith(u.view.tu)}return i}}function F_(e){const t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=k_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=RC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wC.bind(null,t),t.hu.J_=uC.bind(null,t.eventManager),t.hu.pu=lC.bind(null,t.eventManager),t}function bC(e){const t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=EC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=TC.bind(null,t),t}class la{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ka(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return xS(this.persistence,new SS,t.initialUser,this.serializer)}Du(t){return new __(wc.Vi,this.serializer)}bu(t){return new LS}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}la.provider={build:()=>new la};class SC extends la{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){ct(this.persistence.referenceDelegate instanceof aa,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fS(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?he.withCacheSize(this.cacheSizeBytes):he.DEFAULT;return new __(r=>aa.Vi(r,n),this.serializer)}}class Cl{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IC.bind(null,this.syncEngine),await sC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new aC}()}createDatastore(t){const n=ka(t.databaseInfo.databaseId),r=function(s){return new qS(s)}(t.databaseInfo);return function(s,o,u,l){return new GS(s,o,u,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,u){return new KS(r,i,s,o,u)}(this.localStore,this.datastore,t.asyncQueue,n=>Kd(this.syncEngine,n,0),function(){return qd.C()?new qd:new FS}())}createSyncEngine(t,n){return function(i,s,o,u,l,c,h){const d=new dC(i,s,o,u,l,c);return h&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=J(i);z(Tr,"RemoteStore shutting down."),s.Ia.add(5),await Ps(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cl.provider={build:()=>new Cl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):An("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="FirestoreClient";class CC{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=te.UNAUTHENTICATED,this.clientId=uc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{z(Qn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(z(Qn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Cc(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Su(e,t){e.asyncQueue.verifyOperationInProgress(),z(Qn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await y_(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>{jn("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{z("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{jn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),e._offlineComponents=t}async function Xd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await PC(e);z(Qn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>zd(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>zd(t.remoteStore,i)),e._onlineComponents=t}async function PC(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){z(Qn,"Using user provided OfflineComponentProvider");try{await Su(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;jn("Error using user provided cache. Falling back to memory cache: "+n),await Su(e,new la)}}else z(Qn,"Using default OfflineComponentProvider"),await Su(e,new SC(void 0));return e._offlineComponents}async function B_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(z(Qn,"Using user provided OnlineComponentProvider"),await Xd(e,e._uninitializedComponentsProvider._online)):(z(Qn,"Using default OnlineComponentProvider"),await Xd(e,new Cl))),e._onlineComponents}function xC(e){return B_(e).then(t=>t.syncEngine)}async function $_(e){const t=await B_(e),n=t.eventManager;return n.onListen=pC.bind(null,t.syncEngine),n.onUnlisten=_C.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=yC.bind(null,t.syncEngine),n}function VC(e,t,n={}){const r=new yn;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,u,l,c){const h=new U_({next:p=>{h.Ou(),o.enqueueAndForget(()=>P_(s,d));const m=p.docs.has(u);!m&&p.fromCache?c.reject(new q(O.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new q(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new x_(pc(u.path),h,{includeMetadataChanges:!0,ka:!0});return C_(s,d)}(await $_(e),e.asyncQueue,t,n,r)),r.promise}function NC(e,t,n={}){const r=new yn;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,u,l,c){const h=new U_({next:p=>{h.Ou(),o.enqueueAndForget(()=>P_(s,d)),p.fromCache&&l.source==="server"?c.reject(new q(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new x_(u,h,{includeMetadataChanges:!0,ka:!0});return C_(s,d)}(await $_(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="firestore.googleapis.com",Yd=!0;class Zd{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=j_,this.ssl=Yd}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Yd;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=m_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<cS)throw new q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q_((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class La{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zd(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new UR;switch(r.type){case"firstParty":return new jR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jd.get(n);r&&(z("ComponentProvider","Removing Datastore"),Jd.delete(n),r.terminate())}(this),Promise.resolve()}}function DC(e,t,n,r={}){var i;e=In(e,La);const s=sc(t),o=e._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;s&&(fI(`https://${l}`),mI("Firestore",!0)),o.host!==j_&&o.host!==l&&jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Xo(c,u)&&(e._setSettings(c),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=te.MOCK_USER;else{h=dI(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new te(p)}e._authCredentials=new BR(new bm(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Zn(this.firestore,t,this._query)}}class xt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xt(this.firestore,t,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(bs(n,xt._jsonSchema))return new xt(t,r||null,new G(_t.fromString(n.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:kt("string",xt._jsonSchemaVersion),referencePath:kt("string")};class Bn extends Zn{constructor(t,n,r){super(t,n,pc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xt(this.firestore,null,new G(t))}withConverter(t){return new Bn(this.firestore,t,this._path)}}function z_(e,t,...n){if(e=En(e),Cm("collection","path",t),e instanceof La){const r=_t.fromString(t,...n);return fd(r),new Bn(e,null,r)}{if(!(e instanceof xt||e instanceof Bn))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_t.fromString(t,...n));return fd(r),new Bn(e.firestore,null,r)}}function kC(e,t,...n){if(e=En(e),arguments.length===1&&(t=uc.newId()),Cm("doc","path",t),e instanceof La){const r=_t.fromString(t,...n);return hd(r),new xt(e,null,new G(r))}{if(!(e instanceof xt||e instanceof Bn))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_t.fromString(t,...n));return hd(r),new xt(e.firestore,e instanceof Bn?e.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="AsyncQueue";class ep{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new w_(this,"async_queue_retry"),this.oc=()=>{const r=bu();r&&z(tp,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new yn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!gi(t))throw t;z(tp,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const n=this._c.then(()=>(this.nc=!0,t().catch(r=>{throw this.tc=r,this.nc=!1,An("INTERNAL UNHANDLED ERROR: ",np(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const i=Sc.createAndSchedule(this,t,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&W(47125,{hc:np(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function np(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Vs extends La{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new ep,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ep(t),this._firestoreClient=void 0,await t}}}function OC(e,t){const n=typeof e=="object"?e:bR(),r=typeof e=="string"?e:ta,i=ER(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=cI("firestore");s&&DC(i,...s)}return i}function Nc(e){if(e._terminated)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||MC(e),e._firestoreClient}function MC(e){var t,n,r;const i=e._freezeSettings(),s=function(u,l,c,h){return new ob(u,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,q_(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new CC(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(u){const l=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Re(Qt.fromBase64String(t))}catch(n){throw new q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Re(Qt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Re._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(bs(t,Re._jsonSchema))return Re.fromBase64String(t.bytes)}}Re._jsonSchemaVersion="firestore/bytes/1.0",Re._jsonSchema={type:kt("string",Re._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return et(this._lat,t._lat)||et(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Je._jsonSchemaVersion}}static fromJSON(t){if(bs(t,Je._jsonSchema))return new Je(t.latitude,t.longitude)}}Je._jsonSchemaVersion="firestore/geoPoint/1.0",Je._jsonSchema={type:kt("string",Je._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ye._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(bs(t,Ye._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Ye(t.vectorValues);throw new q(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ye._jsonSchemaVersion="firestore/vectorValue/1.0",Ye._jsonSchema={type:kt("string",Ye._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=/^__.*__$/;class FC{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Yn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ss(t,this.data,n,this.fieldTransforms)}}class H_{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Yn(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function G_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:e})}}class kc{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new kc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.fc(t),i}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return ca(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(G_(this.Ec)&&LC.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class UC{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ka(t)}Dc(t,n,r,i=!1){return new kc({Ec:t,methodName:n,bc:r,path:Kt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oc(e){const t=e._freezeSettings(),n=ka(e._databaseId);return new UC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function BC(e,t,n,r,i,s={}){const o=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);Mc("Data must be an object, but it was:",o,r);const u=W_(r,o);let l,c;if(s.merge)l=new we(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Pl(t,d,n);if(!o.contains(p))throw new q(O.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Q_(h,p)||h.push(p)}l=new we(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new FC(new fe(u),l,c)}class Ua extends Dc{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ua}}function $C(e,t,n,r){const i=e.Dc(1,t,n);Mc("Data must be an object, but it was:",i,r);const s=[],o=fe.empty();Jn(r,(l,c)=>{const h=Lc(t,l,n);c=En(c);const d=i.gc(h);if(c instanceof Ua)s.push(h);else{const p=Ns(c,d);p!=null&&(s.push(h),o.set(h,p))}});const u=new we(s);return new H_(o,u,i.fieldTransforms)}function qC(e,t,n,r,i,s){const o=e.Dc(1,t,n),u=[Pl(t,r,n)],l=[i];if(s.length%2!=0)throw new q(O.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)u.push(Pl(t,s[p])),l.push(s[p+1]);const c=[],h=fe.empty();for(let p=u.length-1;p>=0;--p)if(!Q_(c,u[p])){const m=u[p];let _=l[p];_=En(_);const E=o.gc(m);if(_ instanceof Ua)c.push(m);else{const v=Ns(_,E);v!=null&&(c.push(m),h.set(m,v))}}const d=new we(c);return new H_(h,d,o.fieldTransforms)}function jC(e,t,n,r=!1){return Ns(n,e.Dc(r?4:3,t))}function Ns(e,t){if(K_(e=En(e)))return Mc("Unsupported field value:",t,e),W_(e,t);if(e instanceof Dc)return function(r,i){if(!G_(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const u of r){let l=Ns(u,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=En(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Pb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=vt.fromDate(r);return{timestampValue:oa(i.serializer,s)}}if(r instanceof vt){const s=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oa(i.serializer,s)}}if(r instanceof Je)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Re)return{bytesValue:l_(i.serializer,r._byteString)};if(r instanceof xt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yc(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ye)return function(o,u){return{mapValue:{fields:{[Lm]:{stringValue:Fm},[ea]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.wc("VectorValues must only contain numeric values.");return gc(u.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Ra(r)}`)}(e,t)}function W_(e,t){const n={};return Vm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jn(e,(r,i)=>{const s=Ns(i,t.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function K_(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof vt||e instanceof Je||e instanceof Re||e instanceof xt||e instanceof Dc||e instanceof Ye)}function Mc(e,t,n){if(!K_(n)||!Pm(n)){const r=Ra(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Pl(e,t,n){if((t=En(t))instanceof Fa)return t._internalPath;if(typeof t=="string")return Lc(e,t);throw ca("Field path arguments must be of type string or ",e,!1,void 0,n)}const zC=new RegExp("[~\\*/\\[\\]]");function Lc(e,t,n){if(t.search(zC)>=0)throw ca(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Fa(...t.split("."))._internalPath}catch{throw ca(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ca(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${t}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new q(O.INVALID_ARGUMENT,u+e+l)}function Q_(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new HC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Fc("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HC extends X_{data(){return super.data()}}function Fc(e,t){return typeof t=="string"?Lc(e,t):t instanceof Fa?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new q(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uc{}class Bc extends Uc{}function WC(e,t,...n){let r=[];t instanceof Uc&&r.push(t),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof qc).length,u=s.filter(l=>l instanceof $c).length;if(o>1||o>0&&u>0)throw new q(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class $c extends Bc{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new $c(t,n,r)}_apply(t){const n=this._parse(t);return J_(t._query,n),new Zn(t.firestore,t.converter,vl(t._query,n))}_parse(t){const n=Oc(t.firestore);return function(s,o,u,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ip(d,h);const _=[];for(const E of d)_.push(rp(l,s,E));p={arrayValue:{values:_}}}else p=rp(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ip(d,h),p=jC(u,o,d,h==="in"||h==="not-in");return Dt.create(c,h,p)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class qc extends Uc{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new qc(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ke.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const u=s.getFlattenedFilters();for(const l of u)J_(o,l),o=vl(o,l)}(t._query,n),new Zn(t.firestore,t.converter,vl(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jc extends Bc{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new jc(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ys(s,o)}(t._query,this._field,this._direction);return new Zn(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new mi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function KC(e,t="asc"){const n=t,r=Fc("orderBy",e);return jc._create(r,n)}class zc extends Bc{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new zc(t,n,r)}_apply(t){return new Zn(t.firestore,t.converter,ra(t._query,this._limit,this._limitType))}}function QC(e){return QR("limit",e),zc._create("limit",e,"F")}function rp(e,t,n){if(typeof(n=En(n))=="string"){if(n==="")throw new q(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gm(t)&&n.indexOf("/")!==-1)throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(_t.fromString(n));if(!G.isDocumentKey(r))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wd(e,new G(r))}if(n instanceof xt)return wd(e,n._key);throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ra(n)}.`)}function ip(e,t){if(!Array.isArray(e)||e.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function J_(e,t){const n=function(i,s){for(const o of i)for(const u of o.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class XC{convertValue(t,n="none"){switch(Wn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return St(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Gn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw W(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Jn(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n[ea].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>St(o.doubleValue));return new Ye(s)}convertGeoPoint(t){return new Je(St(t.latitude),St(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ca(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gs(t));default:return null}}convertTimestamp(t){const n=Hn(t);return new vt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=_t.fromString(t);ct(g_(r),9688,{name:t});const i=new ms(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||An(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class Ki{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class mr extends X_{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new To(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Fc("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",mr._jsonSchema={type:kt("string",mr._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class To extends mr{data(t={}){return super.data(t)}}class Xr{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ki(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new To(this._firestore,this._userDataWriter,r.key,r,new Ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{const l=new To(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ki(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const l=new To(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ki(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return u.type!==0&&(c=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),h=o.indexOf(u.doc.key)),{type:YC(u.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Xr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=uc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function YC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(e){e=In(e,xt);const t=In(e.firestore,Vs);return VC(Nc(t),e._key).then(n=>nP(t,e,n))}Xr._jsonSchemaVersion="firestore/querySnapshot/1.0",Xr._jsonSchema={type:kt("string",Xr._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class Y_ extends XC{constructor(t){super(),this.firestore=t}convertBytes(t){return new Re(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Z_(e){e=In(e,Zn);const t=In(e.firestore,Vs),n=Nc(t),r=new Y_(t);return GC(e._query),NC(n,e._query).then(i=>new Xr(t,r,e,i))}function tP(e,t,n){e=In(e,xt);const r=In(e.firestore,Vs),i=JC(e.converter,t);return ty(r,[BC(Oc(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Qe.none())])}function eP(e,t,n,...r){e=In(e,xt);const i=In(e.firestore,Vs),s=Oc(i);let o;return o=typeof(t=En(t))=="string"||t instanceof Fa?qC(s,"updateDoc",e._key,t,n,r):$C(s,"updateDoc",e._key,t),ty(i,[o.toMutation(e._key,Qe.exists(!0))])}function ty(e,t){return function(r,i){const s=new yn;return r.asyncQueue.enqueueAndForget(async()=>vC(await xC(r),i,s)),s.promise}(Nc(e),t)}function nP(e,t,n){const r=n.docs.get(t._key),i=new Y_(e);return new mr(e,i,t._key,r,new Ki(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){di=i})(RR),Yo(new fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),u=new Vs(new $R(r.getProvider("auth-internal")),new zR(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ms(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Kr(od,ad,t),Kr(od,ad,"esm2017")})();const rP={apiKey:"AIzaSyAZsdXZU6WbM33SaKP5PoYm7G0V2ABYUSU",authDomain:"great-wave-everywhere.firebaseapp.com",projectId:"great-wave-everywhere",storageBucket:"great-wave-everywhere.firebasestorage.app",messagingSenderId:"636756607685",appId:"1:636756607685:web:2199075bc12821f89466ac",measurementId:"G-XRVYGKFWJ8"},iP=mm(rP),Hc=OC(iP);async function sP(e){const t=kC(Hc,"words",e.toLowerCase()),n=await ZC(t);n.exists()?await eP(t,{count:n.data().count+1}):await tP(t,{count:1})}async function sp(){return(await Z_(z_(Hc,"words"))).docs.map(t=>({id:t.id,count:t.data().count}))}async function op(e=5){const t=WC(z_(Hc,"words"),KC("count","desc"),QC(e));return(await Z_(t)).docs.map(r=>({id:r.id,count:r.data().count}))}var oP=Xn('<div class="loading-indicator svelte-1gclzjt">Loading...</div>'),aP=Xn('<img alt="Header image"/>'),uP=(e,t)=>{e.key==="Enter"&&t()},lP=Xn('<span style="color: #377293; font-weight: bold; font-size: 0.95rem;"> </span>'),cP=Es('<path fill="#ADC2CE" stroke="#377293" stroke-width="0.5"></path>'),hP=(e,t,n,r)=>{tt(t,U(n).domain,!0),tt(r,U(n).domain||"Unknown domain",!0)},fP=(e,t,n)=>{tt(t,null),tt(n,"")},dP=Es('<g class="location-pin svelte-1gclzjt"><circle class="pin svelte-1gclzjt" style="pointer-events: none;"></circle></g>'),pP=Es('<svg width="200" height="125" viewBox="0 0 200 125" class="world-map svelte-1gclzjt"><!><!></svg>'),gP=(e,t,n,r,i,s)=>{const o=t(U(n).image.link);tt(r,o,!0);const u=U(i).find(l=>l.domain===o);tt(s,u?u.domain||"Unknown domain":o||"Unknown domain",!0)},mP=(e,t,n)=>{tt(t,null),tt(n,"")},_P=Xn('<div class="image-with-title svelte-1gclzjt"><a target="_blank" rel="noopener noreferrer"><img class="svelte-1gclzjt"/></a> <div class="image-title-box svelte-1gclzjt"> </div></div>'),yP=Xn('<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;"><span style="color: #377293; font-weight: bold; font-size: 0.95rem;">Hover for image server locations:</span> <!></div> <div class="image-container grid-3x3 svelte-1gclzjt" style="width: 100%; max-width: 900px; margin: 0 auto;"><div class="image-with-title svelte-1gclzjt" style="display: flex; flex-direction: column; justify-content: flex-start; align-items: center; height: 100%;"><!></div> <!></div>',1),vP=Xn(`<div class="no-images-placeholder svelte-1gclzjt"><p class="svelte-1gclzjt">Enter a search term above to query Google Images for "Great Wave off
            Kanagawa + [your search term]." Your search results will appear
            here.</p></div>`),wP=Es('<line stroke="#fff" stroke-opacity="0.6" stroke-width="2" class="svelte-1gclzjt"></line>'),EP=(e,t,n)=>t(U(n).id),TP=Es('<text text-anchor="middle" alignment-baseline="middle" filter="url(#dropshadow)" style="cursor: pointer;" class="svelte-1gclzjt"> </text>'),AP=(e,t,n)=>t(U(n).id),IP=Xn('<li style="cursor:pointer;" class="svelte-1gclzjt"> <span class="count svelte-1gclzjt"> </span></li>'),RP=Xn(`<main class="svelte-1gclzjt"><!>  <div class="header svelte-1gclzjt"><div class="header-image-crossfade svelte-1gclzjt"></div> <div><div class="title svelte-1gclzjt">GREAT WAVE <span style="color: #F0BF91;">REMIX</span></div> <p class="subtitle svelte-1gclzjt">Discover Hokusai's "Great Wave off Kanagawa" in unexpected contexts
        worldwide. Search Google Images for any term you associate with this
        iconic Japanese artwork to see how it has been reimagined in formats
        spanning diverse topics and cultures.</p></div></div> <div class="header-piping svelte-1gclzjt"></div> <h1 style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;" class="svelte-1gclzjt">HOKUSAI'S <em class="italic svelte-1gclzjt">GREAT WAVE</em> CAN BE <span style="display: flex; align-items: center; gap: 0.5rem;"><input type="text" placeholder="ANYTHING" style="margin-left: 0.5rem;" class="svelte-1gclzjt"/> <button class="svelte-1gclzjt">Search</button></span></h1> <div class="search-container search-container-below-h1 svelte-1gclzjt"><div class="call-to-action svelte-1gclzjt">No images yet â enter a search term above! <br/> (First search may take several
      seconds while the server wakes.)</div></div> <div class="main-grid svelte-1gclzjt"><div class="left-column svelte-1gclzjt"><!> <!></div> <div class="right-column svelte-1gclzjt"><div class="word-cloud-container svelte-1gclzjt"><div class="call-to-action svelte-1gclzjt">Or click on a trending topic!</div> <svg width="120%" height="400" viewBox="0 0 480 400" class="svelte-1gclzjt"><defs><filter id="dropshadow" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="1" dy="1" stdDeviation="1" flood-opacity="0.3"></feDropShadow></filter></defs><g style="transform: translate(0, -100px)"><!><!></g></svg> <div class="trending-panel svelte-1gclzjt"><ul class="svelte-1gclzjt"></ul></div></div></div></div> <div style="text-align: left; color: #377293; padding-top: 5rem;"><h2 class="svelte-1gclzjt">Why remix the "Great Wave?"</h2> This project explores the impact of Hokusai's iconic artwork, allowing users
    to see for themselves how it continues to reverberate worldwide. Two centuries
    since its creation around 1831, scholars say Hokusaiâs print is possibly the
    most reproduced image in the history of art, with global recognition far beyond
    its original Japanese audience.</div> <div class="bottom-panel"><div class="chart-container svelte-1gclzjt"><div><p class="svelte-1gclzjt">The exponential-like rise in frequency of the phrase âGreat Wave off
          Kanagawaâ in millions of Google Books shows references to the artwork
          appearing more frequently over time, reflecting Japan's rise as a
          cultural superpower.</p> <p class="svelte-1gclzjt">The print helped spark Japonisme in the West (influencing Monet, van
          Gogh, and others), and that early cultural exchange laid the
          foundation for global fame. European artists and critics rediscovered
          Japanese woodblocks after Japan opened to trade in the 19th century,
          elevating Hokusaiâs work in Western art circles.</p> <p class="svelte-1gclzjt">"Great Wave" now appears everywhere â from high fashion and novelty
          goods to digital art, emojis, and even LEGO sets. It was chosen for
          the 2024 Japanese 1,000-yen note â a highly public national symbol.</p></div> <div><p class="chart-title svelte-1gclzjt">Mentions of "Great Wave off Kanagawa" over time</p> <img src="/ngram_chart_great_wave_off_kanagawa.png" alt="Google Ngram Viewer chart for 'Great Wave off Kanagawa'" class="ngram-chart svelte-1gclzjt"/> <p class="source svelte-1gclzjt">Source: Google Books Ngram Viewer, English corpus, 1900â2022</p></div></div></div></main>`);function bP(e,t){_p(t,!0);let n=Ot(0),r;const i=["/main-image.jpeg","/Hokusai-Great_Wave_off_Kanagawa-cat-end.jpg","/tomoko_nagao_hokusai-the_great_wave_of_kanagawa_with_mc_cupnoodle_kewpie_kikkoman_and_kitty_2012_digital_art_50_x_70_cm-_70_x_100_cm.jpe_3.jpg","/135e9cb8ff232a9c7e1f1be108eb670f.jpg","/2372ef58832305.5a0b25df284b7.jpg.webp","/image_BT0qjFvT31.png.jpeg"];Nu(()=>{r=setInterval(()=>{tt(n,(U(n)+1)%i.length)},5e3)}),Fv(()=>{clearInterval(r)});async function s(H){if(H){tt(m,!0);try{const j=await wt.get(`https://great-wave-api-1muq.onrender.com/api/images/multilang?q=${encodeURIComponent(H)}`);tt(l,j.data.filter(ft=>ft.image&&ft.image.link),!0);const K=U(l).map(ft=>ft.image.link).filter(Boolean);let rt=[];if(K.length>0)try{rt=(await wt.post("https://great-wave-api-1muq.onrender.com/api/geolocate",{urls:K})).data}catch{}tt(_,rt.filter(ft=>{if(ft==null)return!1;const Tt=Number(ft.lat),$t=Number(ft.lng);return!(isNaN(Tt)||isNaN($t)||Tt===0&&$t===0)}),!0),tt(c,"")}catch(j){console.error("Error fetching images for word",j)}finally{tt(m,!1)}}}function o(H){if(!H)return null;try{const j=H.startsWith("http")?H:`https://${H}`;return new URL(j).hostname}catch{return H}}let u=Ot(null),l=Ot(qe([])),c=Ot(""),h=Ot(qe([])),d=Ot(qe([])),p=Ot(qe([])),m=Ot(!1),_=Ot(qe([])),E=Ot(null),v=Ot("");async function P(){try{const H=await fetch("/ne_110m_admin_0_countries.json");if(!H.ok)throw new Error(`HTTP ${H.status}: ${H.statusText}`);const j=await H.json(),K=Object.keys(j.objects)[0];tt(E,Gf(j,j.objects[K]),!0)}catch{try{const j=await fetch("/ne_110m_admin_0_countries.json");if(j.ok){const K=await j.json(),rt=Object.keys(K.objects)[0];tt(E,Gf(K,K.objects[rt]),!0)}}catch{}}}Nu(async()=>{tt(m,!0);try{try{tt(h,await sp(),!0),tt(p,await op(5),!0),N(),x()}catch(H){console.warn("Firebase connection failed:",H),tt(h,[],!0),tt(p,[],!0)}await P()}finally{tt(m,!1)}});async function S(){if(U(c)){tt(m,!0);try{const H=await wt.get(`https://great-wave-api-1muq.onrender.com/api/images/multilang?q=${encodeURIComponent(U(c))}`);tt(l,H.data.filter(rt=>rt.image&&rt.image.link),!0);const j=U(l).map(rt=>rt.image.link).filter(Boolean);let K=[];if(j.length>0)try{K=(await wt.post("https://great-wave-api-1muq.onrender.com/api/geolocate",{urls:j})).data}catch{}tt(_,K.filter(rt=>{if(rt==null)return!1;const ft=Number(rt.lat),Tt=Number(rt.lng);return!(isNaN(ft)||isNaN(Tt)||ft===0&&Tt===0)}),!0);try{await sP(U(c)),tt(h,await sp(),!0),tt(p,await op(5),!0),N(),x()}catch(rt){console.warn("Firebase update failed:",rt)}tt(c,"")}catch(H){console.error("Error fetching images",H)}finally{tt(m,!1)}}}function N(){tt(d,[],!0);for(let H=1;H<U(h).length;H++)U(d).push({source:U(h)[H-1].id,target:U(h)[H].id})}function x(){const H=Math.max(...U(h).map(j=>j.count));lA(U(h)).force("link",eA(U(d)).id(j=>j.id).distance(25)).force("charge",cA().strength(-100)).force("center",L1(200,300)).force("gravity",hA(j=>150*(1-j.count/H),200,300).strength(.5)).force("boundary",()=>{U(h).forEach(j=>{j.x=Math.max(20,Math.min(380,j.x||0)),j.y=Math.max(20,Math.min(580,j.y||0))})}).on("tick",()=>{tt(h,[...U(h)],!0)})}function M(H){return U(h).find(j=>j.id===H)}function B(H){const j=M(H.source),K=M(H.target);return{x1:(j==null?void 0:j.x)||0,y1:(j==null?void 0:j.y)||0,x2:(K==null?void 0:K.x)||0,y2:(K==null?void 0:K.y)||0}}var I=RP(),w=It(I);{var T=H=>{var j=oP();Ht(H,j)};hn(w,H=>{U(m)&&H(T)})}var b=zt(w,2),R=It(b);ur(R,21,()=>i,Lr,(H,j,K)=>{var rt=aP();let ft;Nn(Tt=>{Gt(rt,"src",U(j)),ft=Nv(rt,1,"svelte-1gclzjt",null,ft,Tt)},[()=>({visible:U(n)===K,hidden:U(n)!==K})]),Ht(H,rt)});var C=zt(b,4),A=zt(It(C),3),X=It(A);X.__keydown=[uP,S];var F=zt(X,2);F.__click=S;var Y=zt(C,4),lt=It(Y),mt=It(lt);{var Lt=H=>{var j=yP(),K=Ni(j),rt=zt(It(K),2);{var ft=qt=>{var Xt=lP(),sn=It(Xt);Nn(()=>Di(sn,U(v))),Ht(qt,Xt)};hn(rt,qt=>{U(v)&&qt(ft)})}var Tt=zt(K,2),$t=It(Tt),tr=It($t);{var le=qt=>{var Xt=pP();const sn=Vn(()=>QA().scale(40).translate([100,62.5])),on=Vn(()=>LA().projection(U(sn)));var Te=It(Xt);ur(Te,17,()=>U(E).features,Lr,(At,an)=>{var er=Qs();const nr=Vn(()=>U(on)(U(an)));var un=Ni(er);{var Fe=Ue=>{var rr=cP();Nn(()=>Gt(rr,"d",U(nr))),Ht(Ue,rr)};hn(un,Ue=>{U(nr)&&Ue(Fe)})}Ht(At,er)});var xr=zt(Te);{var Vt=At=>{var an=Qs(),er=Ni(an);ur(er,17,()=>U(_),Lr,(nr,un)=>{var Fe=Qs();const Ue=Vn(()=>U(sn)([U(un).lng,U(un).lat]));var rr=Ni(Fe);{var yi=vi=>{var Vr=dP();Vr.__mouseover=[hP,u,un,v],Vr.__mouseout=[fP,u,v];var Sn=It(Vr);Nn(()=>{Gt(Sn,"cx",U(Ue)[0]),Gt(Sn,"cy",U(Ue)[1]),Gt(Sn,"r",U(u)===U(un).domain?7:4),Gt(Sn,"fill",U(u)===U(un).domain?"#ff4500":"#ff6b35")}),Ht(vi,Vr)};hn(rr,vi=>{U(Ue)&&vi(yi)})}Ht(nr,Fe)}),Ht(At,an)};hn(xr,At=>{U(_).length>0&&At(Vt)})}Ht(qt,Xt)};hn(tr,qt=>{U(l).length>0&&U(E)&&qt(le)})}var Pr=zt($t,2);ur(Pr,19,()=>U(l).slice(0,8),(qt,Xt)=>`${qt.image.link||"no-link"}-${Xt}`,(qt,Xt)=>{var sn=_P(),on=It(sn),Te=It(on);Te.__mouseover=[gP,o,Xt,u,_,v],Te.__mouseout=[mP,u,v];var xr=zt(on,2),Vt=It(xr);Nn(()=>{Gt(on,"href",U(Xt).image.link),Gt(Te,"src",U(Xt).image.link),Gt(Te,"alt",U(Xt).image.title),Di(Vt,U(Xt).image.title)}),Ev("error",Te,At=>{At.target.src=""}),Ht(qt,sn)}),Ht(H,j)};hn(mt,H=>{U(l).length>0&&H(Lt)})}var Le=zt(mt,2);{var me=H=>{var j=vP();Ht(H,j)};hn(Le,H=>{U(l).length===0&&H(me)})}var Ft=zt(lt,2),ht=It(Ft),rn=zt(It(ht),2),ue=zt(It(rn)),Ds=It(ue);ur(Ds,17,()=>U(d),Lr,(H,j)=>{var K=Qs(),rt=Ni(K);{var ft=Tt=>{var $t=wP();Nn((tr,le,Pr,qt)=>{Gt($t,"x1",tr),Gt($t,"y1",le),Gt($t,"x2",Pr),Gt($t,"y2",qt)},[()=>B(U(j)).x1,()=>B(U(j)).y1,()=>B(U(j)).x2,()=>B(U(j)).y2]),Ht(Tt,$t)};hn(rt,Tt=>{M(U(j).source)&&M(U(j).target)&&Tt(ft)})}Ht(H,K)});var Cr=zt(Ds);ur(Cr,17,()=>U(h),Lr,(H,j)=>{var K=TP();const rt=Vn(()=>Math.min(...U(h).map(le=>le.count))),ft=Vn(()=>Math.max(...U(h).map(le=>le.count))),Tt=Vn(()=>(U(j).count-U(rt))/Math.max(1,U(ft)-U(rt))),$t=Vn(()=>U(Tt)<.7?vf("#ADC2CE","#377293")(U(Tt)/.7):vf("#377293","#ff6b35")((U(Tt)-.7)/.3));K.__click=[EP,s,j],K.__mouseover=le=>{le.target.style.fill="#ff6b35",le.target.style.cursor="pointer"},K.__mouseout=le=>{le.target.style.fill=U($t)};var tr=It(K);Nn(()=>{Gt(K,"x",U(j).x),Gt(K,"y",U(j).y),Gt(K,"font-size",`${8+U(j).count}px`),Gt(K,"fill",U($t)),Di(tr,U(j).id)}),Ht(H,K)});var Ba=zt(rn,2),$a=It(Ba);ur($a,21,()=>U(p),Lr,(H,j)=>{var K=IP();K.__click=[AP,s,j];var rt=It(K),ft=zt(rt),Tt=It(ft);Nn(()=>{Di(rt,`${U(j).id??""} `),Di(Tt,`(${U(j).count??""})`)}),Ht(H,K)}),Lv(X,()=>U(c),H=>tt(c,H)),Ht(e,I),yp()}Tv(["keydown","click","mouseover","mouseout"]);Iv(bP,{target:document.getElementById("app")});

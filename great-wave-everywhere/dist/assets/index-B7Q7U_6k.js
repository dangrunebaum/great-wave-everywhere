(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const oc=!1;var za=Array.isArray,dg=Array.prototype.indexOf,Ha=Array.from,pg=Object.defineProperty,Or=Object.getOwnPropertyDescriptor,cf=Object.getOwnPropertyDescriptors,mg=Object.prototype,gg=Array.prototype,Ga=Object.getPrototypeOf,ac=Object.isExtensible;function _g(e){return e()}function ra(e){for(var t=0;t<e.length;t++)e[t]()}const Jt=2,hf=4,Bs=8,Wa=16,Le=32,Jn=64,Ka=128,Wt=256,ls=512,Yt=1024,Pe=2048,Sn=4096,Ce=8192,Qa=16384,ff=32768,Xa=65536,uc=1<<17,yg=1<<18,df=1<<19,ia=1<<20,Mr=Symbol("$state"),vg=Symbol(""),pf=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function mf(e){return e===this.v}function wg(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function gf(e){return!wg(e,this.v)}function Eg(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Tg(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ag(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ig(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bg(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Rg(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Sg(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let oi=!1,Cg=!1;function xg(){oi=!0}const Ja=1,Ya=2,_f=4,Pg=8,Vg=16,Ng=2,Ft=Symbol(),Dg="http://www.w3.org/1999/xhtml";function kg(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let lt=null;function lc(e){lt=e}function yf(e,t=!1,n){var r=lt={p:lt,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};oi&&!t&&(lt.l={s:null,u:null,r1:[],r2:jr(!1)}),xf(()=>{r.d=!0})}function vf(e){const t=lt;if(t!==null){const a=t.e;if(a!==null){var n=et,r=Z;t.e=null;try{for(var i=0;i<a.length;i++){var s=a[i];Ye(s.effect),_e(s.reaction),Pf(s.fn)}}finally{Ye(n),_e(r)}}lt=t.p,t.m=!0}return{}}function ai(){return!oi||lt!==null&&lt.l===null}function Rr(e){if(typeof e!="object"||e===null||Mr in e)return e;const t=Ga(e);if(t!==mg&&t!==gg)return e;var n=new Map,r=za(e),i=qe(0),s=Z,a=u=>{var l=Z;_e(s);var c=u();return _e(l),c};return r&&n.set("length",qe(e.length)),new Proxy(e,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&bg();var f=n.get(l);return f===void 0?f=a(()=>{var m=qe(c.value);return n.set(l,m),m}):ct(f,c.value,!0),!0},deleteProperty(u,l){var c=n.get(l);if(c===void 0){if(l in u){const p=a(()=>qe(Ft));n.set(l,p),Uo(i)}}else{if(r&&typeof l=="string"){var f=n.get("length"),m=Number(l);Number.isInteger(m)&&m<f.v&&ct(f,m)}ct(c,Ft),Uo(i)}return!0},get(u,l,c){if(l===Mr)return e;var f=n.get(l),m=l in u;if(f===void 0&&(!m||Or(u,l)?.writable)&&(f=a(()=>{var _=Rr(m?u[l]:Ft),v=qe(_);return v}),n.set(l,f)),f!==void 0){var p=H(f);return p===Ft?void 0:p}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=H(f))}else if(c===void 0){var m=n.get(l),p=m?.v;if(m!==void 0&&p!==Ft)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(u,l){if(l===Mr)return!0;var c=n.get(l),f=c!==void 0&&c.v!==Ft||Reflect.has(u,l);if(c!==void 0||et!==null&&(!f||Or(u,l)?.writable)){c===void 0&&(c=a(()=>{var p=f?Rr(u[l]):Ft,_=qe(p);return _}),n.set(l,c));var m=H(c);if(m===Ft)return!1}return f},set(u,l,c,f){var m=n.get(l),p=l in u;if(r&&l==="length")for(var _=c;_<m.v;_+=1){var v=n.get(_+"");v!==void 0?ct(v,Ft):_ in u&&(v=a(()=>qe(Ft)),n.set(_+"",v))}if(m===void 0)(!p||Or(u,l)?.writable)&&(m=a(()=>qe(void 0)),ct(m,Rr(c)),n.set(l,m));else{p=m.v!==Ft;var A=a(()=>Rr(c));ct(m,A)}var E=Reflect.getOwnPropertyDescriptor(u,l);if(E?.set&&E.set.call(f,c),!p){if(r&&typeof l=="string"){var x=n.get("length"),V=Number(l);Number.isInteger(V)&&V>=x.v&&ct(x,V+1)}Uo(i)}return!0},ownKeys(u){H(i);var l=Reflect.ownKeys(u).filter(m=>{var p=n.get(m);return p===void 0||p.v!==Ft});for(var[c,f]of n)f.v!==Ft&&!(c in u)&&l.push(c);return l},setPrototypeOf(){Rg()}})}function Uo(e,t=1){ct(e,e.v+t)}function Za(e){var t=Jt|Pe,n=Z!==null&&(Z.f&Jt)!==0?Z:null;return et===null||n!==null&&(n.f&Wt)!==0?t|=Wt:et.f|=df,{ctx:lt,deps:null,effects:null,equals:mf,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??et,ac:null}}function wf(e){const t=Za(e);return t.equals=gf,t}function Ef(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Je(t[n])}}function Og(e){for(var t=e.parent;t!==null;){if((t.f&Jt)===0)return t;t=t.parent}return null}function Tf(e){var t,n=et;Ye(Og(e));try{Ef(e),t=$f(e)}finally{Ye(n)}return t}function Af(e){var t=Tf(e);if(e.equals(t)||(e.v=t,e.wv=Bf()),!Zn){var n=(He||(e.f&Wt)!==0)&&e.deps!==null?Sn:Yt;ye(e,n)}}const $r=new Map;function jr(e,t){var n={f:0,v:e,reactions:null,equals:mf,rv:0,wv:0};return n}function qe(e,t){const n=jr(e);return Wg(n),n}function pn(e,t=!1,n=!0){const r=jr(e);return t||(r.equals=gf),oi&&n&&lt!==null&&lt.l!==null&&(lt.l.s??=[]).push(r),r}function ct(e,t,n=!1){Z!==null&&(!ce||(Z.f&uc)!==0)&&ai()&&(Z.f&(Jt|Wa|uc))!==0&&!(Xt?.[1].includes(e)&&Xt[0]===Z)&&Sg();let r=n?Rr(t):t;return sa(e,r)}function sa(e,t){if(!e.equals(t)){var n=e.v;Zn?$r.set(e,t):$r.set(e,n),e.v=t,(e.f&Jt)!==0&&((e.f&Pe)!==0&&Tf(e),ye(e,(e.f&Wt)===0?Yt:Sn)),e.wv=Bf(),If(e,Pe),ai()&&et!==null&&(et.f&Yt)!==0&&(et.f&(Le|Jn))===0&&(Kt===null?Kg([e]):Kt.push(e))}return t}function If(e,t){var n=e.reactions;if(n!==null)for(var r=ai(),i=n.length,s=0;s<i;s++){var a=n[s],u=a.f;(u&Pe)===0&&(!r&&a===et||(ye(a,t),(u&(Yt|Wt))!==0&&((u&Jt)!==0?If(a,Sn):iu(a))))}}let Mg=!1;var cc,bf,Rf,Sf;function Lg(){if(cc===void 0){cc=window,bf=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Rf=Or(t,"firstChild").get,Sf=Or(t,"nextSibling").get,ac(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ac(n)&&(n.__t=void 0)}}function tu(e=""){return document.createTextNode(e)}function zr(e){return Rf.call(e)}function qs(e){return Sf.call(e)}function Ie(e,t){return zr(e)}function Fg(e,t){{var n=zr(e);return n instanceof Comment&&n.data===""?qs(n):n}}function $e(e,t=1,n=!1){let r=e;for(;t--;)r=qs(r);return r}function Ug(e){e.textContent=""}function Cf(e){et===null&&Z===null&&Ag(),Z!==null&&(Z.f&Wt)!==0&&et===null&&Tg(),Zn&&Eg()}function Bg(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Yn(e,t,n,r=!0){var i=et,s={ctx:lt,deps:null,nodes_start:null,nodes_end:null,f:e|Pe,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ru(s),s.f|=ff}catch(l){throw Je(s),l}else t!==null&&iu(s);var a=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(df|Ka))===0;if(!a&&r&&(i!==null&&Bg(s,i),Z!==null&&(Z.f&Jt)!==0)){var u=Z;(u.effects??=[]).push(s)}return s}function xf(e){const t=Yn(Bs,null,!1);return ye(t,Yt),t.teardown=e,t}function oa(e){Cf();var t=et!==null&&(et.f&Le)!==0&&lt!==null&&!lt.m;if(t){var n=lt;(n.e??=[]).push({fn:e,effect:et,reaction:Z})}else{var r=Pf(e);return r}}function qg(e){return Cf(),Vf(e)}function $g(e){const t=Yn(Jn,e,!0);return(n={})=>new Promise(r=>{n.outro?cs(t,()=>{Je(t),r(void 0)}):(Je(t),r(void 0))})}function Pf(e){return Yn(hf,e,!1)}function Vf(e){return Yn(Bs,e,!0)}function Ui(e,t=[],n=Za){const r=t.map(n);return eu(()=>e(...r.map(H)))}function eu(e,t=0){var n=Yn(Bs|Wa|t,e,!0);return n}function Hr(e,t=!0){return Yn(Bs|Le,e,!0,t)}function Nf(e){var t=e.teardown;if(t!==null){const n=Zn,r=Z;hc(!0),_e(null);try{t.call(null)}finally{hc(n),_e(r)}}}function Df(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){n.ac?.abort(pf);var r=n.next;(n.f&Jn)!==0?n.parent=null:Je(n,t),n=r}}function jg(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Le)===0&&Je(t),t=n}}function Je(e,t=!0){var n=!1;(t||(e.f&yg)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(zg(e.nodes_start,e.nodes_end),n=!0),Df(e,t&&!n),ms(e,0),ye(e,Qa);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Nf(e);var i=e.parent;i!==null&&i.first!==null&&kf(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function zg(e,t){for(;e!==null;){var n=e===t?null:qs(e);e.remove(),e=n}}function kf(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function cs(e,t){var n=[];nu(e,n,!0),Of(n,()=>{Je(e),t&&t()})}function Of(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function nu(e,t,n){if((e.f&Ce)===0){if(e.f^=Ce,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Xa)!==0||(r.f&Le)!==0;nu(r,t,s?n:!1),r=i}}}function hs(e){Mf(e,!0)}function Mf(e,t){if((e.f&Ce)!==0){e.f^=Ce;for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Xa)!==0||(n.f&Le)!==0;Mf(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let fs=[];function Hg(){var e=fs;fs=[],ra(e)}function Lf(e){fs.length===0&&queueMicrotask(Hg),fs.push(e)}function Gg(e){var t=et;if((t.f&ff)===0){if((t.f&Ka)===0)throw e;t.fn(e)}else Ff(e,t)}function Ff(e,t){for(;t!==null;){if((t.f&Ka)!==0)try{t.b.error(e);return}catch{}t=t.parent}throw e}let aa=!1,ds=null,vn=!1,Zn=!1;function hc(e){Zn=e}let Xi=[];let Z=null,ce=!1;function _e(e){Z=e}let et=null;function Ye(e){et=e}let Xt=null;function Wg(e){Z!==null&&Z.f&ia&&(Xt===null?Xt=[Z,[e]]:Xt[1].push(e))}let kt=null,Ht=0,Kt=null;function Kg(e){Kt=e}let Uf=1,ps=0,He=!1;function Bf(){return++Uf}function $s(e){var t=e.f;if((t&Pe)!==0)return!0;if((t&Sn)!==0){var n=e.deps,r=(t&Wt)!==0;if(n!==null){var i,s,a=(t&ls)!==0,u=r&&et!==null&&!He,l=n.length;if(a||u){var c=e,f=c.parent;for(i=0;i<l;i++)s=n[i],(a||!s?.reactions?.includes(c))&&(s.reactions??=[]).push(c);a&&(c.f^=ls),u&&f!==null&&(f.f&Wt)===0&&(c.f^=Wt)}for(i=0;i<l;i++)if(s=n[i],$s(s)&&Af(s),s.wv>e.wv)return!0}(!r||et!==null&&!He)&&ye(e,Yt)}return!1}function qf(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];Xt?.[1].includes(e)&&Xt[0]===Z||((s.f&Jt)!==0?qf(s,t,!1):t===s&&(n?ye(s,Pe):(s.f&Yt)!==0&&ye(s,Sn),iu(s)))}}function $f(e){var t=kt,n=Ht,r=Kt,i=Z,s=He,a=Xt,u=lt,l=ce,c=e.f;kt=null,Ht=0,Kt=null,He=(c&Wt)!==0&&(ce||!vn||Z===null),Z=(c&(Le|Jn))===0?e:null,Xt=null,lc(e.ctx),ce=!1,ps++,e.f|=ia,e.ac!==null&&(e.ac.abort(pf),e.ac=null);try{var f=(0,e.fn)(),m=e.deps;if(kt!==null){var p;if(ms(e,Ht),m!==null&&Ht>0)for(m.length=Ht+kt.length,p=0;p<kt.length;p++)m[Ht+p]=kt[p];else e.deps=m=kt;if(!He||(c&Jt)!==0&&e.reactions!==null)for(p=Ht;p<m.length;p++)(m[p].reactions??=[]).push(e)}else m!==null&&Ht<m.length&&(ms(e,Ht),m.length=Ht);if(ai()&&Kt!==null&&!ce&&m!==null&&(e.f&(Jt|Sn|Pe))===0)for(p=0;p<Kt.length;p++)qf(Kt[p],e);return i!==null&&i!==e&&(ps++,Kt!==null&&(r===null?r=Kt:r.push(...Kt))),f}catch(_){Gg(_)}finally{kt=t,Ht=n,Kt=r,Z=i,He=s,Xt=a,lc(u),ce=l,e.f^=ia}}function Qg(e,t){let n=t.reactions;if(n!==null){var r=dg.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&Jt)!==0&&(kt===null||!kt.includes(t))&&(ye(t,Sn),(t.f&(Wt|ls))===0&&(t.f^=ls),Ef(t),ms(t,0))}function ms(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Qg(e,n[r])}function ru(e){var t=e.f;if((t&Qa)===0){ye(e,Yt);var n=et,r=vn;et=e,vn=!0;try{(t&Wa)!==0?jg(e):Df(e),Nf(e);var i=$f(e);e.teardown=typeof i=="function"?i:null,e.wv=Uf;var s;oc&&Cg&&(e.f&Pe)!==0&&e.deps}finally{vn=r,et=n}}}function Xg(){try{Ig()}catch(e){if(ds!==null)Ff(e,ds);else throw e}}function Jg(){var e=vn;try{var t=0;for(vn=!0;Xi.length>0;){t++>1e3&&Xg();var n=Xi,r=n.length;Xi=[];for(var i=0;i<r;i++){var s=Zg(n[i]);Yg(s)}$r.clear()}}finally{aa=!1,vn=e,ds=null}}function Yg(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];(r.f&(Qa|Ce))===0&&$s(r)&&(ru(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?kf(r):r.fn=null))}}function iu(e){aa||(aa=!0,queueMicrotask(Jg));for(var t=ds=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(Jn|Le))!==0){if((n&Yt)===0)return;t.f^=Yt}}Xi.push(t)}function Zg(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(Le|Jn))!==0,s=i&&(r&Yt)!==0;if(!s&&(r&Ce)===0){(r&hf)!==0?t.push(n):i?n.f^=Yt:$s(n)&&ru(n);var a=n.first;if(a!==null){n=a;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}return t}function H(e){var t=e.f,n=(t&Jt)!==0;if(Z!==null&&!ce){if(!Xt?.[1].includes(e)||Xt[0]!==Z){var r=Z.deps;e.rv<ps&&(e.rv=ps,kt===null&&r!==null&&r[Ht]===e?Ht++:kt===null?kt=[e]:(!He||!kt.includes(e))&&kt.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&Wt)===0&&(i.f^=Wt)}return n&&(i=e,$s(i)&&Af(i)),Zn&&$r.has(e)?$r.get(e):e.v}function su(e){var t=ce;try{return ce=!0,e()}finally{ce=t}}const t_=-7169;function ye(e,t){e.f=e.f&t_|t}function e_(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Mr in e)ua(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Mr in n&&ua(n)}}}function ua(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{ua(e[r],t)}catch{}const n=Ga(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=cf(n);for(let i in r){const s=r[i].get;if(s)try{s.call(e)}catch{}}}}}const n_=["touchstart","touchmove"];function r_(e){return n_.includes(e)}let fc=!1;function i_(){fc||(fc=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function jf(e){var t=Z,n=et;_e(null),Ye(null);try{return e()}finally{_e(t),Ye(n)}}function s_(e,t,n,r=n){e.addEventListener(t,()=>jf(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),i_()}const o_=new Set,dc=new Set;function a_(e,t,n,r={}){function i(s){if(r.capture||Sr.call(t,s),!s.cancelBubble)return jf(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Lf(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function pc(e,t,n,r,i){var s={capture:r,passive:i},a=a_(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&xf(()=>{t.removeEventListener(e,a,s)})}function Sr(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],s=i[0]||e.target,a=0,u=e.__root;if(u){var l=i.indexOf(u);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(a=l)}if(s=i[a]||e.target,s!==t){pg(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=Z,m=et;_e(null),Ye(null);try{for(var p,_=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var A=s["__"+r];if(A!=null&&(!s.disabled||e.target===s))if(za(A)){var[E,...x]=A;E.apply(s,[e,...x])}else A.call(s,e)}catch(V){p?_.push(V):p=V}if(e.cancelBubble||v===t||v===null)break;s=v}if(p){for(let V of _)queueMicrotask(()=>{throw V});throw p}}finally{e.__root=t,delete e.currentTarget,_e(f),Ye(m)}}}function zf(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ou(e,t){var n=et;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function tr(e,t){var n=(t&Ng)!==0,r,i=!e.startsWith("<!>");return()=>{r===void 0&&(r=zf(i?e:"<!>"+e),r=zr(r));var s=n||bf?document.importNode(r,!0):r.cloneNode(!0);return ou(s,s),s}}function u_(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=zf(i),u=zr(a);s=zr(u)}var l=s.cloneNode(!0);return ou(l,l),l}}function Hf(e,t){return u_(e,t,"svg")}function l_(){var e=document.createDocumentFragment(),t=document.createComment(""),n=tu();return e.append(t,n),ou(t,n),e}function be(e,t){e!==null&&e.before(t)}function Bo(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function c_(e,t){return h_(e,t)}const kn=new Map;function h_(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:a=!0}){Lg();var u=new Set,l=m=>{for(var p=0;p<m.length;p++){var _=m[p];if(!u.has(_)){u.add(_);var v=r_(_);t.addEventListener(_,Sr,{passive:v});var A=kn.get(_);A===void 0?(document.addEventListener(_,Sr,{passive:v}),kn.set(_,1)):kn.set(_,A+1)}}};l(Ha(o_)),dc.add(l);var c=void 0,f=$g(()=>{var m=n??t.appendChild(tu());return Hr(()=>{if(s){yf({});var p=lt;p.c=s}i&&(r.$$events=i),c=e(m,r)||{},s&&vf()}),()=>{for(var p of u){t.removeEventListener(p,Sr);var _=kn.get(p);--_===0?(document.removeEventListener(p,Sr),kn.delete(p)):kn.set(p,_)}dc.delete(l),m!==n&&m.parentNode?.removeChild(m)}});return f_.set(c,f),c}let f_=new WeakMap;function qo(e,t,[n,r]=[0,0]){var i=e,s=null,a=null,u=Ft,l=n>0?Xa:0,c=!1;const f=(p,_=!0)=>{c=!0,m(_,p)},m=(p,_)=>{u!==(u=p)&&(u?(s?hs(s):_&&(s=Hr(()=>_(i))),a&&cs(a,()=>{a=null})):(a?hs(a):_&&(a=Hr(()=>_(i,[n+1,r]))),s&&cs(s,()=>{s=null})))};eu(()=>{c=!1,t(f),c||m(null,null)},l)}function Bi(e,t){return t}function d_(e,t,n,r){for(var i=[],s=t.length,a=0;a<s;a++)nu(t[a].e,i,!0);var u=s>0&&i.length===0&&n!==null;if(u){var l=n.parentNode;Ug(l),l.append(n),r.clear(),je(e,t[0].prev,t[s-1].next)}Of(i,()=>{for(var c=0;c<s;c++){var f=t[c];u||(r.delete(f.k),je(e,f.prev,f.next)),Je(f.e,!u)}})}function qi(e,t,n,r,i,s=null){var a=e,u={flags:t,items:new Map,first:null},l=(t&_f)!==0;if(l){var c=e;a=c.appendChild(tu())}var f=null,m=!1,p=wf(()=>{var _=n();return za(_)?_:_==null?[]:Ha(_)});eu(()=>{var _=H(p),v=_.length;m&&v===0||(m=v===0,p_(_,u,a,i,t,r,n),s!==null&&(v===0?f?hs(f):f=Hr(()=>s(a)):f!==null&&cs(f,()=>{f=null})),H(p))})}function p_(e,t,n,r,i,s,a){var u=(i&Pg)!==0,l=(i&(Ja|Ya))!==0,c=e.length,f=t.items,m=t.first,p=m,_,v=null,A,E=[],x=[],V,M,k,U;if(u)for(U=0;U<c;U+=1)V=e[U],M=s(V,U),k=f.get(M),k!==void 0&&(k.a?.measure(),(A??=new Set).add(k));for(U=0;U<c;U+=1){if(V=e[U],M=s(V,U),k=f.get(M),k===void 0){var z=p?p.e.nodes_start:n;v=g_(z,t,v,v===null?t.first:v.next,V,M,U,r,i,a),f.set(M,v),E=[],x=[],p=v.next;continue}if(l&&m_(k,V,U,i),(k.e.f&Ce)!==0&&(hs(k.e),u&&(k.a?.unfix(),(A??=new Set).delete(k))),k!==p){if(_!==void 0&&_.has(k)){if(E.length<x.length){var I=x[0],y;v=I.prev;var T=E[0],R=E[E.length-1];for(y=0;y<E.length;y+=1)mc(E[y],I,n);for(y=0;y<x.length;y+=1)_.delete(x[y]);je(t,T.prev,R.next),je(t,v,T),je(t,R,I),p=I,v=R,U-=1,E=[],x=[]}else _.delete(k),mc(k,p,n),je(t,k.prev,k.next),je(t,k,v===null?t.first:v.next),je(t,v,k),v=k;continue}for(E=[],x=[];p!==null&&p.k!==M;)(p.e.f&Ce)===0&&(_??=new Set).add(p),x.push(p),p=p.next;if(p===null)continue;k=p}E.push(k),v=k,p=k.next}if(p!==null||_!==void 0){for(var S=_===void 0?[]:Ha(_);p!==null;)(p.e.f&Ce)===0&&S.push(p),p=p.next;var b=S.length;if(b>0){var w=(i&_f)!==0&&c===0?n:null;if(u){for(U=0;U<b;U+=1)S[U].a?.measure();for(U=0;U<b;U+=1)S[U].a?.fix()}d_(t,S,w,f)}}u&&Lf(()=>{if(A!==void 0)for(k of A)k.a?.apply()}),et.first=t.first&&t.first.e,et.last=v&&v.e}function m_(e,t,n,r){(r&Ja)!==0&&sa(e.v,t),(r&Ya)!==0?sa(e.i,n):e.i=n}function g_(e,t,n,r,i,s,a,u,l,c){var f=(l&Ja)!==0,m=(l&Vg)===0,p=f?m?pn(i,!1,!1):jr(i):i,_=(l&Ya)===0?a:jr(a),v={i:_,v:p,k:s,a:null,e:null,prev:n,next:r};try{return v.e=Hr(()=>u(e,p,_,c),Mg),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?t.first=v:(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function mc(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var a=qs(s);i.before(s),s=a}}function je(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}const __=Symbol("is custom element"),y_=Symbol("is html");function ae(e,t,n,r){var i=v_(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[vg]=n),n==null?e.removeAttribute(t):typeof n!="string"&&w_(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function v_(e){return e.__attributes??={[__]:e.nodeName.includes("-"),[y_]:e.namespaceURI===Dg}}var gc=new Map;function w_(e){var t=gc.get(e.nodeName);if(t)return t;gc.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=cf(r);for(var s in n)n[s].set&&t.push(s);r=Ga(r)}return t}function E_(e,t,n=t){var r=ai();s_(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=$o(e)?jo(s):s,n(s),r&&s!==(s=t())){var a=e.selectionStart,u=e.selectionEnd;e.value=s??"",u!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(u,e.value.length))}}),su(t)==null&&e.value&&n($o(e)?jo(e.value):e.value),Vf(()=>{var i=t();$o(e)&&i===jo(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function $o(e){var t=e.type;return t==="number"||t==="range"}function jo(e){return e===""?null:+e}function T_(e=!1){const t=lt,n=t.l.u;if(!n)return;let r=()=>e_(t.s);if(e){let i=0,s={};const a=Za(()=>{let u=!1;const l=t.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],u=!0);return u&&i++,i});r=()=>H(a)}n.b.length&&qg(()=>{_c(t,r),ra(n.b)}),oa(()=>{const i=su(()=>n.m.map(_g));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&oa(()=>{_c(t,r),ra(n.a)})}function _c(e,t){if(e.l.s)for(const n of e.l.s)H(n);t()}function A_(e){lt===null&&kg(),oi&&lt.l!==null?I_(lt).m.push(e):oa(()=>{const t=su(e);if(typeof t=="function")return t})}function I_(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const b_="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(b_);xg();const R_=()=>{};var yc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},S_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],a=e[n++],u=e[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},Wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],a=i+1<e.length,u=a?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,f=s>>2,m=(s&3)<<4|u>>4;let p=(u&15)<<2|c>>6,_=c&63;l||(_=64,a||(p=64)),r.push(n[f],n[m],n[p],n[_])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Gf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):S_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],u=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const m=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||u==null||c==null||m==null)throw new C_;const p=s<<2|u>>4;if(r.push(p),c!==64){const _=u<<4&240|c>>2;if(r.push(_),m!==64){const v=c<<6&192|m;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class C_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x_=function(e){const t=Gf(e);return Wf.encodeByteArray(t,!0)},gs=function(e){return x_(e).replace(/\./g,"")},P_=function(e){try{return Wf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=()=>V_().__FIREBASE_DEFAULTS__,D_=()=>{if(typeof process>"u"||typeof yc>"u")return;const e=yc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},k_=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&P_(e[1]);return t&&JSON.parse(t)},au=()=>{try{return R_()||N_()||D_()||k_()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},O_=e=>{var t,n;return(n=(t=au())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},M_=e=>{const t=O_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Kf=()=>{var e;return(e=au())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function F_(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[gs(JSON.stringify(n)),gs(JSON.stringify(a)),""].join(".")}const Lr={};function B_(){const e={prod:[],emulator:[]};for(const t of Object.keys(Lr))Lr[t]?e.emulator.push(t):e.prod.push(t);return e}function q_(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let vc=!1;function $_(e,t){if(typeof window>"u"||typeof document>"u"||!uu(window.location.host)||Lr[e]===t||Lr[e]||vc)return;Lr[e]=t;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=B_().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function u(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{vc=!0,a()},p}function f(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=q_(r),_=n("text"),v=document.getElementById(_)||document.createElement("span"),A=n("learnmore"),E=document.getElementById(A)||document.createElement("a"),x=n("preprendIcon"),V=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const M=p.element;u(M),f(E,A);const k=c();l(V,x),M.append(V,v,E,k),document.body.appendChild(M)}s?(v.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z_(){var e;const t=(e=au())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H_(){return!z_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G_(){try{return typeof indexedDB=="object"}catch{return!1}}function W_(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="FirebaseError";class er extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=K_,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qf.prototype.create)}}class Qf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?Q_(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new er(i,u,r)}}function Q_(e,t){return e.replace(X_,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const X_=/\{\$([^}]+)}/g;function _s(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],a=t[i];if(wc(s)&&wc(a)){if(!_s(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(e){return e&&e._delegate?e._delegate:e}class Gr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new L_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Z_(t))try{this.getOrInitializeService({instanceIdentifier:mn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=mn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=mn){return this.instances.has(t)}getOptions(t=mn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&t(a,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y_(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=mn){return this.component?this.component.multipleInstances?t:mn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y_(e){return e===mn?void 0:e}function Z_(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new J_(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(J||(J={}));const ey={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ny=J.INFO,ry={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},iy=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=ry[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Xf{constructor(t){this.name=t,this._logLevel=ny,this._logHandler=iy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in J))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ey[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...t),this._logHandler(this,J.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...t),this._logHandler(this,J.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,J.INFO,...t),this._logHandler(this,J.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,J.WARN,...t),this._logHandler(this,J.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...t),this._logHandler(this,J.ERROR,...t)}}const sy=(e,t)=>t.some(n=>e instanceof n);let Ec,Tc;function oy(){return Ec||(Ec=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ay(){return Tc||(Tc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jf=new WeakMap,la=new WeakMap,Yf=new WeakMap,zo=new WeakMap,lu=new WeakMap;function uy(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(We(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Jf.set(n,e)}).catch(()=>{}),lu.set(t,e),t}function ly(e){if(la.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});la.set(e,t)}let ca={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return la.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Yf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return We(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function cy(e){ca=e(ca)}function hy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Ho(this),t,...n);return Yf.set(r,t.sort?t.sort():[t]),We(r)}:ay().includes(e)?function(...t){return e.apply(Ho(this),t),We(Jf.get(this))}:function(...t){return We(e.apply(Ho(this),t))}}function fy(e){return typeof e=="function"?hy(e):(e instanceof IDBTransaction&&ly(e),sy(e,oy())?new Proxy(e,ca):e)}function We(e){if(e instanceof IDBRequest)return uy(e);if(zo.has(e))return zo.get(e);const t=fy(e);return t!==e&&(zo.set(e,t),lu.set(t,e)),t}const Ho=e=>lu.get(e);function dy(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),u=We(a);return r&&a.addEventListener("upgradeneeded",l=>{r(We(a.result),l.oldVersion,l.newVersion,We(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),u.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),u}const py=["get","getKey","getAll","getAllKeys","count"],my=["put","add","delete","clear"],Go=new Map;function Ac(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Go.get(t))return Go.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=my.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||py.includes(n)))return;const s=async function(a,...u){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(await Promise.all([c[n](...u),i&&l.done]))[0]};return Go.set(t,s),s}cy(e=>({...e,get:(t,n,r)=>Ac(t,n)||e.get(t,n,r),has:(t,n)=>!!Ac(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_y(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _y(e){const t=e.getComponent();return t?.type==="VERSION"}const ha="@firebase/app",Ic="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne=new Xf("@firebase/app"),yy="@firebase/app-compat",vy="@firebase/analytics-compat",wy="@firebase/analytics",Ey="@firebase/app-check-compat",Ty="@firebase/app-check",Ay="@firebase/auth",Iy="@firebase/auth-compat",by="@firebase/database",Ry="@firebase/data-connect",Sy="@firebase/database-compat",Cy="@firebase/functions",xy="@firebase/functions-compat",Py="@firebase/installations",Vy="@firebase/installations-compat",Ny="@firebase/messaging",Dy="@firebase/messaging-compat",ky="@firebase/performance",Oy="@firebase/performance-compat",My="@firebase/remote-config",Ly="@firebase/remote-config-compat",Fy="@firebase/storage",Uy="@firebase/storage-compat",By="@firebase/firestore",qy="@firebase/ai",$y="@firebase/firestore-compat",jy="firebase",zy="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="[DEFAULT]",Hy={[ha]:"fire-core",[yy]:"fire-core-compat",[wy]:"fire-analytics",[vy]:"fire-analytics-compat",[Ty]:"fire-app-check",[Ey]:"fire-app-check-compat",[Ay]:"fire-auth",[Iy]:"fire-auth-compat",[by]:"fire-rtdb",[Ry]:"fire-data-connect",[Sy]:"fire-rtdb-compat",[Cy]:"fire-fn",[xy]:"fire-fn-compat",[Py]:"fire-iid",[Vy]:"fire-iid-compat",[Ny]:"fire-fcm",[Dy]:"fire-fcm-compat",[ky]:"fire-perf",[Oy]:"fire-perf-compat",[My]:"fire-rc",[Ly]:"fire-rc-compat",[Fy]:"fire-gcs",[Uy]:"fire-gcs-compat",[By]:"fire-fst",[$y]:"fire-fst-compat",[qy]:"fire-vertex","fire-js":"fire-js",[jy]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Map,Gy=new Map,da=new Map;function bc(e,t){try{e.container.addComponent(t)}catch(n){Ne.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function vs(e){const t=e.name;if(da.has(t))return Ne.debug(`There were multiple attempts to register component ${t}.`),!1;da.set(t,e);for(const n of ys.values())bc(n,e);for(const n of Gy.values())bc(n,e);return!0}function Wy(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ky(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ke=new Qf("app","Firebase",Qy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ke.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=zy;function Zf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:fa,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Ke.create("bad-app-name",{appName:String(i)});if(n||(n=Kf()),!n)throw Ke.create("no-options");const s=ys.get(i);if(s){if(_s(n,s.options)&&_s(r,s.config))return s;throw Ke.create("duplicate-app",{appName:i})}const a=new ty(i);for(const l of da.values())a.addComponent(l);const u=new Xy(n,r,a);return ys.set(i,u),u}function Yy(e=fa){const t=ys.get(e);if(!t&&e===fa&&Kf())return Zf();if(!t)throw Ke.create("no-app",{appName:e});return t}function Bn(e,t,n){var r;let i=(r=Hy[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${t}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ne.warn(u.join(" "));return}vs(new Gr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="firebase-heartbeat-database",tv=1,Wr="firebase-heartbeat-store";let Wo=null;function td(){return Wo||(Wo=dy(Zy,tv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Wr)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ke.create("idb-open",{originalErrorMessage:e.message})})),Wo}async function ev(e){try{const n=(await td()).transaction(Wr),r=await n.objectStore(Wr).get(ed(e));return await n.done,r}catch(t){if(t instanceof er)Ne.warn(t.message);else{const n=Ke.create("idb-get",{originalErrorMessage:t?.message});Ne.warn(n.message)}}}async function Rc(e,t){try{const r=(await td()).transaction(Wr,"readwrite");await r.objectStore(Wr).put(t,ed(e)),await r.done}catch(n){if(n instanceof er)Ne.warn(n.message);else{const r=Ke.create("idb-set",{originalErrorMessage:n?.message});Ne.warn(r.message)}}}function ed(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=1024,rv=30;class iv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ov(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Sc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>rv){const a=av(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ne.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sc(),{heartbeatsToSend:r,unsentEntries:i}=sv(this._heartbeatsCache.heartbeats),s=gs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ne.warn(n),""}}}function Sc(){return new Date().toISOString().substring(0,10)}function sv(e,t=nv){const n=[];let r=e.slice();for(const i of e){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Cc(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ov{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G_()?W_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ev(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Rc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Rc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Cc(e){return gs(JSON.stringify({version:2,heartbeats:e})).length}function av(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(e){vs(new Gr("platform-logger",t=>new gy(t),"PRIVATE")),vs(new Gr("heartbeat",t=>new iv(t),"PRIVATE")),Bn(ha,Ic,e),Bn(ha,Ic,"esm2017"),Bn("fire-js","")}uv("");var lv="firebase",cv="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(lv,cv,"app");var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qe,nd;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,y){function T(){}T.prototype=y.prototype,I.D=y.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(R,S,b){for(var w=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)w[nt-2]=arguments[nt];return y.prototype[S].apply(R,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,T){T||(T=0);var R=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)R[S]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(S=0;16>S;++S)R[S]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=I.g[0],T=I.g[1],S=I.g[2];var b=I.g[3],w=y+(b^T&(S^b))+R[0]+3614090360&4294967295;y=T+(w<<7&4294967295|w>>>25),w=b+(S^y&(T^S))+R[1]+3905402710&4294967295,b=y+(w<<12&4294967295|w>>>20),w=S+(T^b&(y^T))+R[2]+606105819&4294967295,S=b+(w<<17&4294967295|w>>>15),w=T+(y^S&(b^y))+R[3]+3250441966&4294967295,T=S+(w<<22&4294967295|w>>>10),w=y+(b^T&(S^b))+R[4]+4118548399&4294967295,y=T+(w<<7&4294967295|w>>>25),w=b+(S^y&(T^S))+R[5]+1200080426&4294967295,b=y+(w<<12&4294967295|w>>>20),w=S+(T^b&(y^T))+R[6]+2821735955&4294967295,S=b+(w<<17&4294967295|w>>>15),w=T+(y^S&(b^y))+R[7]+4249261313&4294967295,T=S+(w<<22&4294967295|w>>>10),w=y+(b^T&(S^b))+R[8]+1770035416&4294967295,y=T+(w<<7&4294967295|w>>>25),w=b+(S^y&(T^S))+R[9]+2336552879&4294967295,b=y+(w<<12&4294967295|w>>>20),w=S+(T^b&(y^T))+R[10]+4294925233&4294967295,S=b+(w<<17&4294967295|w>>>15),w=T+(y^S&(b^y))+R[11]+2304563134&4294967295,T=S+(w<<22&4294967295|w>>>10),w=y+(b^T&(S^b))+R[12]+1804603682&4294967295,y=T+(w<<7&4294967295|w>>>25),w=b+(S^y&(T^S))+R[13]+4254626195&4294967295,b=y+(w<<12&4294967295|w>>>20),w=S+(T^b&(y^T))+R[14]+2792965006&4294967295,S=b+(w<<17&4294967295|w>>>15),w=T+(y^S&(b^y))+R[15]+1236535329&4294967295,T=S+(w<<22&4294967295|w>>>10),w=y+(S^b&(T^S))+R[1]+4129170786&4294967295,y=T+(w<<5&4294967295|w>>>27),w=b+(T^S&(y^T))+R[6]+3225465664&4294967295,b=y+(w<<9&4294967295|w>>>23),w=S+(y^T&(b^y))+R[11]+643717713&4294967295,S=b+(w<<14&4294967295|w>>>18),w=T+(b^y&(S^b))+R[0]+3921069994&4294967295,T=S+(w<<20&4294967295|w>>>12),w=y+(S^b&(T^S))+R[5]+3593408605&4294967295,y=T+(w<<5&4294967295|w>>>27),w=b+(T^S&(y^T))+R[10]+38016083&4294967295,b=y+(w<<9&4294967295|w>>>23),w=S+(y^T&(b^y))+R[15]+3634488961&4294967295,S=b+(w<<14&4294967295|w>>>18),w=T+(b^y&(S^b))+R[4]+3889429448&4294967295,T=S+(w<<20&4294967295|w>>>12),w=y+(S^b&(T^S))+R[9]+568446438&4294967295,y=T+(w<<5&4294967295|w>>>27),w=b+(T^S&(y^T))+R[14]+3275163606&4294967295,b=y+(w<<9&4294967295|w>>>23),w=S+(y^T&(b^y))+R[3]+4107603335&4294967295,S=b+(w<<14&4294967295|w>>>18),w=T+(b^y&(S^b))+R[8]+1163531501&4294967295,T=S+(w<<20&4294967295|w>>>12),w=y+(S^b&(T^S))+R[13]+2850285829&4294967295,y=T+(w<<5&4294967295|w>>>27),w=b+(T^S&(y^T))+R[2]+4243563512&4294967295,b=y+(w<<9&4294967295|w>>>23),w=S+(y^T&(b^y))+R[7]+1735328473&4294967295,S=b+(w<<14&4294967295|w>>>18),w=T+(b^y&(S^b))+R[12]+2368359562&4294967295,T=S+(w<<20&4294967295|w>>>12),w=y+(T^S^b)+R[5]+4294588738&4294967295,y=T+(w<<4&4294967295|w>>>28),w=b+(y^T^S)+R[8]+2272392833&4294967295,b=y+(w<<11&4294967295|w>>>21),w=S+(b^y^T)+R[11]+1839030562&4294967295,S=b+(w<<16&4294967295|w>>>16),w=T+(S^b^y)+R[14]+4259657740&4294967295,T=S+(w<<23&4294967295|w>>>9),w=y+(T^S^b)+R[1]+2763975236&4294967295,y=T+(w<<4&4294967295|w>>>28),w=b+(y^T^S)+R[4]+1272893353&4294967295,b=y+(w<<11&4294967295|w>>>21),w=S+(b^y^T)+R[7]+4139469664&4294967295,S=b+(w<<16&4294967295|w>>>16),w=T+(S^b^y)+R[10]+3200236656&4294967295,T=S+(w<<23&4294967295|w>>>9),w=y+(T^S^b)+R[13]+681279174&4294967295,y=T+(w<<4&4294967295|w>>>28),w=b+(y^T^S)+R[0]+3936430074&4294967295,b=y+(w<<11&4294967295|w>>>21),w=S+(b^y^T)+R[3]+3572445317&4294967295,S=b+(w<<16&4294967295|w>>>16),w=T+(S^b^y)+R[6]+76029189&4294967295,T=S+(w<<23&4294967295|w>>>9),w=y+(T^S^b)+R[9]+3654602809&4294967295,y=T+(w<<4&4294967295|w>>>28),w=b+(y^T^S)+R[12]+3873151461&4294967295,b=y+(w<<11&4294967295|w>>>21),w=S+(b^y^T)+R[15]+530742520&4294967295,S=b+(w<<16&4294967295|w>>>16),w=T+(S^b^y)+R[2]+3299628645&4294967295,T=S+(w<<23&4294967295|w>>>9),w=y+(S^(T|~b))+R[0]+4096336452&4294967295,y=T+(w<<6&4294967295|w>>>26),w=b+(T^(y|~S))+R[7]+1126891415&4294967295,b=y+(w<<10&4294967295|w>>>22),w=S+(y^(b|~T))+R[14]+2878612391&4294967295,S=b+(w<<15&4294967295|w>>>17),w=T+(b^(S|~y))+R[5]+4237533241&4294967295,T=S+(w<<21&4294967295|w>>>11),w=y+(S^(T|~b))+R[12]+1700485571&4294967295,y=T+(w<<6&4294967295|w>>>26),w=b+(T^(y|~S))+R[3]+2399980690&4294967295,b=y+(w<<10&4294967295|w>>>22),w=S+(y^(b|~T))+R[10]+4293915773&4294967295,S=b+(w<<15&4294967295|w>>>17),w=T+(b^(S|~y))+R[1]+2240044497&4294967295,T=S+(w<<21&4294967295|w>>>11),w=y+(S^(T|~b))+R[8]+1873313359&4294967295,y=T+(w<<6&4294967295|w>>>26),w=b+(T^(y|~S))+R[15]+4264355552&4294967295,b=y+(w<<10&4294967295|w>>>22),w=S+(y^(b|~T))+R[6]+2734768916&4294967295,S=b+(w<<15&4294967295|w>>>17),w=T+(b^(S|~y))+R[13]+1309151649&4294967295,T=S+(w<<21&4294967295|w>>>11),w=y+(S^(T|~b))+R[4]+4149444226&4294967295,y=T+(w<<6&4294967295|w>>>26),w=b+(T^(y|~S))+R[11]+3174756917&4294967295,b=y+(w<<10&4294967295|w>>>22),w=S+(y^(b|~T))+R[2]+718787259&4294967295,S=b+(w<<15&4294967295|w>>>17),w=T+(b^(S|~y))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var T=y-this.blockSize,R=this.B,S=this.h,b=0;b<y;){if(S==0)for(;b<=T;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<y;)if(R[S++]=I.charCodeAt(b++),S==this.blockSize){i(this,R),S=0;break}}else for(;b<y;)if(R[S++]=I[b++],S==this.blockSize){i(this,R),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var T=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=T&255,T/=256;for(this.u(I),I=Array(16),y=T=0;4>y;++y)for(var R=0;32>R;R+=8)I[T++]=this.g[y]>>>R&255;return I};function s(I,y){var T=u;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=y(I)}function a(I,y){this.h=y;for(var T=[],R=!0,S=I.length-1;0<=S;S--){var b=I[S]|0;R&&b==y||(T[S]=b,R=!1)}this.g=T}var u={};function l(I){return-128<=I&&128>I?s(I,function(y){return new a([y|0],0>y?-1:0)}):new a([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return E(c(-I));for(var y=[],T=1,R=0;I>=T;R++)y[R]=I/T|0,T*=4294967296;return new a(y,0)}function f(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return E(f(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(y,8)),R=m,S=0;S<I.length;S+=8){var b=Math.min(8,I.length-S),w=parseInt(I.substring(S,S+b),y);8>b?(b=c(Math.pow(y,b)),R=R.j(b).add(c(w))):(R=R.j(T),R=R.add(c(w)))}return R}var m=l(0),p=l(1),_=l(16777216);e=a.prototype,e.m=function(){if(A(this))return-E(this).m();for(var I=0,y=1,T=0;T<this.g.length;T++){var R=this.i(T);I+=(0<=R?R:4294967296+R)*y,y*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(A(this))return"-"+E(this).toString(I);for(var y=c(Math.pow(I,6)),T=this,R="";;){var S=k(T,y).g;T=x(T,S.j(y));var b=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=S,v(T))return b+R;for(;6>b.length;)b="0"+b;R=b+R}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function A(I){return I.h==-1}e.l=function(I){return I=x(this,I),A(I)?-1:v(I)?0:1};function E(I){for(var y=I.g.length,T=[],R=0;R<y;R++)T[R]=~I.g[R];return new a(T,~I.h).add(p)}e.abs=function(){return A(this)?E(this):this},e.add=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],R=0,S=0;S<=y;S++){var b=R+(this.i(S)&65535)+(I.i(S)&65535),w=(b>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);R=w>>>16,b&=65535,w&=65535,T[S]=w<<16|b}return new a(T,T[T.length-1]&-2147483648?-1:0)};function x(I,y){return I.add(E(y))}e.j=function(I){if(v(this)||v(I))return m;if(A(this))return A(I)?E(this).j(E(I)):E(E(this).j(I));if(A(I))return E(this.j(E(I)));if(0>this.l(_)&&0>I.l(_))return c(this.m()*I.m());for(var y=this.g.length+I.g.length,T=[],R=0;R<2*y;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var S=0;S<I.g.length;S++){var b=this.i(R)>>>16,w=this.i(R)&65535,nt=I.i(S)>>>16,At=I.i(S)&65535;T[2*R+2*S]+=w*At,V(T,2*R+2*S),T[2*R+2*S+1]+=b*At,V(T,2*R+2*S+1),T[2*R+2*S+1]+=w*nt,V(T,2*R+2*S+1),T[2*R+2*S+2]+=b*nt,V(T,2*R+2*S+2)}for(R=0;R<y;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=y;R<2*y;R++)T[R]=0;return new a(T,0)};function V(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function M(I,y){this.g=I,this.h=y}function k(I,y){if(v(y))throw Error("division by zero");if(v(I))return new M(m,m);if(A(I))return y=k(E(I),y),new M(E(y.g),E(y.h));if(A(y))return y=k(I,E(y)),new M(E(y.g),y.h);if(30<I.g.length){if(A(I)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var T=p,R=y;0>=R.l(I);)T=U(T),R=U(R);var S=z(T,1),b=z(R,1);for(R=z(R,2),T=z(T,2);!v(R);){var w=b.add(R);0>=w.l(I)&&(S=S.add(T),b=w),R=z(R,1),T=z(T,1)}return y=x(I,S.j(y)),new M(S,y)}for(S=m;0<=I.l(y);){for(T=Math.max(1,Math.floor(I.m()/y.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),b=c(T),w=b.j(y);A(w)||0<w.l(I);)T-=R,b=c(T),w=b.j(y);v(b)&&(b=p),S=S.add(b),I=x(I,w)}return new M(S,I)}e.A=function(I){return k(this,I).h},e.and=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)&I.i(R);return new a(T,this.h&I.h)},e.or=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)|I.i(R);return new a(T,this.h|I.h)},e.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)^I.i(R);return new a(T,this.h^I.h)};function U(I){for(var y=I.g.length+1,T=[],R=0;R<y;R++)T[R]=I.i(R)<<1|I.i(R-1)>>>31;return new a(T,I.h)}function z(I,y){var T=y>>5;y%=32;for(var R=I.g.length-T,S=[],b=0;b<R;b++)S[b]=0<y?I.i(b+T)>>>y|I.i(b+T+1)<<32-y:I.i(b+T);return new a(S,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nd=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,Qe=a}).apply(typeof xc<"u"?xc:typeof self<"u"?self:typeof window<"u"?window:{});var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rd,Cr,id,Ji,pa,sd,od,ad;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,d){return o==Array.prototype||o==Object.prototype||(o[h]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof $i=="object"&&$i];for(var h=0;h<o.length;++h){var d=o[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,h){if(h)t:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var C=o[g];if(!(C in d))break t;d=d[C]}o=o[o.length-1],g=d[o],h=h(g),h!=g&&h!=null&&t(d,o,{configurable:!0,writable:!0,value:h})}}function s(o,h){o instanceof String&&(o+="");var d=0,g=!1,C={next:function(){if(!g&&d<o.length){var N=d++;return{value:h(N,o[N]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(o){return o||function(){return s(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function l(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function c(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function f(o,h,d){return o.call.apply(o.bind,arguments)}function m(o,h,d){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),o.apply(h,C)}}return function(){return o.apply(h,arguments)}}function p(o,h,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,p.apply(null,arguments)}function _(o,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function v(o,h){function d(){}d.prototype=h.prototype,o.aa=h.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(g,C,N){for(var L=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)L[rt-2]=arguments[rt];return h.prototype[C].apply(g,L)}}function A(o){const h=o.length;if(0<h){const d=Array(h);for(let g=0;g<h;g++)d[g]=o[g];return d}return[]}function E(o,h){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(l(g)){const C=o.length||0,N=g.length||0;o.length=C+N;for(let L=0;L<N;L++)o[C+L]=g[L]}else o.push(g)}}class x{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function V(o){return/^[\s\xa0]*$/.test(o)}function M(){var o=u.navigator;return o&&(o=o.userAgent)?o:""}function k(o){return k[" "](o),o}k[" "]=function(){};var U=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function z(o,h,d){for(const g in o)h.call(d,o[g],g,o)}function I(o,h){for(const d in o)h.call(void 0,o[d],d,o)}function y(o){const h={};for(const d in o)h[d]=o[d];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(o,h){let d,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(d in g)o[d]=g[d];for(let N=0;N<T.length;N++)d=T[N],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function S(o){var h=1;o=o.split(":");const d=[];for(;0<h&&o.length;)d.push(o.shift()),h--;return o.length&&d.push(o.join(":")),d}function b(o){u.setTimeout(()=>{throw o},0)}function w(){var o=lr;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class nt{constructor(){this.h=this.g=null}add(h,d){const g=At.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var At=new x(()=>new Ee,o=>o.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Lt,Zt=!1,lr=new nt,vi=()=>{const o=u.Promise.resolve(void 0);Lt=()=>{o.then(mo)}};var mo=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(d){b(d)}var h=At;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}Zt=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function It(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}It.prototype.h=function(){this.defaultPrevented=!0};var km=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};u.addEventListener("test",d,h),u.removeEventListener("test",d,h)}catch{}return o}();function cr(o,h){if(It.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(U){t:{try{k(h.nodeName);var C=!0;break t}catch{}C=!1}C||(h=null)}}else d=="mouseover"?h=o.fromElement:d=="mouseout"&&(h=o.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Om[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&cr.aa.h.call(this)}}v(cr,It);var Om={2:"touch",3:"pen",4:"mouse"};cr.prototype.h=function(){cr.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var wi="closure_listenable_"+(1e6*Math.random()|0),Mm=0;function Lm(o,h,d,g,C){this.listener=o,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=C,this.key=++Mm,this.da=this.fa=!1}function Ei(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ti(o){this.src=o,this.g={},this.h=0}Ti.prototype.add=function(o,h,d,g,C){var N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);var L=_o(o,h,g,C);return-1<L?(h=o[L],d||(h.fa=!1)):(h=new Lm(h,this.src,N,!!g,C),h.fa=d,o.push(h)),h};function go(o,h){var d=h.type;if(d in o.g){var g=o.g[d],C=Array.prototype.indexOf.call(g,h,void 0),N;(N=0<=C)&&Array.prototype.splice.call(g,C,1),N&&(Ei(h),o.g[d].length==0&&(delete o.g[d],o.h--))}}function _o(o,h,d,g){for(var C=0;C<o.length;++C){var N=o[C];if(!N.da&&N.listener==h&&N.capture==!!d&&N.ha==g)return C}return-1}var yo="closure_lm_"+(1e6*Math.random()|0),vo={};function al(o,h,d,g,C){if(Array.isArray(h)){for(var N=0;N<h.length;N++)al(o,h[N],d,g,C);return null}return d=cl(d),o&&o[wi]?o.K(h,d,c(g)?!!g.capture:!1,C):Fm(o,h,d,!1,g,C)}function Fm(o,h,d,g,C,N){if(!h)throw Error("Invalid event type");var L=c(C)?!!C.capture:!!C,rt=Eo(o);if(rt||(o[yo]=rt=new Ti(o)),d=rt.add(h,d,g,L,N),d.proxy)return d;if(g=Um(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)km||(C=L),C===void 0&&(C=!1),o.addEventListener(h.toString(),g,C);else if(o.attachEvent)o.attachEvent(ll(h.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Um(){function o(d){return h.call(o.src,o.listener,d)}const h=Bm;return o}function ul(o,h,d,g,C){if(Array.isArray(h))for(var N=0;N<h.length;N++)ul(o,h[N],d,g,C);else g=c(g)?!!g.capture:!!g,d=cl(d),o&&o[wi]?(o=o.i,h=String(h).toString(),h in o.g&&(N=o.g[h],d=_o(N,d,g,C),-1<d&&(Ei(N[d]),Array.prototype.splice.call(N,d,1),N.length==0&&(delete o.g[h],o.h--)))):o&&(o=Eo(o))&&(h=o.g[h.toString()],o=-1,h&&(o=_o(h,d,g,C)),(d=-1<o?h[o]:null)&&wo(d))}function wo(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[wi])go(h.i,o);else{var d=o.type,g=o.proxy;h.removeEventListener?h.removeEventListener(d,g,o.capture):h.detachEvent?h.detachEvent(ll(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=Eo(h))?(go(d,o),d.h==0&&(d.src=null,h[yo]=null)):Ei(o)}}}function ll(o){return o in vo?vo[o]:vo[o]="on"+o}function Bm(o,h){if(o.da)o=!0;else{h=new cr(h,this);var d=o.listener,g=o.ha||o.src;o.fa&&wo(o),o=d.call(g,h)}return o}function Eo(o){return o=o[yo],o instanceof Ti?o:null}var To="__closure_events_fn_"+(1e9*Math.random()>>>0);function cl(o){return typeof o=="function"?o:(o[To]||(o[To]=function(h){return o.handleEvent(h)}),o[To])}function bt(){oe.call(this),this.i=new Ti(this),this.M=this,this.F=null}v(bt,oe),bt.prototype[wi]=!0,bt.prototype.removeEventListener=function(o,h,d,g){ul(this,o,h,d,g)};function Nt(o,h){var d,g=o.F;if(g)for(d=[];g;g=g.F)d.push(g);if(o=o.M,g=h.type||h,typeof h=="string")h=new It(h,o);else if(h instanceof It)h.target=h.target||o;else{var C=h;h=new It(g,o),R(h,C)}if(C=!0,d)for(var N=d.length-1;0<=N;N--){var L=h.g=d[N];C=Ai(L,g,!0,h)&&C}if(L=h.g=o,C=Ai(L,g,!0,h)&&C,C=Ai(L,g,!1,h)&&C,d)for(N=0;N<d.length;N++)L=h.g=d[N],C=Ai(L,g,!1,h)&&C}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var d=o.g[h],g=0;g<d.length;g++)Ei(d[g]);delete o.g[h],o.h--}}this.F=null},bt.prototype.K=function(o,h,d,g){return this.i.add(String(o),h,!1,d,g)},bt.prototype.L=function(o,h,d,g){return this.i.add(String(o),h,!0,d,g)};function Ai(o,h,d,g){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,N=0;N<h.length;++N){var L=h[N];if(L&&!L.da&&L.capture==d){var rt=L.listener,vt=L.ha||L.src;L.fa&&go(o.i,L),C=rt.call(vt,g)!==!1&&C}}return C&&!g.defaultPrevented}function hl(o,h,d){if(typeof o=="function")d&&(o=p(o,d));else if(o&&typeof o.handleEvent=="function")o=p(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(o,h||0)}function fl(o){o.g=hl(()=>{o.g=null,o.i&&(o.i=!1,fl(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class qm extends oe{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:fl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(o){oe.call(this),this.h=o,this.g={}}v(hr,oe);var dl=[];function pl(o){z(o.g,function(h,d){this.g.hasOwnProperty(d)&&wo(h)},o),o.g={}}hr.prototype.N=function(){hr.aa.N.call(this),pl(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=u.JSON.stringify,$m=u.JSON.parse,jm=class{stringify(o){return u.JSON.stringify(o,void 0)}parse(o){return u.JSON.parse(o,void 0)}};function Io(){}Io.prototype.h=null;function ml(o){return o.h||(o.h=o.i())}function gl(){}var fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bo(){It.call(this,"d")}v(bo,It);function Ro(){It.call(this,"c")}v(Ro,It);var cn={},_l=null;function Ii(){return _l=_l||new bt}cn.La="serverreachability";function yl(o){It.call(this,cn.La,o)}v(yl,It);function dr(o){const h=Ii();Nt(h,new yl(h))}cn.STAT_EVENT="statevent";function vl(o,h){It.call(this,cn.STAT_EVENT,o),this.stat=h}v(vl,It);function Dt(o){const h=Ii();Nt(h,new vl(h,o))}cn.Ma="timingevent";function wl(o,h){It.call(this,cn.Ma,o),this.size=h}v(wl,It);function pr(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){o()},h)}function mr(){this.g=!0}mr.prototype.xa=function(){this.g=!1};function zm(o,h,d,g,C,N){o.info(function(){if(o.g)if(N)for(var L="",rt=N.split("&"),vt=0;vt<rt.length;vt++){var Y=rt[vt].split("=");if(1<Y.length){var Rt=Y[0];Y=Y[1];var St=Rt.split("_");L=2<=St.length&&St[1]=="type"?L+(Rt+"="+Y+"&"):L+(Rt+"=redacted&")}}else L=null;else L=N;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+h+`
`+d+`
`+L})}function Hm(o,h,d,g,C,N,L){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+h+`
`+d+`
`+N+" "+L})}function Pn(o,h,d,g){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Wm(o,d)+(g?" "+g:"")})}function Gm(o,h){o.info(function(){return"TIMEOUT: "+h})}mr.prototype.info=function(){};function Wm(o,h){if(!o.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var g=d[o];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var N=C[0];if(N!="noop"&&N!="stop"&&N!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Ao(d)}catch{return h}}var bi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},El={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},So;function Ri(){}v(Ri,Io),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},So=new Ri;function Fe(o,h,d,g){this.j=o,this.i=h,this.l=d,this.R=g||1,this.U=new hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tl}function Tl(){this.i=null,this.g="",this.h=!1}var Al={},Co={};function xo(o,h,d){o.L=1,o.v=Pi(Te(h)),o.m=d,o.P=!0,Il(o,null)}function Il(o,h){o.F=Date.now(),Si(o),o.A=Te(o.v);var d=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Fl(d.i,"t",g),o.C=0,d=o.j.J,o.h=new Tl,o.g=nc(o.j,d?h:null,!o.m),0<o.O&&(o.M=new qm(p(o.Y,o,o.g),o.O)),h=o.U,d=o.g,g=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(dl[0]=C.toString()),C=dl);for(var N=0;N<C.length;N++){var L=al(d,C[N],g||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),dr(),zm(o.i,o.u,o.A,o.l,o.R,o.m)}Fe.prototype.ca=function(o){o=o.target;const h=this.M;h&&Ae(o)==3?h.j():this.Y(o)},Fe.prototype.Y=function(o){try{if(o==this.g)t:{const St=Ae(this.g);var h=this.g.Ba();const Dn=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||Hl(this.g)))){this.J||St!=4||h==7||(h==8||0>=Dn?dr(3):dr(2)),Po(this);var d=this.g.Z();this.X=d;e:if(bl(this)){var g=Hl(this.g);o="";var C=g.length,N=Ae(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),gr(this);var L="";break e}this.h.i=new u.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,o+=this.h.i.decode(g[h],{stream:!(N&&h==C-1)});g.length=0,this.h.g+=o,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=d==200,Hm(this.i,this.u,this.A,this.l,this.R,St,d),this.o){if(this.T&&!this.K){e:{if(this.g){var rt,vt=this.g;if((rt=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(rt)){var Y=rt;break e}}Y=null}if(d=Y)Pn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vo(this,d);else{this.o=!1,this.s=3,Dt(12),hn(this),gr(this);break t}}if(this.P){d=!0;let te;for(;!this.J&&this.C<L.length;)if(te=Km(this,L),te==Co){St==4&&(this.s=4,Dt(14),d=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(te==Al){this.s=4,Dt(15),Pn(this.i,this.l,L,"[Invalid Chunk]"),d=!1;break}else Pn(this.i,this.l,te,null),Vo(this,te);if(bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||L.length!=0||this.h.h||(this.s=1,Dt(16),d=!1),this.o=this.o&&d,!d)Pn(this.i,this.l,L,"[Invalid Chunked Response]"),hn(this),gr(this);else if(0<L.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Lo(Rt),Rt.M=!0,Dt(11))}}else Pn(this.i,this.l,L,null),Vo(this,L);St==4&&hn(this),this.o&&!this.J&&(St==4?Yl(this.j,this):(this.o=!1,Si(this)))}else hg(this.g),d==400&&0<L.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),hn(this),gr(this)}}}catch{}finally{}};function bl(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Km(o,h){var d=o.C,g=h.indexOf(`
`,d);return g==-1?Co:(d=Number(h.substring(d,g)),isNaN(d)?Al:(g+=1,g+d>h.length?Co:(h=h.slice(g,g+d),o.C=g+d,h)))}Fe.prototype.cancel=function(){this.J=!0,hn(this)};function Si(o){o.S=Date.now()+o.I,Rl(o,o.I)}function Rl(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=pr(p(o.ba,o),h)}function Po(o){o.B&&(u.clearTimeout(o.B),o.B=null)}Fe.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Gm(this.i,this.A),this.L!=2&&(dr(),Dt(17)),hn(this),this.s=2,gr(this)):Rl(this,this.S-o)};function gr(o){o.j.G==0||o.J||Yl(o.j,o)}function hn(o){Po(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,pl(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function Vo(o,h){try{var d=o.j;if(d.G!=0&&(d.g==o||No(d.h,o))){if(!o.K&&No(d.h,o)&&d.G==3){try{var g=d.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Mi(d),ki(d);else break t;Mo(d),Dt(18)}}else d.za=C[1],0<d.za-d.T&&37500>C[2]&&d.F&&d.v==0&&!d.C&&(d.C=pr(p(d.Za,d),6e3));if(1>=xl(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else dn(d,11)}else if((o.K||d.g==o)&&Mi(d),!V(h))for(C=d.Da.g.parse(h),h=0;h<C.length;h++){let Y=C[h];if(d.T=Y[0],Y=Y[1],d.G==2)if(Y[0]=="c"){d.K=Y[1],d.ia=Y[2];const Rt=Y[3];Rt!=null&&(d.la=Rt,d.j.info("VER="+d.la));const St=Y[4];St!=null&&(d.Aa=St,d.j.info("SVER="+d.Aa));const Dn=Y[5];Dn!=null&&typeof Dn=="number"&&0<Dn&&(g=1.5*Dn,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const te=o.g;if(te){const Fi=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var N=g.h;N.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Do(N,N.h),N.h=null))}if(g.D){const Fo=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(g.ya=Fo,st(g.I,g.D,Fo))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var L=o;if(g.qa=ec(g,g.J?g.ia:null,g.W),L.K){Pl(g.h,L);var rt=L,vt=g.L;vt&&(rt.I=vt),rt.B&&(Po(rt),Si(rt)),g.g=L}else Xl(g);0<d.i.length&&Oi(d)}else Y[0]!="stop"&&Y[0]!="close"||dn(d,7);else d.G==3&&(Y[0]=="stop"||Y[0]=="close"?Y[0]=="stop"?dn(d,7):Oo(d):Y[0]!="noop"&&d.l&&d.l.ta(Y),d.v=0)}}dr(4)}catch{}}var Qm=class{constructor(o,h){this.g=o,this.map=h}};function Sl(o){this.l=o||10,u.PerformanceNavigationTiming?(o=u.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cl(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function xl(o){return o.h?1:o.g?o.g.size:0}function No(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Do(o,h){o.g?o.g.add(h):o.h=h}function Pl(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Sl.prototype.cancel=function(){if(this.i=Vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Vl(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const d of o.g.values())h=h.concat(d.D);return h}return A(o.i)}function Xm(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var h=[],d=o.length,g=0;g<d;g++)h.push(o[g]);return h}h=[],d=0;for(g in o)h[d++]=o[g];return h}function Jm(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var h=[];o=o.length;for(var d=0;d<o;d++)h.push(d);return h}h=[],d=0;for(const g in o)h[d++]=g;return h}}}function Nl(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var d=Jm(o),g=Xm(o),C=g.length,N=0;N<C;N++)h.call(void 0,g[N],d&&d[N],o)}var Dl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ym(o,h){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var g=o[d].indexOf("="),C=null;if(0<=g){var N=o[d].substring(0,g);C=o[d].substring(g+1)}else N=o[d];h(N,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function fn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof fn){this.h=o.h,Ci(this,o.j),this.o=o.o,this.g=o.g,xi(this,o.s),this.l=o.l;var h=o.i,d=new vr;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),kl(this,d),this.m=o.m}else o&&(h=String(o).match(Dl))?(this.h=!1,Ci(this,h[1]||"",!0),this.o=_r(h[2]||""),this.g=_r(h[3]||"",!0),xi(this,h[4]),this.l=_r(h[5]||"",!0),kl(this,h[6]||"",!0),this.m=_r(h[7]||"")):(this.h=!1,this.i=new vr(null,this.h))}fn.prototype.toString=function(){var o=[],h=this.j;h&&o.push(yr(h,Ol,!0),":");var d=this.g;return(d||h=="file")&&(o.push("//"),(h=this.o)&&o.push(yr(h,Ol,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(yr(d,d.charAt(0)=="/"?eg:tg,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",yr(d,rg)),o.join("")};function Te(o){return new fn(o)}function Ci(o,h,d){o.j=d?_r(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function xi(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function kl(o,h,d){h instanceof vr?(o.i=h,ig(o.i,o.h)):(d||(h=yr(h,ng)),o.i=new vr(h,o.h))}function st(o,h,d){o.i.set(h,d)}function Pi(o){return st(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function _r(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function yr(o,h,d){return typeof o=="string"?(o=encodeURI(o).replace(h,Zm),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Zm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ol=/[#\/\?@]/g,tg=/[#\?:]/g,eg=/[#\?]/g,ng=/[#\?@]/g,rg=/#/g;function vr(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Ue(o){o.g||(o.g=new Map,o.h=0,o.i&&Ym(o.i,function(h,d){o.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}e=vr.prototype,e.add=function(o,h){Ue(this),this.i=null,o=Vn(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(h),this.h+=1,this};function Ml(o,h){Ue(o),h=Vn(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Ll(o,h){return Ue(o),h=Vn(o,h),o.g.has(h)}e.forEach=function(o,h){Ue(this),this.g.forEach(function(d,g){d.forEach(function(C){o.call(h,C,g,this)},this)},this)},e.na=function(){Ue(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let g=0;g<h.length;g++){const C=o[g];for(let N=0;N<C.length;N++)d.push(h[g])}return d},e.V=function(o){Ue(this);let h=[];if(typeof o=="string")Ll(this,o)&&(h=h.concat(this.g.get(Vn(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)h=h.concat(o[d])}return h},e.set=function(o,h){return Ue(this),this.i=null,o=Vn(this,o),Ll(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},e.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function Fl(o,h,d){Ml(o,h),0<d.length&&(o.i=null,o.g.set(Vn(o,h),A(d)),o.h+=d.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var g=h[d];const N=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=N;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),o.push(C)}}return this.i=o.join("&")};function Vn(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function ig(o,h){h&&!o.j&&(Ue(o),o.i=null,o.g.forEach(function(d,g){var C=g.toLowerCase();g!=C&&(Ml(this,g),Fl(this,C,d))},o)),o.j=h}function sg(o,h){const d=new mr;if(u.Image){const g=new Image;g.onload=_(Be,d,"TestLoadImage: loaded",!0,h,g),g.onerror=_(Be,d,"TestLoadImage: error",!1,h,g),g.onabort=_(Be,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=_(Be,d,"TestLoadImage: timeout",!1,h,g),u.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else h(!1)}function og(o,h){const d=new mr,g=new AbortController,C=setTimeout(()=>{g.abort(),Be(d,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:g.signal}).then(N=>{clearTimeout(C),N.ok?Be(d,"TestPingServer: ok",!0,h):Be(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Be(d,"TestPingServer: error",!1,h)})}function Be(o,h,d,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(d)}catch{}}function ag(){this.g=new jm}function ug(o,h,d){const g=d||"";try{Nl(o,function(C,N){let L=C;c(C)&&(L=Ao(C)),h.push(g+N+"="+encodeURIComponent(L))})}catch(C){throw h.push(g+"type="+encodeURIComponent("_badmap")),C}}function Vi(o){this.l=o.Ub||null,this.j=o.eb||!1}v(Vi,Io),Vi.prototype.g=function(){return new Ni(this.l,this.j)},Vi.prototype.i=function(o){return function(){return o}}({});function Ni(o,h){bt.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ni,bt),e=Ni.prototype,e.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,Er(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Er(this)),this.g&&(this.readyState=3,Er(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?wr(this):Er(this),this.readyState==3&&Ul(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,wr(this))},e.Qa=function(o){this.g&&(this.response=o,wr(this))},e.ga=function(){this.g&&wr(this)};function wr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Er(o)}e.setRequestHeader=function(o,h){this.u.append(o,h)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=h.next();return o.join(`\r
`)};function Er(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Bl(o){let h="";return z(o,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function ko(o,h,d){t:{for(g in d){var g=!1;break t}g=!0}g||(d=Bl(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):st(o,h,d))}function ut(o){bt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(ut,bt);var lg=/^https?$/i,cg=["POST","PUT"];e=ut.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():So.g(),this.v=this.o?ml(this.o):ml(So),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(N){ql(this,N);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)d.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),C=u.FormData&&o instanceof u.FormData,!(0<=Array.prototype.indexOf.call(cg,h,void 0))||g||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,L]of d)this.g.setRequestHeader(N,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zl(this),this.u=!0,this.g.send(o),this.u=!1}catch(N){ql(this,N)}};function ql(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,$l(o),Di(o)}function $l(o){o.A||(o.A=!0,Nt(o,"complete"),Nt(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Nt(this,"complete"),Nt(this,"abort"),Di(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),ut.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?jl(this):this.bb())},e.bb=function(){jl(this)};function jl(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Ae(o)!=4||o.Z()!=2)){if(o.u&&Ae(o)==4)hl(o.Ea,0,o);else if(Nt(o,"readystatechange"),Ae(o)==4){o.h=!1;try{const L=o.Z();t:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}var d;if(!(d=h)){var g;if(g=L===0){var C=String(o.D).match(Dl)[1]||null;!C&&u.self&&u.self.location&&(C=u.self.location.protocol.slice(0,-1)),g=!lg.test(C?C.toLowerCase():"")}d=g}if(d)Nt(o,"complete"),Nt(o,"success");else{o.m=6;try{var N=2<Ae(o)?o.g.statusText:""}catch{N=""}o.l=N+" ["+o.Z()+"]",$l(o)}}finally{Di(o)}}}}function Di(o,h){if(o.g){zl(o);const d=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||Nt(o,"ready");try{d.onreadystatechange=g}catch{}}}function zl(o){o.I&&(u.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Ae(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Ae(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),$m(h)}};function Hl(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function hg(o){const h={};o=(o.g&&2<=Ae(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(V(o[g]))continue;var d=S(o[g]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=h[C]||[];h[C]=N,N.push(d)}I(h,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(o,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||h}function Gl(o){this.Aa=0,this.i=[],this.j=new mr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tr("baseRetryDelayMs",5e3,o),this.cb=Tr("retryDelaySeedMs",1e4,o),this.Wa=Tr("forwardChannelMaxRetries",2,o),this.wa=Tr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Sl(o&&o.concurrentRequestLimit),this.Da=new ag,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Gl.prototype,e.la=8,e.G=1,e.connect=function(o,h,d,g){Dt(0),this.W=o,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=ec(this,null,this.W),Oi(this)};function Oo(o){if(Wl(o),o.G==3){var h=o.U++,d=Te(o.I);if(st(d,"SID",o.K),st(d,"RID",h),st(d,"TYPE","terminate"),Ar(o,d),h=new Fe(o,o.j,h),h.L=2,h.v=Pi(Te(d)),d=!1,u.navigator&&u.navigator.sendBeacon)try{d=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&u.Image&&(new Image().src=h.v,d=!0),d||(h.g=nc(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Si(h)}tc(o)}function ki(o){o.g&&(Lo(o),o.g.cancel(),o.g=null)}function Wl(o){ki(o),o.u&&(u.clearTimeout(o.u),o.u=null),Mi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&u.clearTimeout(o.s),o.s=null)}function Oi(o){if(!Cl(o.h)&&!o.s){o.s=!0;var h=o.Ga;Lt||vi(),Zt||(Lt(),Zt=!0),lr.add(h,o),o.B=0}}function fg(o,h){return xl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=pr(p(o.Ga,o,h),Zl(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new Fe(this,this.j,o);let N=this.o;if(this.S&&(N?(N=y(N),R(N,this.S)):N=this.S),this.m!==null||this.O||(C.H=N,N=null),this.P)t:{for(var h=0,d=0;d<this.i.length;d++){e:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=d;break t}if(h===4096||d===this.i.length-1){h=d+1;break t}}h=1e3}else h=1e3;h=Ql(this,C,h),d=Te(this.I),st(d,"RID",o),st(d,"CVER",22),this.D&&st(d,"X-HTTP-Session-Id",this.D),Ar(this,d),N&&(this.O?h="headers="+encodeURIComponent(String(Bl(N)))+"&"+h:this.m&&ko(d,this.m,N)),Do(this.h,C),this.Ua&&st(d,"TYPE","init"),this.P?(st(d,"$req",h),st(d,"SID","null"),C.T=!0,xo(C,d,null)):xo(C,d,h),this.G=2}}else this.G==3&&(o?Kl(this,o):this.i.length==0||Cl(this.h)||Kl(this))};function Kl(o,h){var d;h?d=h.l:d=o.U++;const g=Te(o.I);st(g,"SID",o.K),st(g,"RID",d),st(g,"AID",o.T),Ar(o,g),o.m&&o.o&&ko(g,o.m,o.o),d=new Fe(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),h&&(o.i=h.D.concat(o.i)),h=Ql(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Do(o.h,d),xo(d,g,h)}function Ar(o,h){o.H&&z(o.H,function(d,g){st(h,g,d)}),o.l&&Nl({},function(d,g){st(h,g,d)})}function Ql(o,h,d){d=Math.min(o.i.length,d);var g=o.l?p(o.l.Na,o.l,o):null;t:{var C=o.i;let N=-1;for(;;){const L=["count="+d];N==-1?0<d?(N=C[0].g,L.push("ofs="+N)):N=0:L.push("ofs="+N);let rt=!0;for(let vt=0;vt<d;vt++){let Y=C[vt].g;const Rt=C[vt].map;if(Y-=N,0>Y)N=Math.max(0,C[vt].g-100),rt=!1;else try{ug(Rt,L,"req"+Y+"_")}catch{g&&g(Rt)}}if(rt){g=L.join("&");break t}}}return o=o.i.splice(0,d),h.D=o,g}function Xl(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;Lt||vi(),Zt||(Lt(),Zt=!0),lr.add(h,o),o.v=0}}function Mo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=pr(p(o.Fa,o),Zl(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Jl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=pr(p(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),ki(this),Jl(this))};function Lo(o){o.A!=null&&(u.clearTimeout(o.A),o.A=null)}function Jl(o){o.g=new Fe(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=Te(o.qa);st(h,"RID","rpc"),st(h,"SID",o.K),st(h,"AID",o.T),st(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&st(h,"TO",o.ja),st(h,"TYPE","xmlhttp"),Ar(o,h),o.m&&o.o&&ko(h,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Pi(Te(h)),d.m=null,d.P=!0,Il(d,o)}e.Za=function(){this.C!=null&&(this.C=null,ki(this),Mo(this),Dt(19))};function Mi(o){o.C!=null&&(u.clearTimeout(o.C),o.C=null)}function Yl(o,h){var d=null;if(o.g==h){Mi(o),Lo(o),o.g=null;var g=2}else if(No(o.h,h))d=h.D,Pl(o.h,h),g=1;else return;if(o.G!=0){if(h.o)if(g==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var C=o.B;g=Ii(),Nt(g,new wl(g,d)),Oi(o)}else Xl(o);else if(C=h.s,C==3||C==0&&0<h.X||!(g==1&&fg(o,h)||g==2&&Mo(o)))switch(d&&0<d.length&&(h=o.h,h.i=h.i.concat(d)),C){case 1:dn(o,5);break;case 4:dn(o,10);break;case 3:dn(o,6);break;default:dn(o,2)}}}function Zl(o,h){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*h}function dn(o,h){if(o.j.info("Error code "+h),h==2){var d=p(o.fb,o),g=o.Xa;const C=!g;g=new fn(g||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ci(g,"https"),Pi(g),C?sg(g.toString(),d):og(g.toString(),d)}else Dt(2);o.G=0,o.l&&o.l.sa(h),tc(o),Wl(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function tc(o){if(o.G=0,o.ka=[],o.l){const h=Vl(o.h);(h.length!=0||o.i.length!=0)&&(E(o.ka,h),E(o.ka,o.i),o.h.i.length=0,A(o.i),o.i.length=0),o.l.ra()}}function ec(o,h,d){var g=d instanceof fn?Te(d):new fn(d);if(g.g!="")h&&(g.g=h+"."+g.g),xi(g,g.s);else{var C=u.location;g=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var N=new fn(null);g&&Ci(N,g),h&&(N.g=h),C&&xi(N,C),d&&(N.l=d),g=N}return d=o.D,h=o.ya,d&&h&&st(g,d,h),st(g,"VER",o.la),Ar(o,g),g}function nc(o,h,d){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new ut(new Vi({eb:d})):new ut(o.pa),h.Ha(o.J),h}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}e=rc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Li(){}Li.prototype.g=function(o,h){return new zt(o,h)};function zt(o,h){bt.call(this),this.g=new Gl(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!V(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!V(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Nn(this)}v(zt,bt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Oo(this.g)},zt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Ao(o),o=d);h.i.push(new Qm(h.Ya++,o)),h.G==3&&Oi(h)},zt.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,zt.aa.N.call(this)};function ic(o){bo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){t:{for(const d in h){o=d;break t}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}v(ic,bo);function sc(){Ro.call(this),this.status=1}v(sc,Ro);function Nn(o){this.g=o}v(Nn,rc),Nn.prototype.ua=function(){Nt(this.g,"a")},Nn.prototype.ta=function(o){Nt(this.g,new ic(o))},Nn.prototype.sa=function(o){Nt(this.g,new sc)},Nn.prototype.ra=function(){Nt(this.g,"b")},Li.prototype.createWebChannel=Li.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,ad=function(){return new Li},od=function(){return Ii()},sd=cn,pa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bi.NO_ERROR=0,bi.TIMEOUT=8,bi.HTTP_ERROR=6,Ji=bi,El.COMPLETE="complete",id=El,gl.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Cr=gl,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,rd=ut}).apply(typeof $i<"u"?$i:typeof self<"u"?self:typeof window<"u"?window:{});const Pc="@firebase/firestore",Vc="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nr="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new Xf("@firebase/firestore");function On(){return An.logLevel}function B(e,...t){if(An.logLevel<=J.DEBUG){const n=t.map(cu);An.debug(`Firestore (${nr}): ${e}`,...n)}}function De(e,...t){if(An.logLevel<=J.ERROR){const n=t.map(cu);An.error(`Firestore (${nr}): ${e}`,...n)}}function Ze(e,...t){if(An.logLevel<=J.WARN){const n=t.map(cu);An.warn(`Firestore (${nr}): ${e}`,...n)}}function cu(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,ud(e,r,n)}function ud(e,t,n){let r=`FIRESTORE (${nr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw De(r),new Error(r)}function tt(e,t,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,e||ud(t,i,r)}function G(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends er{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class hv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class fv{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dv{constructor(t){this.t=t,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){tt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new xe;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xe,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},u=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xe)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string",31837,{l:r}),new ld(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return tt(t===null||typeof t=="string",2055,{h:t}),new xt(t)}}class pv{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mv{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new pv(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gv{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ky(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){tt(this.o===void 0,3512);const r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Nc(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Nc(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_v(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%62))}return r}}function K(e,t){return e<t?-1:e>t?1:0}function ma(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return K(r,i);{const s=cd(),a=yv(s.encode(Dc(e,n)),s.encode(Dc(t,n)));return a!==0?a:K(r,i)}}n+=r>65535?2:1}return K(e.length,t.length)}function Dc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function yv(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return K(e[n],t[n]);return K(e.length,t.length)}function zn(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="__name__";class le{constructor(t,n,r){n===void 0?n=0:n>t.length&&$(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&$(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return le.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof le?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=le.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return K(t.length,n.length)}static compareSegments(t,n){const r=le.isNumericId(t),i=le.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?le.extractNumericId(t).compare(le.extractNumericId(n)):ma(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qe.fromString(t.substring(4,t.length-2))}}class it extends le{construct(t,n,r){return new it(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new F(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new it(n)}static emptyPath(){return new it([])}}const vv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends le{construct(t,n,r){return new Et(t,n,r)}static isValidIdentifier(t){return vv.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kc}static keyField(){return new Et([kc])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new F(D.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<t.length;){const u=t[i];if(u==="\\"){if(i+1===t.length)throw new F(D.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new F(D.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(t){this.path=t}static fromPath(t){return new q(it.fromString(t))}static fromName(t){return new q(it.fromString(t).popFirst(5))}static empty(){return new q(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&it.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return it.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new q(new it(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(e,t,n){if(!n)throw new F(D.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function wv(e,t,n,r){if(t===!0&&r===!0)throw new F(D.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Oc(e){if(!q.isDocumentKey(e))throw new F(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Mc(e){if(q.isDocumentKey(e))throw new F(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function fd(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function js(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":$(12329,{type:typeof e})}function ke(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=js(e);throw new F(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ev(e,t){if(t<=0)throw new F(D.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(e,t){const n={typeString:e};return t&&(n.value=t),n}function ui(e,t){if(!fd(e))throw new F(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new F(D.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=-62135596800,Fc=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(t){return ot.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Fc);return new ot(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new F(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Lc)throw new F(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new F(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fc}_compareTo(t){return this.seconds===t.seconds?K(this.nanoseconds,t.nanoseconds):K(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ui(t,ot._jsonSchema))return new ot(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Lc;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:gt("string",ot._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{static fromTimestamp(t){return new j(t)}static min(){return new j(new ot(0,0))}static max(){return new j(new ot(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=-1;function Tv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=j.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new tn(i,q.empty(),t)}function Av(e){return new tn(e.readTime,e.key,Kr)}class tn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new tn(j.min(),q.empty(),Kr)}static max(){return new tn(j.max(),q.empty(),Kr)}}function Iv(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=q.comparator(e.documentKey,t.documentKey),n!==0?n:K(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rr(e){if(e.code!==D.FAILED_PRECONDITION||e.message!==bv)throw e;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):O.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):O.reject(n)}static resolve(t){return new O((n,r)=>{n(t)})}static reject(t){return new O((n,r)=>{r(t)})}static waitFor(t){return new O((n,r)=>{let i=0,s=0,a=!1;t.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(t){let n=O.resolve(!1);for(const r of t)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new O((r,i)=>{const s=t.length,a=new Array(s);let u=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(f=>{a[c]=f,++u,u===s&&r(a)},f=>i(f))}})}static doWhile(t,n){return new O((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Sv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ir(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}zs.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=-1;function Hs(e){return e==null}function ws(e){return e===0&&1/e==-1/0}function Cv(e){return typeof e=="number"&&Number.isInteger(e)&&!ws(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="";function xv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Uc(t)),t=Pv(e.get(n),t);return Uc(t)}function Pv(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case dd:n+="";break;default:n+=s}}return n}function Uc(e){return e+dd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function an(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t,n){this.comparator=t,this.root=n||wt.EMPTY}insert(t,n){return new at(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(t){return new at(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ji(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ji(this.root,t,this.comparator,!1)}getReverseIterator(){return new ji(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ji(this.root,t,this.comparator,!0)}}class ji{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new wt(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw $(27949);return t+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(t,n,r,i,s){return this}insert(t,n,r){return new wt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.comparator=t,this.data=new at(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new qc(this.data.getIterator())}getIteratorFrom(t){return new qc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof _t)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new _t(this.comparator);return n.data=t,n}}class qc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.fields=t,t.sort(Et.comparator)}static empty(){return new Gt([])}unionWith(t){let n=new _t(Et.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Gt(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return zn(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new md("Invalid base64 string: "+s):s}}(t);return new Tt(n)}static fromUint8Array(t){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(t);return new Tt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return K(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const Vv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(e){if(tt(!!e,39018),typeof e=="string"){let t=0;const n=Vv.exec(e);if(tt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ht(e.seconds),nanos:ht(e.nanos)}}function ht(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function nn(e){return typeof e=="string"?Tt.fromBase64String(e):Tt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="server_timestamp",_d="__type__",yd="__previous_value__",vd="__local_write_time__";function du(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[_d])===null||n===void 0?void 0:n.stringValue)===gd}function Gs(e){const t=e.mapValue.fields[yd];return du(t)?Gs(t):t}function Qr(e){const t=en(e.mapValue.fields[vd].timestampValue);return new ot(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(t,n,r,i,s,a,u,l,c,f){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=f}}const Es="(default)";class Xr{constructor(t,n){this.projectId=t,this.database=n||Es}static empty(){return new Xr("","")}get isDefaultDatabase(){return this.database===Es}isEqual(t){return t instanceof Xr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="__type__",Dv="__max__",zi={mapValue:{}},Ed="__vector__",Ts="value";function rn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?du(e)?4:Ov(e)?9007199254740991:kv(e)?10:11:$(28295,{value:e})}function ve(e,t){if(e===t)return!0;const n=rn(e);if(n!==rn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qr(e).isEqual(Qr(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=en(i.timestampValue),u=en(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return nn(i.bytesValue).isEqual(nn(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ht(i.geoPointValue.latitude)===ht(s.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ht(i.integerValue)===ht(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=ht(i.doubleValue),u=ht(s.doubleValue);return a===u?ws(a)===ws(u):isNaN(a)&&isNaN(u)}return!1}(e,t);case 9:return zn(e.arrayValue.values||[],t.arrayValue.values||[],ve);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(Bc(a)!==Bc(u))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(u[l]===void 0||!ve(a[l],u[l])))return!1;return!0}(e,t);default:return $(52216,{left:e})}}function Jr(e,t){return(e.values||[]).find(n=>ve(n,t))!==void 0}function Hn(e,t){if(e===t)return 0;const n=rn(e),r=rn(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(s,a){const u=ht(s.integerValue||s.doubleValue),l=ht(a.integerValue||a.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(e,t);case 3:return $c(e.timestampValue,t.timestampValue);case 4:return $c(Qr(e),Qr(t));case 5:return ma(e.stringValue,t.stringValue);case 6:return function(s,a){const u=nn(s),l=nn(a);return u.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const u=s.split("/"),l=a.split("/");for(let c=0;c<u.length&&c<l.length;c++){const f=K(u[c],l[c]);if(f!==0)return f}return K(u.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const u=K(ht(s.latitude),ht(a.latitude));return u!==0?u:K(ht(s.longitude),ht(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return jc(e.arrayValue,t.arrayValue);case 10:return function(s,a){var u,l,c,f;const m=s.fields||{},p=a.fields||{},_=(u=m[Ts])===null||u===void 0?void 0:u.arrayValue,v=(l=p[Ts])===null||l===void 0?void 0:l.arrayValue,A=K(((c=_?.values)===null||c===void 0?void 0:c.length)||0,((f=v?.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:jc(_,v)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===zi.mapValue&&a===zi.mapValue)return 0;if(s===zi.mapValue)return 1;if(a===zi.mapValue)return-1;const u=s.fields||{},l=Object.keys(u),c=a.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){const p=ma(l[m],f[m]);if(p!==0)return p;const _=Hn(u[l[m]],c[f[m]]);if(_!==0)return _}return K(l.length,f.length)}(e.mapValue,t.mapValue);default:throw $(23264,{le:n})}}function $c(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return K(e,t);const n=en(e),r=en(t),i=K(n.seconds,r.seconds);return i!==0?i:K(n.nanos,r.nanos)}function jc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Hn(n[i],r[i]);if(s)return s}return K(n.length,r.length)}function Gn(e){return ga(e)}function ga(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=en(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return nn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ga(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${ga(n.fields[a])}`;return i+"}"}(e.mapValue):$(61005,{value:e})}function Yi(e){switch(rn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Gs(e);return t?16+Yi(t):16;case 5:return 2*e.stringValue.length;case 6:return nn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Yi(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return an(r.fields,(s,a)=>{i+=s.length+Yi(a)}),i}(e.mapValue);default:throw $(13486,{value:e})}}function zc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function _a(e){return!!e&&"integerValue"in e}function pu(e){return!!e&&"arrayValue"in e}function Hc(e){return!!e&&"nullValue"in e}function Gc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zi(e){return!!e&&"mapValue"in e}function kv(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[wd])===null||n===void 0?void 0:n.stringValue)===Ed}function Fr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return an(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Fr(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ov(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Dv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.value=t}static empty(){return new Bt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Zi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fr(n)}setAll(t){let n=Et.emptyPath(),r={},i=[];t.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=u.popLast()}a?r[u.lastSegment()]=Fr(a):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());Zi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ve(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Zi(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){an(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Bt(Fr(this.value))}}function Td(e){const t=[];return an(e.fields,(n,r)=>{const i=new Et([n]);if(Zi(r)){const s=Td(r.mapValue).fields;if(s.length===0)t.push(i);else for(const a of s)t.push(i.child(a))}else t.push(i)}),new Gt(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t,n,r,i,s,a,u){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(t){return new Pt(t,0,j.min(),j.min(),j.min(),Bt.empty(),0)}static newFoundDocument(t,n,r,i){return new Pt(t,1,n,j.min(),r,i,0)}static newNoDocument(t,n){return new Pt(t,2,n,j.min(),j.min(),Bt.empty(),0)}static newUnknownDocument(t,n){return new Pt(t,3,n,j.min(),j.min(),Bt.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Pt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t,n){this.position=t,this.inclusive=n}}function Wc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(a.referenceValue),n.key):r=Hn(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ve(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t,n="asc"){this.field=t,this.dir=n}}function Mv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{}class mt extends Ad{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Fv(t,n,r):n==="array-contains"?new qv(t,r):n==="in"?new $v(t,r):n==="not-in"?new jv(t,r):n==="array-contains-any"?new zv(t,r):new mt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Uv(t,r):new Bv(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hn(n,this.value)):n!==null&&rn(this.value)===rn(n)&&this.matchesComparison(Hn(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ne extends Ad{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new ne(t,n)}matches(t){return Id(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Id(e){return e.op==="and"}function bd(e){return Lv(e)&&Id(e)}function Lv(e){for(const t of e.filters)if(t instanceof ne)return!1;return!0}function ya(e){if(e instanceof mt)return e.field.canonicalString()+e.op.toString()+Gn(e.value);if(bd(e))return e.filters.map(t=>ya(t)).join(",");{const t=e.filters.map(n=>ya(n)).join(",");return`${e.op}(${t})`}}function Rd(e,t){return e instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&ve(r.value,i.value)}(e,t):e instanceof ne?function(r,i){return i instanceof ne&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&Rd(a,i.filters[u]),!0):!1}(e,t):void $(19439)}function Sd(e){return e instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Gn(n.value)}`}(e):e instanceof ne?function(n){return n.op.toString()+" {"+n.getFilters().map(Sd).join(" ,")+"}"}(e):"Filter"}class Fv extends mt{constructor(t,n,r){super(t,n,r),this.key=q.fromName(r.referenceValue)}matches(t){const n=q.comparator(t.key,this.key);return this.matchesComparison(n)}}class Uv extends mt{constructor(t,n){super(t,"in",n),this.keys=Cd("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Bv extends mt{constructor(t,n){super(t,"not-in",n),this.keys=Cd("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Cd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class qv extends mt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return pu(n)&&Jr(n.arrayValue,this.value)}}class $v extends mt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Jr(this.value.arrayValue,n)}}class jv extends mt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Jr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jr(this.value.arrayValue,n)}}class zv extends mt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!pu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jr(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(t,n=null,r=[],i=[],s=null,a=null,u=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Pe=null}}function Qc(e,t=null,n=[],r=[],i=null,s=null,a=null){return new Hv(e,t,n,r,i,s,a)}function mu(e){const t=G(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>ya(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Hs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Gn(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Gn(r)).join(",")),t.Pe=n}return t.Pe}function gu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Mv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Rd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kc(e.startAt,t.startAt)&&Kc(e.endAt,t.endAt)}function va(e){return q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t,n=null,r=[],i=[],s=null,a="F",u=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Gv(e,t,n,r,i,s,a,u){return new sr(e,t,n,r,i,s,a,u)}function _u(e){return new sr(e)}function Xc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function xd(e){return e.collectionGroup!==null}function Ur(e){const t=G(e);if(t.Te===null){t.Te=[];const n=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new _t(Et.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(u=u.add(c.field))})}),u})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Te.push(new Yr(s,r))}),n.has(Et.keyField().canonicalString())||t.Te.push(new Yr(Et.keyField(),r))}return t.Te}function he(e){const t=G(e);return t.Ie||(t.Ie=Wv(t,Ur(e))),t.Ie}function Wv(e,t){if(e.limitType==="F")return Qc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Yr(i.field,s)});const n=e.endAt?new As(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new As(e.startAt.position,e.startAt.inclusive):null;return Qc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function wa(e,t){const n=e.filters.concat([t]);return new sr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Is(e,t,n){return new sr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ws(e,t){return gu(he(e),he(t))&&e.limitType===t.limitType}function Pd(e){return`${mu(he(e))}|lt:${e.limitType}`}function Mn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Sd(i)).join(", ")}]`),Hs(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Gn(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Gn(i)).join(",")),`Target(${r})`}(he(e))}; limitType=${e.limitType})`}function Ks(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Ur(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(a,u,l){const c=Wc(a,u,l);return a.inclusive?c<=0:c<0}(r.startAt,Ur(r),i)||r.endAt&&!function(a,u,l){const c=Wc(a,u,l);return a.inclusive?c>=0:c>0}(r.endAt,Ur(r),i))}(e,t)}function Kv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Vd(e){return(t,n)=>{let r=!1;for(const i of Ur(e)){const s=Qv(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Qv(e,t,n){const r=e.field.isKeyField()?q.comparator(t.key,n.key):function(s,a,u){const l=a.data.field(s),c=u.data.field(s);return l!==null&&c!==null?Hn(l,c):$(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){an(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return pd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new at(q.comparator);function Oe(){return Xv}const Nd=new at(q.comparator);function xr(...e){let t=Nd;for(const n of e)t=t.insert(n.key,n);return t}function Dd(e){let t=Nd;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function gn(){return Br()}function kd(){return Br()}function Br(){return new Cn(e=>e.toString(),(e,t)=>e.isEqual(t))}const Jv=new at(q.comparator),Yv=new _t(q.comparator);function Q(...e){let t=Yv;for(const n of e)t=t.add(n);return t}const Zv=new _t(K);function tw(){return Zv}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ws(t)?"-0":t}}function Od(e){return{integerValue:""+e}}function ew(e,t){return Cv(t)?Od(t):yu(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this._=void 0}}function nw(e,t,n){return e instanceof bs?function(i,s){const a={fields:{[_d]:{stringValue:gd},[vd]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&du(s)&&(s=Gs(s)),s&&(a.fields[yd]=s),{mapValue:a}}(n,t):e instanceof Zr?Ld(e,t):e instanceof ti?Fd(e,t):function(i,s){const a=Md(i,s),u=Jc(a)+Jc(i.Ee);return _a(a)&&_a(i.Ee)?Od(u):yu(i.serializer,u)}(e,t)}function rw(e,t,n){return e instanceof Zr?Ld(e,t):e instanceof ti?Fd(e,t):n}function Md(e,t){return e instanceof Rs?function(r){return _a(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class bs extends Qs{}class Zr extends Qs{constructor(t){super(),this.elements=t}}function Ld(e,t){const n=Ud(t);for(const r of e.elements)n.some(i=>ve(i,r))||n.push(r);return{arrayValue:{values:n}}}class ti extends Qs{constructor(t){super(),this.elements=t}}function Fd(e,t){let n=Ud(t);for(const r of e.elements)n=n.filter(i=>!ve(i,r));return{arrayValue:{values:n}}}class Rs extends Qs{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function Jc(e){return ht(e.integerValue||e.doubleValue)}function Ud(e){return pu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function iw(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof Zr&&i instanceof Zr||r instanceof ti&&i instanceof ti?zn(r.elements,i.elements,ve):r instanceof Rs&&i instanceof Rs?ve(r.Ee,i.Ee):r instanceof bs&&i instanceof bs}(e.transform,t.transform)}class sw{constructor(t,n){this.version=t,this.transformResults=n}}class fe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new fe}static exists(t){return new fe(void 0,t)}static updateTime(t){return new fe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ts(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xs{}function Bd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new $d(e.key,fe.none()):new li(e.key,e.data,fe.none());{const n=e.data,r=Bt.empty();let i=new _t(Et.comparator);for(let s of t.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new un(e.key,r,new Gt(i.toArray()),fe.none())}}function ow(e,t,n){e instanceof li?function(i,s,a){const u=i.value.clone(),l=Zc(i.fieldTransforms,s,a.transformResults);u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):e instanceof un?function(i,s,a){if(!ts(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=Zc(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(qd(i)),l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function qr(e,t,n,r){return e instanceof li?function(s,a,u,l){if(!ts(s.precondition,a))return u;const c=s.value.clone(),f=th(s.fieldTransforms,l,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof un?function(s,a,u,l){if(!ts(s.precondition,a))return u;const c=th(s.fieldTransforms,l,a),f=a.data;return f.setAll(qd(s)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(e,t,n,r):function(s,a,u){return ts(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(e,t,n)}function aw(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Md(r.transform,i||null);s!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,s))}return n||null}function Yc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zn(r,i,(s,a)=>iw(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class li extends Xs{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class un extends Xs{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Zc(e,t,n){const r=new Map;tt(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,u=t.data.field(s.field);r.set(s.field,rw(a,u,n[i]))}return r}function th(e,t,n){const r=new Map;for(const i of e){const s=i.transform,a=n.data.field(i.field);r.set(i.field,nw(s,a,t))}return r}class $d extends Xs{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uw extends Xs{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&ow(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=qr(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=qr(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=kd();return this.mutations.forEach(i=>{const s=t.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(i.key)?null:u;const l=Bd(a,u);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Q())}isEqual(t){return this.batchId===t.batchId&&zn(this.mutations,t.mutations,(n,r)=>Yc(n,r))&&zn(this.baseMutations,t.baseMutations,(n,r)=>Yc(n,r))}}class vu{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){tt(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return Jv}();const s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new vu(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,X;function fw(e){switch(e){case D.OK:return $(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return $(15467,{code:e})}}function jd(e){if(e===void 0)return De("GRPC error has no .code"),D.UNKNOWN;switch(e){case pt.OK:return D.OK;case pt.CANCELLED:return D.CANCELLED;case pt.UNKNOWN:return D.UNKNOWN;case pt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case pt.INTERNAL:return D.INTERNAL;case pt.UNAVAILABLE:return D.UNAVAILABLE;case pt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case pt.NOT_FOUND:return D.NOT_FOUND;case pt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case pt.ABORTED:return D.ABORTED;case pt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case pt.DATA_LOSS:return D.DATA_LOSS;default:return $(39323,{code:e})}}(X=pt||(pt={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=new Qe([4294967295,4294967295],0);function eh(e){const t=cd().encode(e),n=new nd;return n.update(t),new Uint8Array(n.digest())}function nh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Qe([n,r],0),new Qe([i,s],0)]}class wu{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pr(`Invalid padding: ${n}`);if(r<0)throw new Pr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Pr(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=Qe.fromNumber(this.fe)}pe(t,n,r){let i=t.add(n.multiply(Qe.fromNumber(r)));return i.compare(dw)===1&&(i=new Qe([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=eh(t),[r,i]=nh(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);if(!this.ye(a))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new wu(s,i,n);return r.forEach(u=>a.insert(u)),a}insert(t){if(this.fe===0)return;const n=eh(t),[r,i]=nh(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);this.we(a)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Pr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,ci.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Js(j.min(),i,new at(K),Oe(),Q())}}class ci{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ci(r,n,Q(),Q(),Q())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,n,r,i){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=i}}class zd{constructor(t,n){this.targetId=t,this.De=n}}class Hd{constructor(t,n,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class rh{constructor(){this.ve=0,this.Ce=ih(),this.Fe=Tt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Q(),n=Q(),r=Q();return this.Ce.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:s})}}),new ci(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=ih()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class pw{constructor(t){this.We=t,this.Ge=new Map,this.ze=Oe(),this.je=Hi(),this.Je=Hi(),this.He=new at(K)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:$(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(t){const n=t.targetId,r=t.De.count,i=this.st(n);if(i){const s=i.target;if(va(s))if(r===0){const a=new q(s.path);this.Xe(n,a,Pt.newNoDocument(a,j.min()))}else tt(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const u=this._t(t),l=u?this.ut(u,t,a):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,u;try{a=nn(r).toUint8Array()}catch(l){if(l instanceof md)return Ze("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new wu(a,i,s)}catch(l){return Ze(l instanceof Pr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.fe===0?null:u}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.We.lt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(u)||(this.Xe(n,s,null),i++)}),i}Pt(t){const n=new Map;this.Ge.forEach((s,a)=>{const u=this.st(a);if(u){if(s.current&&va(u.target)){const l=new q(u.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,Pt.newNoDocument(l,t))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let r=Q();this.Je.forEach((s,a)=>{let u=!0;a.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(t));const i=new Js(t,n,this.He,this.ze,r);return this.ze=Oe(),this.je=Hi(),this.Je=Hi(),this.He=new at(K),i}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const i=this.tt(t);this.It(t,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new rh,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new _t(K),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new _t(K),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||B("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new rh),this.We.getRemoteKeysForTarget(t).forEach(n=>{this.Xe(t,n,null)})}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function Hi(){return new at(q.comparator)}function ih(){return new at(q.comparator)}const mw={asc:"ASCENDING",desc:"DESCENDING"},gw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_w={and:"AND",or:"OR"};class yw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Ea(e,t){return e.useProto3Json||Hs(t)?t:{value:t}}function Ss(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vw(e,t){return Ss(e,t.toTimestamp())}function de(e){return tt(!!e,49232),j.fromTimestamp(function(n){const r=en(n);return new ot(r.seconds,r.nanos)}(e))}function Eu(e,t){return Ta(e,t).canonicalString()}function Ta(e,t){const n=function(i){return new it(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Wd(e){const t=it.fromString(e);return tt(Yd(t),10190,{key:t.toString()}),t}function Aa(e,t){return Eu(e.databaseId,t.path)}function Ko(e,t){const n=Wd(t);if(n.get(1)!==e.databaseId.projectId)throw new F(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new F(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new q(Qd(n))}function Kd(e,t){return Eu(e.databaseId,t)}function ww(e){const t=Wd(e);return t.length===4?it.emptyPath():Qd(t)}function Ia(e){return new it(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qd(e){return tt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function sh(e,t,n){return{name:Aa(e,t),fields:n.value.mapValue.fields}}function Ew(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:$(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(tt(f===void 0||typeof f=="string",58123),Tt.fromBase64String(f||"")):(tt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Tt.fromUint8Array(f||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,u=a&&function(c){const f=c.code===void 0?D.UNKNOWN:jd(c.code);return new F(f,c.message||"")}(a);n=new Hd(r,i,s,u||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ko(e,r.document.name),s=de(r.document.updateTime),a=r.document.createTime?de(r.document.createTime):j.min(),u=new Bt({mapValue:{fields:r.document.fields}}),l=Pt.newFoundDocument(i,s,a,u),c=r.targetIds||[],f=r.removedTargetIds||[];n=new es(c,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ko(e,r.document),s=r.readTime?de(r.readTime):j.min(),a=Pt.newNoDocument(i,s),u=r.removedTargetIds||[];n=new es([],u,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ko(e,r.document),s=r.removedTargetIds||[];n=new es([],s,i,null)}else{if(!("filter"in t))return $(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new hw(i,s),u=r.targetId;n=new zd(u,a)}}return n}function Tw(e,t){let n;if(t instanceof li)n={update:sh(e,t.key,t.value)};else if(t instanceof $d)n={delete:Aa(e,t.key)};else if(t instanceof un)n={update:sh(e,t.key,t.data),updateMask:Vw(t.fieldMask)};else{if(!(t instanceof uw))return $(16599,{Rt:t.type});n={verify:Aa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,a){const u=a.transform;if(u instanceof bs)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ti)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Rs)return{fieldPath:a.field.canonicalString(),increment:u.Ee};throw $(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vw(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$(27497)}(e,t.precondition)),n}function Aw(e,t){return e&&e.length>0?(tt(t!==void 0,14353),e.map(n=>function(i,s){let a=i.updateTime?de(i.updateTime):de(s);return a.isEqual(j.min())&&(a=de(s)),new sw(a,i.transformResults||[])}(n,t))):[]}function Iw(e,t){return{documents:[Kd(e,t.path)]}}function bw(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kd(e,i);const s=function(c){if(c.length!==0)return Jd(ne.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(f=>function(p){return{field:Ln(p.field),direction:Cw(p.dir)}}(f))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Ea(e,t.limit);return u!==null&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{Vt:n,parent:i}}function Rw(e){let t=ww(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tt(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:t=t.child(f.collectionId)}let s=[];n.where&&(s=function(m){const p=Xd(m);return p instanceof ne&&bd(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(v){return new Yr(Fn(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let u=null;n.limit&&(u=function(m){let p;return p=typeof m=="object"?m.value:m,Hs(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(m){const p=!!m.before,_=m.values||[];return new As(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const p=!m.before,_=m.values||[];return new As(_,p)}(n.endAt)),Gv(t,i,a,s,u,"F",l,c)}function Sw(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Xd(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fn(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fn(n.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fn(n.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Fn(n.unaryFilter.field);return mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(e):e.fieldFilter!==void 0?function(n){return mt.create(Fn(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ne.create(n.compositeFilter.filters.map(r=>Xd(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(n.compositeFilter.op))}(e):$(30097,{filter:e})}function Cw(e){return mw[e]}function xw(e){return gw[e]}function Pw(e){return _w[e]}function Ln(e){return{fieldPath:e.canonicalString()}}function Fn(e){return Et.fromServerFormat(e.fieldPath)}function Jd(e){return e instanceof mt?function(n){if(n.op==="=="){if(Gc(n.value))return{unaryFilter:{field:Ln(n.field),op:"IS_NAN"}};if(Hc(n.value))return{unaryFilter:{field:Ln(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gc(n.value))return{unaryFilter:{field:Ln(n.field),op:"IS_NOT_NAN"}};if(Hc(n.value))return{unaryFilter:{field:Ln(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ln(n.field),op:xw(n.op),value:n.value}}}(e):e instanceof ne?function(n){const r=n.getFilters().map(i=>Jd(i));return r.length===1?r[0]:{compositeFilter:{op:Pw(n.op),filters:r}}}(e):$(54877,{filter:e})}function Vw(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Yd(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t,n,r,i,s=j.min(),a=j.min(),u=Tt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(t){return new Ge(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ge(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ge(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ge(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t){this.gt=t}}function Dw(e){const t=Rw({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Is(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.Dn=new Ow}addToCollectionParentIndex(t,n){return this.Dn.add(n),O.resolve()}getCollectionParents(t,n){return O.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return O.resolve()}deleteFieldIndex(t,n){return O.resolve()}deleteAllFieldIndexes(t){return O.resolve()}createTargetIndexes(t,n){return O.resolve()}getDocumentsMatchingTarget(t,n){return O.resolve(null)}getIndexType(t,n){return O.resolve(0)}getFieldIndexes(t,n){return O.resolve([])}getNextCollectionGroupToUpdate(t){return O.resolve(null)}getMinOffset(t,n){return O.resolve(tn.min())}getMinOffsetFromCollectionGroup(t,n){return O.resolve(tn.min())}updateCollectionGroup(t,n,r){return O.resolve()}updateIndexEntries(t,n){return O.resolve()}}class Ow{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new _t(it.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new _t(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zd=41943040;class Ut{static withCacheSize(t){return new Ut(t,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(Zd,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Wn(0)}static ur(){return new Wn(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="LruGarbageCollector",Mw=1048576;function uh([e,t],[n,r]){const i=K(e,n);return i===0?K(t,r):i}class Lw{constructor(t){this.Tr=t,this.buffer=new _t(uh),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();uh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Fw{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){B(ah,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ir(n)?B(ah,"Ignoring IndexedDB error during garbage collection: ",n):await rr(n)}await this.Rr(3e5)})}}class Uw{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return O.resolve(zs.ue);const r=new Lw(n);return this.Vr.forEachTarget(t,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(oh)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oh):this.pr(t,n))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,i,s,a,u,l,c;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(t,i))).next(m=>(r=m,u=Date.now(),this.removeTargets(t,r,n))).next(m=>(s=m,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(m=>(c=Date.now(),On()<=J.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(l-u)+`ms
	Removed ${m} documents in `+(c-l)+`ms
Total Duration: ${c-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function Bw(e,t){return new Uw(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.changes=new Cn(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Pt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&qr(r.mutation,i,Gt.empty(),ot.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Q()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Q()){const i=gn();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let a=xr();return s.forEach((u,l)=>{a=a.insert(u,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=gn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Q()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((a,u)=>{n.set(a,u)})})}computeViews(t,n,r,i){let s=Oe();const a=Br(),u=function(){return Br()}();return n.forEach((l,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof un)?s=s.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),qr(f.mutation,c,f.mutation.getFieldMask(),ot.now())):a.set(c.key,Gt.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,f)=>a.set(c,f)),n.forEach((c,f)=>{var m;return u.set(c,new $w(f,(m=a.get(c))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(t,n){const r=Br();let i=new at((a,u)=>a-u),s=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const u of a)u.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let f=r.get(l)||Gt.empty();f=u.applyToLocalView(c,f),r.set(l,f);const m=(i.get(u.batchId)||Q()).add(l);i=i.insert(u.batchId,m)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const l=u.getNext(),c=l.key,f=l.value,m=kd();f.forEach(p=>{if(!s.has(p)){const _=Bd(n.get(p),r.get(p));_!==null&&m.set(p,_),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(t,c,m))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(a){return q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):xd(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):O.resolve(gn());let u=Kr,l=s;return a.next(c=>O.forEach(c,(f,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(t,f).next(p=>{l=l.insert(f,p)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,Q())).next(f=>({batchId:u,changes:Dd(f)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new q(n)).next(r=>{let i=xr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let a=xr();return this.indexManager.getCollectionParents(t,s).next(u=>O.forEach(u,l=>{const c=function(m,p){return new sr(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,r,i).next(f=>{f.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(a=>{s.forEach((l,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,Pt.newInvalidDocument(f)))});let u=xr();return a.forEach((l,c)=>{const f=s.get(l);f!==void 0&&qr(f.mutation,c,Gt.empty(),ot.now()),Ks(n,c)&&(u=u.insert(l,c))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return O.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:de(i.createTime)}}(n)),O.resolve()}getNamedQuery(t,n){return O.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:Dw(i.bundledQuery),readTime:de(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.overlays=new at(q.comparator),this.kr=new Map}getOverlay(t,n){return O.resolve(this.overlays.get(n))}getOverlays(t,n){const r=gn();return O.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.wt(t,n,s)}),O.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),O.resolve()}getOverlaysForCollection(t,n,r){const i=gn(),s=n.length+1,a=new q(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const l=u.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new at((c,f)=>c-f);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=gn(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const u=gn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,f)=>u.set(c,f)),!(u.size()>=i)););return O.resolve(u)}wt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new cw(n,r));let s=this.kr.get(n);s===void 0&&(s=Q(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(t){return O.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this.qr=new _t(yt.Qr),this.$r=new _t(yt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new yt(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Wr(new yt(t,n))}Gr(t,n){t.forEach(r=>this.removeReference(r,n))}zr(t){const n=new q(new it([])),r=new yt(n,t),i=new yt(n,t+1),s=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new q(new it([])),r=new yt(n,t),i=new yt(n,t+1);let s=Q();return this.$r.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new yt(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class yt{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return q.comparator(t.key,n.key)||K(t.Hr,n.Hr)}static Ur(t,n){return K(t.Hr,n.Hr)||q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new _t(yt.Qr)}checkEmpty(t){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new lw(s,n,r,i);this.mutationQueue.push(a);for(const u of i)this.Yr=this.Yr.add(new yt(u.key,s)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return O.resolve(a)}lookupMutationBatch(t,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?fu:this.er-1)}getAllMutationBatches(t){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new yt(n,0),i=new yt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],a=>{const u=this.Zr(a.Hr);s.push(u)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new _t(K);return n.forEach(i=>{const s=new yt(i,0),a=new yt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],u=>{r=r.add(u.Hr)})}),O.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const a=new yt(new q(s),0);let u=new _t(K);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(u=u.add(l.Hr)),!0)},a),O.resolve(this.ei(u))}ei(t){const n=[];return t.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){tt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return O.forEach(n.mutations,i=>{const s=new yt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=r})}rr(t){}containsKey(t,n){const r=new yt(n,0),i=this.Yr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,O.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t){this.ni=t,this.docs=function(){return new at(q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(t,n){let r=Oe();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Oe();const a=n.path,u=new q(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Iv(Av(f),r)<=0||(i.has(f.key)||Ks(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(t,n,r,i){$(9500)}ri(t,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Qw(this)}getSize(t){return O.resolve(this.size)}}class Qw extends qw{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(t,i)):this.Or.removeEntry(r)}),O.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t){this.persistence=t,this.ii=new Cn(n=>mu(n),gu),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.si=0,this.oi=new Tu,this.targetCount=0,this._i=Wn.ar()}forEachTarget(t,n){return this.ii.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(t){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return O.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),O.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new Wn(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,O.resolve()}updateTargetData(t,n){return this.hr(n),O.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.ii.forEach((a,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(t,u.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(t){return O.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return O.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),O.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(t,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),O.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return O.resolve(r)}containsKey(t,n){return O.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(t,n){this.ai={},this.overlays={},this.ui=new zs(0),this.ci=!1,this.ci=!0,this.li=new Gw,this.referenceDelegate=t(this),this.hi=new Xw(this),this.indexManager=new kw,this.remoteDocumentCache=function(i){return new Kw(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Nw(n),this.Ti=new zw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Hw,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new Ww(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){B("MemoryPersistence","Starting transaction:",t);const i=new Jw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(t,n){return O.or(Object.values(this.ai).map(r=>()=>r.containsKey(t,n)))}}class Jw extends Rv{constructor(t){super(),this.currentSequenceNumber=t}}class Au{constructor(t){this.persistence=t,this.Ai=new Tu,this.Ri=null}static Vi(t){return new Au(t)}get mi(){if(this.Ri)return this.Ri;throw $(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),O.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),O.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.mi,r=>{const i=q.fromPath(r);return this.fi(t,i).next(s=>{s||n.removeEntry(i,j.min())})}).next(()=>(this.Ri=null,n.apply(t)))}updateLimboDocument(t,n){return this.fi(t,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(t){return 0}fi(t,n){return O.or([()=>O.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class Cs{constructor(t,n){this.persistence=t,this.gi=new Cn(r=>xv(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Bw(this,n)}static Vi(t,n){return new Cs(t,n)}Ii(){}di(t){return O.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}yr(t){let n=0;return this.gr(t,r=>{n++}).next(()=>n)}gr(t,n){return O.forEach(this.gi,(r,i)=>this.Sr(t,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(t,a=>this.Sr(t,a,n).next(u=>{u||(r++,s.removeEntry(a,j.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),O.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),O.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),O.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),O.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Yi(t.data.value)),n}Sr(t,n,r){return O.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.gi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=i}static Es(t,n){let r=Q(),i=Q();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Iu(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return H_()?8:Sv(j_())>0?6:4}()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ps(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(t,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Yw;return this.ws(t,n,a).next(u=>{if(s.result=u,this.Rs)return this.Ss(t,n,a,u.size)})}).next(()=>s.result)}Ss(t,n,r,i){return r.documentReadCount<this.Vs?(On()<=J.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Mn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(On()<=J.DEBUG&&B("QueryEngine","Query:",Mn(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(On()<=J.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Mn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,he(n))):O.resolve())}ps(t,n){if(Xc(n))return O.resolve(null);let r=he(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Is(n,null,"F"),r=he(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const a=Q(...s);return this.gs.getDocuments(t,a).next(u=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.bs(n,u);return this.Ds(n,c,a,l.readTime)?this.ps(t,Is(n,null,"F")):this.vs(t,c,n,l)}))})))}ys(t,n,r,i){return Xc(n)||i.isEqual(j.min())?O.resolve(null):this.gs.getDocuments(t,r).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,r,i)?O.resolve(null):(On()<=J.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mn(n)),this.vs(t,a,n,Tv(i,Kr)).next(u=>u))})}bs(t,n){let r=new _t(Vd(t));return n.forEach((i,s)=>{Ks(t,s)&&(r=r.add(s))}),r}Ds(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(t,n,r){return On()<=J.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Mn(n)),this.gs.getDocumentsMatchingQuery(t,n,tn.min(),r)}vs(t,n,r,i){return this.gs.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu="LocalStore",t0=3e8;class e0{constructor(t,n,r,i){this.persistence=t,this.Cs=n,this.serializer=i,this.Fs=new at(K),this.Ms=new Cn(s=>mu(s),gu),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Fs))}}function n0(e,t,n,r){return new e0(e,t,n,r)}async function ep(e,t){const n=G(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],u=[];let l=Q();for(const c of i){a.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of s){u.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:a,addedBatchIds:u}))})})}function r0(e,t){const n=G(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,l,c,f){const m=c.batch,p=m.keys();let _=O.resolve();return p.forEach(v=>{_=_.next(()=>f.getEntry(l,v)).next(A=>{const E=c.docVersions.get(v);tt(E!==null,48541),A.version.compareTo(E)<0&&(m.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),f.addEntry(A)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(l,m))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let l=Q();for(let c=0;c<u.mutationResults.length;++c)u.mutationResults[c].transformResults.length>0&&(l=l.add(u.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function np(e){const t=G(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.hi.getLastRemoteSnapshotVersion(n))}function i0(e,t){const n=G(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];t.targetChanges.forEach((f,m)=>{const p=i.get(m);if(!p)return;u.push(n.hi.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.hi.addMatchingKeys(s,f.addedDocuments,m)));let _=p.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(m)!==null?_=_.withResumeToken(Tt.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(m,_),function(A,E,x){return A.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=t0?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,_,f)&&u.push(n.hi.updateTargetData(s,_))});let l=Oe(),c=Q();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),u.push(s0(s,a,t.documentUpdates).next(f=>{l=f.Ls,c=f.ks})),!r.isEqual(j.min())){const f=n.hi.getLastRemoteSnapshotVersion(s).next(m=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(f)}return O.waitFor(u).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=i,s))}function s0(e,t,n){let r=Q(),i=Q();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let a=Oe();return n.forEach((u,l)=>{const c=s.get(u);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(u)),l.isNoDocument()&&l.version.isEqual(j.min())?(t.removeEntry(u,l.readTime),a=a.insert(u,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),a=a.insert(u,l)):B(bu,"Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version)}),{Ls:a,ks:i}})}function o0(e,t){const n=G(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=fu),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function a0(e,t){const n=G(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,t).next(s=>s?(i=s,O.resolve(i)):n.hi.allocateTargetId(r).next(a=>(i=new Ge(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r})}async function ba(e,t,n){const r=G(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ir(a))throw a;B(bu,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function lh(e,t,n){const r=G(e);let i=j.min(),s=Q();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,f){const m=G(l),p=m.Ms.get(f);return p!==void 0?O.resolve(m.Fs.get(p)):m.hi.getTargetData(c,f)}(r,a,he(t)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,u.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,t,n?i:j.min(),n?s:Q())).next(u=>(u0(r,Kv(t),u),{documents:u,qs:s})))}function u0(e,t,n){let r=e.xs.get(t)||j.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.xs.set(t,r)}class ch{constructor(){this.activeTargetIds=tw()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class l0{constructor(){this.Fo=new ch,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new ch,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="ConnectivityMonitor";class fh{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(hh,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){B(hh,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi=null;function Ra(){return Gi===null?Gi=function(){return 268435456+Math.round(2147483648*Math.random())}():Gi++,"0x"+Gi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="RestConnection",h0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class f0{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Es?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(t,n,r,i,s){const a=Ra(),u=this.Go(t,n.toUriEncodedString());B(Qo,`Sending RPC '${t}' ${a}:`,u,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:c}=new URL(u),f=uu(c);return this.jo(t,u,l,r,f).then(m=>(B(Qo,`Received RPC '${t}' ${a}: `,m),m),m=>{throw Ze(Qo,`RPC '${t}' ${a} failed with error: `,m,"url: ",u,"request:",r),m})}Jo(t,n,r,i,s,a){return this.Wo(t,n,r,i,s)}zo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}Go(t,n){const r=h0[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class p0 extends f0{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,i,s){const a=Ra();return new Promise((u,l)=>{const c=new rd;c.setWithCredentials(!0),c.listenOnce(id.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ji.NO_ERROR:const m=c.getResponseJson();B(Ct,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),u(m);break;case Ji.TIMEOUT:B(Ct,`RPC '${t}' ${a} timed out`),l(new F(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ji.HTTP_ERROR:const p=c.getStatus();if(B(Ct,`RPC '${t}' ${a} failed with status:`,p,"response text:",c.getResponseText()),p>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const A=function(x){const V=x.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(V)>=0?V:D.UNKNOWN}(v.status);l(new F(A,v.message))}else l(new F(D.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new F(D.UNAVAILABLE,"Connection failed."));break;default:$(9055,{c_:t,streamId:a,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{B(Ct,`RPC '${t}' ${a} completed.`)}});const f=JSON.stringify(i);B(Ct,`RPC '${t}' ${a} sending request:`,i),c.send(n,"POST",f,r,15)})}P_(t,n,r){const i=Ra(),s=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=ad(),u=od(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=s.join("");B(Ct,`Creating RPC '${t}' stream ${i}: ${f}`,l);const m=a.createWebChannel(f,l);this.T_(m);let p=!1,_=!1;const v=new d0({Ho:E=>{_?B(Ct,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(p||(B(Ct,`Opening RPC '${t}' stream ${i} transport.`),m.open(),p=!0),B(Ct,`RPC '${t}' stream ${i} sending:`,E),m.send(E))},Yo:()=>m.close()}),A=(E,x,V)=>{E.listen(x,M=>{try{V(M)}catch(k){setTimeout(()=>{throw k},0)}})};return A(m,Cr.EventType.OPEN,()=>{_||(B(Ct,`RPC '${t}' stream ${i} transport opened.`),v.s_())}),A(m,Cr.EventType.CLOSE,()=>{_||(_=!0,B(Ct,`RPC '${t}' stream ${i} transport closed`),v.__(),this.I_(m))}),A(m,Cr.EventType.ERROR,E=>{_||(_=!0,Ze(Ct,`RPC '${t}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),v.__(new F(D.UNAVAILABLE,"The operation could not be completed")))}),A(m,Cr.EventType.MESSAGE,E=>{var x;if(!_){const V=E.data[0];tt(!!V,16349);const M=V,k=M?.error||((x=M[0])===null||x===void 0?void 0:x.error);if(k){B(Ct,`RPC '${t}' stream ${i} received error:`,k);const U=k.status;let z=function(T){const R=pt[T];if(R!==void 0)return jd(R)}(U),I=k.message;z===void 0&&(z=D.INTERNAL,I="Unknown error status: "+U+" with message "+k.message),_=!0,v.__(new F(z,I)),m.close()}else B(Ct,`RPC '${t}' stream ${i} received:`,V),v.a_(V)}}),A(u,sd.STAT_EVENT,E=>{E.stat===pa.PROXY?B(Ct,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===pa.NOPROXY&&B(Ct,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(n=>n===t)}}function Xo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(e){return new yw(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(t,n,r=1e3,i=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="PersistentStream";class ip{constructor(t,n,r,i,s,a,u,l){this.Fi=t,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new rp(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(De(n.toString()),De("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{t(()=>{const i=new F(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return B(dh,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget(()=>this.b_===t?n():(B(dh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m0 extends ip{constructor(t,n,r,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=Ew(this.serializer,t),r=function(s){if(!("targetChange"in s))return j.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?j.min():a.readTime?de(a.readTime):j.min()}(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=Ia(this.serializer),n.addTarget=function(s,a){let u;const l=a.target;if(u=va(l)?{documents:Iw(s,l)}:{query:bw(s,l).Vt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Gd(s,a.resumeToken);const c=Ea(s,a.expectedCount);c!==null&&(u.expectedCount=c)}else if(a.snapshotVersion.compareTo(j.min())>0){u.readTime=Ss(s,a.snapshotVersion.toTimestamp());const c=Ea(s,a.expectedCount);c!==null&&(u.expectedCount=c)}return u}(this.serializer,t);const r=Sw(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=Ia(this.serializer),n.removeTarget=t,this.k_(n)}}class g0 extends ip{constructor(t,n,r,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return tt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,tt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){tt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=Aw(t.writeResults,t.commitTime),r=de(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=Ia(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Tw(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{}class y0 extends _0{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(D.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(t,Ta(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(D.UNKNOWN,s.toString())})}Jo(t,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Jo(t,Ta(n,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(D.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class v0{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(De(n),this._a=!1):B("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="RemoteStore";class w0{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{xn(this)&&(B(In,"Restarting streams for network reachability change."),await async function(l){const c=G(l);c.Ia.add(4),await hi(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Zs(c)}(this))})}),this.Aa=new v0(r,i)}}async function Zs(e){if(xn(e))for(const t of e.da)await t(!0)}async function hi(e){for(const t of e.da)await t(!1)}function sp(e,t){const n=G(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),xu(n)?Cu(n):or(n).x_()&&Su(n,t))}function Ru(e,t){const n=G(e),r=or(n);n.Ta.delete(t),r.x_()&&op(n,t),n.Ta.size===0&&(r.x_()?r.B_():xn(n)&&n.Aa.set("Unknown"))}function Su(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(j.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}or(e).H_(t)}function op(e,t){e.Ra.$e(t),or(e).Y_(t)}function Cu(e){e.Ra=new pw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),or(e).start(),e.Aa.aa()}function xu(e){return xn(e)&&!or(e).M_()&&e.Ta.size>0}function xn(e){return G(e).Ia.size===0}function ap(e){e.Ra=void 0}async function E0(e){e.Aa.set("Online")}async function T0(e){e.Ta.forEach((t,n)=>{Su(e,t)})}async function A0(e,t){ap(e),xu(e)?(e.Aa.la(t),Cu(e)):e.Aa.set("Unknown")}async function I0(e,t,n){if(e.Aa.set("Online"),t instanceof Hd&&t.state===2&&t.cause)try{await async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ta.delete(u),i.Ra.removeTarget(u))}(e,t)}catch(r){B(In,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await xs(e,r)}else if(t instanceof es?e.Ra.Ye(t):t instanceof zd?e.Ra.it(t):e.Ra.et(t),!n.isEqual(j.min()))try{const r=await np(e.localStore);n.compareTo(r)>=0&&await function(s,a){const u=s.Ra.Pt(a);return u.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.Ta.get(c);f&&s.Ta.set(c,f.withResumeToken(l.resumeToken,a))}}),u.targetMismatches.forEach((l,c)=>{const f=s.Ta.get(l);if(!f)return;s.Ta.set(l,f.withResumeToken(Tt.EMPTY_BYTE_STRING,f.snapshotVersion)),op(s,l);const m=new Ge(f.target,l,c,f.sequenceNumber);Su(s,m)}),s.remoteSyncer.applyRemoteEvent(u)}(e,n)}catch(r){B(In,"Failed to raise snapshot:",r),await xs(e,r)}}async function xs(e,t,n){if(!ir(t))throw t;e.Ia.add(1),await hi(e),e.Aa.set("Offline"),n||(n=()=>np(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{B(In,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Zs(e)})}function up(e,t){return t().catch(n=>xs(e,n,t))}async function to(e){const t=G(e),n=sn(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:fu;for(;b0(t);)try{const i=await o0(t.localStore,r);if(i===null){t.Pa.length===0&&n.B_();break}r=i.batchId,R0(t,i)}catch(i){await xs(t,i)}lp(t)&&cp(t)}function b0(e){return xn(e)&&e.Pa.length<10}function R0(e,t){e.Pa.push(t);const n=sn(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function lp(e){return xn(e)&&!sn(e).M_()&&e.Pa.length>0}function cp(e){sn(e).start()}async function S0(e){sn(e).na()}async function C0(e){const t=sn(e);for(const n of e.Pa)t.X_(n.mutations)}async function x0(e,t,n){const r=e.Pa.shift(),i=vu.from(r,t,n);await up(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await to(e)}async function P0(e,t){t&&sn(e).Z_&&await async function(r,i){if(function(a){return fw(a)&&a!==D.ABORTED}(i.code)){const s=r.Pa.shift();sn(r).N_(),await up(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await to(r)}}(e,t),lp(e)&&cp(e)}async function ph(e,t){const n=G(e);n.asyncQueue.verifyOperationInProgress(),B(In,"RemoteStore received new credentials");const r=xn(n);n.Ia.add(3),await hi(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Zs(n)}async function V0(e,t){const n=G(e);t?(n.Ia.delete(2),await Zs(n)):t||(n.Ia.add(2),await hi(n),n.Aa.set("Unknown"))}function or(e){return e.Va||(e.Va=function(n,r,i){const s=G(n);return s.ia(),new m0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Zo:E0.bind(null,e),e_:T0.bind(null,e),n_:A0.bind(null,e),J_:I0.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),xu(e)?Cu(e):e.Aa.set("Unknown")):(await e.Va.stop(),ap(e))})),e.Va}function sn(e){return e.ma||(e.ma=function(n,r,i){const s=G(n);return s.ia(),new g0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:S0.bind(null,e),n_:P0.bind(null,e),ea:C0.bind(null,e),ta:x0.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await to(e)):(await e.ma.stop(),e.Pa.length>0&&(B(In,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const a=Date.now()+r,u=new Pu(t,n,a,i,s);return u.start(r),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(D.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vu(e,t){if(De("AsyncQueue",`${t}: ${e}`),ir(e))return new F(D.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{static emptySet(t){return new qn(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=xr(),this.sortedSet=new at(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof qn)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new qn;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this.fa=new at(q.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):$(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal((n,r)=>{t.push(r)}),t}}class Kn{constructor(t,n,r,i,s,a,u,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Kn(t,n,qn.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ws(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class D0{constructor(){this.queries=gh(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=G(n),s=i.queries;i.queries=gh(),s.forEach((a,u)=>{for(const l of u.wa)l.onError(r)})})(this,new F(D.ABORTED,"Firestore shutting down"))}}function gh(){return new Cn(e=>Pd(e),Ws)}async function hp(e,t){const n=G(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new N0,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const u=Vu(a,`Initialization of query '${Mn(t.query)}' failed`);return void t.onError(u)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&Nu(n)}async function fp(e,t){const n=G(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const a=s.wa.indexOf(t);a>=0&&(s.wa.splice(a,1),s.wa.length===0?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k0(e,t){const n=G(e);let r=!1;for(const i of t){const s=i.query,a=n.queries.get(s);if(a){for(const u of a.wa)u.Ca(i)&&(r=!0);a.ya=i}}r&&Nu(n)}function O0(e,t,n){const r=G(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function Nu(e){e.Da.forEach(t=>{t.next()})}var Sa,_h;(_h=Sa||(Sa={})).Fa="default",_h.Cache="cache";class dp{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Kn(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Kn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Sa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t){this.key=t}}class mp{constructor(t){this.key=t}}class M0{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Q(),this.mutatedKeys=Q(),this.Xa=Vd(t),this.eu=new qn(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new mh,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,u=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((f,m)=>{const p=i.get(f),_=Ks(this.query,m)?m:null,v=!!p&&this.mutatedKeys.has(p.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let E=!1;p&&_?p.data.isEqual(_.data)?v!==A&&(r.track({type:3,doc:_}),E=!0):this.iu(p,_)||(r.track({type:2,doc:_}),E=!0,(l&&this.Xa(_,l)>0||c&&this.Xa(_,c)<0)&&(u=!0)):!p&&_?(r.track({type:0,doc:_}),E=!0):p&&!_&&(r.track({type:1,doc:p}),E=!0,(l||c)&&(u=!0)),E&&(_?(a=a.add(_),s=A?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{eu:a,ru:r,Ds:u,mutatedKeys:s}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const a=t.ru.pa();a.sort((f,m)=>function(_,v){const A=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{At:E})}};return A(_)-A(v)}(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,a.length!==0||c?{snapshot:new Kn(this.query,t.eu,s,a,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new mh,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Q(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return t.forEach(r=>{this.Za.has(r)||n.push(new mp(r))}),this.Za.forEach(r=>{t.has(r)||n.push(new pp(r))}),n}uu(t){this.Ha=t.qs,this.Za=Q();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Kn.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Du="SyncEngine";class L0{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class F0{constructor(t){this.key=t,this.lu=!1}}class U0{constructor(t,n,r,i,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Cn(u=>Pd(u),Ws),this.Tu=new Map,this.Iu=new Set,this.du=new at(q.comparator),this.Eu=new Map,this.Au=new Tu,this.Ru={},this.Vu=new Map,this.mu=Wn.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function B0(e,t,n=!0){const r=Ep(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await gp(r,t,n,!0),i}async function q0(e,t){const n=Ep(e);await gp(n,t,!0,!1)}async function gp(e,t,n,r){const i=await a0(e.localStore,he(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await $0(e,t,s,a==="current",i.resumeToken)),e.isPrimaryClient&&n&&sp(e.remoteStore,i),u}async function $0(e,t,n,r,i){e.gu=(m,p,_)=>async function(A,E,x,V){let M=E.view.nu(x);M.Ds&&(M=await lh(A.localStore,E.query,!1).then(({documents:I})=>E.view.nu(I,M)));const k=V&&V.targetChanges.get(E.targetId),U=V&&V.targetMismatches.get(E.targetId)!=null,z=E.view.applyChanges(M,A.isPrimaryClient,k,U);return vh(A,E.targetId,z._u),z.snapshot}(e,m,p,_);const s=await lh(e.localStore,t,!0),a=new M0(t,s.qs),u=a.nu(s.documents),l=ci.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),c=a.applyChanges(u,e.isPrimaryClient,l);vh(e,n,c._u);const f=new L0(t,n,a);return e.Pu.set(t,f),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function j0(e,t,n){const r=G(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(a=>!Ws(a,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ba(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ru(r.remoteStore,i.targetId),Ca(r,i.targetId)}).catch(rr)):(Ca(r,i.targetId),await ba(r.localStore,i.targetId,!0))}async function z0(e,t){const n=G(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ru(n.remoteStore,r.targetId))}async function H0(e,t,n){const r=Y0(e);try{const i=await function(a,u){const l=G(a),c=ot.now(),f=u.reduce((_,v)=>_.add(v.key),Q());let m,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let v=Oe(),A=Q();return l.Os.getEntries(_,f).next(E=>{v=E,v.forEach((x,V)=>{V.isValidDocument()||(A=A.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,v)).next(E=>{m=E;const x=[];for(const V of u){const M=aw(V,m.get(V.key).overlayedDocument);M!=null&&x.push(new un(V.key,M,Td(M.value.mapValue),fe.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,x,u)}).next(E=>{p=E;const x=E.applyToLocalDocumentSet(m,A);return l.documentOverlayCache.saveOverlays(_,E.batchId,x)})}).then(()=>({batchId:p.batchId,changes:Dd(m)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,l){let c=a.Ru[a.currentUser.toKey()];c||(c=new at(K)),c=c.insert(u,l),a.Ru[a.currentUser.toKey()]=c}(r,i.batchId,n),await fi(r,i.changes),await to(r.remoteStore)}catch(i){const s=Vu(i,"Failed to persist write");n.reject(s)}}async function _p(e,t){const n=G(e);try{const r=await i0(n.localStore,t);t.targetChanges.forEach((i,s)=>{const a=n.Eu.get(s);a&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?tt(a.lu,14607):i.removedDocuments.size>0&&(tt(a.lu,42227),a.lu=!1))}),await fi(n,r,t)}catch(r){await rr(r)}}function yh(e,t,n){const r=G(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,a)=>{const u=a.view.va(t);u.snapshot&&i.push(u.snapshot)}),function(a,u){const l=G(a);l.onlineState=u;let c=!1;l.queries.forEach((f,m)=>{for(const p of m.wa)p.va(u)&&(c=!0)}),c&&Nu(l)}(r.eventManager,t),i.length&&r.hu.J_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function G0(e,t,n){const r=G(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let a=new at(q.comparator);a=a.insert(s,Pt.newNoDocument(s,j.min()));const u=Q().add(s),l=new Js(j.min(),new Map,new at(K),a,u);await _p(r,l),r.du=r.du.remove(s),r.Eu.delete(t),ku(r)}else await ba(r.localStore,t,!1).then(()=>Ca(r,t,n)).catch(rr)}async function W0(e,t){const n=G(e),r=t.batch.batchId;try{const i=await r0(n.localStore,t);vp(n,r,null),yp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fi(n,i)}catch(i){await rr(i)}}async function K0(e,t,n){const r=G(e);try{const i=await function(a,u){const l=G(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return l.mutationQueue.lookupMutationBatch(c,u).next(m=>(tt(m!==null,37113),f=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>l.localDocuments.getDocuments(c,f))})}(r.localStore,t);vp(r,t,n),yp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fi(r,i)}catch(i){await rr(i)}}function yp(e,t){(e.Vu.get(t)||[]).forEach(n=>{n.resolve()}),e.Vu.delete(t)}function vp(e,t,n){const r=G(e);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Ca(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(r=>{e.Au.containsKey(r)||wp(e,r)})}function wp(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ru(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),ku(e))}function vh(e,t,n){for(const r of n)r instanceof pp?(e.Au.addReference(r.key,t),Q0(e,r)):r instanceof mp?(B(Du,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||wp(e,r.key)):$(19791,{yu:r})}function Q0(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(B(Du,"New document in limbo: "+n),e.Iu.add(r),ku(e))}function ku(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new q(it.fromString(t)),r=e.mu.next();e.Eu.set(r,new F0(n)),e.du=e.du.insert(n,r),sp(e.remoteStore,new Ge(he(_u(n.path)),r,"TargetPurposeLimboResolution",zs.ue))}}async function fi(e,t,n){const r=G(e),i=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((u,l)=>{a.push(r.gu(l,t,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(f=n?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){i.push(c);const m=Iu.Es(l.targetId,c);s.push(m)}}))}),await Promise.all(a),r.hu.J_(i),await async function(l,c){const f=G(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(c,p=>O.forEach(p.Is,_=>f.persistence.referenceDelegate.addReference(m,p.targetId,_)).next(()=>O.forEach(p.ds,_=>f.persistence.referenceDelegate.removeReference(m,p.targetId,_)))))}catch(m){if(!ir(m))throw m;B(bu,"Failed to update sequence numbers: "+m)}for(const m of c){const p=m.targetId;if(!m.fromCache){const _=f.Fs.get(p),v=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(v);f.Fs=f.Fs.insert(p,A)}}}(r.localStore,s))}async function X0(e,t){const n=G(e);if(!n.currentUser.isEqual(t)){B(Du,"User change. New user:",t.toKey());const r=await ep(n.localStore,t);n.currentUser=t,function(s,a){s.Vu.forEach(u=>{u.forEach(l=>{l.reject(new F(D.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await fi(n,r.Bs)}}function J0(e,t){const n=G(e),r=n.Eu.get(t);if(r&&r.lu)return Q().add(r.key);{let i=Q();const s=n.Tu.get(t);if(!s)return i;for(const a of s){const u=n.Pu.get(a);i=i.unionWith(u.view.tu)}return i}}function Ep(e){const t=G(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=_p.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=J0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=G0.bind(null,t),t.hu.J_=k0.bind(null,t.eventManager),t.hu.pu=O0.bind(null,t.eventManager),t}function Y0(e){const t=G(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=W0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=K0.bind(null,t),t}class Ps{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ys(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return n0(this.persistence,new Zw,t.initialUser,this.serializer)}Du(t){return new tp(Au.Vi,this.serializer)}bu(t){return new l0}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ps.provider={build:()=>new Ps};class Z0 extends Ps{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){tt(this.persistence.referenceDelegate instanceof Cs,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Fw(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new tp(r=>Cs.Vi(r,n),this.serializer)}}class xa{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X0.bind(null,this.syncEngine),await V0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new D0}()}createDatastore(t){const n=Ys(t.databaseInfo.databaseId),r=function(s){return new p0(s)}(t.databaseInfo);return function(s,a,u,l){return new y0(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,a,u){return new w0(r,i,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,n=>yh(this.syncEngine,n,0),function(){return fh.C()?new fh:new c0}())}createSyncEngine(t,n){return function(i,s,a,u,l,c,f){const m=new U0(i,s,a,u,l,c);return f&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=G(i);B(In,"RemoteStore shutting down."),s.Ia.add(5),await hi(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xa.provider={build:()=>new xa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):De("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="FirestoreClient";class tE{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=hu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{B(on,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(B(on,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Vu(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Jo(e,t){e.asyncQueue.verifyOperationInProgress(),B(on,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ep(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>{Ze("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ze("Terminating Firestore due to IndexedDb database deletion failed",i)})}),e._offlineComponents=t}async function wh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await eE(e);B(on,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>ph(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>ph(t.remoteStore,i)),e._onlineComponents=t}async function eE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){B(on,"Using user provided OfflineComponentProvider");try{await Jo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===D.FAILED_PRECONDITION||i.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ze("Error using user provided cache. Falling back to memory cache: "+n),await Jo(e,new Ps)}}else B(on,"Using default OfflineComponentProvider"),await Jo(e,new Z0(void 0));return e._offlineComponents}async function Ap(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(B(on,"Using user provided OnlineComponentProvider"),await wh(e,e._uninitializedComponentsProvider._online)):(B(on,"Using default OnlineComponentProvider"),await wh(e,new xa))),e._onlineComponents}function nE(e){return Ap(e).then(t=>t.syncEngine)}async function Ip(e){const t=await Ap(e),n=t.eventManager;return n.onListen=B0.bind(null,t.syncEngine),n.onUnlisten=j0.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=q0.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=z0.bind(null,t.syncEngine),n}function rE(e,t,n={}){const r=new xe;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,u,l,c){const f=new Tp({next:p=>{f.Ou(),a.enqueueAndForget(()=>fp(s,m));const _=p.docs.has(u);!_&&p.fromCache?c.reject(new F(D.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&l&&l.source==="server"?c.reject(new F(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),m=new dp(_u(u.path),f,{includeMetadataChanges:!0,ka:!0});return hp(s,m)}(await Ip(e),e.asyncQueue,t,n,r)),r.promise}function iE(e,t,n={}){const r=new xe;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,u,l,c){const f=new Tp({next:p=>{f.Ou(),a.enqueueAndForget(()=>fp(s,m)),p.fromCache&&l.source==="server"?c.reject(new F(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),m=new dp(u,f,{includeMetadataChanges:!0,ka:!0});return hp(s,m)}(await Ip(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="firestore.googleapis.com",Th=!0;class Ah{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new F(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rp,this.ssl=Th}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Th;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Zd;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Mw)throw new F(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bp((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class eo{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ah({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new F(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ah(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hv;switch(r.type){case"firstParty":return new mv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Eh.get(n);r&&(B("ComponentProvider","Removing Datastore"),Eh.delete(n),r.terminate())}(this),Promise.resolve()}}function sE(e,t,n,r={}){var i;e=ke(e,eo);const s=uu(t),a=e._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;s&&(F_(`https://${l}`),$_("Firestore",!0)),a.host!==Rp&&a.host!==l&&Ze("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!_s(c,u)&&(e._setSettings(c),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=xt.MOCK_USER;else{f=U_(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new F(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new xt(p)}e._authCredentials=new fv(new ld(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ln(this.firestore,t,this._query)}}class ft{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xe(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ft(this.firestore,t,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(ui(n,ft._jsonSchema))return new ft(t,r||null,new q(it.fromString(n.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:gt("string",ft._jsonSchemaVersion),referencePath:gt("string")};class Xe extends ln{constructor(t,n,r){super(t,n,_u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ft(this.firestore,null,new q(t))}withConverter(t){return new Xe(this.firestore,t,this._path)}}function Sp(e,t,...n){if(e=Ve(e),hd("collection","path",t),e instanceof eo){const r=it.fromString(t,...n);return Mc(r),new Xe(e,null,r)}{if(!(e instanceof ft||e instanceof Xe))throw new F(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(it.fromString(t,...n));return Mc(r),new Xe(e.firestore,null,r)}}function oE(e,t,...n){if(e=Ve(e),arguments.length===1&&(t=hu.newId()),hd("doc","path",t),e instanceof eo){const r=it.fromString(t,...n);return Oc(r),new ft(e,null,new q(r))}{if(!(e instanceof ft||e instanceof Xe))throw new F(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(it.fromString(t,...n));return Oc(r),new ft(e.firestore,e instanceof Xe?e.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="AsyncQueue";class bh{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new rp(this,"async_queue_retry"),this.oc=()=>{const r=Xo();r&&B(Ih,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=Xo();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=Xo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new xe;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!ir(t))throw t;B(Ih,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const n=this._c.then(()=>(this.nc=!0,t().catch(r=>{throw this.tc=r,this.nc=!1,De("INTERNAL UNHANDLED ERROR: ",Rh(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const i=Pu.createAndSchedule(this,t,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&$(47125,{hc:Rh(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function Rh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class di extends eo{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new bh,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new bh(t),this._firestoreClient=void 0,await t}}}function aE(e,t){const n=typeof e=="object"?e:Yy(),r=typeof e=="string"?e:Es,i=Wy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=M_("firestore");s&&sE(i,...s)}return i}function Ou(e){if(e._terminated)throw new F(D.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||uE(e),e._firestoreClient}function uE(e){var t,n,r;const i=e._freezeSettings(),s=function(u,l,c,f){return new Nv(u,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,bp(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new tE(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(u){const l=u?._online.build();return{_offline:u?._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qt(Tt.fromBase64String(t))}catch(n){throw new F(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Qt(Tt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ui(t,Qt._jsonSchema))return Qt.fromBase64String(t.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:gt("string",Qt._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new F(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new F(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new F(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return K(this._lat,t._lat)||K(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pe._jsonSchemaVersion}}static fromJSON(t){if(ui(t,pe._jsonSchema))return new pe(t.latitude,t.longitude)}}pe._jsonSchemaVersion="firestore/geoPoint/1.0",pe._jsonSchema={type:gt("string",pe._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:me._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ui(t,me._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new me(t.vectorValues);throw new F(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}me._jsonSchemaVersion="firestore/vectorValue/1.0",me._jsonSchema={type:gt("string",me._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=/^__.*__$/;class cE{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new un(t,this.data,this.fieldMask,n,this.fieldTransforms):new li(t,this.data,n,this.fieldTransforms)}}class Cp{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new un(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function xp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ec:e})}}class Lu{constructor(t,n,r,i,s,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Lu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.fc(t),i}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Vs(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(xp(this.Ec)&&lE.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class hE{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ys(t)}Dc(t,n,r,i=!1){return new Lu({Ec:t,methodName:n,bc:r,path:Et.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fu(e){const t=e._freezeSettings(),n=Ys(e._databaseId);return new hE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fE(e,t,n,r,i,s={}){const a=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);Uu("Data must be an object, but it was:",a,r);const u=Pp(r,a);let l,c;if(s.merge)l=new Gt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const p=Pa(t,m,n);if(!a.contains(p))throw new F(D.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Np(f,p)||f.push(p)}l=new Gt(f),c=a.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=a.fieldTransforms;return new cE(new Bt(u),l,c)}class ro extends Mu{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ro}}function dE(e,t,n,r){const i=e.Dc(1,t,n);Uu("Data must be an object, but it was:",i,r);const s=[],a=Bt.empty();an(r,(l,c)=>{const f=Bu(t,l,n);c=Ve(c);const m=i.gc(f);if(c instanceof ro)s.push(f);else{const p=pi(c,m);p!=null&&(s.push(f),a.set(f,p))}});const u=new Gt(s);return new Cp(a,u,i.fieldTransforms)}function pE(e,t,n,r,i,s){const a=e.Dc(1,t,n),u=[Pa(t,r,n)],l=[i];if(s.length%2!=0)throw new F(D.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)u.push(Pa(t,s[p])),l.push(s[p+1]);const c=[],f=Bt.empty();for(let p=u.length-1;p>=0;--p)if(!Np(c,u[p])){const _=u[p];let v=l[p];v=Ve(v);const A=a.gc(_);if(v instanceof ro)c.push(_);else{const E=pi(v,A);E!=null&&(c.push(_),f.set(_,E))}}const m=new Gt(c);return new Cp(f,m,a.fieldTransforms)}function mE(e,t,n,r=!1){return pi(n,e.Dc(r?4:3,t))}function pi(e,t){if(Vp(e=Ve(e)))return Uu("Unsupported field value:",t,e),Pp(e,t);if(e instanceof Mu)return function(r,i){if(!xp(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const u of r){let l=pi(u,i.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ew(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ot.fromDate(r);return{timestampValue:Ss(i.serializer,s)}}if(r instanceof ot){const s=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ss(i.serializer,s)}}if(r instanceof pe)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qt)return{bytesValue:Gd(i.serializer,r._byteString)};if(r instanceof ft){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Eu(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof me)return function(a,u){return{mapValue:{fields:{[wd]:{stringValue:Ed},[Ts]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw u.wc("VectorValues must only contain numeric values.");return yu(u.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${js(r)}`)}(e,t)}function Pp(e,t){const n={};return pd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):an(e,(r,i)=>{const s=pi(i,t.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Vp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ot||e instanceof pe||e instanceof Qt||e instanceof ft||e instanceof Mu||e instanceof me)}function Uu(e,t,n){if(!Vp(n)||!fd(n)){const r=js(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Pa(e,t,n){if((t=Ve(t))instanceof no)return t._internalPath;if(typeof t=="string")return Bu(e,t);throw Vs("Field path arguments must be of type string or ",e,!1,void 0,n)}const gE=new RegExp("[~\\*/\\[\\]]");function Bu(e,t,n){if(t.search(gE)>=0)throw Vs(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new no(...t.split("."))._internalPath}catch{throw Vs(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Vs(e,t,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${t}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new F(D.INVALID_ARGUMENT,u+e+l)}function Np(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _E(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(qu("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _E extends Dp{data(){return super.data()}}function qu(e,t){return typeof t=="string"?Bu(e,t):t instanceof no?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new F(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $u{}class ju extends $u{}function vE(e,t,...n){let r=[];t instanceof $u&&r.push(t),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof Hu).length,u=s.filter(l=>l instanceof zu).length;if(a>1||a>0&&u>0)throw new F(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class zu extends ju{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new zu(t,n,r)}_apply(t){const n=this._parse(t);return kp(t._query,n),new ln(t.firestore,t.converter,wa(t._query,n))}_parse(t){const n=Fu(t.firestore);return function(s,a,u,l,c,f,m){let p;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new F(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ch(m,f);const v=[];for(const A of m)v.push(Sh(l,s,A));p={arrayValue:{values:v}}}else p=Sh(l,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ch(m,f),p=mE(u,a,m,f==="in"||f==="not-in");return mt.create(c,f,p)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Hu extends $u{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Hu(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ne.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let a=i;const u=s.getFlattenedFilters();for(const l of u)kp(a,l),a=wa(a,l)}(t._query,n),new ln(t.firestore,t.converter,wa(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gu extends ju{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Gu(t,n)}_apply(t){const n=function(i,s,a){if(i.startAt!==null)throw new F(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yr(s,a)}(t._query,this._field,this._direction);return new ln(t.firestore,t.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new sr(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function wE(e,t="asc"){const n=t,r=qu("orderBy",e);return Gu._create(r,n)}class Wu extends ju{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new Wu(t,n,r)}_apply(t){return new ln(t.firestore,t.converter,Is(t._query,this._limit,this._limitType))}}function EE(e){return Ev("limit",e),Wu._create("limit",e,"F")}function Sh(e,t,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new F(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xd(t)&&n.indexOf("/")!==-1)throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(it.fromString(n));if(!q.isDocumentKey(r))throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zc(e,new q(r))}if(n instanceof ft)return zc(e,n._key);throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${js(n)}.`)}function Ch(e,t){if(!Array.isArray(e)||e.length===0)throw new F(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function kp(e,t){const n=function(i,s){for(const a of i)for(const u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new F(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new F(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class TE{convertValue(t,n="none"){switch(rn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ht(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(nn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw $(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return an(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n[Ts].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ht(a.doubleValue));return new me(s)}convertGeoPoint(t){return new pe(ht(t.latitude),ht(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Gs(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qr(t));default:return null}}convertTimestamp(t){const n=en(t);return new ot(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=it.fromString(t);tt(Yd(r),9688,{name:t});const i=new Xr(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||De(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class Vr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class wn extends Dp{constructor(t,n,r,i,s,a){super(t,n,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(qu("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=wn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wn._jsonSchemaVersion="firestore/documentSnapshot/1.0",wn._jsonSchema={type:gt("string",wn._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class ns extends wn{data(t={}){return super.data(t)}}class $n{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new ns(this._firestore,this._userDataWriter,r.key,r,new Vr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const l=new ns(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Vr(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const l=new ns(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Vr(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return u.type!==0&&(c=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),f=a.indexOf(u.doc.key)),{type:IE(u.type),doc:l,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$n._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=hu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function IE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(e){e=ke(e,ft);const t=ke(e.firestore,di);return rE(Ou(t),e._key).then(n=>CE(t,e,n))}$n._jsonSchemaVersion="firestore/querySnapshot/1.0",$n._jsonSchema={type:gt("string",$n._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class Op extends TE{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qt(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function Mp(e){e=ke(e,ln);const t=ke(e.firestore,di),n=Ou(t),r=new Op(t);return yE(e._query),iE(n,e._query).then(i=>new $n(t,r,e,i))}function RE(e,t,n){e=ke(e,ft);const r=ke(e.firestore,di),i=AE(e.converter,t);return Lp(r,[fE(Fu(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,fe.none())])}function SE(e,t,n,...r){e=ke(e,ft);const i=ke(e.firestore,di),s=Fu(i);let a;return a=typeof(t=Ve(t))=="string"||t instanceof no?pE(s,"updateDoc",e._key,t,n,r):dE(s,"updateDoc",e._key,t),Lp(i,[a.toMutation(e._key,fe.exists(!0))])}function Lp(e,t){return function(r,i){const s=new xe;return r.asyncQueue.enqueueAndForget(async()=>H0(await nE(r),i,s)),s.promise}(Ou(e),t)}function CE(e,t,n){const r=n.docs.get(t._key),i=new Op(e);return new wn(e,i,t._key,r,new Vr(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){nr=i})(Jy),vs(new Gr("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new di(new dv(r.getProvider("auth-internal")),new gv(a,r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new F(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xr(c.options.projectId,f)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Bn(Pc,Vc,t),Bn(Pc,Vc,"esm2017")})();const xE={apiKey:"AIzaSyAZsdXZU6WbM33SaKP5PoYm7G0V2ABYUSU",authDomain:"great-wave-everywhere.firebaseapp.com",projectId:"great-wave-everywhere",storageBucket:"great-wave-everywhere.firebasestorage.app",messagingSenderId:"636756607685",appId:"1:636756607685:web:2199075bc12821f89466ac",measurementId:"G-XRVYGKFWJ8"},PE=Zf(xE),Ku=aE(PE);async function VE(e){const t=oE(Ku,"words",e.toLowerCase()),n=await bE(t);n.exists()?await SE(t,{count:n.data().count+1}):await RE(t,{count:1})}async function xh(){return(await Mp(Sp(Ku,"words"))).docs.map(t=>({id:t.id,count:t.data().count}))}async function Ph(e=5){const t=vE(Sp(Ku,"words"),wE("count","desc"),EE(e));return(await Mp(t)).docs.map(r=>({id:r.id,count:r.data().count}))}function Fp(e,t){return function(){return e.apply(t,arguments)}}const{toString:NE}=Object.prototype,{getPrototypeOf:Qu}=Object,{iterator:io,toStringTag:Up}=Symbol,so=(e=>t=>{const n=NE.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ie=e=>(e=e.toLowerCase(),t=>so(t)===e),oo=e=>t=>typeof t===e,{isArray:ar}=Array,ei=oo("undefined");function DE(e){return e!==null&&!ei(e)&&e.constructor!==null&&!ei(e.constructor)&&$t(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Bp=ie("ArrayBuffer");function kE(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Bp(e.buffer),t}const OE=oo("string"),$t=oo("function"),qp=oo("number"),ao=e=>e!==null&&typeof e=="object",ME=e=>e===!0||e===!1,rs=e=>{if(so(e)!=="object")return!1;const t=Qu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Up in e)&&!(io in e)},LE=ie("Date"),FE=ie("File"),UE=ie("Blob"),BE=ie("FileList"),qE=e=>ao(e)&&$t(e.pipe),$E=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||$t(e.append)&&((t=so(e))==="formdata"||t==="object"&&$t(e.toString)&&e.toString()==="[object FormData]"))},jE=ie("URLSearchParams"),[zE,HE,GE,WE]=["ReadableStream","Request","Response","Headers"].map(ie),KE=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),ar(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let u;for(r=0;r<a;r++)u=s[r],t.call(null,e[u],u,e)}}function $p(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const _n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jp=e=>!ei(e)&&e!==_n;function Va(){const{caseless:e}=jp(this)&&this||{},t={},n=(r,i)=>{const s=e&&$p(t,i)||i;rs(t[s])&&rs(r)?t[s]=Va(t[s],r):rs(r)?t[s]=Va({},r):ar(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&mi(arguments[r],n);return t}const QE=(e,t,n,{allOwnKeys:r}={})=>(mi(t,(i,s)=>{n&&$t(i)?e[s]=Fp(i,n):e[s]=i},{allOwnKeys:r}),e),XE=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),JE=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},YE=(e,t,n,r)=>{let i,s,a;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],(!r||r(a,e,t))&&!u[a]&&(t[a]=e[a],u[a]=!0);e=n!==!1&&Qu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},ZE=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},tT=e=>{if(!e)return null;if(ar(e))return e;let t=e.length;if(!qp(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},eT=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Qu(Uint8Array)),nT=(e,t)=>{const r=(e&&e[io]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},rT=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},iT=ie("HTMLFormElement"),sT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Vh=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),oT=ie("RegExp"),zp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};mi(n,(i,s)=>{let a;(a=t(i,s,e))!==!1&&(r[s]=a||i)}),Object.defineProperties(e,r)},aT=e=>{zp(e,(t,n)=>{if($t(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if($t(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},uT=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return ar(e)?r(e):r(String(e).split(t)),n},lT=()=>{},cT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function hT(e){return!!(e&&$t(e.append)&&e[Up]==="FormData"&&e[io])}const fT=e=>{const t=new Array(10),n=(r,i)=>{if(ao(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=ar(r)?[]:{};return mi(r,(a,u)=>{const l=n(a,i+1);!ei(l)&&(s[u]=l)}),t[i]=void 0,s}}return r};return n(e,0)},dT=ie("AsyncFunction"),pT=e=>e&&(ao(e)||$t(e))&&$t(e.then)&&$t(e.catch),Hp=((e,t)=>e?setImmediate:t?((n,r)=>(_n.addEventListener("message",({source:i,data:s})=>{i===_n&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),_n.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",$t(_n.postMessage)),mT=typeof queueMicrotask<"u"?queueMicrotask.bind(_n):typeof process<"u"&&process.nextTick||Hp,gT=e=>e!=null&&$t(e[io]),P={isArray:ar,isArrayBuffer:Bp,isBuffer:DE,isFormData:$E,isArrayBufferView:kE,isString:OE,isNumber:qp,isBoolean:ME,isObject:ao,isPlainObject:rs,isReadableStream:zE,isRequest:HE,isResponse:GE,isHeaders:WE,isUndefined:ei,isDate:LE,isFile:FE,isBlob:UE,isRegExp:oT,isFunction:$t,isStream:qE,isURLSearchParams:jE,isTypedArray:eT,isFileList:BE,forEach:mi,merge:Va,extend:QE,trim:KE,stripBOM:XE,inherits:JE,toFlatObject:YE,kindOf:so,kindOfTest:ie,endsWith:ZE,toArray:tT,forEachEntry:nT,matchAll:rT,isHTMLForm:iT,hasOwnProperty:Vh,hasOwnProp:Vh,reduceDescriptors:zp,freezeMethods:aT,toObjectSet:uT,toCamelCase:sT,noop:lT,toFiniteNumber:cT,findKey:$p,global:_n,isContextDefined:jp,isSpecCompliantForm:hT,toJSONObject:fT,isAsyncFn:dT,isThenable:pT,setImmediate:Hp,asap:mT,isIterable:gT};function W(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}P.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.status}}});const Gp=W.prototype,Wp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Wp[e]={value:e}});Object.defineProperties(W,Wp);Object.defineProperty(Gp,"isAxiosError",{value:!0});W.from=(e,t,n,r,i,s)=>{const a=Object.create(Gp);return P.toFlatObject(e,a,function(l){return l!==Error.prototype},u=>u!=="isAxiosError"),W.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const _T=null;function Na(e){return P.isPlainObject(e)||P.isArray(e)}function Kp(e){return P.endsWith(e,"[]")?e.slice(0,-2):e}function Nh(e,t,n){return e?e.concat(t).map(function(i,s){return i=Kp(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function yT(e){return P.isArray(e)&&!e.some(Na)}const vT=P.toFlatObject(P,{},null,function(t){return/^is[A-Z]/.test(t)});function uo(e,t,n){if(!P.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,E){return!P.isUndefined(E[A])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(t);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(P.isDate(v))return v.toISOString();if(P.isBoolean(v))return v.toString();if(!l&&P.isBlob(v))throw new W("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(v)||P.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,A,E){let x=v;if(v&&!E&&typeof v=="object"){if(P.endsWith(A,"{}"))A=r?A:A.slice(0,-2),v=JSON.stringify(v);else if(P.isArray(v)&&yT(v)||(P.isFileList(v)||P.endsWith(A,"[]"))&&(x=P.toArray(v)))return A=Kp(A),x.forEach(function(M,k){!(P.isUndefined(M)||M===null)&&t.append(a===!0?Nh([A],k,s):a===null?A:A+"[]",c(M))}),!1}return Na(v)?!0:(t.append(Nh(E,A,s),c(v)),!1)}const m=[],p=Object.assign(vT,{defaultVisitor:f,convertValue:c,isVisitable:Na});function _(v,A){if(!P.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+A.join("."));m.push(v),P.forEach(v,function(x,V){(!(P.isUndefined(x)||x===null)&&i.call(t,x,P.isString(V)?V.trim():V,A,p))===!0&&_(x,A?A.concat(V):[V])}),m.pop()}}if(!P.isObject(e))throw new TypeError("data must be an object");return _(e),t}function Dh(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Xu(e,t){this._pairs=[],e&&uo(e,this,t)}const Qp=Xu.prototype;Qp.append=function(t,n){this._pairs.push([t,n])};Qp.toString=function(t){const n=t?function(r){return t.call(this,r,Dh)}:Dh;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function wT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xp(e,t,n){if(!t)return e;const r=n&&n.encode||wT;P.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=P.isURLSearchParams(t)?t.toString():new Xu(t,n).toString(r),s){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class kh{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){P.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Jp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ET=typeof URLSearchParams<"u"?URLSearchParams:Xu,TT=typeof FormData<"u"?FormData:null,AT=typeof Blob<"u"?Blob:null,IT={isBrowser:!0,classes:{URLSearchParams:ET,FormData:TT,Blob:AT},protocols:["http","https","file","blob","url","data"]},Ju=typeof window<"u"&&typeof document<"u",Da=typeof navigator=="object"&&navigator||void 0,bT=Ju&&(!Da||["ReactNative","NativeScript","NS"].indexOf(Da.product)<0),RT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ST=Ju&&window.location.href||"http://localhost",CT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ju,hasStandardBrowserEnv:bT,hasStandardBrowserWebWorkerEnv:RT,navigator:Da,origin:ST},Symbol.toStringTag,{value:"Module"})),Vt={...CT,...IT};function xT(e,t){return uo(e,new Vt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Vt.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function PT(e){return P.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function VT(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function Yp(e){function t(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),l=s>=n.length;return a=!a&&P.isArray(i)?i.length:a,l?(P.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!u):((!i[a]||!P.isObject(i[a]))&&(i[a]=[]),t(n,r,i[a],s)&&P.isArray(i[a])&&(i[a]=VT(i[a])),!u)}if(P.isFormData(e)&&P.isFunction(e.entries)){const n={};return P.forEachEntry(e,(r,i)=>{t(PT(r),i,n,0)}),n}return null}function NT(e,t,n){if(P.isString(e))try{return(t||JSON.parse)(e),P.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const gi={transitional:Jp,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=P.isObject(t);if(s&&P.isHTMLForm(t)&&(t=new FormData(t)),P.isFormData(t))return i?JSON.stringify(Yp(t)):t;if(P.isArrayBuffer(t)||P.isBuffer(t)||P.isStream(t)||P.isFile(t)||P.isBlob(t)||P.isReadableStream(t))return t;if(P.isArrayBufferView(t))return t.buffer;if(P.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return xT(t,this.formSerializer).toString();if((u=P.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return uo(u?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),NT(t)):t}],transformResponse:[function(t){const n=this.transitional||gi.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(P.isResponse(t)||P.isReadableStream(t))return t;if(t&&P.isString(t)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(u){if(a)throw u.name==="SyntaxError"?W.from(u,W.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vt.classes.FormData,Blob:Vt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],e=>{gi.headers[e]={}});const DT=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kT=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||t[n]&&DT[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Oh=Symbol("internals");function Ir(e){return e&&String(e).trim().toLowerCase()}function is(e){return e===!1||e==null?e:P.isArray(e)?e.map(is):String(e)}function OT(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const MT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Yo(e,t,n,r,i){if(P.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!P.isString(t)){if(P.isString(r))return t.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(t)}}function LT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function FT(e,t){const n=P.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,a){return this[r].call(this,t,i,s,a)},configurable:!0})})}let jt=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(u,l,c){const f=Ir(l);if(!f)throw new Error("header name must be a non-empty string");const m=P.findKey(i,f);(!m||i[m]===void 0||c===!0||c===void 0&&i[m]!==!1)&&(i[m||l]=is(u))}const a=(u,l)=>P.forEach(u,(c,f)=>s(c,f,l));if(P.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(P.isString(t)&&(t=t.trim())&&!MT(t))a(kT(t),n);else if(P.isObject(t)&&P.isIterable(t)){let u={},l,c;for(const f of t){if(!P.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[c=f[0]]=(l=u[c])?P.isArray(l)?[...l,f[1]]:[l,f[1]]:f[1]}a(u,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=Ir(t),t){const r=P.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return OT(i);if(P.isFunction(n))return n.call(this,i,r);if(P.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ir(t),t){const r=P.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Yo(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(a){if(a=Ir(a),a){const u=P.findKey(r,a);u&&(!n||Yo(r,r[u],u,n))&&(delete r[u],i=!0)}}return P.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||Yo(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return P.forEach(this,(i,s)=>{const a=P.findKey(r,s);if(a){n[a]=is(i),delete n[s];return}const u=t?LT(s):String(s).trim();u!==s&&delete n[s],n[u]=is(i),r[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return P.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Oh]=this[Oh]={accessors:{}}).accessors,i=this.prototype;function s(a){const u=Ir(a);r[u]||(FT(i,a),r[u]=!0)}return P.isArray(t)?t.forEach(s):s(t),this}};jt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(jt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});P.freezeMethods(jt);function Zo(e,t){const n=this||gi,r=t||n,i=jt.from(r.headers);let s=r.data;return P.forEach(e,function(u){s=u.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Zp(e){return!!(e&&e.__CANCEL__)}function ur(e,t,n){W.call(this,e??"canceled",W.ERR_CANCELED,t,n),this.name="CanceledError"}P.inherits(ur,W,{__CANCEL__:!0});function tm(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new W("Request failed with status code "+n.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function UT(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function BT(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,a;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),f=r[s];a||(a=c),n[i]=l,r[i]=c;let m=s,p=0;for(;m!==i;)p+=n[m++],m=m%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-a<t)return;const _=f&&c-f;return _?Math.round(p*1e3/_):void 0}}function qT(e,t){let n=0,r=1e3/t,i,s;const a=(c,f=Date.now())=>{n=f,i=null,s&&(clearTimeout(s),s=null),e.apply(null,c)};return[(...c)=>{const f=Date.now(),m=f-n;m>=r?a(c,f):(i=c,s||(s=setTimeout(()=>{s=null,a(i)},r-m)))},()=>i&&a(i)]}const Ns=(e,t,n=3)=>{let r=0;const i=BT(50,250);return qT(s=>{const a=s.loaded,u=s.lengthComputable?s.total:void 0,l=a-r,c=i(l),f=a<=u;r=a;const m={loaded:a,total:u,progress:u?a/u:void 0,bytes:l,rate:c||void 0,estimated:c&&u&&f?(u-a)/c:void 0,event:s,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(m)},n)},Mh=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Lh=e=>(...t)=>P.asap(()=>e(...t)),$T=Vt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Vt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Vt.origin),Vt.navigator&&/(msie|trident)/i.test(Vt.navigator.userAgent)):()=>!0,jT=Vt.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];P.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),P.isString(r)&&a.push("path="+r),P.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zT(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function HT(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function em(e,t,n){let r=!zT(t);return e&&(r||n==!1)?HT(e,t):t}const Fh=e=>e instanceof jt?{...e}:e;function bn(e,t){t=t||{};const n={};function r(c,f,m,p){return P.isPlainObject(c)&&P.isPlainObject(f)?P.merge.call({caseless:p},c,f):P.isPlainObject(f)?P.merge({},f):P.isArray(f)?f.slice():f}function i(c,f,m,p){if(P.isUndefined(f)){if(!P.isUndefined(c))return r(void 0,c,m,p)}else return r(c,f,m,p)}function s(c,f){if(!P.isUndefined(f))return r(void 0,f)}function a(c,f){if(P.isUndefined(f)){if(!P.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function u(c,f,m){if(m in t)return r(c,f);if(m in e)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(c,f,m)=>i(Fh(c),Fh(f),m,!0)};return P.forEach(Object.keys(Object.assign({},e,t)),function(f){const m=l[f]||i,p=m(e[f],t[f],f);P.isUndefined(p)&&m!==u||(n[f]=p)}),n}const nm=e=>{const t=bn({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:u}=t;t.headers=a=jt.from(a),t.url=Xp(em(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let l;if(P.isFormData(n)){if(Vt.hasStandardBrowserEnv||Vt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...f]=l?l.split(";").map(m=>m.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...f].join("; "))}}if(Vt.hasStandardBrowserEnv&&(r&&P.isFunction(r)&&(r=r(t)),r||r!==!1&&$T(t.url))){const c=i&&s&&jT.read(s);c&&a.set(i,c)}return t},GT=typeof XMLHttpRequest<"u",WT=GT&&function(e){return new Promise(function(n,r){const i=nm(e);let s=i.data;const a=jt.from(i.headers).normalize();let{responseType:u,onUploadProgress:l,onDownloadProgress:c}=i,f,m,p,_,v;function A(){_&&_(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let E=new XMLHttpRequest;E.open(i.method.toUpperCase(),i.url,!0),E.timeout=i.timeout;function x(){if(!E)return;const M=jt.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),U={data:!u||u==="text"||u==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:M,config:e,request:E};tm(function(I){n(I),A()},function(I){r(I),A()},U),E=null}"onloadend"in E?E.onloadend=x:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(x)},E.onabort=function(){E&&(r(new W("Request aborted",W.ECONNABORTED,e,E)),E=null)},E.onerror=function(){r(new W("Network Error",W.ERR_NETWORK,e,E)),E=null},E.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const U=i.transitional||Jp;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),r(new W(k,U.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,e,E)),E=null},s===void 0&&a.setContentType(null),"setRequestHeader"in E&&P.forEach(a.toJSON(),function(k,U){E.setRequestHeader(U,k)}),P.isUndefined(i.withCredentials)||(E.withCredentials=!!i.withCredentials),u&&u!=="json"&&(E.responseType=i.responseType),c&&([p,v]=Ns(c,!0),E.addEventListener("progress",p)),l&&E.upload&&([m,_]=Ns(l),E.upload.addEventListener("progress",m),E.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(f=M=>{E&&(r(!M||M.type?new ur(null,e,E):M),E.abort(),E=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const V=UT(i.url);if(V&&Vt.protocols.indexOf(V)===-1){r(new W("Unsupported protocol "+V+":",W.ERR_BAD_REQUEST,e));return}E.send(s||null)})},KT=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,u();const f=c instanceof Error?c:this.reason;r.abort(f instanceof W?f:new ur(f instanceof Error?f.message:f))}};let a=t&&setTimeout(()=>{a=null,s(new W(`timeout ${t} of ms exceeded`,W.ETIMEDOUT))},t);const u=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>P.asap(u),l}},QT=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},XT=async function*(e,t){for await(const n of JT(e))yield*QT(n,t)},JT=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Uh=(e,t,n,r)=>{const i=XT(e,t);let s=0,a,u=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:f}=await i.next();if(c){u(),l.close();return}let m=f.byteLength;if(n){let p=s+=m;n(p)}l.enqueue(new Uint8Array(f))}catch(c){throw u(c),c}},cancel(l){return u(l),i.return()}},{highWaterMark:2})},lo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",rm=lo&&typeof ReadableStream=="function",YT=lo&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),im=(e,...t)=>{try{return!!e(...t)}catch{return!1}},ZT=rm&&im(()=>{let e=!1;const t=new Request(Vt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Bh=64*1024,ka=rm&&im(()=>P.isReadableStream(new Response("").body)),Ds={stream:ka&&(e=>e.body)};lo&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ds[t]&&(Ds[t]=P.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new W(`Response type '${t}' is not supported`,W.ERR_NOT_SUPPORT,r)})})})(new Response);const tA=async e=>{if(e==null)return 0;if(P.isBlob(e))return e.size;if(P.isSpecCompliantForm(e))return(await new Request(Vt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(P.isArrayBufferView(e)||P.isArrayBuffer(e))return e.byteLength;if(P.isURLSearchParams(e)&&(e=e+""),P.isString(e))return(await YT(e)).byteLength},eA=async(e,t)=>{const n=P.toFiniteNumber(e.getContentLength());return n??tA(t)},nA=lo&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:u,onUploadProgress:l,responseType:c,headers:f,withCredentials:m="same-origin",fetchOptions:p}=nm(e);c=c?(c+"").toLowerCase():"text";let _=KT([i,s&&s.toAbortSignal()],a),v;const A=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let E;try{if(l&&ZT&&n!=="get"&&n!=="head"&&(E=await eA(f,r))!==0){let U=new Request(t,{method:"POST",body:r,duplex:"half"}),z;if(P.isFormData(r)&&(z=U.headers.get("content-type"))&&f.setContentType(z),U.body){const[I,y]=Mh(E,Ns(Lh(l)));r=Uh(U.body,Bh,I,y)}}P.isString(m)||(m=m?"include":"omit");const x="credentials"in Request.prototype;v=new Request(t,{...p,signal:_,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:x?m:void 0});let V=await fetch(v,p);const M=ka&&(c==="stream"||c==="response");if(ka&&(u||M&&A)){const U={};["status","statusText","headers"].forEach(T=>{U[T]=V[T]});const z=P.toFiniteNumber(V.headers.get("content-length")),[I,y]=u&&Mh(z,Ns(Lh(u),!0))||[];V=new Response(Uh(V.body,Bh,I,()=>{y&&y(),A&&A()}),U)}c=c||"text";let k=await Ds[P.findKey(Ds,c)||"text"](V,e);return!M&&A&&A(),await new Promise((U,z)=>{tm(U,z,{data:k,headers:jt.from(V.headers),status:V.status,statusText:V.statusText,config:e,request:v})})}catch(x){throw A&&A(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new W("Network Error",W.ERR_NETWORK,e,v),{cause:x.cause||x}):W.from(x,x&&x.code,e,v)}}),Oa={http:_T,xhr:WT,fetch:nA};P.forEach(Oa,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const qh=e=>`- ${e}`,rA=e=>P.isFunction(e)||e===null||e===!1,sm={getAdapter:e=>{e=P.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let a;if(r=n,!rA(n)&&(r=Oa[(a=String(n)).toLowerCase()],r===void 0))throw new W(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,l])=>`adapter ${u} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=t?s.length>1?`since :
`+s.map(qh).join(`
`):" "+qh(s[0]):"as no adapter specified";throw new W("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:Oa};function ta(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ur(null,e)}function $h(e){return ta(e),e.headers=jt.from(e.headers),e.data=Zo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),sm.getAdapter(e.adapter||gi.adapter)(e).then(function(r){return ta(e),r.data=Zo.call(e,e.transformResponse,r),r.headers=jt.from(r.headers),r},function(r){return Zp(r)||(ta(e),r&&r.response&&(r.response.data=Zo.call(e,e.transformResponse,r.response),r.response.headers=jt.from(r.response.headers))),Promise.reject(r)})}const om="1.10.0",co={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{co[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const jh={};co.transitional=function(t,n,r){function i(s,a){return"[Axios v"+om+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,u)=>{if(t===!1)throw new W(i(a," has been removed"+(n?" in "+n:"")),W.ERR_DEPRECATED);return n&&!jh[a]&&(jh[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,a,u):!0}};co.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function iA(e,t,n){if(typeof e!="object")throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const u=e[s],l=u===void 0||a(u,s,e);if(l!==!0)throw new W("option "+s+" must be "+l,W.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new W("Unknown option "+s,W.ERR_BAD_OPTION)}}const ss={assertOptions:iA,validators:co},ue=ss.validators;let En=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kh,response:new kh}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=bn(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ss.assertOptions(r,{silentJSONParsing:ue.transitional(ue.boolean),forcedJSONParsing:ue.transitional(ue.boolean),clarifyTimeoutError:ue.transitional(ue.boolean)},!1),i!=null&&(P.isFunction(i)?n.paramsSerializer={serialize:i}:ss.assertOptions(i,{encode:ue.function,serialize:ue.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ss.assertOptions(n,{baseUrl:ue.spelling("baseURL"),withXsrfToken:ue.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&P.merge(s.common,s[n.method]);s&&P.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),n.headers=jt.concat(a,s);const u=[];let l=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(l=l&&A.synchronous,u.unshift(A.fulfilled,A.rejected))});const c=[];this.interceptors.response.forEach(function(A){c.push(A.fulfilled,A.rejected)});let f,m=0,p;if(!l){const v=[$h.bind(this),void 0];for(v.unshift.apply(v,u),v.push.apply(v,c),p=v.length,f=Promise.resolve(n);m<p;)f=f.then(v[m++],v[m++]);return f}p=u.length;let _=n;for(m=0;m<p;){const v=u[m++],A=u[m++];try{_=v(_)}catch(E){A.call(this,E);break}}try{f=$h.call(this,_)}catch(v){return Promise.reject(v)}for(m=0,p=c.length;m<p;)f=f.then(c[m++],c[m++]);return f}getUri(t){t=bn(this.defaults,t);const n=em(t.baseURL,t.url,t.allowAbsoluteUrls);return Xp(n,t.params,t.paramsSerializer)}};P.forEach(["delete","get","head","options"],function(t){En.prototype[t]=function(n,r){return this.request(bn(r||{},{method:t,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(t){function n(r){return function(s,a,u){return this.request(bn(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}En.prototype[t]=n(),En.prototype[t+"Form"]=n(!0)});let sA=class am{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(u=>{r.subscribe(u),s=u}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},t(function(s,a,u){r.reason||(r.reason=new ur(s,a,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new am(function(i){t=i}),cancel:t}}};function oA(e){return function(n){return e.apply(null,n)}}function aA(e){return P.isObject(e)&&e.isAxiosError===!0}const Ma={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ma).forEach(([e,t])=>{Ma[t]=e});function um(e){const t=new En(e),n=Fp(En.prototype.request,t);return P.extend(n,En.prototype,t,{allOwnKeys:!0}),P.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return um(bn(e,i))},n}const dt=um(gi);dt.Axios=En;dt.CanceledError=ur;dt.CancelToken=sA;dt.isCancel=Zp;dt.VERSION=om;dt.toFormData=uo;dt.AxiosError=W;dt.Cancel=dt.CanceledError;dt.all=function(t){return Promise.all(t)};dt.spread=oA;dt.isAxiosError=aA;dt.mergeConfig=bn;dt.AxiosHeaders=jt;dt.formToJSON=e=>Yp(P.isHTMLForm(e)?new FormData(e):e);dt.getAdapter=sm.getAdapter;dt.HttpStatusCode=Ma;dt.default=dt;const{Axios:fR,AxiosError:dR,CanceledError:pR,isCancel:mR,CancelToken:gR,VERSION:_R,all:yR,Cancel:vR,isAxiosError:wR,spread:ER,toFormData:TR,AxiosHeaders:AR,HttpStatusCode:IR,formToJSON:bR,getAdapter:RR,mergeConfig:SR}=dt;var uA={value:()=>{}};function Yu(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new os(n)}function os(e){this._=e}function lA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}os.prototype=Yu.prototype={constructor:os,on:function(e,t){var n=this._,r=lA(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=cA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=zh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=zh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new os(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function cA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function zh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=uA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var La="http://www.w3.org/1999/xhtml";const Hh={svg:"http://www.w3.org/2000/svg",xhtml:La,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ho(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Hh.hasOwnProperty(t)?{space:Hh[t],local:e}:e}function hA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===La&&t.documentElement.namespaceURI===La?t.createElement(e):t.createElementNS(n,e)}}function fA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lm(e){var t=ho(e);return(t.local?fA:hA)(t)}function dA(){}function Zu(e){return e==null?dA:function(){return this.querySelector(e)}}function pA(e){typeof e!="function"&&(e=Zu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,u=r[i]=new Array(a),l,c,f=0;f<a;++f)(l=s[f])&&(c=e.call(l,l.__data__,f,s))&&("__data__"in l&&(c.__data__=l.__data__),u[f]=c);return new re(r,this._parents)}function mA(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function gA(){return[]}function cm(e){return e==null?gA:function(){return this.querySelectorAll(e)}}function _A(e){return function(){return mA(e.apply(this,arguments))}}function yA(e){typeof e=="function"?e=_A(e):e=cm(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],u=a.length,l,c=0;c<u;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new re(r,i)}function hm(e){return function(){return this.matches(e)}}function fm(e){return function(t){return t.matches(e)}}var vA=Array.prototype.find;function wA(e){return function(){return vA.call(this.children,e)}}function EA(){return this.firstElementChild}function TA(e){return this.select(e==null?EA:wA(typeof e=="function"?e:fm(e)))}var AA=Array.prototype.filter;function IA(){return Array.from(this.children)}function bA(e){return function(){return AA.call(this.children,e)}}function RA(e){return this.selectAll(e==null?IA:bA(typeof e=="function"?e:fm(e)))}function SA(e){typeof e!="function"&&(e=hm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,u=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&u.push(l);return new re(r,this._parents)}function dm(e){return new Array(e.length)}function CA(){return new re(this._enter||this._groups.map(dm),this._parents)}function ks(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ks.prototype={constructor:ks,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xA(e){return function(){return e}}function PA(e,t,n,r,i,s){for(var a=0,u,l=t.length,c=s.length;a<c;++a)(u=t[a])?(u.__data__=s[a],r[a]=u):n[a]=new ks(e,s[a]);for(;a<l;++a)(u=t[a])&&(i[a]=u)}function VA(e,t,n,r,i,s,a){var u,l,c=new Map,f=t.length,m=s.length,p=new Array(f),_;for(u=0;u<f;++u)(l=t[u])&&(p[u]=_=a.call(l,l.__data__,u,t)+"",c.has(_)?i[u]=l:c.set(_,l));for(u=0;u<m;++u)_=a.call(e,s[u],u,s)+"",(l=c.get(_))?(r[u]=l,l.__data__=s[u],c.delete(_)):n[u]=new ks(e,s[u]);for(u=0;u<f;++u)(l=t[u])&&c.get(p[u])===l&&(i[u]=l)}function NA(e){return e.__data__}function DA(e,t){if(!arguments.length)return Array.from(this,NA);var n=t?VA:PA,r=this._parents,i=this._groups;typeof e!="function"&&(e=xA(e));for(var s=i.length,a=new Array(s),u=new Array(s),l=new Array(s),c=0;c<s;++c){var f=r[c],m=i[c],p=m.length,_=kA(e.call(f,f&&f.__data__,c,r)),v=_.length,A=u[c]=new Array(v),E=a[c]=new Array(v),x=l[c]=new Array(p);n(f,m,A,E,x,_,t);for(var V=0,M=0,k,U;V<v;++V)if(k=A[V]){for(V>=M&&(M=V+1);!(U=E[M])&&++M<v;);k._next=U||null}}return a=new re(a,r),a._enter=u,a._exit=l,a}function kA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OA(){return new re(this._exit||this._groups.map(dm),this._parents)}function MA(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function LA(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),u=new Array(i),l=0;l<a;++l)for(var c=n[l],f=r[l],m=c.length,p=u[l]=new Array(m),_,v=0;v<m;++v)(_=c[v]||f[v])&&(p[v]=_);for(;l<i;++l)u[l]=n[l];return new re(u,this._parents)}function FA(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function UA(e){e||(e=BA);function t(m,p){return m&&p?e(m.__data__,p.__data__):!m-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],u=a.length,l=i[s]=new Array(u),c,f=0;f<u;++f)(c=a[f])&&(l[f]=c);l.sort(t)}return new re(i,this._parents).order()}function BA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $A(){return Array.from(this)}function jA(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function zA(){let e=0;for(const t of this)++e;return e}function HA(){return!this.node()}function GA(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,u;s<a;++s)(u=i[s])&&e.call(u,u.__data__,s,i);return this}function WA(e){return function(){this.removeAttribute(e)}}function KA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function QA(e,t){return function(){this.setAttribute(e,t)}}function XA(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function JA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function YA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ZA(e,t){var n=ho(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?KA:WA:typeof t=="function"?n.local?YA:JA:n.local?XA:QA)(n,t))}function pm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function tI(e){return function(){this.style.removeProperty(e)}}function eI(e,t,n){return function(){this.style.setProperty(e,t,n)}}function nI(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function rI(e,t,n){return arguments.length>1?this.each((t==null?tI:typeof t=="function"?nI:eI)(e,t,n??"")):Qn(this.node(),e)}function Qn(e,t){return e.style.getPropertyValue(t)||pm(e).getComputedStyle(e,null).getPropertyValue(t)}function iI(e){return function(){delete this[e]}}function sI(e,t){return function(){this[e]=t}}function oI(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function aI(e,t){return arguments.length>1?this.each((t==null?iI:typeof t=="function"?oI:sI)(e,t)):this.node()[e]}function mm(e){return e.trim().split(/^|\s+/)}function tl(e){return e.classList||new gm(e)}function gm(e){this._node=e,this._names=mm(e.getAttribute("class")||"")}gm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _m(e,t){for(var n=tl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ym(e,t){for(var n=tl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function uI(e){return function(){_m(this,e)}}function lI(e){return function(){ym(this,e)}}function cI(e,t){return function(){(t.apply(this,arguments)?_m:ym)(this,e)}}function hI(e,t){var n=mm(e+"");if(arguments.length<2){for(var r=tl(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?cI:t?uI:lI)(n,t))}function fI(){this.textContent=""}function dI(e){return function(){this.textContent=e}}function pI(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mI(e){return arguments.length?this.each(e==null?fI:(typeof e=="function"?pI:dI)(e)):this.node().textContent}function gI(){this.innerHTML=""}function _I(e){return function(){this.innerHTML=e}}function yI(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vI(e){return arguments.length?this.each(e==null?gI:(typeof e=="function"?yI:_I)(e)):this.node().innerHTML}function wI(){this.nextSibling&&this.parentNode.appendChild(this)}function EI(){return this.each(wI)}function TI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AI(){return this.each(TI)}function II(e){var t=typeof e=="function"?e:lm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bI(){return null}function RI(e,t){var n=typeof e=="function"?e:lm(e),r=t==null?bI:typeof t=="function"?t:Zu(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function SI(){var e=this.parentNode;e&&e.removeChild(this)}function CI(){return this.each(SI)}function xI(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function PI(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function VI(e){return this.select(e?PI:xI)}function NI(e){return arguments.length?this.property("__data__",e):this.node().__data__}function DI(e){return function(t){e.call(this,t,this.__data__)}}function kI(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function OI(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function MI(e,t,n){return function(){var r=this.__on,i,s=DI(t);if(r){for(var a=0,u=r.length;a<u;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function LI(e,t,n){var r=kI(e+""),i,s=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,c=u.length,f;l<c;++l)for(i=0,f=u[l];i<s;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(u=t?MI:OI,i=0;i<s;++i)this.each(u(r[i],t,n));return this}function vm(e,t,n){var r=pm(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function FI(e,t){return function(){return vm(this,e,t)}}function UI(e,t){return function(){return vm(this,e,t.apply(this,arguments))}}function BI(e,t){return this.each((typeof t=="function"?UI:FI)(e,t))}function*qI(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var $I=[null];function re(e,t){this._groups=e,this._parents=t}function _i(){return new re([[document.documentElement]],$I)}function jI(){return this}re.prototype=_i.prototype={constructor:re,select:pA,selectAll:yA,selectChild:TA,selectChildren:RA,filter:SA,data:DA,enter:CA,exit:OA,join:MA,merge:LA,selection:jI,order:FA,sort:UA,call:qA,nodes:$A,node:jA,size:zA,empty:HA,each:GA,attr:ZA,style:rI,property:aI,classed:hI,text:mI,html:vI,raise:EI,lower:AI,append:II,insert:RI,remove:CI,clone:VI,datum:NI,on:LI,dispatch:BI,[Symbol.iterator]:qI};function el(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yi(){}var ni=.7,Os=1/ni,jn="\\s*([+-]?\\d+)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zI=/^#([0-9a-f]{3,8})$/,HI=new RegExp(`^rgb\\(${jn},${jn},${jn}\\)$`),GI=new RegExp(`^rgb\\(${ge},${ge},${ge}\\)$`),WI=new RegExp(`^rgba\\(${jn},${jn},${jn},${ri}\\)$`),KI=new RegExp(`^rgba\\(${ge},${ge},${ge},${ri}\\)$`),QI=new RegExp(`^hsl\\(${ri},${ge},${ge}\\)$`),XI=new RegExp(`^hsla\\(${ri},${ge},${ge},${ri}\\)$`),Gh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};el(yi,ii,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wh,formatHex:Wh,formatHex8:JI,formatHsl:YI,formatRgb:Kh,toString:Kh});function Wh(){return this.rgb().formatHex()}function JI(){return this.rgb().formatHex8()}function YI(){return Em(this).formatHsl()}function Kh(){return this.rgb().formatRgb()}function ii(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zI.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qh(t):n===3?new qt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=HI.exec(e))?new qt(t[1],t[2],t[3],1):(t=GI.exec(e))?new qt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=WI.exec(e))?Wi(t[1],t[2],t[3],t[4]):(t=KI.exec(e))?Wi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=QI.exec(e))?Yh(t[1],t[2]/100,t[3]/100,1):(t=XI.exec(e))?Yh(t[1],t[2]/100,t[3]/100,t[4]):Gh.hasOwnProperty(e)?Qh(Gh[e]):e==="transparent"?new qt(NaN,NaN,NaN,0):null}function Qh(e){return new qt(e>>16&255,e>>8&255,e&255,1)}function Wi(e,t,n,r){return r<=0&&(e=t=n=NaN),new qt(e,t,n,r)}function ZI(e){return e instanceof yi||(e=ii(e)),e?(e=e.rgb(),new qt(e.r,e.g,e.b,e.opacity)):new qt}function Fa(e,t,n,r){return arguments.length===1?ZI(e):new qt(e,t,n,r??1)}function qt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}el(qt,Fa,wm(yi,{brighter(e){return e=e==null?Os:Math.pow(Os,e),new qt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ni:Math.pow(ni,e),new qt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qt(Tn(this.r),Tn(this.g),Tn(this.b),Ms(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xh,formatHex:Xh,formatHex8:t1,formatRgb:Jh,toString:Jh}));function Xh(){return`#${yn(this.r)}${yn(this.g)}${yn(this.b)}`}function t1(){return`#${yn(this.r)}${yn(this.g)}${yn(this.b)}${yn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jh(){const e=Ms(this.opacity);return`${e===1?"rgb(":"rgba("}${Tn(this.r)}, ${Tn(this.g)}, ${Tn(this.b)}${e===1?")":`, ${e})`}`}function Ms(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yn(e){return e=Tn(e),(e<16?"0":"")+e.toString(16)}function Yh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ee(e,t,n,r)}function Em(e){if(e instanceof ee)return new ee(e.h,e.s,e.l,e.opacity);if(e instanceof yi||(e=ii(e)),!e)return new ee;if(e instanceof ee)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,u=s-i,l=(s+i)/2;return u?(t===s?a=(n-r)/u+(n<r)*6:n===s?a=(r-t)/u+2:a=(t-n)/u+4,u/=l<.5?s+i:2-s-i,a*=60):u=l>0&&l<1?0:a,new ee(a,u,l,e.opacity)}function e1(e,t,n,r){return arguments.length===1?Em(e):new ee(e,t,n,r??1)}function ee(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}el(ee,e1,wm(yi,{brighter(e){return e=e==null?Os:Math.pow(Os,e),new ee(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ni:Math.pow(ni,e),new ee(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new qt(ea(e>=240?e-240:e+120,i,r),ea(e,i,r),ea(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ee(Zh(this.h),Ki(this.s),Ki(this.l),Ms(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ms(this.opacity);return`${e===1?"hsl(":"hsla("}${Zh(this.h)}, ${Ki(this.s)*100}%, ${Ki(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zh(e){return e=(e||0)%360,e<0?e+360:e}function Ki(e){return Math.max(0,Math.min(1,e||0))}function ea(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Tm=e=>()=>e;function n1(e,t){return function(n){return e+n*t}}function r1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function i1(e){return(e=+e)==1?Am:function(t,n){return n-t?r1(t,n,e):Tm(isNaN(t)?n:t)}}function Am(e,t){var n=t-e;return n?n1(e,n):Tm(isNaN(e)?t:e)}const tf=function e(t){var n=i1(t);function r(i,s){var a=n((i=Fa(i)).r,(s=Fa(s)).r),u=n(i.g,s.g),l=n(i.b,s.b),c=Am(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=u(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=e,r}(1);function ze(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ua=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,na=new RegExp(Ua.source,"g");function s1(e){return function(){return e}}function o1(e){return function(t){return e(t)+""}}function a1(e,t){var n=Ua.lastIndex=na.lastIndex=0,r,i,s,a=-1,u=[],l=[];for(e=e+"",t=t+"";(r=Ua.exec(e))&&(i=na.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,l.push({i:a,x:ze(r,i)})),n=na.lastIndex;return n<t.length&&(s=t.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?l[0]?o1(l[0].x):s1(t):(t=l.length,function(c){for(var f=0,m;f<t;++f)u[(m=l[f]).i]=m.x(c);return u.join("")})}var ef=180/Math.PI,Ba={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Im(e,t,n,r,i,s){var a,u,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,l/=u),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ef,skewX:Math.atan(l)*ef,scaleX:a,scaleY:u}}var Qi;function u1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ba:Im(t.a,t.b,t.c,t.d,t.e,t.f)}function l1(e){return e==null||(Qi||(Qi=document.createElementNS("http://www.w3.org/2000/svg","g")),Qi.setAttribute("transform",e),!(e=Qi.transform.baseVal.consolidate()))?Ba:(e=e.matrix,Im(e.a,e.b,e.c,e.d,e.e,e.f))}function bm(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,f,m,p,_,v){if(c!==m||f!==p){var A=_.push("translate(",null,t,null,n);v.push({i:A-4,x:ze(c,m)},{i:A-2,x:ze(f,p)})}else(m||p)&&_.push("translate("+m+t+p+n)}function a(c,f,m,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:m.push(i(m)+"rotate(",null,r)-2,x:ze(c,f)})):f&&m.push(i(m)+"rotate("+f+r)}function u(c,f,m,p){c!==f?p.push({i:m.push(i(m)+"skewX(",null,r)-2,x:ze(c,f)}):f&&m.push(i(m)+"skewX("+f+r)}function l(c,f,m,p,_,v){if(c!==m||f!==p){var A=_.push(i(_)+"scale(",null,",",null,")");v.push({i:A-4,x:ze(c,m)},{i:A-2,x:ze(f,p)})}else(m!==1||p!==1)&&_.push(i(_)+"scale("+m+","+p+")")}return function(c,f){var m=[],p=[];return c=e(c),f=e(f),s(c.translateX,c.translateY,f.translateX,f.translateY,m,p),a(c.rotate,f.rotate,m,p),u(c.skewX,f.skewX,m,p),l(c.scaleX,c.scaleY,f.scaleX,f.scaleY,m,p),c=f=null,function(_){for(var v=-1,A=p.length,E;++v<A;)m[(E=p[v]).i]=E.x(_);return m.join("")}}}var c1=bm(u1,"px, ","px)","deg)"),h1=bm(l1,", ",")",")"),Xn=0,Nr=0,br=0,Rm=1e3,Ls,Dr,Fs=0,Rn=0,fo=0,si=typeof performance=="object"&&performance.now?performance:Date,Sm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nl(){return Rn||(Sm(f1),Rn=si.now()+fo)}function f1(){Rn=0}function Us(){this._call=this._time=this._next=null}Us.prototype=rl.prototype={constructor:Us,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nl():+n)+(t==null?0:+t),!this._next&&Dr!==this&&(Dr?Dr._next=this:Ls=this,Dr=this),this._call=e,this._time=n,qa()},stop:function(){this._call&&(this._call=null,this._time=1/0,qa())}};function rl(e,t,n){var r=new Us;return r.restart(e,t,n),r}function d1(){nl(),++Xn;for(var e=Ls,t;e;)(t=Rn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xn}function nf(){Rn=(Fs=si.now())+fo,Xn=Nr=0;try{d1()}finally{Xn=0,m1(),Rn=0}}function p1(){var e=si.now(),t=e-Fs;t>Rm&&(fo-=t,Fs=e)}function m1(){for(var e,t=Ls,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ls=n);Dr=e,qa(r)}function qa(e){if(!Xn){Nr&&(Nr=clearTimeout(Nr));var t=e-Rn;t>24?(e<1/0&&(Nr=setTimeout(nf,e-si.now()-fo)),br&&(br=clearInterval(br))):(br||(Fs=si.now(),br=setInterval(p1,Rm)),Xn=1,Sm(nf))}}function rf(e,t,n){var r=new Us;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var g1=Yu("start","end","cancel","interrupt"),_1=[],Cm=0,sf=1,$a=2,as=3,of=4,ja=5,us=6;function po(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;y1(e,n,{name:t,index:r,group:i,on:g1,tween:_1,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Cm})}function il(e,t){var n=se(e,t);if(n.state>Cm)throw new Error("too late; already scheduled");return n}function we(e,t){var n=se(e,t);if(n.state>as)throw new Error("too late; already running");return n}function se(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function y1(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=rl(s,0,n.time);function s(c){n.state=sf,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var f,m,p,_;if(n.state!==sf)return l();for(f in r)if(_=r[f],_.name===n.name){if(_.state===as)return rf(a);_.state===of?(_.state=us,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[f]):+f<t&&(_.state=us,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[f])}if(rf(function(){n.state===as&&(n.state=of,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=$a,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$a){for(n.state=as,i=new Array(p=n.tween.length),f=0,m=-1;f<p;++f)(_=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++m]=_);i.length=m+1}}function u(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=ja,1),m=-1,p=i.length;++m<p;)i[m].call(e,f);n.state===ja&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=us,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function v1(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>$a&&r.state<ja,r.state=us,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function w1(e){return this.each(function(){v1(this,e)})}function E1(e,t){var n,r;return function(){var i=we(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,u=r.length;a<u;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function T1(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=we(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var u={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=u;break}l===c&&i.push(u)}s.tween=i}}function A1(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=se(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?E1:T1)(n,e,t))}function sl(e,t,n){var r=e._id;return e.each(function(){var i=we(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return se(i,r).value[t]}}function xm(e,t){var n;return(typeof t=="number"?ze:t instanceof ii?tf:(n=ii(t))?(t=n,tf):a1)(e,t)}function I1(e){return function(){this.removeAttribute(e)}}function b1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function R1(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function S1(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function C1(e,t,n){var r,i,s;return function(){var a,u=n(this),l;return u==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=u+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,u)))}}function x1(e,t,n){var r,i,s;return function(){var a,u=n(this),l;return u==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=u+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,u)))}}function P1(e,t){var n=ho(e),r=n==="transform"?h1:xm;return this.attrTween(e,typeof t=="function"?(n.local?x1:C1)(n,r,sl(this,"attr."+e,t)):t==null?(n.local?b1:I1)(n):(n.local?S1:R1)(n,r,t))}function V1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function N1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function D1(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&N1(e,s)),n}return i._value=t,i}function k1(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&V1(e,s)),n}return i._value=t,i}function O1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ho(e);return this.tween(n,(r.local?D1:k1)(r,t))}function M1(e,t){return function(){il(this,e).delay=+t.apply(this,arguments)}}function L1(e,t){return t=+t,function(){il(this,e).delay=t}}function F1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?M1:L1)(t,e)):se(this.node(),t).delay}function U1(e,t){return function(){we(this,e).duration=+t.apply(this,arguments)}}function B1(e,t){return t=+t,function(){we(this,e).duration=t}}function q1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?U1:B1)(t,e)):se(this.node(),t).duration}function $1(e,t){if(typeof t!="function")throw new Error;return function(){we(this,e).ease=t}}function j1(e){var t=this._id;return arguments.length?this.each($1(t,e)):se(this.node(),t).ease}function z1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;we(this,e).ease=n}}function H1(e){if(typeof e!="function")throw new Error;return this.each(z1(this._id,e))}function G1(e){typeof e!="function"&&(e=hm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,u=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&u.push(l);return new Me(r,this._parents,this._name,this._id)}function W1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),u=0;u<s;++u)for(var l=t[u],c=n[u],f=l.length,m=a[u]=new Array(f),p,_=0;_<f;++_)(p=l[_]||c[_])&&(m[_]=p);for(;u<r;++u)a[u]=t[u];return new Me(a,this._parents,this._name,this._id)}function K1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Q1(e,t,n){var r,i,s=K1(t)?il:we;return function(){var a=s(this,e),u=a.on;u!==r&&(i=(r=u).copy()).on(t,n),a.on=i}}function X1(e,t){var n=this._id;return arguments.length<2?se(this.node(),n).on.on(e):this.each(Q1(n,e,t))}function J1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Y1(){return this.on("end.remove",J1(this._id))}function Z1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zu(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var u=r[a],l=u.length,c=s[a]=new Array(l),f,m,p=0;p<l;++p)(f=u[p])&&(m=e.call(f,f.__data__,p,u))&&("__data__"in f&&(m.__data__=f.__data__),c[p]=m,po(c[p],t,n,p,c,se(f,n)));return new Me(s,this._parents,t,n)}function tb(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cm(e));for(var r=this._groups,i=r.length,s=[],a=[],u=0;u<i;++u)for(var l=r[u],c=l.length,f,m=0;m<c;++m)if(f=l[m]){for(var p=e.call(f,f.__data__,m,l),_,v=se(f,n),A=0,E=p.length;A<E;++A)(_=p[A])&&po(_,t,n,A,p,v);s.push(p),a.push(f)}return new Me(s,a,t,n)}var eb=_i.prototype.constructor;function nb(){return new eb(this._groups,this._parents)}function rb(e,t){var n,r,i;return function(){var s=Qn(this,e),a=(this.style.removeProperty(e),Qn(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function Pm(e){return function(){this.style.removeProperty(e)}}function ib(e,t,n){var r,i=n+"",s;return function(){var a=Qn(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function sb(e,t,n){var r,i,s;return function(){var a=Qn(this,e),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(e),Qn(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,u))}}function ob(e,t){var n,r,i,s="style."+t,a="end."+s,u;return function(){var l=we(this,e),c=l.on,f=l.value[s]==null?u||(u=Pm(t)):void 0;(c!==n||i!==f)&&(r=(n=c).copy()).on(a,i=f),l.on=r}}function ab(e,t,n){var r=(e+="")=="transform"?c1:xm;return t==null?this.styleTween(e,rb(e,r)).on("end.style."+e,Pm(e)):typeof t=="function"?this.styleTween(e,sb(e,r,sl(this,"style."+e,t))).each(ob(this._id,e)):this.styleTween(e,ib(e,r,t),n).on("end.style."+e,null)}function ub(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function lb(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&ub(e,a,n)),r}return s._value=t,s}function cb(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,lb(e,t,n??""))}function hb(e){return function(){this.textContent=e}}function fb(e){return function(){var t=e(this);this.textContent=t??""}}function db(e){return this.tween("text",typeof e=="function"?fb(sl(this,"text",e)):hb(e==null?"":e+""))}function pb(e){return function(t){this.textContent=e.call(this,t)}}function mb(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&pb(i)),t}return r._value=e,r}function gb(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,mb(e))}function _b(){for(var e=this._name,t=this._id,n=Vm(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,l,c=0;c<u;++c)if(l=a[c]){var f=se(l,t);po(l,e,n,c,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Me(r,this._parents,e,n)}function yb(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var u={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=we(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(l)),c.on=t}),i===0&&s()})}var vb=0;function Me(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Vm(){return++vb}var Re=_i.prototype;Me.prototype={constructor:Me,select:Z1,selectAll:tb,selectChild:Re.selectChild,selectChildren:Re.selectChildren,filter:G1,merge:W1,selection:nb,transition:_b,call:Re.call,nodes:Re.nodes,node:Re.node,size:Re.size,empty:Re.empty,each:Re.each,on:X1,attr:P1,attrTween:O1,style:ab,styleTween:cb,text:db,textTween:gb,remove:Y1,tween:A1,delay:F1,duration:q1,ease:j1,easeVarying:H1,end:yb,[Symbol.iterator]:Re[Symbol.iterator]};function wb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Eb={time:null,delay:0,duration:250,ease:wb};function Tb(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ab(e){var t,n;e instanceof Me?(t=e._id,e=e._name):(t=Vm(),(n=Eb).time=nl(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,l,c=0;c<u;++c)(l=a[c])&&po(l,e,t,c,a,n||Tb(l,t));return new Me(r,this._parents,e,t)}_i.prototype.interrupt=w1;_i.prototype.transition=Ab;function Ib(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,a=n.length,u,l=0,c=0;for(s=0;s<a;++s)u=n[s],l+=u.x,c+=u.y;for(l=(l/a-e)*r,c=(c/a-t)*r,s=0;s<a;++s)u=n[s],u.x-=l,u.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function bb(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Nm(this.cover(t,n),t,n,e)}function Nm(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,a={data:r},u=e._x0,l=e._y0,c=e._x1,f=e._y1,m,p,_,v,A,E,x,V;if(!s)return e._root=a,e;for(;s.length;)if((A=t>=(m=(u+c)/2))?u=m:c=m,(E=n>=(p=(l+f)/2))?l=p:f=p,i=s,!(s=s[x=E<<1|A]))return i[x]=a,e;if(_=+e._x.call(null,s.data),v=+e._y.call(null,s.data),t===_&&n===v)return a.next=s,i?i[x]=a:e._root=a,e;do i=i?i[x]=new Array(4):e._root=new Array(4),(A=t>=(m=(u+c)/2))?u=m:c=m,(E=n>=(p=(l+f)/2))?l=p:f=p;while((x=E<<1|A)===(V=(v>=p)<<1|_>=m));return i[V]=s,i[x]=a,e}function Rb(e){var t,n,r=e.length,i,s,a=new Array(r),u=new Array(r),l=1/0,c=1/0,f=-1/0,m=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(a[n]=i,u[n]=s,i<l&&(l=i),i>f&&(f=i),s<c&&(c=s),s>m&&(m=s));if(l>f||c>m)return this;for(this.cover(l,c).cover(f,m),n=0;n<r;++n)Nm(this,a[n],u[n],e[n]);return this}function Sb(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var a=i-n||1,u=this._root,l,c;n>e||e>=i||r>t||t>=s;)switch(c=(t<r)<<1|e<n,l=new Array(4),l[c]=u,u=l,a*=2,c){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Cb(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function xb(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ot(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Pb(e,t,n){var r,i=this._x0,s=this._y0,a,u,l,c,f=this._x1,m=this._y1,p=[],_=this._root,v,A;for(_&&p.push(new Ot(_,i,s,f,m)),n==null?n=1/0:(i=e-n,s=t-n,f=e+n,m=t+n,n*=n);v=p.pop();)if(!(!(_=v.node)||(a=v.x0)>f||(u=v.y0)>m||(l=v.x1)<i||(c=v.y1)<s))if(_.length){var E=(a+l)/2,x=(u+c)/2;p.push(new Ot(_[3],E,x,l,c),new Ot(_[2],a,x,E,c),new Ot(_[1],E,u,l,x),new Ot(_[0],a,u,E,x)),(A=(t>=x)<<1|e>=E)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-A],p[p.length-1-A]=v)}else{var V=e-+this._x.call(null,_.data),M=t-+this._y.call(null,_.data),k=V*V+M*M;if(k<n){var U=Math.sqrt(n=k);i=e-U,s=t-U,f=e+U,m=t+U,r=_.data}}return r}function Vb(e){if(isNaN(f=+this._x.call(null,e))||isNaN(m=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,a=this._x0,u=this._y0,l=this._x1,c=this._y1,f,m,p,_,v,A,E,x;if(!n)return this;if(n.length)for(;;){if((v=f>=(p=(a+l)/2))?a=p:l=p,(A=m>=(_=(u+c)/2))?u=_:c=_,t=n,!(n=n[E=A<<1|v]))return this;if(!n.length)break;(t[E+1&3]||t[E+2&3]||t[E+3&3])&&(r=t,x=E)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[E]=s:delete t[E],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function Nb(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Db(){return this._root}function kb(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Ob(e){var t=[],n,r=this._root,i,s,a,u,l;for(r&&t.push(new Ot(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,a=n.y0,u=n.x1,l=n.y1)&&r.length){var c=(s+u)/2,f=(a+l)/2;(i=r[3])&&t.push(new Ot(i,c,f,u,l)),(i=r[2])&&t.push(new Ot(i,s,f,c,l)),(i=r[1])&&t.push(new Ot(i,c,a,u,f)),(i=r[0])&&t.push(new Ot(i,s,a,c,f))}return this}function Mb(e){var t=[],n=[],r;for(this._root&&t.push(new Ot(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,a=r.x0,u=r.y0,l=r.x1,c=r.y1,f=(a+l)/2,m=(u+c)/2;(s=i[0])&&t.push(new Ot(s,a,u,f,m)),(s=i[1])&&t.push(new Ot(s,f,u,l,m)),(s=i[2])&&t.push(new Ot(s,a,m,f,c)),(s=i[3])&&t.push(new Ot(s,f,m,l,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Lb(e){return e[0]}function Fb(e){return arguments.length?(this._x=e,this):this._x}function Ub(e){return e[1]}function Bb(e){return arguments.length?(this._y=e,this):this._y}function Dm(e,t,n){var r=new ol(t??Lb,n??Ub,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function ol(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function af(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Mt=Dm.prototype=ol.prototype;Mt.copy=function(){var e=new ol(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=af(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=af(r));return e};Mt.add=bb;Mt.addAll=Rb;Mt.cover=Sb;Mt.data=Cb;Mt.extent=xb;Mt.find=Pb;Mt.remove=Vb;Mt.removeAll=Nb;Mt.root=Db;Mt.size=kb;Mt.visit=Ob;Mt.visitAfter=Mb;Mt.x=Fb;Mt.y=Bb;function Se(e){return function(){return e}}function Un(e){return(e()-.5)*1e-6}function qb(e){return e.index}function uf(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function $b(e){var t=qb,n=m,r,i=Se(30),s,a,u,l,c,f=1;e==null&&(e=[]);function m(E){return 1/Math.min(u[E.source.index],u[E.target.index])}function p(E){for(var x=0,V=e.length;x<f;++x)for(var M=0,k,U,z,I,y,T,R;M<V;++M)k=e[M],U=k.source,z=k.target,I=z.x+z.vx-U.x-U.vx||Un(c),y=z.y+z.vy-U.y-U.vy||Un(c),T=Math.sqrt(I*I+y*y),T=(T-s[M])/T*E*r[M],I*=T,y*=T,z.vx-=I*(R=l[M]),z.vy-=y*R,U.vx+=I*(R=1-R),U.vy+=y*R}function _(){if(a){var E,x=a.length,V=e.length,M=new Map(a.map((U,z)=>[t(U,z,a),U])),k;for(E=0,u=new Array(x);E<V;++E)k=e[E],k.index=E,typeof k.source!="object"&&(k.source=uf(M,k.source)),typeof k.target!="object"&&(k.target=uf(M,k.target)),u[k.source.index]=(u[k.source.index]||0)+1,u[k.target.index]=(u[k.target.index]||0)+1;for(E=0,l=new Array(V);E<V;++E)k=e[E],l[E]=u[k.source.index]/(u[k.source.index]+u[k.target.index]);r=new Array(V),v(),s=new Array(V),A()}}function v(){if(a)for(var E=0,x=e.length;E<x;++E)r[E]=+n(e[E],E,e)}function A(){if(a)for(var E=0,x=e.length;E<x;++E)s[E]=+i(e[E],E,e)}return p.initialize=function(E,x){a=E,c=x,_()},p.links=function(E){return arguments.length?(e=E,_(),p):e},p.id=function(E){return arguments.length?(t=E,p):t},p.iterations=function(E){return arguments.length?(f=+E,p):f},p.strength=function(E){return arguments.length?(n=typeof E=="function"?E:Se(+E),v(),p):n},p.distance=function(E){return arguments.length?(i=typeof E=="function"?E:Se(+E),A(),p):i},p}const jb=1664525,zb=1013904223,lf=4294967296;function Hb(){let e=1;return()=>(e=(jb*e+zb)%lf)/lf}function Gb(e){return e.x}function Wb(e){return e.y}var Kb=10,Qb=Math.PI*(3-Math.sqrt(5));function Xb(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,u=new Map,l=rl(m),c=Yu("tick","end"),f=Hb();e==null&&(e=[]);function m(){p(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function p(A){var E,x=e.length,V;A===void 0&&(A=1);for(var M=0;M<A;++M)for(n+=(s-n)*i,u.forEach(function(k){k(n)}),E=0;E<x;++E)V=e[E],V.fx==null?V.x+=V.vx*=a:(V.x=V.fx,V.vx=0),V.fy==null?V.y+=V.vy*=a:(V.y=V.fy,V.vy=0);return t}function _(){for(var A=0,E=e.length,x;A<E;++A){if(x=e[A],x.index=A,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var V=Kb*Math.sqrt(.5+A),M=A*Qb;x.x=V*Math.cos(M),x.y=V*Math.sin(M)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function v(A){return A.initialize&&A.initialize(e,f),A}return _(),t={tick:p,restart:function(){return l.restart(m),t},stop:function(){return l.stop(),t},nodes:function(A){return arguments.length?(e=A,_(),u.forEach(v),t):e},alpha:function(A){return arguments.length?(n=+A,t):n},alphaMin:function(A){return arguments.length?(r=+A,t):r},alphaDecay:function(A){return arguments.length?(i=+A,t):+i},alphaTarget:function(A){return arguments.length?(s=+A,t):s},velocityDecay:function(A){return arguments.length?(a=1-A,t):1-a},randomSource:function(A){return arguments.length?(f=A,u.forEach(v),t):f},force:function(A,E){return arguments.length>1?(E==null?u.delete(A):u.set(A,v(E)),t):u.get(A)},find:function(A,E,x){var V=0,M=e.length,k,U,z,I,y;for(x==null?x=1/0:x*=x,V=0;V<M;++V)I=e[V],k=A-I.x,U=E-I.y,z=k*k+U*U,z<x&&(y=I,x=z);return y},on:function(A,E){return arguments.length>1?(c.on(A,E),t):c.on(A)}}}function Jb(){var e,t,n,r,i=Se(-30),s,a=1,u=1/0,l=.81;function c(_){var v,A=e.length,E=Dm(e,Gb,Wb).visitAfter(m);for(r=_,v=0;v<A;++v)t=e[v],E.visit(p)}function f(){if(e){var _,v=e.length,A;for(s=new Array(v),_=0;_<v;++_)A=e[_],s[A.index]=+i(A,_,e)}}function m(_){var v=0,A,E,x=0,V,M,k;if(_.length){for(V=M=k=0;k<4;++k)(A=_[k])&&(E=Math.abs(A.value))&&(v+=A.value,x+=E,V+=E*A.x,M+=E*A.y);_.x=V/x,_.y=M/x}else{A=_,A.x=A.data.x,A.y=A.data.y;do v+=s[A.data.index];while(A=A.next)}_.value=v}function p(_,v,A,E){if(!_.value)return!0;var x=_.x-t.x,V=_.y-t.y,M=E-v,k=x*x+V*V;if(M*M/l<k)return k<u&&(x===0&&(x=Un(n),k+=x*x),V===0&&(V=Un(n),k+=V*V),k<a&&(k=Math.sqrt(a*k)),t.vx+=x*_.value*r/k,t.vy+=V*_.value*r/k),!0;if(_.length||k>=u)return;(_.data!==t||_.next)&&(x===0&&(x=Un(n),k+=x*x),V===0&&(V=Un(n),k+=V*V),k<a&&(k=Math.sqrt(a*k)));do _.data!==t&&(M=s[_.data.index]*r/k,t.vx+=x*M,t.vy+=V*M);while(_=_.next)}return c.initialize=function(_,v){e=_,n=v,f()},c.strength=function(_){return arguments.length?(i=typeof _=="function"?_:Se(+_),f(),c):i},c.distanceMin=function(_){return arguments.length?(a=_*_,c):Math.sqrt(a)},c.distanceMax=function(_){return arguments.length?(u=_*_,c):Math.sqrt(u)},c.theta=function(_){return arguments.length?(l=_*_,c):Math.sqrt(l)},c}function Yb(e,t,n){var r,i=Se(.1),s,a;typeof e!="function"&&(e=Se(+e)),t==null&&(t=0),n==null&&(n=0);function u(c){for(var f=0,m=r.length;f<m;++f){var p=r[f],_=p.x-t||1e-6,v=p.y-n||1e-6,A=Math.sqrt(_*_+v*v),E=(a[f]-A)*s[f]*c/A;p.vx+=_*E,p.vy+=v*E}}function l(){if(r){var c,f=r.length;for(s=new Array(f),a=new Array(f),c=0;c<f;++c)a[c]=+e(r[c],c,r),s[c]=isNaN(a[c])?0:+i(r[c],c,r)}}return u.initialize=function(c){r=c,l()},u.strength=function(c){return arguments.length?(i=typeof c=="function"?c:Se(+c),l(),u):i},u.radius=function(c){return arguments.length?(e=typeof c=="function"?c:Se(+c),l(),u):e},u.x=function(c){return arguments.length?(t=+c,u):t},u.y=function(c){return arguments.length?(n=+c,u):n},u}function kr(e,t,n){this.k=e,this.x=t,this.y=n}kr.prototype={constructor:kr,scale:function(e){return e===1?this:new kr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new kr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};kr.prototype;var Zb=tr('<div class="loading-indicator svelte-ff8oum">Loading...</div>'),tR=tr('<li class="svelte-ff8oum"> <span class="count svelte-ff8oum"> </span></li>'),eR=tr('<a target="_blank" rel="noopener noreferrer"><img class="svelte-ff8oum"/></a>'),nR=tr('<div class="image-container svelte-ff8oum"></div>'),rR=tr('<p style="color:white;">No images yet  try a search above!</p>'),iR=Hf('<line stroke="#fff" stroke-opacity="0.6" stroke-width="2" class="svelte-ff8oum"></line>'),sR=Hf('<text fill="steelblue" text-anchor="middle" alignment-baseline="middle" class="svelte-ff8oum"> </text>'),oR=tr(`<main class="svelte-ff8oum"><!> <div class="trending-panel svelte-ff8oum"><h2 class="svelte-ff8oum"> Trending</h2> <ul class="svelte-ff8oum"></ul></div> <h1 class="svelte-ff8oum"><span>Hokusai's legendary</span><span class="italic svelte-ff8oum">"Great Wave off Kanagawa"</span><span>can be</span></h1> <input type="text" placeholder="anything" class="svelte-ff8oum"/> <button class="svelte-ff8oum">Search</button> <div class="container svelte-ff8oum"><!> <div><svg width="400" height="600" class="svelte-ff8oum"><!><!></svg></div></div></main>`);function aR(e,t){yf(t,!1);let n=pn([]),r=pn(""),i=pn([]),s=pn([]),a=pn([]),u=pn(!1);A_(async()=>{ct(u,!0);try{ct(i,await xh()),ct(a,await Ph(5)),c(),f()}finally{ct(u,!1)}});async function l(){if(H(r)){ct(u,!0);try{const b=await dt.get(`https://great-wave-api-1muq.onrender.com/api/images?q=${H(r)}`);ct(n,b.data),console.log("Fetched images:",H(n)),await VE(H(r)),ct(i,await xh()),ct(a,await Ph(5)),c(),f(),ct(r,"")}catch(b){console.error("Error fetching images",b)}finally{ct(u,!1)}}}function c(){ct(s,[]);for(let b=1;b<H(i).length;b++)H(s).push({source:H(i)[b-1].id,target:H(i)[b].id})}function f(){Xb(H(i)).force("link",$b(H(s)).id(b=>b.id).distance(60)).force("charge",Jb().strength(-200)).force("center",Ib(200*1.5,300*1.5)).force("gravity",Yb(b=>300-b.count*20,200,300)).on("tick",()=>{ct(i,[...H(i)])})}function m(b){return H(i).find(w=>w.id===b)}function p(b){const w=m(b.source),nt=m(b.target);return{x1:w?.x||0,y1:w?.y||0,x2:nt?.x||0,y2:nt?.y||0}}T_();var _=oR(),v=Ie(_);{var A=b=>{var w=Zb();be(b,w)};qo(v,b=>{H(u)&&b(A)})}var E=$e(v,2),x=$e(Ie(E),2);qi(x,5,()=>H(a),Bi,(b,w)=>{var nt=tR(),At=Ie(nt),Ee=$e(At),Lt=Ie(Ee);Ui(()=>{Bo(At,`${H(w).id??""} `),Bo(Lt,`(${H(w).count??""})`)}),be(b,nt)});var V=$e(E,4),M=$e(V,2),k=$e(M,2),U=Ie(k);{var z=b=>{var w=nR();qi(w,5,()=>H(n),Bi,(nt,At)=>{var Ee=eR(),Lt=Ie(Ee);Ui(()=>{ae(Ee,"href",H(At).link),ae(Lt,"src",H(At).link),ae(Lt,"alt",H(At).title)}),be(nt,Ee)}),be(b,w)},I=b=>{var w=rR();be(b,w)};qo(U,b=>{H(n).length>0?b(z):b(I,!1)})}var y=$e(U,2),T=Ie(y),R=Ie(T);qi(R,1,()=>H(s),Bi,(b,w)=>{var nt=l_(),At=Fg(nt);{var Ee=Lt=>{var Zt=iR();Ui((lr,vi,mo,oe)=>{ae(Zt,"x1",lr),ae(Zt,"y1",vi),ae(Zt,"x2",mo),ae(Zt,"y2",oe)},[()=>p(H(w)).x1,()=>p(H(w)).y1,()=>p(H(w)).x2,()=>p(H(w)).y2],wf),be(Lt,Zt)};qo(At,Lt=>{m(H(w).source)&&m(H(w).target)&&Lt(Ee)})}be(b,nt)});var S=$e(R);qi(S,1,()=>H(i),Bi,(b,w)=>{var nt=sR(),At=Ie(nt);Ui(()=>{ae(nt,"x",H(w).x),ae(nt,"y",H(w).y),ae(nt,"font-size",`${10+H(w).count}px`),Bo(At,H(w).id)}),pc("mouseover",nt,()=>console.log(H(w).id)),be(b,nt)}),E_(V,()=>H(r),b=>ct(r,b)),pc("click",M,l),be(e,_),vf()}c_(aR,{target:document.getElementById("app")});

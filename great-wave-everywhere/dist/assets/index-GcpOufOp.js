var gg=Object.defineProperty;var _g=(e,t,n)=>t in e?gg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bo=(e,t,n)=>_g(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const uc=!1;var Ga=Array.isArray,yg=Array.prototype.indexOf,Wa=Array.from,vg=Object.defineProperty,Fr=Object.getOwnPropertyDescriptor,df=Object.getOwnPropertyDescriptors,wg=Object.prototype,Eg=Array.prototype,Ka=Object.getPrototypeOf,lc=Object.isExtensible;function Tg(e){return e()}function sa(e){for(var t=0;t<e.length;t++)e[t]()}const Yt=2,pf=4,Bs=8,Qa=16,Ue=32,tr=64,Xa=128,Qt=256,ls=512,Zt=1024,Ne=2048,xn=4096,Pe=8192,Ja=16384,mf=32768,Ya=65536,cc=1<<17,Ag=1<<18,gf=1<<19,oa=1<<20,Ur=Symbol("$state"),Ig=Symbol(""),_f=new class extends Error{constructor(){super(...arguments);Bo(this,"name","StaleReactionError");Bo(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function yf(e){return e===this.v}function bg(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function vf(e){return!bg(e,this.v)}function Rg(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Sg(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Cg(e){throw new Error("https://svelte.dev/e/effect_orphan")}function xg(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pg(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Vg(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ng(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ui=!1,Dg=!1;function kg(){ui=!0}const Za=1,tu=2,wf=4,Og=8,Mg=16,Lg=2,Bt=Symbol(),Fg="http://www.w3.org/1999/xhtml";function Ug(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let lt=null;function hc(e){lt=e}function Ef(e,t=!1,n){var r=lt={p:lt,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};ui&&!t&&(lt.l={s:null,u:null,r1:[],r2:Gr(!1)}),Nf(()=>{r.d=!0})}function Tf(e){const t=lt;if(t!==null){const a=t.e;if(a!==null){var n=nt,r=tt;t.e=null;try{for(var i=0;i<a.length;i++){var s=a[i];Ze(s.effect),ve(s.reaction),Df(s.fn)}}finally{Ze(n),ve(r)}}lt=t.p,t.m=!0}return{}}function li(){return!ui||lt!==null&&lt.l===null}function Cr(e){if(typeof e!="object"||e===null||Ur in e)return e;const t=Ka(e);if(t!==wg&&t!==Eg)return e;var n=new Map,r=Ga(e),i=je(0),s=tt,a=u=>{var l=tt;ve(s);var c=u();return ve(l),c};return r&&n.set("length",je(e.length)),new Proxy(e,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Pg();var f=n.get(l);return f===void 0?f=a(()=>{var p=je(c.value);return n.set(l,p),p}):ct(f,c.value,!0),!0},deleteProperty(u,l){var c=n.get(l);if(c===void 0){if(l in u){const m=a(()=>je(Bt));n.set(l,m),qo(i)}}else{if(r&&typeof l=="string"){var f=n.get("length"),p=Number(l);Number.isInteger(p)&&p<f.v&&ct(f,p)}ct(c,Bt),qo(i)}return!0},get(u,l,c){var _;if(l===Ur)return e;var f=n.get(l),p=l in u;if(f===void 0&&(!p||(_=Fr(u,l))!=null&&_.writable)&&(f=a(()=>{var v=Cr(p?u[l]:Bt),A=je(v);return A}),n.set(l,f)),f!==void 0){var m=j(f);return m===Bt?void 0:m}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=j(f))}else if(c===void 0){var p=n.get(l),m=p==null?void 0:p.v;if(p!==void 0&&m!==Bt)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return c},has(u,l){var m;if(l===Ur)return!0;var c=n.get(l),f=c!==void 0&&c.v!==Bt||Reflect.has(u,l);if(c!==void 0||nt!==null&&(!f||(m=Fr(u,l))!=null&&m.writable)){c===void 0&&(c=a(()=>{var _=f?Cr(u[l]):Bt,v=je(_);return v}),n.set(l,c));var p=j(c);if(p===Bt)return!1}return f},set(u,l,c,f){var M;var p=n.get(l),m=l in u;if(r&&l==="length")for(var _=c;_<p.v;_+=1){var v=n.get(_+"");v!==void 0?ct(v,Bt):_ in u&&(v=a(()=>je(Bt)),n.set(_+"",v))}if(p===void 0)(!m||(M=Fr(u,l))!=null&&M.writable)&&(p=a(()=>je(void 0)),ct(p,Cr(c)),n.set(l,p));else{m=p.v!==Bt;var A=a(()=>Cr(c));ct(p,A)}var E=Reflect.getOwnPropertyDescriptor(u,l);if(E!=null&&E.set&&E.set.call(f,c),!m){if(r&&typeof l=="string"){var x=n.get("length"),N=Number(l);Number.isInteger(N)&&N>=x.v&&ct(x,N+1)}qo(i)}return!0},ownKeys(u){j(i);var l=Reflect.ownKeys(u).filter(p=>{var m=n.get(p);return m===void 0||m.v!==Bt});for(var[c,f]of n)f.v!==Bt&&!(c in u)&&l.push(c);return l},setPrototypeOf(){Vg()}})}function qo(e,t=1){ct(e,e.v+t)}function eu(e){var t=Yt|Ne,n=tt!==null&&(tt.f&Yt)!==0?tt:null;return nt===null||n!==null&&(n.f&Qt)!==0?t|=Qt:nt.f|=gf,{ctx:lt,deps:null,effects:null,equals:yf,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??nt,ac:null}}function Af(e){const t=eu(e);return t.equals=vf,t}function If(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ye(t[n])}}function Bg(e){for(var t=e.parent;t!==null;){if((t.f&Yt)===0)return t;t=t.parent}return null}function bf(e){var t,n=nt;Ze(Bg(e));try{If(e),t=Gf(e)}finally{Ze(n)}return t}function Rf(e){var t=bf(e);if(e.equals(t)||(e.v=t,e.wv=zf()),!nr){var n=(Ge||(e.f&Qt)!==0)&&e.deps!==null?xn:Zt;we(e,n)}}const Hr=new Map;function Gr(e,t){var n={f:0,v:e,reactions:null,equals:yf,rv:0,wv:0};return n}function je(e,t){const n=Gr(e);return Jg(n),n}function gn(e,t=!1,n=!0){var i;const r=Gr(e);return t||(r.equals=vf),ui&&n&&lt!==null&&lt.l!==null&&((i=lt.l).s??(i.s=[])).push(r),r}function ct(e,t,n=!1){tt!==null&&(!fe||(tt.f&cc)!==0)&&li()&&(tt.f&(Yt|Qa|cc))!==0&&!(Et!=null&&Et[1].includes(e)&&Et[0]===tt)&&Ng();let r=n?Cr(t):t;return aa(e,r)}function aa(e,t){if(!e.equals(t)){var n=e.v;nr?Hr.set(e,t):Hr.set(e,n),e.v=t,(e.f&Yt)!==0&&((e.f&Ne)!==0&&bf(e),we(e,(e.f&Qt)===0?Zt:xn)),e.wv=zf(),Sf(e,Ne),li()&&nt!==null&&(nt.f&Zt)!==0&&(nt.f&(Ue|tr))===0&&(Xt===null?Yg([e]):Xt.push(e))}return t}function Sf(e,t){var n=e.reactions;if(n!==null)for(var r=li(),i=n.length,s=0;s<i;s++){var a=n[s],u=a.f;(u&Ne)===0&&(!r&&a===nt||(we(a,t),(u&(Zt|Qt))!==0&&((u&Yt)!==0?Sf(a,xn):ou(a))))}}let qg=!1;var fc,Cf,xf,Pf;function $g(){if(fc===void 0){fc=window,Cf=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;xf=Fr(t,"firstChild").get,Pf=Fr(t,"nextSibling").get,lc(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),lc(n)&&(n.__t=void 0)}}function nu(e=""){return document.createTextNode(e)}function Ce(e){return xf.call(e)}function qs(e){return Pf.call(e)}function ne(e,t){return Ce(e)}function jg(e,t){{var n=Ce(e);return n instanceof Comment&&n.data===""?qs(n):n}}function be(e,t=1,n=!1){let r=e;for(;t--;)r=qs(r);return r}function zg(e){e.textContent=""}function Vf(e){nt===null&&tt===null&&Cg(),tt!==null&&(tt.f&Qt)!==0&&nt===null&&Sg(),nr&&Rg()}function Hg(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function er(e,t,n,r=!0){var i=nt,s={ctx:lt,deps:null,nodes_start:null,nodes_end:null,f:e|Ne,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{su(s),s.f|=mf}catch(l){throw Ye(s),l}else t!==null&&ou(s);var a=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(gf|Xa))===0;if(!a&&r&&(i!==null&&Hg(s,i),tt!==null&&(tt.f&Yt)!==0)){var u=tt;(u.effects??(u.effects=[])).push(s)}return s}function Nf(e){const t=er(Bs,null,!1);return we(t,Zt),t.teardown=e,t}function ua(e){Vf();var t=nt!==null&&(nt.f&Ue)!==0&&lt!==null&&!lt.m;if(t){var n=lt;(n.e??(n.e=[])).push({fn:e,effect:nt,reaction:tt})}else{var r=Df(e);return r}}function Gg(e){return Vf(),kf(e)}function Wg(e){const t=er(tr,e,!0);return(n={})=>new Promise(r=>{n.outro?cs(t,()=>{Ye(t),r(void 0)}):(Ye(t),r(void 0))})}function Df(e){return er(pf,e,!1)}function kf(e){return er(Bs,e,!0)}function xr(e,t=[],n=eu){const r=t.map(n);return ru(()=>e(...r.map(j)))}function ru(e,t=0){var n=er(Bs|Qa|t,e,!0);return n}function Wr(e,t=!0){return er(Bs|Ue,e,!0,t)}function Of(e){var t=e.teardown;if(t!==null){const n=nr,r=tt;dc(!0),ve(null);try{t.call(null)}finally{dc(n),ve(r)}}}function Mf(e,t=!1){var i;var n=e.first;for(e.first=e.last=null;n!==null;){(i=n.ac)==null||i.abort(_f);var r=n.next;(n.f&tr)!==0?n.parent=null:Ye(n,t),n=r}}function Kg(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Ue)===0&&Ye(t),t=n}}function Ye(e,t=!0){var n=!1;(t||(e.f&Ag)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Lf(e.nodes_start,e.nodes_end),n=!0),Mf(e,t&&!n),ms(e,0),we(e,Ja);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Of(e);var i=e.parent;i!==null&&i.first!==null&&Ff(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Lf(e,t){for(;e!==null;){var n=e===t?null:qs(e);e.remove(),e=n}}function Ff(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function cs(e,t){var n=[];iu(e,n,!0),Uf(n,()=>{Ye(e),t&&t()})}function Uf(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function iu(e,t,n){if((e.f&Pe)===0){if(e.f^=Pe,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Ya)!==0||(r.f&Ue)!==0;iu(r,t,s?n:!1),r=i}}}function hs(e){Bf(e,!0)}function Bf(e,t){if((e.f&Pe)!==0){e.f^=Pe;for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Ya)!==0||(n.f&Ue)!==0;Bf(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let fs=[];function Qg(){var e=fs;fs=[],sa(e)}function qf(e){fs.length===0&&queueMicrotask(Qg),fs.push(e)}function Xg(e){var t=nt;if((t.f&mf)===0){if((t.f&Xa)===0)throw e;t.fn(e)}else $f(e,t)}function $f(e,t){for(;t!==null;){if((t.f&Xa)!==0)try{t.b.error(e);return}catch{}t=t.parent}throw e}let la=!1,ds=null,En=!1,nr=!1;function dc(e){nr=e}let Xi=[];let tt=null,fe=!1;function ve(e){tt=e}let nt=null;function Ze(e){nt=e}let Et=null;function Jg(e){tt!==null&&tt.f&oa&&(Et===null?Et=[tt,[e]]:Et[1].push(e))}let Lt=null,Wt=0,Xt=null;function Yg(e){Xt=e}let jf=1,ps=0,Ge=!1;function zf(){return++jf}function $s(e){var p;var t=e.f;if((t&Ne)!==0)return!0;if((t&xn)!==0){var n=e.deps,r=(t&Qt)!==0;if(n!==null){var i,s,a=(t&ls)!==0,u=r&&nt!==null&&!Ge,l=n.length;if(a||u){var c=e,f=c.parent;for(i=0;i<l;i++)s=n[i],(a||!((p=s==null?void 0:s.reactions)!=null&&p.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);a&&(c.f^=ls),u&&f!==null&&(f.f&Qt)===0&&(c.f^=Qt)}for(i=0;i<l;i++)if(s=n[i],$s(s)&&Rf(s),s.wv>e.wv)return!0}(!r||nt!==null&&!Ge)&&we(e,Zt)}return!1}function Hf(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];Et!=null&&Et[1].includes(e)&&Et[0]===tt||((s.f&Yt)!==0?Hf(s,t,!1):t===s&&(n?we(s,Ne):(s.f&Zt)!==0&&we(s,xn),ou(s)))}}function Gf(e){var _;var t=Lt,n=Wt,r=Xt,i=tt,s=Ge,a=Et,u=lt,l=fe,c=e.f;Lt=null,Wt=0,Xt=null,Ge=(c&Qt)!==0&&(fe||!En||tt===null),tt=(c&(Ue|tr))===0?e:null,Et=null,hc(e.ctx),fe=!1,ps++,e.f|=oa,e.ac!==null&&(e.ac.abort(_f),e.ac=null);try{var f=(0,e.fn)(),p=e.deps;if(Lt!==null){var m;if(ms(e,Wt),p!==null&&Wt>0)for(p.length=Wt+Lt.length,m=0;m<Lt.length;m++)p[Wt+m]=Lt[m];else e.deps=p=Lt;if(!Ge||(c&Yt)!==0&&e.reactions!==null)for(m=Wt;m<p.length;m++)((_=p[m]).reactions??(_.reactions=[])).push(e)}else p!==null&&Wt<p.length&&(ms(e,Wt),p.length=Wt);if(li()&&Xt!==null&&!fe&&p!==null&&(e.f&(Yt|xn|Ne))===0)for(m=0;m<Xt.length;m++)Hf(Xt[m],e);return i!==null&&i!==e&&(ps++,Xt!==null&&(r===null?r=Xt:r.push(...Xt))),f}catch(v){Xg(v)}finally{Lt=t,Wt=n,Xt=r,tt=i,Ge=s,Et=a,hc(u),fe=l,e.f^=oa}}function Zg(e,t){let n=t.reactions;if(n!==null){var r=yg.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&Yt)!==0&&(Lt===null||!Lt.includes(t))&&(we(t,xn),(t.f&(Qt|ls))===0&&(t.f^=ls),If(t),ms(t,0))}function ms(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Zg(e,n[r])}function su(e){var t=e.f;if((t&Ja)===0){we(e,Zt);var n=nt,r=En;nt=e,En=!0;try{(t&Qa)!==0?Kg(e):Mf(e),Of(e);var i=Gf(e);e.teardown=typeof i=="function"?i:null,e.wv=jf;var s;uc&&Dg&&(e.f&Ne)!==0&&e.deps}finally{En=r,nt=n}}}function t_(){try{xg()}catch(e){if(ds!==null)$f(e,ds);else throw e}}function e_(){var e=En;try{var t=0;for(En=!0;Xi.length>0;){t++>1e3&&t_();var n=Xi,r=n.length;Xi=[];for(var i=0;i<r;i++){var s=r_(n[i]);n_(s)}Hr.clear()}}finally{la=!1,En=e,ds=null}}function n_(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];(r.f&(Ja|Pe))===0&&$s(r)&&(su(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Ff(r):r.fn=null))}}function ou(e){la||(la=!0,queueMicrotask(e_));for(var t=ds=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(tr|Ue))!==0){if((n&Zt)===0)return;t.f^=Zt}}Xi.push(t)}function r_(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(Ue|tr))!==0,s=i&&(r&Zt)!==0;if(!s&&(r&Pe)===0){(r&pf)!==0?t.push(n):i?n.f^=Zt:$s(n)&&su(n);var a=n.first;if(a!==null){n=a;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}return t}function j(e){var t=e.f,n=(t&Yt)!==0;if(tt!==null&&!fe){if(!(Et!=null&&Et[1].includes(e))||Et[0]!==tt){var r=tt.deps;e.rv<ps&&(e.rv=ps,Lt===null&&r!==null&&r[Wt]===e?Wt++:Lt===null?Lt=[e]:(!Ge||!Lt.includes(e))&&Lt.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&Qt)===0&&(i.f^=Qt)}return n&&(i=e,$s(i)&&Rf(i)),nr&&Hr.has(e)?Hr.get(e):e.v}function au(e){var t=fe;try{return fe=!0,e()}finally{fe=t}}const i_=-7169;function we(e,t){e.f=e.f&i_|t}function s_(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ur in e)ca(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Ur in n&&ca(n)}}}function ca(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{ca(e[r],t)}catch{}const n=Ka(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=df(n);for(let i in r){const s=r[i].get;if(s)try{s.call(e)}catch{}}}}}const o_=["touchstart","touchmove"];function a_(e){return o_.includes(e)}let pc=!1;function u_(){pc||(pc=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Wf(e){var t=tt,n=nt;ve(null),Ze(null);try{return e()}finally{ve(t),Ze(n)}}function l_(e,t,n,r=n){e.addEventListener(t,()=>Wf(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),u_()}const c_=new Set,mc=new Set;function h_(e,t,n,r={}){function i(s){if(r.capture||Pr.call(t,s),!s.cancelBubble)return Wf(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?qf(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function gc(e,t,n,r,i){var s={capture:r,passive:i},a=h_(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Nf(()=>{t.removeEventListener(e,a,s)})}function Pr(e){var N;var t=this,n=t.ownerDocument,r=e.type,i=((N=e.composedPath)==null?void 0:N.call(e))||[],s=i[0]||e.target,a=0,u=e.__root;if(u){var l=i.indexOf(u);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(a=l)}if(s=i[a]||e.target,s!==t){vg(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=tt,p=nt;ve(null),Ze(null);try{for(var m,_=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var A=s["__"+r];if(A!=null&&(!s.disabled||e.target===s))if(Ga(A)){var[E,...x]=A;E.apply(s,[e,...x])}else A.call(s,e)}catch(M){m?_.push(M):m=M}if(e.cancelBubble||v===t||v===null)break;s=v}if(m){for(let M of _)queueMicrotask(()=>{throw M});throw m}}finally{e.__root=t,delete e.currentTarget,ve(f),Ze(p)}}}function uu(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function js(e,t){var n=nt;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function rr(e,t){var n=(t&Lg)!==0,r,i=!e.startsWith("<!>");return()=>{r===void 0&&(r=uu(i?e:"<!>"+e),r=Ce(r));var s=n||Cf?document.importNode(r,!0):r.cloneNode(!0);return js(s,s),s}}function f_(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=uu(i),u=Ce(a);s=Ce(u)}var l=s.cloneNode(!0);return js(l,l),l}}function Kf(e,t){return f_(e,t,"svg")}function d_(){var e=document.createDocumentFragment(),t=document.createComment(""),n=nu();return e.append(t,n),js(t,n),e}function Re(e,t){e!==null&&e.before(t)}function $o(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function p_(e,t){return m_(e,t)}const Ln=new Map;function m_(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:a=!0}){$g();var u=new Set,l=p=>{for(var m=0;m<p.length;m++){var _=p[m];if(!u.has(_)){u.add(_);var v=a_(_);t.addEventListener(_,Pr,{passive:v});var A=Ln.get(_);A===void 0?(document.addEventListener(_,Pr,{passive:v}),Ln.set(_,1)):Ln.set(_,A+1)}}};l(Wa(c_)),mc.add(l);var c=void 0,f=Wg(()=>{var p=n??t.appendChild(nu());return Wr(()=>{if(s){Ef({});var m=lt;m.c=s}i&&(r.$$events=i),c=e(p,r)||{},s&&Tf()}),()=>{var v;for(var m of u){t.removeEventListener(m,Pr);var _=Ln.get(m);--_===0?(document.removeEventListener(m,Pr),Ln.delete(m)):Ln.set(m,_)}mc.delete(l),p!==n&&((v=p.parentNode)==null||v.removeChild(p))}});return g_.set(c,f),c}let g_=new WeakMap;function jo(e,t,[n,r]=[0,0]){var i=e,s=null,a=null,u=Bt,l=n>0?Ya:0,c=!1;const f=(m,_=!0)=>{c=!0,p(_,m)},p=(m,_)=>{u!==(u=m)&&(u?(s?hs(s):_&&(s=Wr(()=>_(i))),a&&cs(a,()=>{a=null})):(a?hs(a):_&&(a=Wr(()=>_(i,[n+1,r]))),s&&cs(s,()=>{s=null})))};ru(()=>{c=!1,t(f),c||p(null,null)},l)}function Bi(e,t){return t}function __(e,t,n,r){for(var i=[],s=t.length,a=0;a<s;a++)iu(t[a].e,i,!0);var u=s>0&&i.length===0&&n!==null;if(u){var l=n.parentNode;zg(l),l.append(n),r.clear(),ze(e,t[0].prev,t[s-1].next)}Uf(i,()=>{for(var c=0;c<s;c++){var f=t[c];u||(r.delete(f.k),ze(e,f.prev,f.next)),Ye(f.e,!u)}})}function qi(e,t,n,r,i,s=null){var a=e,u={flags:t,items:new Map,first:null},l=(t&wf)!==0;if(l){var c=e;a=c.appendChild(nu())}var f=null,p=!1,m=Af(()=>{var _=n();return Ga(_)?_:_==null?[]:Wa(_)});ru(()=>{var _=j(m),v=_.length;p&&v===0||(p=v===0,y_(_,u,a,i,t,r,n),s!==null&&(v===0?f?hs(f):f=Wr(()=>s(a)):f!==null&&cs(f,()=>{f=null})),j(m))})}function y_(e,t,n,r,i,s,a){var X,pt,te,vt;var u=(i&Og)!==0,l=(i&(Za|tu))!==0,c=e.length,f=t.items,p=t.first,m=p,_,v=null,A,E=[],x=[],N,M,k,U;if(u)for(U=0;U<c;U+=1)N=e[U],M=s(N,U),k=f.get(M),k!==void 0&&((X=k.a)==null||X.measure(),(A??(A=new Set)).add(k));for(U=0;U<c;U+=1){if(N=e[U],M=s(N,U),k=f.get(M),k===void 0){var H=m?m.e.nodes_start:n;v=w_(H,t,v,v===null?t.first:v.next,N,M,U,r,i,a),f.set(M,v),E=[],x=[],m=v.next;continue}if(l&&v_(k,N,U,i),(k.e.f&Pe)!==0&&(hs(k.e),u&&((pt=k.a)==null||pt.unfix(),(A??(A=new Set)).delete(k))),k!==m){if(_!==void 0&&_.has(k)){if(E.length<x.length){var I=x[0],y;v=I.prev;var T=E[0],R=E[E.length-1];for(y=0;y<E.length;y+=1)_c(E[y],I,n);for(y=0;y<x.length;y+=1)_.delete(x[y]);ze(t,T.prev,R.next),ze(t,v,T),ze(t,R,I),m=I,v=R,U-=1,E=[],x=[]}else _.delete(k),_c(k,m,n),ze(t,k.prev,k.next),ze(t,k,v===null?t.first:v.next),ze(t,v,k),v=k;continue}for(E=[],x=[];m!==null&&m.k!==M;)(m.e.f&Pe)===0&&(_??(_=new Set)).add(m),x.push(m),m=m.next;if(m===null)continue;k=m}E.push(k),v=k,m=k.next}if(m!==null||_!==void 0){for(var S=_===void 0?[]:Wa(_);m!==null;)(m.e.f&Pe)===0&&S.push(m),m=m.next;var b=S.length;if(b>0){var w=(i&wf)!==0&&c===0?n:null;if(u){for(U=0;U<b;U+=1)(te=S[U].a)==null||te.measure();for(U=0;U<b;U+=1)(vt=S[U].a)==null||vt.fix()}__(t,S,w,f)}}u&&qf(()=>{var Tt;if(A!==void 0)for(k of A)(Tt=k.a)==null||Tt.apply()}),nt.first=t.first&&t.first.e,nt.last=v&&v.e}function v_(e,t,n,r){(r&Za)!==0&&aa(e.v,t),(r&tu)!==0?aa(e.i,n):e.i=n}function w_(e,t,n,r,i,s,a,u,l,c){var f=(l&Za)!==0,p=(l&Mg)===0,m=f?p?gn(i,!1,!1):Gr(i):i,_=(l&tu)===0?a:Gr(a),v={i:_,v:m,k:s,a:null,e:null,prev:n,next:r};try{return v.e=Wr(()=>u(e,m,_,c),qg),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?t.first=v:(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function _c(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var a=qs(s);i.before(s),s=a}}function ze(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function E_(e,t,n=!1,r=!1,i=!1){var s=e,a="";xr(()=>{var u=nt;if(a!==(a=t()??"")&&(u.nodes_start!==null&&(Lf(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),a!=="")){var l=a+"";n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var c=uu(l);if((n||r)&&(c=Ce(c)),js(Ce(c),c.lastChild),n||r)for(;Ce(c);)s.before(Ce(c));else s.before(c)}})}const T_=Symbol("is custom element"),A_=Symbol("is html");function le(e,t,n,r){var i=I_(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Ig]=n),n==null?e.removeAttribute(t):typeof n!="string"&&b_(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function I_(e){return e.__attributes??(e.__attributes={[T_]:e.nodeName.includes("-"),[A_]:e.namespaceURI===Fg})}var yc=new Map;function b_(e){var t=yc.get(e.nodeName);if(t)return t;yc.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=df(r);for(var s in n)n[s].set&&t.push(s);r=Ka(r)}return t}function R_(e,t,n=t){var r=li();l_(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=zo(e)?Ho(s):s,n(s),r&&s!==(s=t())){var a=e.selectionStart,u=e.selectionEnd;e.value=s??"",u!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(u,e.value.length))}}),au(t)==null&&e.value&&n(zo(e)?Ho(e.value):e.value),kf(()=>{var i=t();zo(e)&&i===Ho(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function zo(e){var t=e.type;return t==="number"||t==="range"}function Ho(e){return e===""?null:+e}function S_(e=!1){const t=lt,n=t.l.u;if(!n)return;let r=()=>s_(t.s);if(e){let i=0,s={};const a=eu(()=>{let u=!1;const l=t.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],u=!0);return u&&i++,i});r=()=>j(a)}n.b.length&&Gg(()=>{vc(t,r),sa(n.b)}),ua(()=>{const i=au(()=>n.m.map(Tg));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&ua(()=>{vc(t,r),sa(n.a)})}function vc(e,t){if(e.l.s)for(const n of e.l.s)j(n);t()}function C_(e){lt===null&&Ug(),ui&&lt.l!==null?x_(lt).m.push(e):ua(()=>{const t=au(e);if(typeof t=="function")return t})}function x_(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const P_="5";var ff;typeof window<"u"&&((ff=window.__svelte??(window.__svelte={})).v??(ff.v=new Set)).add(P_);kg();const V_=()=>{};var wc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},N_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],a=e[n++],u=e[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},Xf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],a=i+1<e.length,u=a?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,f=s>>2,p=(s&3)<<4|u>>4;let m=(u&15)<<2|c>>6,_=c&63;l||(_=64,a||(m=64)),r.push(n[f],n[p],n[m],n[_])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):N_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],u=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const p=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||u==null||c==null||p==null)throw new D_;const m=s<<2|u>>4;if(r.push(m),c!==64){const _=u<<4&240|c>>2;if(r.push(_),p!==64){const v=c<<6&192|p;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class D_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k_=function(e){const t=Qf(e);return Xf.encodeByteArray(t,!0)},gs=function(e){return k_(e).replace(/\./g,"")},O_=function(e){try{return Xf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=()=>M_().__FIREBASE_DEFAULTS__,F_=()=>{if(typeof process>"u"||typeof wc>"u")return;const e=wc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},U_=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&O_(e[1]);return t&&JSON.parse(t)},lu=()=>{try{return V_()||L_()||F_()||U_()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},B_=e=>{var t,n;return(n=(t=lu())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},q_=e=>{const t=B_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Jf=()=>{var e;return(e=lu())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j_(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[gs(JSON.stringify(n)),gs(JSON.stringify(a)),""].join(".")}const Br={};function H_(){const e={prod:[],emulator:[]};for(const t of Object.keys(Br))Br[t]?e.emulator.push(t):e.prod.push(t);return e}function G_(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Ec=!1;function W_(e,t){if(typeof window>"u"||typeof document>"u"||!cu(window.location.host)||Br[e]===t||Br[e]||Ec)return;Br[e]=t;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=H_().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function u(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Ec=!0,a()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=G_(r),_=n("text"),v=document.getElementById(_)||document.createElement("span"),A=n("learnmore"),E=document.getElementById(A)||document.createElement("a"),x=n("preprendIcon"),N=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const M=m.element;u(M),f(E,A);const k=c();l(N,x),M.append(N,v,E,k),document.body.appendChild(M)}s?(v.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q_(){var e;const t=(e=lu())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X_(){return!Q_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J_(){try{return typeof indexedDB=="object"}catch{return!1}}function Y_(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="FirebaseError";class ir extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Z_,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yf.prototype.create)}}class Yf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?ty(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new ir(i,u,r)}}function ty(e,t){return e.replace(ey,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const ey=/\{\$([^}]+)}/g;function _s(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],a=t[i];if(Tc(s)&&Tc(a)){if(!_s(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Tc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(e){return e&&e._delegate?e._delegate:e}class Kr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new $_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(iy(t))try{this.getOrInitializeService({instanceIdentifier:_n})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=_n){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=_n){return this.instances.has(t)}getOptions(t=_n){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&t(a,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ry(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=_n){return this.component?this.component.multipleInstances?t:_n:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ry(e){return e===_n?void 0:e}function iy(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ny(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Y||(Y={}));const oy={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ay=Y.INFO,uy={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ly=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=uy[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Zf{constructor(t){this.name=t,this._logLevel=ay,this._logHandler=ly,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Y))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?oy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...t),this._logHandler(this,Y.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...t),this._logHandler(this,Y.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...t),this._logHandler(this,Y.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...t),this._logHandler(this,Y.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...t),this._logHandler(this,Y.ERROR,...t)}}const cy=(e,t)=>t.some(n=>e instanceof n);let Ac,Ic;function hy(){return Ac||(Ac=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fy(){return Ic||(Ic=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const td=new WeakMap,ha=new WeakMap,ed=new WeakMap,Go=new WeakMap,hu=new WeakMap;function dy(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{n(Ke(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&td.set(n,e)}).catch(()=>{}),hu.set(t,e),t}function py(e){if(ha.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});ha.set(e,t)}let fa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ha.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ed.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ke(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function my(e){fa=e(fa)}function gy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Wo(this),t,...n);return ed.set(r,t.sort?t.sort():[t]),Ke(r)}:fy().includes(e)?function(...t){return e.apply(Wo(this),t),Ke(td.get(this))}:function(...t){return Ke(e.apply(Wo(this),t))}}function _y(e){return typeof e=="function"?gy(e):(e instanceof IDBTransaction&&py(e),cy(e,hy())?new Proxy(e,fa):e)}function Ke(e){if(e instanceof IDBRequest)return dy(e);if(Go.has(e))return Go.get(e);const t=_y(e);return t!==e&&(Go.set(e,t),hu.set(t,e)),t}const Wo=e=>hu.get(e);function yy(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),u=Ke(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Ke(a.result),l.oldVersion,l.newVersion,Ke(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),u.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),u}const vy=["get","getKey","getAll","getAllKeys","count"],wy=["put","add","delete","clear"],Ko=new Map;function bc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ko.get(t))return Ko.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=wy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vy.includes(n)))return;const s=async function(a,...u){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(await Promise.all([c[n](...u),i&&l.done]))[0]};return Ko.set(t,s),s}my(e=>({...e,get:(t,n,r)=>bc(t,n)||e.get(t,n,r),has:(t,n)=>!!bc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ty(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ty(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const da="@firebase/app",Rc="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke=new Zf("@firebase/app"),Ay="@firebase/app-compat",Iy="@firebase/analytics-compat",by="@firebase/analytics",Ry="@firebase/app-check-compat",Sy="@firebase/app-check",Cy="@firebase/auth",xy="@firebase/auth-compat",Py="@firebase/database",Vy="@firebase/data-connect",Ny="@firebase/database-compat",Dy="@firebase/functions",ky="@firebase/functions-compat",Oy="@firebase/installations",My="@firebase/installations-compat",Ly="@firebase/messaging",Fy="@firebase/messaging-compat",Uy="@firebase/performance",By="@firebase/performance-compat",qy="@firebase/remote-config",$y="@firebase/remote-config-compat",jy="@firebase/storage",zy="@firebase/storage-compat",Hy="@firebase/firestore",Gy="@firebase/ai",Wy="@firebase/firestore-compat",Ky="firebase",Qy="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]",Xy={[da]:"fire-core",[Ay]:"fire-core-compat",[by]:"fire-analytics",[Iy]:"fire-analytics-compat",[Sy]:"fire-app-check",[Ry]:"fire-app-check-compat",[Cy]:"fire-auth",[xy]:"fire-auth-compat",[Py]:"fire-rtdb",[Vy]:"fire-data-connect",[Ny]:"fire-rtdb-compat",[Dy]:"fire-fn",[ky]:"fire-fn-compat",[Oy]:"fire-iid",[My]:"fire-iid-compat",[Ly]:"fire-fcm",[Fy]:"fire-fcm-compat",[Uy]:"fire-perf",[By]:"fire-perf-compat",[qy]:"fire-rc",[$y]:"fire-rc-compat",[jy]:"fire-gcs",[zy]:"fire-gcs-compat",[Hy]:"fire-fst",[Wy]:"fire-fst-compat",[Gy]:"fire-vertex","fire-js":"fire-js",[Ky]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Map,Jy=new Map,ma=new Map;function Sc(e,t){try{e.container.addComponent(t)}catch(n){ke.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function vs(e){const t=e.name;if(ma.has(t))return ke.debug(`There were multiple attempts to register component ${t}.`),!1;ma.set(t,e);for(const n of ys.values())Sc(n,e);for(const n of Jy.values())Sc(n,e);return!0}function Yy(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Zy(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qe=new Yf("app","Firebase",tv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qe.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=Qy;function nd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:pa,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Qe.create("bad-app-name",{appName:String(i)});if(n||(n=Jf()),!n)throw Qe.create("no-options");const s=ys.get(i);if(s){if(_s(n,s.options)&&_s(r,s.config))return s;throw Qe.create("duplicate-app",{appName:i})}const a=new sy(i);for(const l of ma.values())a.addComponent(l);const u=new ev(n,r,a);return ys.set(i,u),u}function rv(e=pa){const t=ys.get(e);if(!t&&e===pa&&Jf())return nd();if(!t)throw Qe.create("no-app",{appName:e});return t}function jn(e,t,n){var r;let i=(r=Xy[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${t}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ke.warn(u.join(" "));return}vs(new Kr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="firebase-heartbeat-database",sv=1,Qr="firebase-heartbeat-store";let Qo=null;function rd(){return Qo||(Qo=yy(iv,sv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Qr)}catch(n){console.warn(n)}}}}).catch(e=>{throw Qe.create("idb-open",{originalErrorMessage:e.message})})),Qo}async function ov(e){try{const n=(await rd()).transaction(Qr),r=await n.objectStore(Qr).get(id(e));return await n.done,r}catch(t){if(t instanceof ir)ke.warn(t.message);else{const n=Qe.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ke.warn(n.message)}}}async function Cc(e,t){try{const r=(await rd()).transaction(Qr,"readwrite");await r.objectStore(Qr).put(t,id(e)),await r.done}catch(n){if(n instanceof ir)ke.warn(n.message);else{const r=Qe.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ke.warn(r.message)}}}function id(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=1024,uv=30;class lv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>uv){const a=fv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ke.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xc(),{heartbeatsToSend:r,unsentEntries:i}=cv(this._heartbeatsCache.heartbeats),s=gs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ke.warn(n),""}}}function xc(){return new Date().toISOString().substring(0,10)}function cv(e,t=av){const n=[];let r=e.slice();for(const i of e){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Pc(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J_()?Y_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ov(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Pc(e){return gs(JSON.stringify({version:2,heartbeats:e})).length}function fv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(e){vs(new Kr("platform-logger",t=>new Ey(t),"PRIVATE")),vs(new Kr("heartbeat",t=>new lv(t),"PRIVATE")),jn(da,Rc,e),jn(da,Rc,"esm2017"),jn("fire-js","")}dv("");var pv="firebase",mv="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(pv,mv,"app");var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xe,sd;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,y){function T(){}T.prototype=y.prototype,I.D=y.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(R,S,b){for(var w=Array(arguments.length-2),X=2;X<arguments.length;X++)w[X-2]=arguments[X];return y.prototype[S].apply(R,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,T){T||(T=0);var R=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)R[S]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(S=0;16>S;++S)R[S]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=I.g[0],T=I.g[1],S=I.g[2];var b=I.g[3],w=y+(b^T&(S^b))+R[0]+3614090360&4294967295;y=T+(w<<7&4294967295|w>>>25),w=b+(S^y&(T^S))+R[1]+3905402710&4294967295,b=y+(w<<12&4294967295|w>>>20),w=S+(T^b&(y^T))+R[2]+606105819&4294967295,S=b+(w<<17&4294967295|w>>>15),w=T+(y^S&(b^y))+R[3]+3250441966&4294967295,T=S+(w<<22&4294967295|w>>>10),w=y+(b^T&(S^b))+R[4]+4118548399&4294967295,y=T+(w<<7&4294967295|w>>>25),w=b+(S^y&(T^S))+R[5]+1200080426&4294967295,b=y+(w<<12&4294967295|w>>>20),w=S+(T^b&(y^T))+R[6]+2821735955&4294967295,S=b+(w<<17&4294967295|w>>>15),w=T+(y^S&(b^y))+R[7]+4249261313&4294967295,T=S+(w<<22&4294967295|w>>>10),w=y+(b^T&(S^b))+R[8]+1770035416&4294967295,y=T+(w<<7&4294967295|w>>>25),w=b+(S^y&(T^S))+R[9]+2336552879&4294967295,b=y+(w<<12&4294967295|w>>>20),w=S+(T^b&(y^T))+R[10]+4294925233&4294967295,S=b+(w<<17&4294967295|w>>>15),w=T+(y^S&(b^y))+R[11]+2304563134&4294967295,T=S+(w<<22&4294967295|w>>>10),w=y+(b^T&(S^b))+R[12]+1804603682&4294967295,y=T+(w<<7&4294967295|w>>>25),w=b+(S^y&(T^S))+R[13]+4254626195&4294967295,b=y+(w<<12&4294967295|w>>>20),w=S+(T^b&(y^T))+R[14]+2792965006&4294967295,S=b+(w<<17&4294967295|w>>>15),w=T+(y^S&(b^y))+R[15]+1236535329&4294967295,T=S+(w<<22&4294967295|w>>>10),w=y+(S^b&(T^S))+R[1]+4129170786&4294967295,y=T+(w<<5&4294967295|w>>>27),w=b+(T^S&(y^T))+R[6]+3225465664&4294967295,b=y+(w<<9&4294967295|w>>>23),w=S+(y^T&(b^y))+R[11]+643717713&4294967295,S=b+(w<<14&4294967295|w>>>18),w=T+(b^y&(S^b))+R[0]+3921069994&4294967295,T=S+(w<<20&4294967295|w>>>12),w=y+(S^b&(T^S))+R[5]+3593408605&4294967295,y=T+(w<<5&4294967295|w>>>27),w=b+(T^S&(y^T))+R[10]+38016083&4294967295,b=y+(w<<9&4294967295|w>>>23),w=S+(y^T&(b^y))+R[15]+3634488961&4294967295,S=b+(w<<14&4294967295|w>>>18),w=T+(b^y&(S^b))+R[4]+3889429448&4294967295,T=S+(w<<20&4294967295|w>>>12),w=y+(S^b&(T^S))+R[9]+568446438&4294967295,y=T+(w<<5&4294967295|w>>>27),w=b+(T^S&(y^T))+R[14]+3275163606&4294967295,b=y+(w<<9&4294967295|w>>>23),w=S+(y^T&(b^y))+R[3]+4107603335&4294967295,S=b+(w<<14&4294967295|w>>>18),w=T+(b^y&(S^b))+R[8]+1163531501&4294967295,T=S+(w<<20&4294967295|w>>>12),w=y+(S^b&(T^S))+R[13]+2850285829&4294967295,y=T+(w<<5&4294967295|w>>>27),w=b+(T^S&(y^T))+R[2]+4243563512&4294967295,b=y+(w<<9&4294967295|w>>>23),w=S+(y^T&(b^y))+R[7]+1735328473&4294967295,S=b+(w<<14&4294967295|w>>>18),w=T+(b^y&(S^b))+R[12]+2368359562&4294967295,T=S+(w<<20&4294967295|w>>>12),w=y+(T^S^b)+R[5]+4294588738&4294967295,y=T+(w<<4&4294967295|w>>>28),w=b+(y^T^S)+R[8]+2272392833&4294967295,b=y+(w<<11&4294967295|w>>>21),w=S+(b^y^T)+R[11]+1839030562&4294967295,S=b+(w<<16&4294967295|w>>>16),w=T+(S^b^y)+R[14]+4259657740&4294967295,T=S+(w<<23&4294967295|w>>>9),w=y+(T^S^b)+R[1]+2763975236&4294967295,y=T+(w<<4&4294967295|w>>>28),w=b+(y^T^S)+R[4]+1272893353&4294967295,b=y+(w<<11&4294967295|w>>>21),w=S+(b^y^T)+R[7]+4139469664&4294967295,S=b+(w<<16&4294967295|w>>>16),w=T+(S^b^y)+R[10]+3200236656&4294967295,T=S+(w<<23&4294967295|w>>>9),w=y+(T^S^b)+R[13]+681279174&4294967295,y=T+(w<<4&4294967295|w>>>28),w=b+(y^T^S)+R[0]+3936430074&4294967295,b=y+(w<<11&4294967295|w>>>21),w=S+(b^y^T)+R[3]+3572445317&4294967295,S=b+(w<<16&4294967295|w>>>16),w=T+(S^b^y)+R[6]+76029189&4294967295,T=S+(w<<23&4294967295|w>>>9),w=y+(T^S^b)+R[9]+3654602809&4294967295,y=T+(w<<4&4294967295|w>>>28),w=b+(y^T^S)+R[12]+3873151461&4294967295,b=y+(w<<11&4294967295|w>>>21),w=S+(b^y^T)+R[15]+530742520&4294967295,S=b+(w<<16&4294967295|w>>>16),w=T+(S^b^y)+R[2]+3299628645&4294967295,T=S+(w<<23&4294967295|w>>>9),w=y+(S^(T|~b))+R[0]+4096336452&4294967295,y=T+(w<<6&4294967295|w>>>26),w=b+(T^(y|~S))+R[7]+1126891415&4294967295,b=y+(w<<10&4294967295|w>>>22),w=S+(y^(b|~T))+R[14]+2878612391&4294967295,S=b+(w<<15&4294967295|w>>>17),w=T+(b^(S|~y))+R[5]+4237533241&4294967295,T=S+(w<<21&4294967295|w>>>11),w=y+(S^(T|~b))+R[12]+1700485571&4294967295,y=T+(w<<6&4294967295|w>>>26),w=b+(T^(y|~S))+R[3]+2399980690&4294967295,b=y+(w<<10&4294967295|w>>>22),w=S+(y^(b|~T))+R[10]+4293915773&4294967295,S=b+(w<<15&4294967295|w>>>17),w=T+(b^(S|~y))+R[1]+2240044497&4294967295,T=S+(w<<21&4294967295|w>>>11),w=y+(S^(T|~b))+R[8]+1873313359&4294967295,y=T+(w<<6&4294967295|w>>>26),w=b+(T^(y|~S))+R[15]+4264355552&4294967295,b=y+(w<<10&4294967295|w>>>22),w=S+(y^(b|~T))+R[6]+2734768916&4294967295,S=b+(w<<15&4294967295|w>>>17),w=T+(b^(S|~y))+R[13]+1309151649&4294967295,T=S+(w<<21&4294967295|w>>>11),w=y+(S^(T|~b))+R[4]+4149444226&4294967295,y=T+(w<<6&4294967295|w>>>26),w=b+(T^(y|~S))+R[11]+3174756917&4294967295,b=y+(w<<10&4294967295|w>>>22),w=S+(y^(b|~T))+R[2]+718787259&4294967295,S=b+(w<<15&4294967295|w>>>17),w=T+(b^(S|~y))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var T=y-this.blockSize,R=this.B,S=this.h,b=0;b<y;){if(S==0)for(;b<=T;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<y;)if(R[S++]=I.charCodeAt(b++),S==this.blockSize){i(this,R),S=0;break}}else for(;b<y;)if(R[S++]=I[b++],S==this.blockSize){i(this,R),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var T=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=T&255,T/=256;for(this.u(I),I=Array(16),y=T=0;4>y;++y)for(var R=0;32>R;R+=8)I[T++]=this.g[y]>>>R&255;return I};function s(I,y){var T=u;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=y(I)}function a(I,y){this.h=y;for(var T=[],R=!0,S=I.length-1;0<=S;S--){var b=I[S]|0;R&&b==y||(T[S]=b,R=!1)}this.g=T}var u={};function l(I){return-128<=I&&128>I?s(I,function(y){return new a([y|0],0>y?-1:0)}):new a([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return E(c(-I));for(var y=[],T=1,R=0;I>=T;R++)y[R]=I/T|0,T*=4294967296;return new a(y,0)}function f(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return E(f(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(y,8)),R=p,S=0;S<I.length;S+=8){var b=Math.min(8,I.length-S),w=parseInt(I.substring(S,S+b),y);8>b?(b=c(Math.pow(y,b)),R=R.j(b).add(c(w))):(R=R.j(T),R=R.add(c(w)))}return R}var p=l(0),m=l(1),_=l(16777216);e=a.prototype,e.m=function(){if(A(this))return-E(this).m();for(var I=0,y=1,T=0;T<this.g.length;T++){var R=this.i(T);I+=(0<=R?R:4294967296+R)*y,y*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(A(this))return"-"+E(this).toString(I);for(var y=c(Math.pow(I,6)),T=this,R="";;){var S=k(T,y).g;T=x(T,S.j(y));var b=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=S,v(T))return b+R;for(;6>b.length;)b="0"+b;R=b+R}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function A(I){return I.h==-1}e.l=function(I){return I=x(this,I),A(I)?-1:v(I)?0:1};function E(I){for(var y=I.g.length,T=[],R=0;R<y;R++)T[R]=~I.g[R];return new a(T,~I.h).add(m)}e.abs=function(){return A(this)?E(this):this},e.add=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],R=0,S=0;S<=y;S++){var b=R+(this.i(S)&65535)+(I.i(S)&65535),w=(b>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);R=w>>>16,b&=65535,w&=65535,T[S]=w<<16|b}return new a(T,T[T.length-1]&-2147483648?-1:0)};function x(I,y){return I.add(E(y))}e.j=function(I){if(v(this)||v(I))return p;if(A(this))return A(I)?E(this).j(E(I)):E(E(this).j(I));if(A(I))return E(this.j(E(I)));if(0>this.l(_)&&0>I.l(_))return c(this.m()*I.m());for(var y=this.g.length+I.g.length,T=[],R=0;R<2*y;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var S=0;S<I.g.length;S++){var b=this.i(R)>>>16,w=this.i(R)&65535,X=I.i(S)>>>16,pt=I.i(S)&65535;T[2*R+2*S]+=w*pt,N(T,2*R+2*S),T[2*R+2*S+1]+=b*pt,N(T,2*R+2*S+1),T[2*R+2*S+1]+=w*X,N(T,2*R+2*S+1),T[2*R+2*S+2]+=b*X,N(T,2*R+2*S+2)}for(R=0;R<y;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=y;R<2*y;R++)T[R]=0;return new a(T,0)};function N(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function M(I,y){this.g=I,this.h=y}function k(I,y){if(v(y))throw Error("division by zero");if(v(I))return new M(p,p);if(A(I))return y=k(E(I),y),new M(E(y.g),E(y.h));if(A(y))return y=k(I,E(y)),new M(E(y.g),y.h);if(30<I.g.length){if(A(I)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,R=y;0>=R.l(I);)T=U(T),R=U(R);var S=H(T,1),b=H(R,1);for(R=H(R,2),T=H(T,2);!v(R);){var w=b.add(R);0>=w.l(I)&&(S=S.add(T),b=w),R=H(R,1),T=H(T,1)}return y=x(I,S.j(y)),new M(S,y)}for(S=p;0<=I.l(y);){for(T=Math.max(1,Math.floor(I.m()/y.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),b=c(T),w=b.j(y);A(w)||0<w.l(I);)T-=R,b=c(T),w=b.j(y);v(b)&&(b=m),S=S.add(b),I=x(I,w)}return new M(S,I)}e.A=function(I){return k(this,I).h},e.and=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)&I.i(R);return new a(T,this.h&I.h)},e.or=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)|I.i(R);return new a(T,this.h|I.h)},e.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)^I.i(R);return new a(T,this.h^I.h)};function U(I){for(var y=I.g.length+1,T=[],R=0;R<y;R++)T[R]=I.i(R)<<1|I.i(R-1)>>>31;return new a(T,I.h)}function H(I,y){var T=y>>5;y%=32;for(var R=I.g.length-T,S=[],b=0;b<R;b++)S[b]=0<y?I.i(b+T)>>>y|I.i(b+T+1)<<32-y:I.i(b+T);return new a(S,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sd=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,Xe=a}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var od,Vr,ad,Ji,ga,ud,ld,cd;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,d){return o==Array.prototype||o==Object.prototype||(o[h]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof $i=="object"&&$i];for(var h=0;h<o.length;++h){var d=o[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,h){if(h)t:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var C=o[g];if(!(C in d))break t;d=d[C]}o=o[o.length-1],g=d[o],h=h(g),h!=g&&h!=null&&t(d,o,{configurable:!0,writable:!0,value:h})}}function s(o,h){o instanceof String&&(o+="");var d=0,g=!1,C={next:function(){if(!g&&d<o.length){var V=d++;return{value:h(V,o[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(o){return o||function(){return s(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function l(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function c(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function f(o,h,d){return o.call.apply(o.bind,arguments)}function p(o,h,d){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),o.apply(h,C)}}return function(){return o.apply(h,arguments)}}function m(o,h,d){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function _(o,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function v(o,h){function d(){}d.prototype=h.prototype,o.aa=h.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(g,C,V){for(var L=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)L[rt-2]=arguments[rt];return h.prototype[C].apply(g,L)}}function A(o){const h=o.length;if(0<h){const d=Array(h);for(let g=0;g<h;g++)d[g]=o[g];return d}return[]}function E(o,h){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(l(g)){const C=o.length||0,V=g.length||0;o.length=C+V;for(let L=0;L<V;L++)o[C+L]=g[L]}else o.push(g)}}class x{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function N(o){return/^[\s\xa0]*$/.test(o)}function M(){var o=u.navigator;return o&&(o=o.userAgent)?o:""}function k(o){return k[" "](o),o}k[" "]=function(){};var U=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function H(o,h,d){for(const g in o)h.call(d,o[g],g,o)}function I(o,h){for(const d in o)h.call(void 0,o[d],d,o)}function y(o){const h={};for(const d in o)h[d]=o[d];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(o,h){let d,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(d in g)o[d]=g[d];for(let V=0;V<T.length;V++)d=T[V],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function S(o){var h=1;o=o.split(":");const d=[];for(;0<h&&o.length;)d.push(o.shift()),h--;return o.length&&d.push(o.join(":")),d}function b(o){u.setTimeout(()=>{throw o},0)}function w(){var o=hn;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class X{constructor(){this.h=this.g=null}add(h,d){const g=pt.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var pt=new x(()=>new te,o=>o.reset());class te{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,Tt=!1,hn=new X,Nn=()=>{const o=u.Promise.resolve(void 0);vt=()=>{o.then(go)}};var go=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(d){b(d)}var h=pt;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}Tt=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function St(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var Lm=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};u.addEventListener("test",d,h),u.removeEventListener("test",d,h)}catch{}return o}();function fr(o,h){if(St.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(U){t:{try{k(h.nodeName);var C=!0;break t}catch{}C=!1}C||(h=null)}}else d=="mouseover"?h=o.fromElement:d=="mouseout"&&(h=o.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Fm[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&fr.aa.h.call(this)}}v(fr,St);var Fm={2:"touch",3:"pen",4:"mouse"};fr.prototype.h=function(){fr.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ei="closure_listenable_"+(1e6*Math.random()|0),Um=0;function Bm(o,h,d,g,C){this.listener=o,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=C,this.key=++Um,this.da=this.fa=!1}function Ti(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ai(o){this.src=o,this.g={},this.h=0}Ai.prototype.add=function(o,h,d,g,C){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var L=yo(o,h,g,C);return-1<L?(h=o[L],d||(h.fa=!1)):(h=new Bm(h,this.src,V,!!g,C),h.fa=d,o.push(h)),h};function _o(o,h){var d=h.type;if(d in o.g){var g=o.g[d],C=Array.prototype.indexOf.call(g,h,void 0),V;(V=0<=C)&&Array.prototype.splice.call(g,C,1),V&&(Ti(h),o.g[d].length==0&&(delete o.g[d],o.h--))}}function yo(o,h,d,g){for(var C=0;C<o.length;++C){var V=o[C];if(!V.da&&V.listener==h&&V.capture==!!d&&V.ha==g)return C}return-1}var vo="closure_lm_"+(1e6*Math.random()|0),wo={};function ll(o,h,d,g,C){if(Array.isArray(h)){for(var V=0;V<h.length;V++)ll(o,h[V],d,g,C);return null}return d=fl(d),o&&o[Ei]?o.K(h,d,c(g)?!!g.capture:!1,C):qm(o,h,d,!1,g,C)}function qm(o,h,d,g,C,V){if(!h)throw Error("Invalid event type");var L=c(C)?!!C.capture:!!C,rt=To(o);if(rt||(o[vo]=rt=new Ai(o)),d=rt.add(h,d,g,L,V),d.proxy)return d;if(g=$m(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)Lm||(C=L),C===void 0&&(C=!1),o.addEventListener(h.toString(),g,C);else if(o.attachEvent)o.attachEvent(hl(h.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function $m(){function o(d){return h.call(o.src,o.listener,d)}const h=jm;return o}function cl(o,h,d,g,C){if(Array.isArray(h))for(var V=0;V<h.length;V++)cl(o,h[V],d,g,C);else g=c(g)?!!g.capture:!!g,d=fl(d),o&&o[Ei]?(o=o.i,h=String(h).toString(),h in o.g&&(V=o.g[h],d=yo(V,d,g,C),-1<d&&(Ti(V[d]),Array.prototype.splice.call(V,d,1),V.length==0&&(delete o.g[h],o.h--)))):o&&(o=To(o))&&(h=o.g[h.toString()],o=-1,h&&(o=yo(h,d,g,C)),(d=-1<o?h[o]:null)&&Eo(d))}function Eo(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[Ei])_o(h.i,o);else{var d=o.type,g=o.proxy;h.removeEventListener?h.removeEventListener(d,g,o.capture):h.detachEvent?h.detachEvent(hl(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=To(h))?(_o(d,o),d.h==0&&(d.src=null,h[vo]=null)):Ti(o)}}}function hl(o){return o in wo?wo[o]:wo[o]="on"+o}function jm(o,h){if(o.da)o=!0;else{h=new fr(h,this);var d=o.listener,g=o.ha||o.src;o.fa&&Eo(o),o=d.call(g,h)}return o}function To(o){return o=o[vo],o instanceof Ai?o:null}var Ao="__closure_events_fn_"+(1e9*Math.random()>>>0);function fl(o){return typeof o=="function"?o:(o[Ao]||(o[Ao]=function(h){return o.handleEvent(h)}),o[Ao])}function Ct(){ue.call(this),this.i=new Ai(this),this.M=this,this.F=null}v(Ct,ue),Ct.prototype[Ei]=!0,Ct.prototype.removeEventListener=function(o,h,d,g){cl(this,o,h,d,g)};function Ot(o,h){var d,g=o.F;if(g)for(d=[];g;g=g.F)d.push(g);if(o=o.M,g=h.type||h,typeof h=="string")h=new St(h,o);else if(h instanceof St)h.target=h.target||o;else{var C=h;h=new St(g,o),R(h,C)}if(C=!0,d)for(var V=d.length-1;0<=V;V--){var L=h.g=d[V];C=Ii(L,g,!0,h)&&C}if(L=h.g=o,C=Ii(L,g,!0,h)&&C,C=Ii(L,g,!1,h)&&C,d)for(V=0;V<d.length;V++)L=h.g=d[V],C=Ii(L,g,!1,h)&&C}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var d=o.g[h],g=0;g<d.length;g++)Ti(d[g]);delete o.g[h],o.h--}}this.F=null},Ct.prototype.K=function(o,h,d,g){return this.i.add(String(o),h,!1,d,g)},Ct.prototype.L=function(o,h,d,g){return this.i.add(String(o),h,!0,d,g)};function Ii(o,h,d,g){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,V=0;V<h.length;++V){var L=h[V];if(L&&!L.da&&L.capture==d){var rt=L.listener,At=L.ha||L.src;L.fa&&_o(o.i,L),C=rt.call(At,g)!==!1&&C}}return C&&!g.defaultPrevented}function dl(o,h,d){if(typeof o=="function")d&&(o=m(o,d));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(o,h||0)}function pl(o){o.g=dl(()=>{o.g=null,o.i&&(o.i=!1,pl(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class zm extends ue{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:pl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(o){ue.call(this),this.h=o,this.g={}}v(dr,ue);var ml=[];function gl(o){H(o.g,function(h,d){this.g.hasOwnProperty(d)&&Eo(h)},o),o.g={}}dr.prototype.N=function(){dr.aa.N.call(this),gl(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Io=u.JSON.stringify,Hm=u.JSON.parse,Gm=class{stringify(o){return u.JSON.stringify(o,void 0)}parse(o){return u.JSON.parse(o,void 0)}};function bo(){}bo.prototype.h=null;function _l(o){return o.h||(o.h=o.i())}function yl(){}var pr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ro(){St.call(this,"d")}v(Ro,St);function So(){St.call(this,"c")}v(So,St);var fn={},vl=null;function bi(){return vl=vl||new Ct}fn.La="serverreachability";function wl(o){St.call(this,fn.La,o)}v(wl,St);function mr(o){const h=bi();Ot(h,new wl(h))}fn.STAT_EVENT="statevent";function El(o,h){St.call(this,fn.STAT_EVENT,o),this.stat=h}v(El,St);function Mt(o){const h=bi();Ot(h,new El(h,o))}fn.Ma="timingevent";function Tl(o,h){St.call(this,fn.Ma,o),this.size=h}v(Tl,St);function gr(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){o()},h)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function Wm(o,h,d,g,C,V){o.info(function(){if(o.g)if(V)for(var L="",rt=V.split("&"),At=0;At<rt.length;At++){var Z=rt[At].split("=");if(1<Z.length){var xt=Z[0];Z=Z[1];var Pt=xt.split("_");L=2<=Pt.length&&Pt[1]=="type"?L+(xt+"="+Z+"&"):L+(xt+"=redacted&")}}else L=null;else L=V;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+h+`
`+d+`
`+L})}function Km(o,h,d,g,C,V,L){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+h+`
`+d+`
`+V+" "+L})}function Dn(o,h,d,g){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Xm(o,d)+(g?" "+g:"")})}function Qm(o,h){o.info(function(){return"TIMEOUT: "+h})}_r.prototype.info=function(){};function Xm(o,h){if(!o.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var g=d[o];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var V=C[0];if(V!="noop"&&V!="stop"&&V!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Io(d)}catch{return h}}var Ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Al={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Co;function Si(){}v(Si,bo),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},Co=new Si;function Be(o,h,d,g){this.j=o,this.i=h,this.l=d,this.R=g||1,this.U=new dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Il}function Il(){this.i=null,this.g="",this.h=!1}var bl={},xo={};function Po(o,h,d){o.L=1,o.v=Vi(Ae(h)),o.m=d,o.P=!0,Rl(o,null)}function Rl(o,h){o.F=Date.now(),Ci(o),o.A=Ae(o.v);var d=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Bl(d.i,"t",g),o.C=0,d=o.j.J,o.h=new Il,o.g=ic(o.j,d?h:null,!o.m),0<o.O&&(o.M=new zm(m(o.Y,o,o.g),o.O)),h=o.U,d=o.g,g=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(ml[0]=C.toString()),C=ml);for(var V=0;V<C.length;V++){var L=ll(d,C[V],g||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),mr(),Wm(o.i,o.u,o.A,o.l,o.R,o.m)}Be.prototype.ca=function(o){o=o.target;const h=this.M;h&&Ie(o)==3?h.j():this.Y(o)},Be.prototype.Y=function(o){try{if(o==this.g)t:{const Pt=Ie(this.g);var h=this.g.Ba();const Mn=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Wl(this.g)))){this.J||Pt!=4||h==7||(h==8||0>=Mn?mr(3):mr(2)),Vo(this);var d=this.g.Z();this.X=d;e:if(Sl(this)){var g=Wl(this.g);o="";var C=g.length,V=Ie(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),yr(this);var L="";break e}this.h.i=new u.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,o+=this.h.i.decode(g[h],{stream:!(V&&h==C-1)});g.length=0,this.h.g+=o,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=d==200,Km(this.i,this.u,this.A,this.l,this.R,Pt,d),this.o){if(this.T&&!this.K){e:{if(this.g){var rt,At=this.g;if((rt=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(rt)){var Z=rt;break e}}Z=null}if(d=Z)Dn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,No(this,d);else{this.o=!1,this.s=3,Mt(12),dn(this),yr(this);break t}}if(this.P){d=!0;let ee;for(;!this.J&&this.C<L.length;)if(ee=Jm(this,L),ee==xo){Pt==4&&(this.s=4,Mt(14),d=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(ee==bl){this.s=4,Mt(15),Dn(this.i,this.l,L,"[Invalid Chunk]"),d=!1;break}else Dn(this.i,this.l,ee,null),No(this,ee);if(Sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||L.length!=0||this.h.h||(this.s=1,Mt(16),d=!1),this.o=this.o&&d,!d)Dn(this.i,this.l,L,"[Invalid Chunked Response]"),dn(this),yr(this);else if(0<L.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Fo(xt),xt.M=!0,Mt(11))}}else Dn(this.i,this.l,L,null),No(this,L);Pt==4&&dn(this),this.o&&!this.J&&(Pt==4?tc(this.j,this):(this.o=!1,Ci(this)))}else pg(this.g),d==400&&0<L.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),dn(this),yr(this)}}}catch{}finally{}};function Sl(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Jm(o,h){var d=o.C,g=h.indexOf(`
`,d);return g==-1?xo:(d=Number(h.substring(d,g)),isNaN(d)?bl:(g+=1,g+d>h.length?xo:(h=h.slice(g,g+d),o.C=g+d,h)))}Be.prototype.cancel=function(){this.J=!0,dn(this)};function Ci(o){o.S=Date.now()+o.I,Cl(o,o.I)}function Cl(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=gr(m(o.ba,o),h)}function Vo(o){o.B&&(u.clearTimeout(o.B),o.B=null)}Be.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Qm(this.i,this.A),this.L!=2&&(mr(),Mt(17)),dn(this),this.s=2,yr(this)):Cl(this,this.S-o)};function yr(o){o.j.G==0||o.J||tc(o.j,o)}function dn(o){Vo(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,gl(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function No(o,h){try{var d=o.j;if(d.G!=0&&(d.g==o||Do(d.h,o))){if(!o.K&&Do(d.h,o)&&d.G==3){try{var g=d.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Li(d),Oi(d);else break t;Lo(d),Mt(18)}}else d.za=C[1],0<d.za-d.T&&37500>C[2]&&d.F&&d.v==0&&!d.C&&(d.C=gr(m(d.Za,d),6e3));if(1>=Vl(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else mn(d,11)}else if((o.K||d.g==o)&&Li(d),!N(h))for(C=d.Da.g.parse(h),h=0;h<C.length;h++){let Z=C[h];if(d.T=Z[0],Z=Z[1],d.G==2)if(Z[0]=="c"){d.K=Z[1],d.ia=Z[2];const xt=Z[3];xt!=null&&(d.la=xt,d.j.info("VER="+d.la));const Pt=Z[4];Pt!=null&&(d.Aa=Pt,d.j.info("SVER="+d.Aa));const Mn=Z[5];Mn!=null&&typeof Mn=="number"&&0<Mn&&(g=1.5*Mn,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const ee=o.g;if(ee){const Ui=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ui){var V=g.h;V.g||Ui.indexOf("spdy")==-1&&Ui.indexOf("quic")==-1&&Ui.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ko(V,V.h),V.h=null))}if(g.D){const Uo=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(g.ya=Uo,st(g.I,g.D,Uo))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var L=o;if(g.qa=rc(g,g.J?g.ia:null,g.W),L.K){Nl(g.h,L);var rt=L,At=g.L;At&&(rt.I=At),rt.B&&(Vo(rt),Ci(rt)),g.g=L}else Yl(g);0<d.i.length&&Mi(d)}else Z[0]!="stop"&&Z[0]!="close"||mn(d,7);else d.G==3&&(Z[0]=="stop"||Z[0]=="close"?Z[0]=="stop"?mn(d,7):Mo(d):Z[0]!="noop"&&d.l&&d.l.ta(Z),d.v=0)}}mr(4)}catch{}}var Ym=class{constructor(o,h){this.g=o,this.map=h}};function xl(o){this.l=o||10,u.PerformanceNavigationTiming?(o=u.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pl(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Vl(o){return o.h?1:o.g?o.g.size:0}function Do(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function ko(o,h){o.g?o.g.add(h):o.h=h}function Nl(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}xl.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Dl(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const d of o.g.values())h=h.concat(d.D);return h}return A(o.i)}function Zm(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var h=[],d=o.length,g=0;g<d;g++)h.push(o[g]);return h}h=[],d=0;for(g in o)h[d++]=o[g];return h}function tg(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var h=[];o=o.length;for(var d=0;d<o;d++)h.push(d);return h}h=[],d=0;for(const g in o)h[d++]=g;return h}}}function kl(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var d=tg(o),g=Zm(o),C=g.length,V=0;V<C;V++)h.call(void 0,g[V],d&&d[V],o)}var Ol=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eg(o,h){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var g=o[d].indexOf("="),C=null;if(0<=g){var V=o[d].substring(0,g);C=o[d].substring(g+1)}else V=o[d];h(V,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function pn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof pn){this.h=o.h,xi(this,o.j),this.o=o.o,this.g=o.g,Pi(this,o.s),this.l=o.l;var h=o.i,d=new Er;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),Ml(this,d),this.m=o.m}else o&&(h=String(o).match(Ol))?(this.h=!1,xi(this,h[1]||"",!0),this.o=vr(h[2]||""),this.g=vr(h[3]||"",!0),Pi(this,h[4]),this.l=vr(h[5]||"",!0),Ml(this,h[6]||"",!0),this.m=vr(h[7]||"")):(this.h=!1,this.i=new Er(null,this.h))}pn.prototype.toString=function(){var o=[],h=this.j;h&&o.push(wr(h,Ll,!0),":");var d=this.g;return(d||h=="file")&&(o.push("//"),(h=this.o)&&o.push(wr(h,Ll,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(wr(d,d.charAt(0)=="/"?ig:rg,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",wr(d,og)),o.join("")};function Ae(o){return new pn(o)}function xi(o,h,d){o.j=d?vr(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Pi(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function Ml(o,h,d){h instanceof Er?(o.i=h,ag(o.i,o.h)):(d||(h=wr(h,sg)),o.i=new Er(h,o.h))}function st(o,h,d){o.i.set(h,d)}function Vi(o){return st(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function vr(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function wr(o,h,d){return typeof o=="string"?(o=encodeURI(o).replace(h,ng),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ng(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ll=/[#\/\?@]/g,rg=/[#\?:]/g,ig=/[#\?]/g,sg=/[#\?@]/g,og=/#/g;function Er(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function qe(o){o.g||(o.g=new Map,o.h=0,o.i&&eg(o.i,function(h,d){o.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}e=Er.prototype,e.add=function(o,h){qe(this),this.i=null,o=kn(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(h),this.h+=1,this};function Fl(o,h){qe(o),h=kn(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Ul(o,h){return qe(o),h=kn(o,h),o.g.has(h)}e.forEach=function(o,h){qe(this),this.g.forEach(function(d,g){d.forEach(function(C){o.call(h,C,g,this)},this)},this)},e.na=function(){qe(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let g=0;g<h.length;g++){const C=o[g];for(let V=0;V<C.length;V++)d.push(h[g])}return d},e.V=function(o){qe(this);let h=[];if(typeof o=="string")Ul(this,o)&&(h=h.concat(this.g.get(kn(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)h=h.concat(o[d])}return h},e.set=function(o,h){return qe(this),this.i=null,o=kn(this,o),Ul(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},e.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function Bl(o,h,d){Fl(o,h),0<d.length&&(o.i=null,o.g.set(kn(o,h),A(d)),o.h+=d.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var g=h[d];const V=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=V;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),o.push(C)}}return this.i=o.join("&")};function kn(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function ag(o,h){h&&!o.j&&(qe(o),o.i=null,o.g.forEach(function(d,g){var C=g.toLowerCase();g!=C&&(Fl(this,g),Bl(this,C,d))},o)),o.j=h}function ug(o,h){const d=new _r;if(u.Image){const g=new Image;g.onload=_($e,d,"TestLoadImage: loaded",!0,h,g),g.onerror=_($e,d,"TestLoadImage: error",!1,h,g),g.onabort=_($e,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=_($e,d,"TestLoadImage: timeout",!1,h,g),u.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else h(!1)}function lg(o,h){const d=new _r,g=new AbortController,C=setTimeout(()=>{g.abort(),$e(d,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:g.signal}).then(V=>{clearTimeout(C),V.ok?$e(d,"TestPingServer: ok",!0,h):$e(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),$e(d,"TestPingServer: error",!1,h)})}function $e(o,h,d,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(d)}catch{}}function cg(){this.g=new Gm}function hg(o,h,d){const g=d||"";try{kl(o,function(C,V){let L=C;c(C)&&(L=Io(C)),h.push(g+V+"="+encodeURIComponent(L))})}catch(C){throw h.push(g+"type="+encodeURIComponent("_badmap")),C}}function Ni(o){this.l=o.Ub||null,this.j=o.eb||!1}v(Ni,bo),Ni.prototype.g=function(){return new Di(this.l,this.j)},Ni.prototype.i=function(o){return function(){return o}}({});function Di(o,h){Ct.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Di,Ct),e=Di.prototype,e.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,Ar(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ar(this)),this.g&&(this.readyState=3,Ar(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ql(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ql(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Tr(this):Ar(this),this.readyState==3&&ql(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Tr(this))},e.Qa=function(o){this.g&&(this.response=o,Tr(this))},e.ga=function(){this.g&&Tr(this)};function Tr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ar(o)}e.setRequestHeader=function(o,h){this.u.append(o,h)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=h.next();return o.join(`\r
`)};function Ar(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function $l(o){let h="";return H(o,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function Oo(o,h,d){t:{for(g in d){var g=!1;break t}g=!0}g||(d=$l(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):st(o,h,d))}function ut(o){Ct.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(ut,Ct);var fg=/^https?$/i,dg=["POST","PUT"];e=ut.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Co.g(),this.v=this.o?_l(this.o):_l(Co),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(V){jl(this,V);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)d.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())d.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),C=u.FormData&&o instanceof u.FormData,!(0<=Array.prototype.indexOf.call(dg,h,void 0))||g||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,L]of d)this.g.setRequestHeader(V,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gl(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){jl(this,V)}};function jl(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,zl(o),ki(o)}function zl(o){o.A||(o.A=!0,Ot(o,"complete"),Ot(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ot(this,"complete"),Ot(this,"abort"),ki(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),ut.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Hl(this):this.bb())},e.bb=function(){Hl(this)};function Hl(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Ie(o)!=4||o.Z()!=2)){if(o.u&&Ie(o)==4)dl(o.Ea,0,o);else if(Ot(o,"readystatechange"),Ie(o)==4){o.h=!1;try{const L=o.Z();t:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}var d;if(!(d=h)){var g;if(g=L===0){var C=String(o.D).match(Ol)[1]||null;!C&&u.self&&u.self.location&&(C=u.self.location.protocol.slice(0,-1)),g=!fg.test(C?C.toLowerCase():"")}d=g}if(d)Ot(o,"complete"),Ot(o,"success");else{o.m=6;try{var V=2<Ie(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",zl(o)}}finally{ki(o)}}}}function ki(o,h){if(o.g){Gl(o);const d=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||Ot(o,"ready");try{d.onreadystatechange=g}catch{}}}function Gl(o){o.I&&(u.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Ie(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Ie(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),Hm(h)}};function Wl(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function pg(o){const h={};o=(o.g&&2<=Ie(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(N(o[g]))continue;var d=S(o[g]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=h[C]||[];h[C]=V,V.push(d)}I(h,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ir(o,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||h}function Kl(o){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ir("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ir("baseRetryDelayMs",5e3,o),this.cb=Ir("retryDelaySeedMs",1e4,o),this.Wa=Ir("forwardChannelMaxRetries",2,o),this.wa=Ir("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new xl(o&&o.concurrentRequestLimit),this.Da=new cg,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Kl.prototype,e.la=8,e.G=1,e.connect=function(o,h,d,g){Mt(0),this.W=o,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=rc(this,null,this.W),Mi(this)};function Mo(o){if(Ql(o),o.G==3){var h=o.U++,d=Ae(o.I);if(st(d,"SID",o.K),st(d,"RID",h),st(d,"TYPE","terminate"),br(o,d),h=new Be(o,o.j,h),h.L=2,h.v=Vi(Ae(d)),d=!1,u.navigator&&u.navigator.sendBeacon)try{d=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&u.Image&&(new Image().src=h.v,d=!0),d||(h.g=ic(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ci(h)}nc(o)}function Oi(o){o.g&&(Fo(o),o.g.cancel(),o.g=null)}function Ql(o){Oi(o),o.u&&(u.clearTimeout(o.u),o.u=null),Li(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&u.clearTimeout(o.s),o.s=null)}function Mi(o){if(!Pl(o.h)&&!o.s){o.s=!0;var h=o.Ga;vt||Nn(),Tt||(vt(),Tt=!0),hn.add(h,o),o.B=0}}function mg(o,h){return Vl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=gr(m(o.Ga,o,h),ec(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new Be(this,this.j,o);let V=this.o;if(this.S&&(V?(V=y(V),R(V,this.S)):V=this.S),this.m!==null||this.O||(C.H=V,V=null),this.P)t:{for(var h=0,d=0;d<this.i.length;d++){e:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=d;break t}if(h===4096||d===this.i.length-1){h=d+1;break t}}h=1e3}else h=1e3;h=Jl(this,C,h),d=Ae(this.I),st(d,"RID",o),st(d,"CVER",22),this.D&&st(d,"X-HTTP-Session-Id",this.D),br(this,d),V&&(this.O?h="headers="+encodeURIComponent(String($l(V)))+"&"+h:this.m&&Oo(d,this.m,V)),ko(this.h,C),this.Ua&&st(d,"TYPE","init"),this.P?(st(d,"$req",h),st(d,"SID","null"),C.T=!0,Po(C,d,null)):Po(C,d,h),this.G=2}}else this.G==3&&(o?Xl(this,o):this.i.length==0||Pl(this.h)||Xl(this))};function Xl(o,h){var d;h?d=h.l:d=o.U++;const g=Ae(o.I);st(g,"SID",o.K),st(g,"RID",d),st(g,"AID",o.T),br(o,g),o.m&&o.o&&Oo(g,o.m,o.o),d=new Be(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),h&&(o.i=h.D.concat(o.i)),h=Jl(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ko(o.h,d),Po(d,g,h)}function br(o,h){o.H&&H(o.H,function(d,g){st(h,g,d)}),o.l&&kl({},function(d,g){st(h,g,d)})}function Jl(o,h,d){d=Math.min(o.i.length,d);var g=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let V=-1;for(;;){const L=["count="+d];V==-1?0<d?(V=C[0].g,L.push("ofs="+V)):V=0:L.push("ofs="+V);let rt=!0;for(let At=0;At<d;At++){let Z=C[At].g;const xt=C[At].map;if(Z-=V,0>Z)V=Math.max(0,C[At].g-100),rt=!1;else try{hg(xt,L,"req"+Z+"_")}catch{g&&g(xt)}}if(rt){g=L.join("&");break t}}}return o=o.i.splice(0,d),h.D=o,g}function Yl(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;vt||Nn(),Tt||(vt(),Tt=!0),hn.add(h,o),o.v=0}}function Lo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=gr(m(o.Fa,o),ec(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Zl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=gr(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Oi(this),Zl(this))};function Fo(o){o.A!=null&&(u.clearTimeout(o.A),o.A=null)}function Zl(o){o.g=new Be(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=Ae(o.qa);st(h,"RID","rpc"),st(h,"SID",o.K),st(h,"AID",o.T),st(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&st(h,"TO",o.ja),st(h,"TYPE","xmlhttp"),br(o,h),o.m&&o.o&&Oo(h,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Vi(Ae(h)),d.m=null,d.P=!0,Rl(d,o)}e.Za=function(){this.C!=null&&(this.C=null,Oi(this),Lo(this),Mt(19))};function Li(o){o.C!=null&&(u.clearTimeout(o.C),o.C=null)}function tc(o,h){var d=null;if(o.g==h){Li(o),Fo(o),o.g=null;var g=2}else if(Do(o.h,h))d=h.D,Nl(o.h,h),g=1;else return;if(o.G!=0){if(h.o)if(g==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var C=o.B;g=bi(),Ot(g,new Tl(g,d)),Mi(o)}else Yl(o);else if(C=h.s,C==3||C==0&&0<h.X||!(g==1&&mg(o,h)||g==2&&Lo(o)))switch(d&&0<d.length&&(h=o.h,h.i=h.i.concat(d)),C){case 1:mn(o,5);break;case 4:mn(o,10);break;case 3:mn(o,6);break;default:mn(o,2)}}}function ec(o,h){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*h}function mn(o,h){if(o.j.info("Error code "+h),h==2){var d=m(o.fb,o),g=o.Xa;const C=!g;g=new pn(g||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||xi(g,"https"),Vi(g),C?ug(g.toString(),d):lg(g.toString(),d)}else Mt(2);o.G=0,o.l&&o.l.sa(h),nc(o),Ql(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function nc(o){if(o.G=0,o.ka=[],o.l){const h=Dl(o.h);(h.length!=0||o.i.length!=0)&&(E(o.ka,h),E(o.ka,o.i),o.h.i.length=0,A(o.i),o.i.length=0),o.l.ra()}}function rc(o,h,d){var g=d instanceof pn?Ae(d):new pn(d);if(g.g!="")h&&(g.g=h+"."+g.g),Pi(g,g.s);else{var C=u.location;g=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var V=new pn(null);g&&xi(V,g),h&&(V.g=h),C&&Pi(V,C),d&&(V.l=d),g=V}return d=o.D,h=o.ya,d&&h&&st(g,d,h),st(g,"VER",o.la),br(o,g),g}function ic(o,h,d){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new ut(new Ni({eb:d})):new ut(o.pa),h.Ha(o.J),h}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function sc(){}e=sc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Fi(){}Fi.prototype.g=function(o,h){return new Gt(o,h)};function Gt(o,h){Ct.call(this),this.g=new Kl(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!N(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!N(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new On(this)}v(Gt,Ct),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Mo(this.g)},Gt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Io(o),o=d);h.i.push(new Ym(h.Ya++,o)),h.G==3&&Mi(h)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,Gt.aa.N.call(this)};function oc(o){Ro.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){t:{for(const d in h){o=d;break t}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}v(oc,Ro);function ac(){So.call(this),this.status=1}v(ac,So);function On(o){this.g=o}v(On,sc),On.prototype.ua=function(){Ot(this.g,"a")},On.prototype.ta=function(o){Ot(this.g,new oc(o))},On.prototype.sa=function(o){Ot(this.g,new ac)},On.prototype.ra=function(){Ot(this.g,"b")},Fi.prototype.createWebChannel=Fi.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,cd=function(){return new Fi},ld=function(){return bi()},ud=fn,ga={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,Ji=Ri,Al.COMPLETE="complete",ad=Al,yl.EventType=pr,pr.OPEN="a",pr.CLOSE="b",pr.ERROR="c",pr.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Vr=yl,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,od=ut}).apply(typeof $i<"u"?$i:typeof self<"u"?self:typeof window<"u"?window:{});const Nc="@firebase/firestore",Dc="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sr="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new Zf("@firebase/firestore");function Fn(){return bn.logLevel}function B(e,...t){if(bn.logLevel<=Y.DEBUG){const n=t.map(fu);bn.debug(`Firestore (${sr}): ${e}`,...n)}}function Oe(e,...t){if(bn.logLevel<=Y.ERROR){const n=t.map(fu);bn.error(`Firestore (${sr}): ${e}`,...n)}}function tn(e,...t){if(bn.logLevel<=Y.WARN){const n=t.map(fu);bn.warn(`Firestore (${sr}): ${e}`,...n)}}function fu(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,hd(e,r,n)}function hd(e,t,n){let r=`FIRESTORE (${sr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Oe(r),new Error(r)}function et(e,t,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,e||hd(t,i,r)}function G(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends ir{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class _v{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yv{constructor(t){this.t=t,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){et(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ve;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ve,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},u=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ve)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string",31837,{l:r}),new fd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return et(t===null||typeof t=="string",2055,{h:t}),new Nt(t)}}class vv{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wv{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new vv(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ev{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zy(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){et(this.o===void 0,3512);const r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kc(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kc(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Tv(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%62))}return r}}function K(e,t){return e<t?-1:e>t?1:0}function _a(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return K(r,i);{const s=dd(),a=Av(s.encode(Oc(e,n)),s.encode(Oc(t,n)));return a!==0?a:K(r,i)}}n+=r>65535?2:1}return K(e.length,t.length)}function Oc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Av(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return K(e[n],t[n]);return K(e.length,t.length)}function Wn(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="__name__";class he{constructor(t,n,r){n===void 0?n=0:n>t.length&&$(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&$(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return he.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof he?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=he.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return K(t.length,n.length)}static compareSegments(t,n){const r=he.isNumericId(t),i=he.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?he.extractNumericId(t).compare(he.extractNumericId(n)):_a(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xe.fromString(t.substring(4,t.length-2))}}class it extends he{construct(t,n,r){return new it(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new F(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new it(n)}static emptyPath(){return new it([])}}const Iv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends he{construct(t,n,r){return new bt(t,n,r)}static isValidIdentifier(t){return Iv.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mc}static keyField(){return new bt([Mc])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new F(D.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<t.length;){const u=t[i];if(u==="\\"){if(i+1===t.length)throw new F(D.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new F(D.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(t){this.path=t}static fromPath(t){return new q(it.fromString(t))}static fromName(t){return new q(it.fromString(t).popFirst(5))}static empty(){return new q(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&it.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return it.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new q(new it(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(e,t,n){if(!n)throw new F(D.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function bv(e,t,n,r){if(t===!0&&r===!0)throw new F(D.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Lc(e){if(!q.isDocumentKey(e))throw new F(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Fc(e){if(q.isDocumentKey(e))throw new F(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function md(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function zs(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":$(12329,{type:typeof e})}function Me(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zs(e);throw new F(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Rv(e,t){if(t<=0)throw new F(D.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(e,t){const n={typeString:e};return t&&(n.value=t),n}function ci(e,t){if(!md(e))throw new F(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new F(D.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=-62135596800,Bc=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(t){return ot.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Bc);return new ot(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new F(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Uc)throw new F(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new F(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bc}_compareTo(t){return this.seconds===t.seconds?K(this.nanoseconds,t.nanoseconds):K(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ci(t,ot._jsonSchema))return new ot(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Uc;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:_t("string",ot._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{static fromTimestamp(t){return new z(t)}static min(){return new z(new ot(0,0))}static max(){return new z(new ot(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=-1;function Sv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new en(i,q.empty(),t)}function Cv(e){return new en(e.readTime,e.key,Xr)}class en{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new en(z.min(),q.empty(),Xr)}static max(){return new en(z.max(),q.empty(),Xr)}}function xv(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=q.comparator(e.documentKey,t.documentKey),n!==0?n:K(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function or(e){if(e.code!==D.FAILED_PRECONDITION||e.message!==Pv)throw e;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):O.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):O.reject(n)}static resolve(t){return new O((n,r)=>{n(t)})}static reject(t){return new O((n,r)=>{r(t)})}static waitFor(t){return new O((n,r)=>{let i=0,s=0,a=!1;t.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(t){let n=O.resolve(!1);for(const r of t)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new O((r,i)=>{const s=t.length,a=new Array(s);let u=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(f=>{a[c]=f,++u,u===s&&r(a)},f=>i(f))}})}static doWhile(t,n){return new O((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Nv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ar(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Hs.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function Gs(e){return e==null}function ws(e){return e===0&&1/e==-1/0}function Dv(e){return typeof e=="number"&&Number.isInteger(e)&&!ws(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="";function kv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=qc(t)),t=Ov(e.get(n),t);return qc(t)}function Ov(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case gd:n+="";break;default:n+=s}}return n}function qc(e){return e+gd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function un(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _d(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t,n){this.comparator=t,this.root=n||It.EMPTY}insert(t,n){return new at(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(t){return new at(this.comparator,this.root.remove(t,this.comparator).copy(null,null,It.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ji(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ji(this.root,t,this.comparator,!1)}getReverseIterator(){return new ji(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ji(this.root,t,this.comparator,!0)}}class ji{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class It{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??It.RED,this.left=i??It.EMPTY,this.right=s??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new It(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return It.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw $(27949);return t+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(t,n,r,i,s){return this}insert(t,n,r){return new It(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.comparator=t,this.data=new at(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new jc(this.data.getIterator())}getIteratorFrom(t){return new jc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof yt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new yt(this.comparator);return n.data=t,n}}class jc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.fields=t,t.sort(bt.comparator)}static empty(){return new Kt([])}unionWith(t){let n=new yt(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Kt(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Wn(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yd("Invalid base64 string: "+s):s}}(t);return new Rt(n)}static fromUint8Array(t){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(t);return new Rt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return K(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const Mv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nn(e){if(et(!!e,39018),typeof e=="string"){let t=0;const n=Mv.exec(e);if(et(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ht(e.seconds),nanos:ht(e.nanos)}}function ht(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function rn(e){return typeof e=="string"?Rt.fromBase64String(e):Rt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="server_timestamp",wd="__type__",Ed="__previous_value__",Td="__local_write_time__";function mu(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[wd])===null||n===void 0?void 0:n.stringValue)===vd}function Ws(e){const t=e.mapValue.fields[Ed];return mu(t)?Ws(t):t}function Jr(e){const t=nn(e.mapValue.fields[Td].timestampValue);return new ot(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t,n,r,i,s,a,u,l,c,f){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=f}}const Es="(default)";class Yr{constructor(t,n){this.projectId=t,this.database=n||Es}static empty(){return new Yr("","")}get isDefaultDatabase(){return this.database===Es}isEqual(t){return t instanceof Yr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="__type__",Fv="__max__",zi={mapValue:{}},Id="__vector__",Ts="value";function sn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?mu(e)?4:Bv(e)?9007199254740991:Uv(e)?10:11:$(28295,{value:e})}function Ee(e,t){if(e===t)return!0;const n=sn(e);if(n!==sn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jr(e).isEqual(Jr(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=nn(i.timestampValue),u=nn(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return rn(i.bytesValue).isEqual(rn(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ht(i.geoPointValue.latitude)===ht(s.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ht(i.integerValue)===ht(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=ht(i.doubleValue),u=ht(s.doubleValue);return a===u?ws(a)===ws(u):isNaN(a)&&isNaN(u)}return!1}(e,t);case 9:return Wn(e.arrayValue.values||[],t.arrayValue.values||[],Ee);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if($c(a)!==$c(u))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(u[l]===void 0||!Ee(a[l],u[l])))return!1;return!0}(e,t);default:return $(52216,{left:e})}}function Zr(e,t){return(e.values||[]).find(n=>Ee(n,t))!==void 0}function Kn(e,t){if(e===t)return 0;const n=sn(e),r=sn(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(s,a){const u=ht(s.integerValue||s.doubleValue),l=ht(a.integerValue||a.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(e,t);case 3:return zc(e.timestampValue,t.timestampValue);case 4:return zc(Jr(e),Jr(t));case 5:return _a(e.stringValue,t.stringValue);case 6:return function(s,a){const u=rn(s),l=rn(a);return u.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){const u=s.split("/"),l=a.split("/");for(let c=0;c<u.length&&c<l.length;c++){const f=K(u[c],l[c]);if(f!==0)return f}return K(u.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){const u=K(ht(s.latitude),ht(a.latitude));return u!==0?u:K(ht(s.longitude),ht(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Hc(e.arrayValue,t.arrayValue);case 10:return function(s,a){var u,l,c,f;const p=s.fields||{},m=a.fields||{},_=(u=p[Ts])===null||u===void 0?void 0:u.arrayValue,v=(l=m[Ts])===null||l===void 0?void 0:l.arrayValue,A=K(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:Hc(_,v)}(e.mapValue,t.mapValue);case 11:return function(s,a){if(s===zi.mapValue&&a===zi.mapValue)return 0;if(s===zi.mapValue)return 1;if(a===zi.mapValue)return-1;const u=s.fields||{},l=Object.keys(u),c=a.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const m=_a(l[p],f[p]);if(m!==0)return m;const _=Kn(u[l[p]],c[f[p]]);if(_!==0)return _}return K(l.length,f.length)}(e.mapValue,t.mapValue);default:throw $(23264,{le:n})}}function zc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return K(e,t);const n=nn(e),r=nn(t),i=K(n.seconds,r.seconds);return i!==0?i:K(n.nanos,r.nanos)}function Hc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Kn(n[i],r[i]);if(s)return s}return K(n.length,r.length)}function Qn(e){return ya(e)}function ya(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=nn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return rn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return q.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ya(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${ya(n.fields[a])}`;return i+"}"}(e.mapValue):$(61005,{value:e})}function Yi(e){switch(sn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ws(e);return t?16+Yi(t):16;case 5:return 2*e.stringValue.length;case 6:return rn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Yi(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return un(r.fields,(s,a)=>{i+=s.length+Yi(a)}),i}(e.mapValue);default:throw $(13486,{value:e})}}function Gc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function va(e){return!!e&&"integerValue"in e}function gu(e){return!!e&&"arrayValue"in e}function Wc(e){return!!e&&"nullValue"in e}function Kc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zi(e){return!!e&&"mapValue"in e}function Uv(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ad])===null||n===void 0?void 0:n.stringValue)===Id}function qr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return un(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=qr(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Bv(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Fv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.value=t}static empty(){return new $t({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Zi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=qr(n)}setAll(t){let n=bt.emptyPath(),r={},i=[];t.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=u.popLast()}a?r[u.lastSegment()]=qr(a):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());Zi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ee(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Zi(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){un(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new $t(qr(this.value))}}function bd(e){const t=[];return un(e.fields,(n,r)=>{const i=new bt([n]);if(Zi(r)){const s=bd(r.mapValue).fields;if(s.length===0)t.push(i);else for(const a of s)t.push(i.child(a))}else t.push(i)}),new Kt(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,n,r,i,s,a,u){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(t){return new Dt(t,0,z.min(),z.min(),z.min(),$t.empty(),0)}static newFoundDocument(t,n,r,i){return new Dt(t,1,n,z.min(),r,i,0)}static newNoDocument(t,n){return new Dt(t,2,n,z.min(),z.min(),$t.empty(),0)}static newUnknownDocument(t,n){return new Dt(t,3,n,z.min(),z.min(),$t.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Dt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t,n){this.position=t,this.inclusive=n}}function Qc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(a.referenceValue),n.key):r=Kn(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ee(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,n="asc"){this.field=t,this.dir=n}}function qv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{}class gt extends Rd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new jv(t,n,r):n==="array-contains"?new Gv(t,r):n==="in"?new Wv(t,r):n==="not-in"?new Kv(t,r):n==="array-contains-any"?new Qv(t,r):new gt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new zv(t,r):new Hv(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Kn(n,this.value)):n!==null&&sn(this.value)===sn(n)&&this.matchesComparison(Kn(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ie extends Rd{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new ie(t,n)}matches(t){return Sd(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Sd(e){return e.op==="and"}function Cd(e){return $v(e)&&Sd(e)}function $v(e){for(const t of e.filters)if(t instanceof ie)return!1;return!0}function wa(e){if(e instanceof gt)return e.field.canonicalString()+e.op.toString()+Qn(e.value);if(Cd(e))return e.filters.map(t=>wa(t)).join(",");{const t=e.filters.map(n=>wa(n)).join(",");return`${e.op}(${t})`}}function xd(e,t){return e instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.field.isEqual(i.field)&&Ee(r.value,i.value)}(e,t):e instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&xd(a,i.filters[u]),!0):!1}(e,t):void $(19439)}function Pd(e){return e instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Qn(n.value)}`}(e):e instanceof ie?function(n){return n.op.toString()+" {"+n.getFilters().map(Pd).join(" ,")+"}"}(e):"Filter"}class jv extends gt{constructor(t,n,r){super(t,n,r),this.key=q.fromName(r.referenceValue)}matches(t){const n=q.comparator(t.key,this.key);return this.matchesComparison(n)}}class zv extends gt{constructor(t,n){super(t,"in",n),this.keys=Vd("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Hv extends gt{constructor(t,n){super(t,"not-in",n),this.keys=Vd("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Vd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class Gv extends gt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return gu(n)&&Zr(n.arrayValue,this.value)}}class Wv extends gt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Zr(this.value.arrayValue,n)}}class Kv extends gt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Zr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zr(this.value.arrayValue,n)}}class Qv extends gt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!gu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zr(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t,n=null,r=[],i=[],s=null,a=null,u=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Pe=null}}function Jc(e,t=null,n=[],r=[],i=null,s=null,a=null){return new Xv(e,t,n,r,i,s,a)}function _u(e){const t=G(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>wa(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Gs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Qn(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Qn(r)).join(",")),t.Pe=n}return t.Pe}function yu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!xd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xc(e.startAt,t.startAt)&&Xc(e.endAt,t.endAt)}function Ea(e){return q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,n=null,r=[],i=[],s=null,a="F",u=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Jv(e,t,n,r,i,s,a,u){return new ur(e,t,n,r,i,s,a,u)}function vu(e){return new ur(e)}function Yc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Nd(e){return e.collectionGroup!==null}function $r(e){const t=G(e);if(t.Te===null){t.Te=[];const n=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new yt(bt.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(u=u.add(c.field))})}),u})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.Te.push(new ti(s,r))}),n.has(bt.keyField().canonicalString())||t.Te.push(new ti(bt.keyField(),r))}return t.Te}function de(e){const t=G(e);return t.Ie||(t.Ie=Yv(t,$r(e))),t.Ie}function Yv(e,t){if(e.limitType==="F")return Jc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ti(i.field,s)});const n=e.endAt?new As(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new As(e.startAt.position,e.startAt.inclusive):null;return Jc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ta(e,t){const n=e.filters.concat([t]);return new ur(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Is(e,t,n){return new ur(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ks(e,t){return yu(de(e),de(t))&&e.limitType===t.limitType}function Dd(e){return`${_u(de(e))}|lt:${e.limitType}`}function Un(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Pd(i)).join(", ")}]`),Gs(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qn(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qn(i)).join(",")),`Target(${r})`}(de(e))}; limitType=${e.limitType})`}function Qs(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of $r(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(a,u,l){const c=Qc(a,u,l);return a.inclusive?c<=0:c<0}(r.startAt,$r(r),i)||r.endAt&&!function(a,u,l){const c=Qc(a,u,l);return a.inclusive?c>=0:c>0}(r.endAt,$r(r),i))}(e,t)}function Zv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kd(e){return(t,n)=>{let r=!1;for(const i of $r(e)){const s=tw(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tw(e,t,n){const r=e.field.isKeyField()?q.comparator(t.key,n.key):function(s,a,u){const l=a.data.field(s),c=u.data.field(s);return l!==null&&c!==null?Kn(l,c):$(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){un(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return _d(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new at(q.comparator);function Le(){return ew}const Od=new at(q.comparator);function Nr(...e){let t=Od;for(const n of e)t=t.insert(n.key,n);return t}function Md(e){let t=Od;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function yn(){return jr()}function Ld(){return jr()}function jr(){return new Pn(e=>e.toString(),(e,t)=>e.isEqual(t))}const nw=new at(q.comparator),rw=new yt(q.comparator);function Q(...e){let t=rw;for(const n of e)t=t.add(n);return t}const iw=new yt(K);function sw(){return iw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ws(t)?"-0":t}}function Fd(e){return{integerValue:""+e}}function ow(e,t){return Dv(t)?Fd(t):wu(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this._=void 0}}function aw(e,t,n){return e instanceof bs?function(i,s){const a={fields:{[wd]:{stringValue:vd},[Td]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mu(s)&&(s=Ws(s)),s&&(a.fields[Ed]=s),{mapValue:a}}(n,t):e instanceof ei?Bd(e,t):e instanceof ni?qd(e,t):function(i,s){const a=Ud(i,s),u=Zc(a)+Zc(i.Ee);return va(a)&&va(i.Ee)?Fd(u):wu(i.serializer,u)}(e,t)}function uw(e,t,n){return e instanceof ei?Bd(e,t):e instanceof ni?qd(e,t):n}function Ud(e,t){return e instanceof Rs?function(r){return va(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class bs extends Xs{}class ei extends Xs{constructor(t){super(),this.elements=t}}function Bd(e,t){const n=$d(t);for(const r of e.elements)n.some(i=>Ee(i,r))||n.push(r);return{arrayValue:{values:n}}}class ni extends Xs{constructor(t){super(),this.elements=t}}function qd(e,t){let n=$d(t);for(const r of e.elements)n=n.filter(i=>!Ee(i,r));return{arrayValue:{values:n}}}class Rs extends Xs{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function Zc(e){return ht(e.integerValue||e.doubleValue)}function $d(e){return gu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function lw(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof ei&&i instanceof ei||r instanceof ni&&i instanceof ni?Wn(r.elements,i.elements,Ee):r instanceof Rs&&i instanceof Rs?Ee(r.Ee,i.Ee):r instanceof bs&&i instanceof bs}(e.transform,t.transform)}class cw{constructor(t,n){this.version=t,this.transformResults=n}}class pe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new pe}static exists(t){return new pe(void 0,t)}static updateTime(t){return new pe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ts(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Js{}function jd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Hd(e.key,pe.none()):new hi(e.key,e.data,pe.none());{const n=e.data,r=$t.empty();let i=new yt(bt.comparator);for(let s of t.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ln(e.key,r,new Kt(i.toArray()),pe.none())}}function hw(e,t,n){e instanceof hi?function(i,s,a){const u=i.value.clone(),l=eh(i.fieldTransforms,s,a.transformResults);u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):e instanceof ln?function(i,s,a){if(!ts(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=eh(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(zd(i)),l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function zr(e,t,n,r){return e instanceof hi?function(s,a,u,l){if(!ts(s.precondition,a))return u;const c=s.value.clone(),f=nh(s.fieldTransforms,l,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof ln?function(s,a,u,l){if(!ts(s.precondition,a))return u;const c=nh(s.fieldTransforms,l,a),f=a.data;return f.setAll(zd(s)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(e,t,n,r):function(s,a,u){return ts(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(e,t,n)}function fw(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Ud(r.transform,i||null);s!=null&&(n===null&&(n=$t.empty()),n.set(r.field,s))}return n||null}function th(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wn(r,i,(s,a)=>lw(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hi extends Js{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ln extends Js{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function eh(e,t,n){const r=new Map;et(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,u=t.data.field(s.field);r.set(s.field,uw(a,u,n[i]))}return r}function nh(e,t,n){const r=new Map;for(const i of e){const s=i.transform,a=n.data.field(i.field);r.set(i.field,aw(s,a,t))}return r}class Hd extends Js{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dw extends Js{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&hw(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=zr(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=zr(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Ld();return this.mutations.forEach(i=>{const s=t.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(i.key)?null:u;const l=jd(a,u);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Q())}isEqual(t){return this.batchId===t.batchId&&Wn(this.mutations,t.mutations,(n,r)=>th(n,r))&&Wn(this.baseMutations,t.baseMutations,(n,r)=>th(n,r))}}class Eu{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){et(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return nw}();const s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Eu(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,J;function _w(e){switch(e){case D.OK:return $(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return $(15467,{code:e})}}function Gd(e){if(e===void 0)return Oe("GRPC error has no .code"),D.UNKNOWN;switch(e){case mt.OK:return D.OK;case mt.CANCELLED:return D.CANCELLED;case mt.UNKNOWN:return D.UNKNOWN;case mt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case mt.INTERNAL:return D.INTERNAL;case mt.UNAVAILABLE:return D.UNAVAILABLE;case mt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case mt.NOT_FOUND:return D.NOT_FOUND;case mt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case mt.ABORTED:return D.ABORTED;case mt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case mt.DATA_LOSS:return D.DATA_LOSS;default:return $(39323,{code:e})}}(J=mt||(mt={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new Xe([4294967295,4294967295],0);function rh(e){const t=dd().encode(e),n=new sd;return n.update(t),new Uint8Array(n.digest())}function ih(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Xe([n,r],0),new Xe([i,s],0)]}class Tu{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dr(`Invalid padding: ${n}`);if(r<0)throw new Dr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Dr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Dr(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=Xe.fromNumber(this.fe)}pe(t,n,r){let i=t.add(n.multiply(Xe.fromNumber(r)));return i.compare(yw)===1&&(i=new Xe([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=rh(t),[r,i]=ih(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);if(!this.ye(a))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new Tu(s,i,n);return r.forEach(u=>a.insert(u)),a}insert(t){if(this.fe===0)return;const n=rh(t),[r,i]=ih(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);this.we(a)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Dr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,fi.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Ys(z.min(),i,new at(K),Le(),Q())}}class fi{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new fi(r,n,Q(),Q(),Q())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,n,r,i){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=i}}class Wd{constructor(t,n){this.targetId=t,this.De=n}}class Kd{constructor(t,n,r=Rt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sh{constructor(){this.ve=0,this.Ce=oh(),this.Fe=Rt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Q(),n=Q(),r=Q();return this.Ce.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:s})}}),new fi(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=oh()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class vw{constructor(t){this.We=t,this.Ge=new Map,this.ze=Le(),this.je=Hi(),this.Je=Hi(),this.He=new at(K)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:$(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(t){const n=t.targetId,r=t.De.count,i=this.st(n);if(i){const s=i.target;if(Ea(s))if(r===0){const a=new q(s.path);this.Xe(n,a,Dt.newNoDocument(a,z.min()))}else et(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const u=this._t(t),l=u?this.ut(u,t,a):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,u;try{a=rn(r).toUint8Array()}catch(l){if(l instanceof yd)return tn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new Tu(a,i,s)}catch(l){return tn(l instanceof Dr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.fe===0?null:u}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.We.lt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(u)||(this.Xe(n,s,null),i++)}),i}Pt(t){const n=new Map;this.Ge.forEach((s,a)=>{const u=this.st(a);if(u){if(s.current&&Ea(u.target)){const l=new q(u.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,Dt.newNoDocument(l,t))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let r=Q();this.Je.forEach((s,a)=>{let u=!0;a.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(t));const i=new Ys(t,n,this.He,this.ze,r);return this.ze=Le(),this.je=Hi(),this.Je=Hi(),this.He=new at(K),i}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const i=this.tt(t);this.It(t,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new sh,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new yt(K),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new yt(K),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||B("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new sh),this.We.getRemoteKeysForTarget(t).forEach(n=>{this.Xe(t,n,null)})}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function Hi(){return new at(q.comparator)}function oh(){return new at(q.comparator)}const ww={asc:"ASCENDING",desc:"DESCENDING"},Ew={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tw={and:"AND",or:"OR"};class Aw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Aa(e,t){return e.useProto3Json||Gs(t)?t:{value:t}}function Ss(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Iw(e,t){return Ss(e,t.toTimestamp())}function me(e){return et(!!e,49232),z.fromTimestamp(function(n){const r=nn(n);return new ot(r.seconds,r.nanos)}(e))}function Au(e,t){return Ia(e,t).canonicalString()}function Ia(e,t){const n=function(i){return new it(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Xd(e){const t=it.fromString(e);return et(ep(t),10190,{key:t.toString()}),t}function ba(e,t){return Au(e.databaseId,t.path)}function Xo(e,t){const n=Xd(t);if(n.get(1)!==e.databaseId.projectId)throw new F(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new F(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new q(Yd(n))}function Jd(e,t){return Au(e.databaseId,t)}function bw(e){const t=Xd(e);return t.length===4?it.emptyPath():Yd(t)}function Ra(e){return new it(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Yd(e){return et(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function ah(e,t,n){return{name:ba(e,t),fields:n.value.mapValue.fields}}function Rw(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:$(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(et(f===void 0||typeof f=="string",58123),Rt.fromBase64String(f||"")):(et(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Rt.fromUint8Array(f||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,u=a&&function(c){const f=c.code===void 0?D.UNKNOWN:Gd(c.code);return new F(f,c.message||"")}(a);n=new Kd(r,i,s,u||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xo(e,r.document.name),s=me(r.document.updateTime),a=r.document.createTime?me(r.document.createTime):z.min(),u=new $t({mapValue:{fields:r.document.fields}}),l=Dt.newFoundDocument(i,s,a,u),c=r.targetIds||[],f=r.removedTargetIds||[];n=new es(c,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Xo(e,r.document),s=r.readTime?me(r.readTime):z.min(),a=Dt.newNoDocument(i,s),u=r.removedTargetIds||[];n=new es([],u,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Xo(e,r.document),s=r.removedTargetIds||[];n=new es([],s,i,null)}else{if(!("filter"in t))return $(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new gw(i,s),u=r.targetId;n=new Wd(u,a)}}return n}function Sw(e,t){let n;if(t instanceof hi)n={update:ah(e,t.key,t.value)};else if(t instanceof Hd)n={delete:ba(e,t.key)};else if(t instanceof ln)n={update:ah(e,t.key,t.data),updateMask:Mw(t.fieldMask)};else{if(!(t instanceof dw))return $(16599,{Rt:t.type});n={verify:ba(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,a){const u=a.transform;if(u instanceof bs)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ei)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ni)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Rs)return{fieldPath:a.field.canonicalString(),increment:u.Ee};throw $(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Iw(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$(27497)}(e,t.precondition)),n}function Cw(e,t){return e&&e.length>0?(et(t!==void 0,14353),e.map(n=>function(i,s){let a=i.updateTime?me(i.updateTime):me(s);return a.isEqual(z.min())&&(a=me(s)),new cw(a,i.transformResults||[])}(n,t))):[]}function xw(e,t){return{documents:[Jd(e,t.path)]}}function Pw(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Jd(e,i);const s=function(c){if(c.length!==0)return tp(ie.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(f=>function(m){return{field:Bn(m.field),direction:Dw(m.dir)}}(f))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Aa(e,t.limit);return u!==null&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{Vt:n,parent:i}}function Vw(e){let t=bw(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){et(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:t=t.child(f.collectionId)}let s=[];n.where&&(s=function(p){const m=Zd(p);return m instanceof ie&&Cd(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(v){return new ti(qn(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let u=null;n.limit&&(u=function(p){let m;return m=typeof p=="object"?p.value:p,Gs(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,_=p.values||[];return new As(_,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,_=p.values||[];return new As(_,m)}(n.endAt)),Jv(t,i,a,s,u,"F",l,c)}function Nw(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Zd(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qn(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qn(n.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qn(n.unaryFilter.field);return gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qn(n.unaryFilter.field);return gt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(e):e.fieldFilter!==void 0?function(n){return gt.create(qn(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ie.create(n.compositeFilter.filters.map(r=>Zd(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(n.compositeFilter.op))}(e):$(30097,{filter:e})}function Dw(e){return ww[e]}function kw(e){return Ew[e]}function Ow(e){return Tw[e]}function Bn(e){return{fieldPath:e.canonicalString()}}function qn(e){return bt.fromServerFormat(e.fieldPath)}function tp(e){return e instanceof gt?function(n){if(n.op==="=="){if(Kc(n.value))return{unaryFilter:{field:Bn(n.field),op:"IS_NAN"}};if(Wc(n.value))return{unaryFilter:{field:Bn(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kc(n.value))return{unaryFilter:{field:Bn(n.field),op:"IS_NOT_NAN"}};if(Wc(n.value))return{unaryFilter:{field:Bn(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bn(n.field),op:kw(n.op),value:n.value}}}(e):e instanceof ie?function(n){const r=n.getFilters().map(i=>tp(i));return r.length===1?r[0]:{compositeFilter:{op:Ow(n.op),filters:r}}}(e):$(54877,{filter:e})}function Mw(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function ep(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t,n,r,i,s=z.min(),a=z.min(),u=Rt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(t){return new We(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new We(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new We(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new We(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t){this.gt=t}}function Fw(e){const t=Vw({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Is(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.Dn=new Bw}addToCollectionParentIndex(t,n){return this.Dn.add(n),O.resolve()}getCollectionParents(t,n){return O.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return O.resolve()}deleteFieldIndex(t,n){return O.resolve()}deleteAllFieldIndexes(t){return O.resolve()}createTargetIndexes(t,n){return O.resolve()}getDocumentsMatchingTarget(t,n){return O.resolve(null)}getIndexType(t,n){return O.resolve(0)}getFieldIndexes(t,n){return O.resolve([])}getNextCollectionGroupToUpdate(t){return O.resolve(null)}getMinOffset(t,n){return O.resolve(en.min())}getMinOffsetFromCollectionGroup(t,n){return O.resolve(en.min())}updateCollectionGroup(t,n,r){return O.resolve()}updateIndexEntries(t,n){return O.resolve()}}class Bw{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new yt(it.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new yt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},np=41943040;class qt{static withCacheSize(t){return new qt(t,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(np,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Xn(0)}static ur(){return new Xn(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="LruGarbageCollector",qw=1048576;function ch([e,t],[n,r]){const i=K(e,n);return i===0?K(t,r):i}class $w{constructor(t){this.Tr=t,this.buffer=new yt(ch),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ch(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jw{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){B(lh,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ar(n)?B(lh,"Ignoring IndexedDB error during garbage collection: ",n):await or(n)}await this.Rr(3e5)})}}class zw{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return O.resolve(Hs.ue);const r=new $w(n);return this.Vr.forEachTarget(t,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(uh)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uh):this.pr(t,n))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,i,s,a,u,l,c;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(t,i))).next(p=>(r=p,u=Date.now(),this.removeTargets(t,r,n))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(p=>(c=Date.now(),Fn()<=Y.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(l-u)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function Hw(e,t){return new zw(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.changes=new Pn(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Dt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&zr(r.mutation,i,Kt.empty(),ot.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Q()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Q()){const i=yn();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let a=Nr();return s.forEach((u,l)=>{a=a.insert(u,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=yn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Q()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((a,u)=>{n.set(a,u)})})}computeViews(t,n,r,i){let s=Le();const a=jr(),u=function(){return jr()}();return n.forEach((l,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof ln)?s=s.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),zr(f.mutation,c,f.mutation.getFieldMask(),ot.now())):a.set(c.key,Kt.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,f)=>a.set(c,f)),n.forEach((c,f)=>{var p;return u.set(c,new Ww(f,(p=a.get(c))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(t,n){const r=jr();let i=new at((a,u)=>a-u),s=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const u of a)u.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let f=r.get(l)||Kt.empty();f=u.applyToLocalView(c,f),r.set(l,f);const p=(i.get(u.batchId)||Q()).add(l);i=i.insert(u.batchId,p)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const l=u.getNext(),c=l.key,f=l.value,p=Ld();f.forEach(m=>{if(!s.has(m)){const _=jd(n.get(m),r.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,c,p))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(a){return q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Nd(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):O.resolve(yn());let u=Xr,l=s;return a.next(c=>O.forEach(c,(f,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(t,f).next(m=>{l=l.insert(f,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,Q())).next(f=>({batchId:u,changes:Md(f)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new q(n)).next(r=>{let i=Nr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let a=Nr();return this.indexManager.getCollectionParents(t,s).next(u=>O.forEach(u,l=>{const c=function(p,m){return new ur(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,r,i).next(f=>{f.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(a=>{s.forEach((l,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,Dt.newInvalidDocument(f)))});let u=Nr();return a.forEach((l,c)=>{const f=s.get(l);f!==void 0&&zr(f.mutation,c,Kt.empty(),ot.now()),Qs(n,c)&&(u=u.insert(l,c))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return O.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:me(i.createTime)}}(n)),O.resolve()}getNamedQuery(t,n){return O.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:Fw(i.bundledQuery),readTime:me(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.overlays=new at(q.comparator),this.kr=new Map}getOverlay(t,n){return O.resolve(this.overlays.get(n))}getOverlays(t,n){const r=yn();return O.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.wt(t,n,s)}),O.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),O.resolve()}getOverlaysForCollection(t,n,r){const i=yn(),s=n.length+1,a=new q(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const l=u.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new at((c,f)=>c-f);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=yn(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const u=yn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,f)=>u.set(c,f)),!(u.size()>=i)););return O.resolve(u)}wt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new mw(n,r));let s=this.kr.get(n);s===void 0&&(s=Q(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(t){return O.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.qr=new yt(wt.Qr),this.$r=new yt(wt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new wt(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Wr(new wt(t,n))}Gr(t,n){t.forEach(r=>this.removeReference(r,n))}zr(t){const n=new q(new it([])),r=new wt(n,t),i=new wt(n,t+1),s=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new q(new it([])),r=new wt(n,t),i=new wt(n,t+1);let s=Q();return this.$r.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(t){const n=new wt(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class wt{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return q.comparator(t.key,n.key)||K(t.Hr,n.Hr)}static Ur(t,n){return K(t.Hr,n.Hr)||q.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new yt(wt.Qr)}checkEmpty(t){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pw(s,n,r,i);this.mutationQueue.push(a);for(const u of i)this.Yr=this.Yr.add(new wt(u.key,s)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return O.resolve(a)}lookupMutationBatch(t,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?pu:this.er-1)}getAllMutationBatches(t){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new wt(n,0),i=new wt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],a=>{const u=this.Zr(a.Hr);s.push(u)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new yt(K);return n.forEach(i=>{const s=new wt(i,0),a=new wt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],u=>{r=r.add(u.Hr)})}),O.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const a=new wt(new q(s),0);let u=new yt(K);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(u=u.add(l.Hr)),!0)},a),O.resolve(this.ei(u))}ei(t){const n=[];return t.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){et(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return O.forEach(n.mutations,i=>{const s=new wt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=r})}rr(t){}containsKey(t,n){const r=new wt(n,0),i=this.Yr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,O.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(t){this.ni=t,this.docs=function(){return new at(q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(t,n){let r=Le();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Le();const a=n.path,u=new q(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||xv(Cv(f),r)<=0||(i.has(f.key)||Qs(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(t,n,r,i){$(9500)}ri(t,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new t0(this)}getSize(t){return O.resolve(this.size)}}class t0 extends Gw{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(t,i)):this.Or.removeEntry(r)}),O.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t){this.persistence=t,this.ii=new Pn(n=>_u(n),yu),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.si=0,this.oi=new Iu,this.targetCount=0,this._i=Xn.ar()}forEachTarget(t,n){return this.ii.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(t){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return O.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),O.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new Xn(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,O.resolve()}updateTargetData(t,n){return this.hr(n),O.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.ii.forEach((a,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(t,u.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(t){return O.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return O.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),O.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(t,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),O.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return O.resolve(r)}containsKey(t,n){return O.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(t,n){this.ai={},this.overlays={},this.ui=new Hs(0),this.ci=!1,this.ci=!0,this.li=new Jw,this.referenceDelegate=t(this),this.hi=new e0(this),this.indexManager=new Uw,this.remoteDocumentCache=function(i){return new Zw(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Lw(n),this.Ti=new Qw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Xw,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new Yw(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){B("MemoryPersistence","Starting transaction:",t);const i=new n0(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(t,n){return O.or(Object.values(this.ai).map(r=>()=>r.containsKey(t,n)))}}class n0 extends Vv{constructor(t){super(),this.currentSequenceNumber=t}}class bu{constructor(t){this.persistence=t,this.Ai=new Iu,this.Ri=null}static Vi(t){return new bu(t)}get mi(){if(this.Ri)return this.Ri;throw $(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),O.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),O.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.mi,r=>{const i=q.fromPath(r);return this.fi(t,i).next(s=>{s||n.removeEntry(i,z.min())})}).next(()=>(this.Ri=null,n.apply(t)))}updateLimboDocument(t,n){return this.fi(t,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(t){return 0}fi(t,n){return O.or([()=>O.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class Cs{constructor(t,n){this.persistence=t,this.gi=new Pn(r=>kv(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Hw(this,n)}static Vi(t,n){return new Cs(t,n)}Ii(){}di(t){return O.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}yr(t){let n=0;return this.gr(t,r=>{n++}).next(()=>n)}gr(t,n){return O.forEach(this.gi,(r,i)=>this.Sr(t,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(t,a=>this.Sr(t,a,n).next(u=>{u||(r++,s.removeEntry(a,z.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),O.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),O.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),O.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),O.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Yi(t.data.value)),n}Sr(t,n,r){return O.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.gi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=i}static Es(t,n){let r=Q(),i=Q();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ru(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return X_()?8:Nv(K_())>0?6:4}()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ps(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(t,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new r0;return this.ws(t,n,a).next(u=>{if(s.result=u,this.Rs)return this.Ss(t,n,a,u.size)})}).next(()=>s.result)}Ss(t,n,r,i){return r.documentReadCount<this.Vs?(Fn()<=Y.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Un(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Fn()<=Y.DEBUG&&B("QueryEngine","Query:",Un(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Fn()<=Y.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Un(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,de(n))):O.resolve())}ps(t,n){if(Yc(n))return O.resolve(null);let r=de(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Is(n,null,"F"),r=de(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const a=Q(...s);return this.gs.getDocuments(t,a).next(u=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.bs(n,u);return this.Ds(n,c,a,l.readTime)?this.ps(t,Is(n,null,"F")):this.vs(t,c,n,l)}))})))}ys(t,n,r,i){return Yc(n)||i.isEqual(z.min())?O.resolve(null):this.gs.getDocuments(t,r).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,r,i)?O.resolve(null):(Fn()<=Y.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Un(n)),this.vs(t,a,n,Sv(i,Xr)).next(u=>u))})}bs(t,n){let r=new yt(kd(t));return n.forEach((i,s)=>{Qs(t,s)&&(r=r.add(s))}),r}Ds(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(t,n,r){return Fn()<=Y.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Un(n)),this.gs.getDocumentsMatchingQuery(t,n,en.min(),r)}vs(t,n,r,i){return this.gs.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="LocalStore",s0=3e8;class o0{constructor(t,n,r,i){this.persistence=t,this.Cs=n,this.serializer=i,this.Fs=new at(K),this.Ms=new Pn(s=>_u(s),yu),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Kw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Fs))}}function a0(e,t,n,r){return new o0(e,t,n,r)}async function ip(e,t){const n=G(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],u=[];let l=Q();for(const c of i){a.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of s){u.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:a,addedBatchIds:u}))})})}function u0(e,t){const n=G(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,l,c,f){const p=c.batch,m=p.keys();let _=O.resolve();return m.forEach(v=>{_=_.next(()=>f.getEntry(l,v)).next(A=>{const E=c.docVersions.get(v);et(E!==null,48541),A.version.compareTo(E)<0&&(p.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),f.addEntry(A)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(l,p))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let l=Q();for(let c=0;c<u.mutationResults.length;++c)u.mutationResults[c].transformResults.length>0&&(l=l.add(u.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function sp(e){const t=G(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.hi.getLastRemoteSnapshotVersion(n))}function l0(e,t){const n=G(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];t.targetChanges.forEach((f,p)=>{const m=i.get(p);if(!m)return;u.push(n.hi.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(s,f.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?_=_.withResumeToken(Rt.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(A,E,x){return A.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=s0?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,_,f)&&u.push(n.hi.updateTargetData(s,_))});let l=Le(),c=Q();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),u.push(c0(s,a,t.documentUpdates).next(f=>{l=f.Ls,c=f.ks})),!r.isEqual(z.min())){const f=n.hi.getLastRemoteSnapshotVersion(s).next(p=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(f)}return O.waitFor(u).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=i,s))}function c0(e,t,n){let r=Q(),i=Q();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let a=Le();return n.forEach((u,l)=>{const c=s.get(u);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(u)),l.isNoDocument()&&l.version.isEqual(z.min())?(t.removeEntry(u,l.readTime),a=a.insert(u,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),a=a.insert(u,l)):B(Su,"Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version)}),{Ls:a,ks:i}})}function h0(e,t){const n=G(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=pu),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function f0(e,t){const n=G(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,t).next(s=>s?(i=s,O.resolve(i)):n.hi.allocateTargetId(r).next(a=>(i=new We(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r})}async function Sa(e,t,n){const r=G(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ar(a))throw a;B(Su,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function hh(e,t,n){const r=G(e);let i=z.min(),s=Q();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,f){const p=G(l),m=p.Ms.get(f);return m!==void 0?O.resolve(p.Fs.get(m)):p.hi.getTargetData(c,f)}(r,a,de(t)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,u.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,t,n?i:z.min(),n?s:Q())).next(u=>(d0(r,Zv(t),u),{documents:u,qs:s})))}function d0(e,t,n){let r=e.xs.get(t)||z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.xs.set(t,r)}class fh{constructor(){this.activeTargetIds=sw()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class p0{constructor(){this.Fo=new fh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new fh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="ConnectivityMonitor";class ph{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(dh,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){B(dh,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi=null;function Ca(){return Gi===null?Gi=function(){return 268435456+Math.round(2147483648*Math.random())}():Gi++,"0x"+Gi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="RestConnection",g0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _0{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Es?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(t,n,r,i,s){const a=Ca(),u=this.Go(t,n.toUriEncodedString());B(Jo,`Sending RPC '${t}' ${a}:`,u,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:c}=new URL(u),f=cu(c);return this.jo(t,u,l,r,f).then(p=>(B(Jo,`Received RPC '${t}' ${a}: `,p),p),p=>{throw tn(Jo,`RPC '${t}' ${a} failed with error: `,p,"url: ",u,"request:",r),p})}Jo(t,n,r,i,s,a){return this.Wo(t,n,r,i,s)}zo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}Go(t,n){const r=g0[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class v0 extends _0{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,i,s){const a=Ca();return new Promise((u,l)=>{const c=new od;c.setWithCredentials(!0),c.listenOnce(ad.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ji.NO_ERROR:const p=c.getResponseJson();B(Vt,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),u(p);break;case Ji.TIMEOUT:B(Vt,`RPC '${t}' ${a} timed out`),l(new F(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ji.HTTP_ERROR:const m=c.getStatus();if(B(Vt,`RPC '${t}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_==null?void 0:_.error;if(v&&v.status&&v.message){const A=function(x){const N=x.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(N)>=0?N:D.UNKNOWN}(v.status);l(new F(A,v.message))}else l(new F(D.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new F(D.UNAVAILABLE,"Connection failed."));break;default:$(9055,{c_:t,streamId:a,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{B(Vt,`RPC '${t}' ${a} completed.`)}});const f=JSON.stringify(i);B(Vt,`RPC '${t}' ${a} sending request:`,i),c.send(n,"POST",f,r,15)})}P_(t,n,r){const i=Ca(),s=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=cd(),u=ld(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=s.join("");B(Vt,`Creating RPC '${t}' stream ${i}: ${f}`,l);const p=a.createWebChannel(f,l);this.T_(p);let m=!1,_=!1;const v=new y0({Ho:E=>{_?B(Vt,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(m||(B(Vt,`Opening RPC '${t}' stream ${i} transport.`),p.open(),m=!0),B(Vt,`RPC '${t}' stream ${i} sending:`,E),p.send(E))},Yo:()=>p.close()}),A=(E,x,N)=>{E.listen(x,M=>{try{N(M)}catch(k){setTimeout(()=>{throw k},0)}})};return A(p,Vr.EventType.OPEN,()=>{_||(B(Vt,`RPC '${t}' stream ${i} transport opened.`),v.s_())}),A(p,Vr.EventType.CLOSE,()=>{_||(_=!0,B(Vt,`RPC '${t}' stream ${i} transport closed`),v.__(),this.I_(p))}),A(p,Vr.EventType.ERROR,E=>{_||(_=!0,tn(Vt,`RPC '${t}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),v.__(new F(D.UNAVAILABLE,"The operation could not be completed")))}),A(p,Vr.EventType.MESSAGE,E=>{var x;if(!_){const N=E.data[0];et(!!N,16349);const M=N,k=(M==null?void 0:M.error)||((x=M[0])===null||x===void 0?void 0:x.error);if(k){B(Vt,`RPC '${t}' stream ${i} received error:`,k);const U=k.status;let H=function(T){const R=mt[T];if(R!==void 0)return Gd(R)}(U),I=k.message;H===void 0&&(H=D.INTERNAL,I="Unknown error status: "+U+" with message "+k.message),_=!0,v.__(new F(H,I)),p.close()}else B(Vt,`RPC '${t}' stream ${i} received:`,N),v.a_(N)}}),A(u,ud.STAT_EVENT,E=>{E.stat===ga.PROXY?B(Vt,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===ga.NOPROXY&&B(Vt,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(n=>n===t)}}function Yo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(e){return new Aw(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(t,n,r=1e3,i=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="PersistentStream";class ap{constructor(t,n,r,i,s,a,u,l){this.Fi=t,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new op(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Oe(n.toString()),Oe("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{t(()=>{const i=new F(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return B(mh,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget(()=>this.b_===t?n():(B(mh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w0 extends ap{constructor(t,n,r,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=Rw(this.serializer,t),r=function(s){if(!("targetChange"in s))return z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?z.min():a.readTime?me(a.readTime):z.min()}(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=Ra(this.serializer),n.addTarget=function(s,a){let u;const l=a.target;if(u=Ea(l)?{documents:xw(s,l)}:{query:Pw(s,l).Vt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Qd(s,a.resumeToken);const c=Aa(s,a.expectedCount);c!==null&&(u.expectedCount=c)}else if(a.snapshotVersion.compareTo(z.min())>0){u.readTime=Ss(s,a.snapshotVersion.toTimestamp());const c=Aa(s,a.expectedCount);c!==null&&(u.expectedCount=c)}return u}(this.serializer,t);const r=Nw(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=Ra(this.serializer),n.removeTarget=t,this.k_(n)}}class E0 extends ap{constructor(t,n,r,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return et(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,et(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){et(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=Cw(t.writeResults,t.commitTime),r=me(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=Ra(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Sw(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{}class A0 extends T0{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(D.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(t,Ia(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(D.UNKNOWN,s.toString())})}Jo(t,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Jo(t,Ia(n,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(D.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class I0{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Oe(n),this._a=!1):B("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="RemoteStore";class b0{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{Vn(this)&&(B(Rn,"Restarting streams for network reachability change."),await async function(l){const c=G(l);c.Ia.add(4),await di(c),c.Aa.set("Unknown"),c.Ia.delete(4),await to(c)}(this))})}),this.Aa=new I0(r,i)}}async function to(e){if(Vn(e))for(const t of e.da)await t(!0)}async function di(e){for(const t of e.da)await t(!1)}function up(e,t){const n=G(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Vu(n)?Pu(n):lr(n).x_()&&xu(n,t))}function Cu(e,t){const n=G(e),r=lr(n);n.Ta.delete(t),r.x_()&&lp(n,t),n.Ta.size===0&&(r.x_()?r.B_():Vn(n)&&n.Aa.set("Unknown"))}function xu(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}lr(e).H_(t)}function lp(e,t){e.Ra.$e(t),lr(e).Y_(t)}function Pu(e){e.Ra=new vw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),lr(e).start(),e.Aa.aa()}function Vu(e){return Vn(e)&&!lr(e).M_()&&e.Ta.size>0}function Vn(e){return G(e).Ia.size===0}function cp(e){e.Ra=void 0}async function R0(e){e.Aa.set("Online")}async function S0(e){e.Ta.forEach((t,n)=>{xu(e,t)})}async function C0(e,t){cp(e),Vu(e)?(e.Aa.la(t),Pu(e)):e.Aa.set("Unknown")}async function x0(e,t,n){if(e.Aa.set("Online"),t instanceof Kd&&t.state===2&&t.cause)try{await async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ta.delete(u),i.Ra.removeTarget(u))}(e,t)}catch(r){B(Rn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await xs(e,r)}else if(t instanceof es?e.Ra.Ye(t):t instanceof Wd?e.Ra.it(t):e.Ra.et(t),!n.isEqual(z.min()))try{const r=await sp(e.localStore);n.compareTo(r)>=0&&await function(s,a){const u=s.Ra.Pt(a);return u.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.Ta.get(c);f&&s.Ta.set(c,f.withResumeToken(l.resumeToken,a))}}),u.targetMismatches.forEach((l,c)=>{const f=s.Ta.get(l);if(!f)return;s.Ta.set(l,f.withResumeToken(Rt.EMPTY_BYTE_STRING,f.snapshotVersion)),lp(s,l);const p=new We(f.target,l,c,f.sequenceNumber);xu(s,p)}),s.remoteSyncer.applyRemoteEvent(u)}(e,n)}catch(r){B(Rn,"Failed to raise snapshot:",r),await xs(e,r)}}async function xs(e,t,n){if(!ar(t))throw t;e.Ia.add(1),await di(e),e.Aa.set("Offline"),n||(n=()=>sp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{B(Rn,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await to(e)})}function hp(e,t){return t().catch(n=>xs(e,n,t))}async function eo(e){const t=G(e),n=on(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:pu;for(;P0(t);)try{const i=await h0(t.localStore,r);if(i===null){t.Pa.length===0&&n.B_();break}r=i.batchId,V0(t,i)}catch(i){await xs(t,i)}fp(t)&&dp(t)}function P0(e){return Vn(e)&&e.Pa.length<10}function V0(e,t){e.Pa.push(t);const n=on(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function fp(e){return Vn(e)&&!on(e).M_()&&e.Pa.length>0}function dp(e){on(e).start()}async function N0(e){on(e).na()}async function D0(e){const t=on(e);for(const n of e.Pa)t.X_(n.mutations)}async function k0(e,t,n){const r=e.Pa.shift(),i=Eu.from(r,t,n);await hp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await eo(e)}async function O0(e,t){t&&on(e).Z_&&await async function(r,i){if(function(a){return _w(a)&&a!==D.ABORTED}(i.code)){const s=r.Pa.shift();on(r).N_(),await hp(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await eo(r)}}(e,t),fp(e)&&dp(e)}async function gh(e,t){const n=G(e);n.asyncQueue.verifyOperationInProgress(),B(Rn,"RemoteStore received new credentials");const r=Vn(n);n.Ia.add(3),await di(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await to(n)}async function M0(e,t){const n=G(e);t?(n.Ia.delete(2),await to(n)):t||(n.Ia.add(2),await di(n),n.Aa.set("Unknown"))}function lr(e){return e.Va||(e.Va=function(n,r,i){const s=G(n);return s.ia(),new w0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Zo:R0.bind(null,e),e_:S0.bind(null,e),n_:C0.bind(null,e),J_:x0.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),Vu(e)?Pu(e):e.Aa.set("Unknown")):(await e.Va.stop(),cp(e))})),e.Va}function on(e){return e.ma||(e.ma=function(n,r,i){const s=G(n);return s.ia(),new E0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:N0.bind(null,e),n_:O0.bind(null,e),ea:D0.bind(null,e),ta:k0.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await eo(e)):(await e.ma.stop(),e.Pa.length>0&&(B(Rn,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ve,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const a=Date.now()+r,u=new Nu(t,n,a,i,s);return u.start(r),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(D.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Du(e,t){if(Oe("AsyncQueue",`${t}: ${e}`),ar(e))return new F(D.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{static emptySet(t){return new zn(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Nr(),this.sortedSet=new at(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof zn)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new zn;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this.fa=new at(q.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):$(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal((n,r)=>{t.push(r)}),t}}class Jn{constructor(t,n,r,i,s,a,u,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Jn(t,n,zn.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ks(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class F0{constructor(){this.queries=yh(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=G(n),s=i.queries;i.queries=yh(),s.forEach((a,u)=>{for(const l of u.wa)l.onError(r)})})(this,new F(D.ABORTED,"Firestore shutting down"))}}function yh(){return new Pn(e=>Dd(e),Ks)}async function pp(e,t){const n=G(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new L0,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const u=Du(a,`Initialization of query '${Un(t.query)}' failed`);return void t.onError(u)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&ku(n)}async function mp(e,t){const n=G(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const a=s.wa.indexOf(t);a>=0&&(s.wa.splice(a,1),s.wa.length===0?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function U0(e,t){const n=G(e);let r=!1;for(const i of t){const s=i.query,a=n.queries.get(s);if(a){for(const u of a.wa)u.Ca(i)&&(r=!0);a.ya=i}}r&&ku(n)}function B0(e,t,n){const r=G(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function ku(e){e.Da.forEach(t=>{t.next()})}var xa,vh;(vh=xa||(xa={})).Fa="default",vh.Cache="cache";class gp{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Jn(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Jn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==xa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(t){this.key=t}}class yp{constructor(t){this.key=t}}class q0{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Q(),this.mutatedKeys=Q(),this.Xa=kd(t),this.eu=new zn(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new _h,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,u=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((f,p)=>{const m=i.get(f),_=Qs(this.query,p)?p:null,v=!!m&&this.mutatedKeys.has(m.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let E=!1;m&&_?m.data.isEqual(_.data)?v!==A&&(r.track({type:3,doc:_}),E=!0):this.iu(m,_)||(r.track({type:2,doc:_}),E=!0,(l&&this.Xa(_,l)>0||c&&this.Xa(_,c)<0)&&(u=!0)):!m&&_?(r.track({type:0,doc:_}),E=!0):m&&!_&&(r.track({type:1,doc:m}),E=!0,(l||c)&&(u=!0)),E&&(_?(a=a.add(_),s=A?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{eu:a,ru:r,Ds:u,mutatedKeys:s}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const a=t.ru.pa();a.sort((f,p)=>function(_,v){const A=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{At:E})}};return A(_)-A(v)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,a.length!==0||c?{snapshot:new Jn(this.query,t.eu,s,a,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new _h,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Q(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return t.forEach(r=>{this.Za.has(r)||n.push(new yp(r))}),this.Za.forEach(r=>{t.has(r)||n.push(new _p(r))}),n}uu(t){this.Ha=t.qs,this.Za=Q();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Jn.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ou="SyncEngine";class $0{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class j0{constructor(t){this.key=t,this.lu=!1}}class z0{constructor(t,n,r,i,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Pn(u=>Dd(u),Ks),this.Tu=new Map,this.Iu=new Set,this.du=new at(q.comparator),this.Eu=new Map,this.Au=new Iu,this.Ru={},this.Vu=new Map,this.mu=Xn.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function H0(e,t,n=!0){const r=Ip(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await vp(r,t,n,!0),i}async function G0(e,t){const n=Ip(e);await vp(n,t,!0,!1)}async function vp(e,t,n,r){const i=await f0(e.localStore,de(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await W0(e,t,s,a==="current",i.resumeToken)),e.isPrimaryClient&&n&&up(e.remoteStore,i),u}async function W0(e,t,n,r,i){e.gu=(p,m,_)=>async function(A,E,x,N){let M=E.view.nu(x);M.Ds&&(M=await hh(A.localStore,E.query,!1).then(({documents:I})=>E.view.nu(I,M)));const k=N&&N.targetChanges.get(E.targetId),U=N&&N.targetMismatches.get(E.targetId)!=null,H=E.view.applyChanges(M,A.isPrimaryClient,k,U);return Eh(A,E.targetId,H._u),H.snapshot}(e,p,m,_);const s=await hh(e.localStore,t,!0),a=new q0(t,s.qs),u=a.nu(s.documents),l=fi.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),c=a.applyChanges(u,e.isPrimaryClient,l);Eh(e,n,c._u);const f=new $0(t,n,a);return e.Pu.set(t,f),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function K0(e,t,n){const r=G(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(a=>!Ks(a,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cu(r.remoteStore,i.targetId),Pa(r,i.targetId)}).catch(or)):(Pa(r,i.targetId),await Sa(r.localStore,i.targetId,!0))}async function Q0(e,t){const n=G(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cu(n.remoteStore,r.targetId))}async function X0(e,t,n){const r=rE(e);try{const i=await function(a,u){const l=G(a),c=ot.now(),f=u.reduce((_,v)=>_.add(v.key),Q());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let v=Le(),A=Q();return l.Os.getEntries(_,f).next(E=>{v=E,v.forEach((x,N)=>{N.isValidDocument()||(A=A.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,v)).next(E=>{p=E;const x=[];for(const N of u){const M=fw(N,p.get(N.key).overlayedDocument);M!=null&&x.push(new ln(N.key,M,bd(M.value.mapValue),pe.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,x,u)}).next(E=>{m=E;const x=E.applyToLocalDocumentSet(p,A);return l.documentOverlayCache.saveOverlays(_,E.batchId,x)})}).then(()=>({batchId:m.batchId,changes:Md(p)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,l){let c=a.Ru[a.currentUser.toKey()];c||(c=new at(K)),c=c.insert(u,l),a.Ru[a.currentUser.toKey()]=c}(r,i.batchId,n),await pi(r,i.changes),await eo(r.remoteStore)}catch(i){const s=Du(i,"Failed to persist write");n.reject(s)}}async function wp(e,t){const n=G(e);try{const r=await l0(n.localStore,t);t.targetChanges.forEach((i,s)=>{const a=n.Eu.get(s);a&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?et(a.lu,14607):i.removedDocuments.size>0&&(et(a.lu,42227),a.lu=!1))}),await pi(n,r,t)}catch(r){await or(r)}}function wh(e,t,n){const r=G(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,a)=>{const u=a.view.va(t);u.snapshot&&i.push(u.snapshot)}),function(a,u){const l=G(a);l.onlineState=u;let c=!1;l.queries.forEach((f,p)=>{for(const m of p.wa)m.va(u)&&(c=!0)}),c&&ku(l)}(r.eventManager,t),i.length&&r.hu.J_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function J0(e,t,n){const r=G(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let a=new at(q.comparator);a=a.insert(s,Dt.newNoDocument(s,z.min()));const u=Q().add(s),l=new Ys(z.min(),new Map,new at(K),a,u);await wp(r,l),r.du=r.du.remove(s),r.Eu.delete(t),Mu(r)}else await Sa(r.localStore,t,!1).then(()=>Pa(r,t,n)).catch(or)}async function Y0(e,t){const n=G(e),r=t.batch.batchId;try{const i=await u0(n.localStore,t);Tp(n,r,null),Ep(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pi(n,i)}catch(i){await or(i)}}async function Z0(e,t,n){const r=G(e);try{const i=await function(a,u){const l=G(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return l.mutationQueue.lookupMutationBatch(c,u).next(p=>(et(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>l.localDocuments.getDocuments(c,f))})}(r.localStore,t);Tp(r,t,n),Ep(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await pi(r,i)}catch(i){await or(i)}}function Ep(e,t){(e.Vu.get(t)||[]).forEach(n=>{n.resolve()}),e.Vu.delete(t)}function Tp(e,t,n){const r=G(e);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Pa(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(r=>{e.Au.containsKey(r)||Ap(e,r)})}function Ap(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Cu(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Mu(e))}function Eh(e,t,n){for(const r of n)r instanceof _p?(e.Au.addReference(r.key,t),tE(e,r)):r instanceof yp?(B(Ou,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Ap(e,r.key)):$(19791,{yu:r})}function tE(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(B(Ou,"New document in limbo: "+n),e.Iu.add(r),Mu(e))}function Mu(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new q(it.fromString(t)),r=e.mu.next();e.Eu.set(r,new j0(n)),e.du=e.du.insert(n,r),up(e.remoteStore,new We(de(vu(n.path)),r,"TargetPurposeLimboResolution",Hs.ue))}}async function pi(e,t,n){const r=G(e),i=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((u,l)=>{a.push(r.gu(l,t,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=Ru.Es(l.targetId,c);s.push(p)}}))}),await Promise.all(a),r.hu.J_(i),await async function(l,c){const f=G(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(c,m=>O.forEach(m.Is,_=>f.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>O.forEach(m.ds,_=>f.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!ar(p))throw p;B(Su,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const _=f.Fs.get(m),v=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(v);f.Fs=f.Fs.insert(m,A)}}}(r.localStore,s))}async function eE(e,t){const n=G(e);if(!n.currentUser.isEqual(t)){B(Ou,"User change. New user:",t.toKey());const r=await ip(n.localStore,t);n.currentUser=t,function(s,a){s.Vu.forEach(u=>{u.forEach(l=>{l.reject(new F(D.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await pi(n,r.Bs)}}function nE(e,t){const n=G(e),r=n.Eu.get(t);if(r&&r.lu)return Q().add(r.key);{let i=Q();const s=n.Tu.get(t);if(!s)return i;for(const a of s){const u=n.Pu.get(a);i=i.unionWith(u.view.tu)}return i}}function Ip(e){const t=G(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=J0.bind(null,t),t.hu.J_=U0.bind(null,t.eventManager),t.hu.pu=B0.bind(null,t.eventManager),t}function rE(e){const t=G(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Y0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Z0.bind(null,t),t}class Ps{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zs(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return a0(this.persistence,new i0,t.initialUser,this.serializer)}Du(t){return new rp(bu.Vi,this.serializer)}bu(t){return new p0}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ps.provider={build:()=>new Ps};class iE extends Ps{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){et(this.persistence.referenceDelegate instanceof Cs,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jw(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new rp(r=>Cs.Vi(r,n),this.serializer)}}class Va{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eE.bind(null,this.syncEngine),await M0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new F0}()}createDatastore(t){const n=Zs(t.databaseInfo.databaseId),r=function(s){return new v0(s)}(t.databaseInfo);return function(s,a,u,l){return new A0(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,a,u){return new b0(r,i,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,n=>wh(this.syncEngine,n,0),function(){return ph.C()?new ph:new m0}())}createSyncEngine(t,n){return function(i,s,a,u,l,c,f){const p=new z0(i,s,a,u,l,c);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=G(i);B(Rn,"RemoteStore shutting down."),s.Ia.add(5),await di(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Va.provider={build:()=>new Va};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):Oe("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="FirestoreClient";class sE{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=du.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{B(an,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(B(an,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ve;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Du(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Zo(e,t){e.asyncQueue.verifyOperationInProgress(),B(an,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ip(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>{tn("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{tn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),e._offlineComponents=t}async function Th(e,t){e.asyncQueue.verifyOperationInProgress();const n=await oE(e);B(an,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>gh(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>gh(t.remoteStore,i)),e._onlineComponents=t}async function oE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){B(an,"Using user provided OfflineComponentProvider");try{await Zo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===D.FAILED_PRECONDITION||i.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;tn("Error using user provided cache. Falling back to memory cache: "+n),await Zo(e,new Ps)}}else B(an,"Using default OfflineComponentProvider"),await Zo(e,new iE(void 0));return e._offlineComponents}async function Rp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(B(an,"Using user provided OnlineComponentProvider"),await Th(e,e._uninitializedComponentsProvider._online)):(B(an,"Using default OnlineComponentProvider"),await Th(e,new Va))),e._onlineComponents}function aE(e){return Rp(e).then(t=>t.syncEngine)}async function Sp(e){const t=await Rp(e),n=t.eventManager;return n.onListen=H0.bind(null,t.syncEngine),n.onUnlisten=K0.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=G0.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Q0.bind(null,t.syncEngine),n}function uE(e,t,n={}){const r=new Ve;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,u,l,c){const f=new bp({next:m=>{f.Ou(),a.enqueueAndForget(()=>mp(s,p));const _=m.docs.has(u);!_&&m.fromCache?c.reject(new F(D.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?c.reject(new F(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new gp(vu(u.path),f,{includeMetadataChanges:!0,ka:!0});return pp(s,p)}(await Sp(e),e.asyncQueue,t,n,r)),r.promise}function lE(e,t,n={}){const r=new Ve;return e.asyncQueue.enqueueAndForget(async()=>function(s,a,u,l,c){const f=new bp({next:m=>{f.Ou(),a.enqueueAndForget(()=>mp(s,p)),m.fromCache&&l.source==="server"?c.reject(new F(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new gp(u,f,{includeMetadataChanges:!0,ka:!0});return pp(s,p)}(await Sp(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="firestore.googleapis.com",Ih=!0;class bh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new F(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xp,this.ssl=Ih}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Ih;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=np;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<qw)throw new F(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}bv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cp((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class no{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new F(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bh(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gv;switch(r.type){case"firstParty":return new wv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ah.get(n);r&&(B("ComponentProvider","Removing Datastore"),Ah.delete(n),r.terminate())}(this),Promise.resolve()}}function cE(e,t,n,r={}){var i;e=Me(e,no);const s=cu(t),a=e._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;s&&(j_(`https://${l}`),W_("Firestore",!0)),a.host!==xp&&a.host!==l&&tn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!_s(c,u)&&(e._setSettings(c),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Nt.MOCK_USER;else{f=z_(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new F(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Nt(m)}e._authCredentials=new _v(new fd(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new cn(this.firestore,t,this._query)}}class ft{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Je(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ft(this.firestore,t,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(ci(n,ft._jsonSchema))return new ft(t,r||null,new q(it.fromString(n.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:_t("string",ft._jsonSchemaVersion),referencePath:_t("string")};class Je extends cn{constructor(t,n,r){super(t,n,vu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ft(this.firestore,null,new q(t))}withConverter(t){return new Je(this.firestore,t,this._path)}}function Pp(e,t,...n){if(e=De(e),pd("collection","path",t),e instanceof no){const r=it.fromString(t,...n);return Fc(r),new Je(e,null,r)}{if(!(e instanceof ft||e instanceof Je))throw new F(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(it.fromString(t,...n));return Fc(r),new Je(e.firestore,null,r)}}function hE(e,t,...n){if(e=De(e),arguments.length===1&&(t=du.newId()),pd("doc","path",t),e instanceof no){const r=it.fromString(t,...n);return Lc(r),new ft(e,null,new q(r))}{if(!(e instanceof ft||e instanceof Je))throw new F(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(it.fromString(t,...n));return Lc(r),new ft(e.firestore,e instanceof Je?e.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="AsyncQueue";class Sh{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new op(this,"async_queue_retry"),this.oc=()=>{const r=Yo();r&&B(Rh,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=Yo();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=Yo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ve;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!ar(t))throw t;B(Rh,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const n=this._c.then(()=>(this.nc=!0,t().catch(r=>{throw this.tc=r,this.nc=!1,Oe("INTERNAL UNHANDLED ERROR: ",Ch(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const i=Nu.createAndSchedule(this,t,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&$(47125,{hc:Ch(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function Ch(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class mi extends no{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new Sh,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Sh(t),this._firestoreClient=void 0,await t}}}function fE(e,t){const n=typeof e=="object"?e:rv(),r=typeof e=="string"?e:Es,i=Yy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=q_("firestore");s&&cE(i,...s)}return i}function Lu(e){if(e._terminated)throw new F(D.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dE(e),e._firestoreClient}function dE(e){var t,n,r;const i=e._freezeSettings(),s=function(u,l,c,f){return new Lv(u,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Cp(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new sE(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(u){const l=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Jt(Rt.fromBase64String(t))}catch(n){throw new F(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Jt(Rt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Jt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ci(t,Jt._jsonSchema))return Jt.fromBase64String(t.bytes)}}Jt._jsonSchemaVersion="firestore/bytes/1.0",Jt._jsonSchema={type:_t("string",Jt._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new F(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new F(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new F(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return K(this._lat,t._lat)||K(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ge._jsonSchemaVersion}}static fromJSON(t){if(ci(t,ge._jsonSchema))return new ge(t.latitude,t.longitude)}}ge._jsonSchemaVersion="firestore/geoPoint/1.0",ge._jsonSchema={type:_t("string",ge._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:_e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ci(t,_e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new _e(t.vectorValues);throw new F(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_e._jsonSchemaVersion="firestore/vectorValue/1.0",_e._jsonSchema={type:_t("string",_e._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=/^__.*__$/;class mE{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new ln(t,this.data,this.fieldMask,n,this.fieldTransforms):new hi(t,this.data,n,this.fieldTransforms)}}class Vp{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new ln(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Np(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ec:e})}}class Uu{constructor(t,n,r,i,s,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Uu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.fc(t),i}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Vs(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(Np(this.Ec)&&pE.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class gE{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Zs(t)}Dc(t,n,r,i=!1){return new Uu({Ec:t,methodName:n,bc:r,path:bt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(e){const t=e._freezeSettings(),n=Zs(e._databaseId);return new gE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _E(e,t,n,r,i,s={}){const a=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);qu("Data must be an object, but it was:",a,r);const u=Dp(r,a);let l,c;if(s.merge)l=new Kt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const m=Na(t,p,n);if(!a.contains(m))throw new F(D.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Op(f,m)||f.push(m)}l=new Kt(f),c=a.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=a.fieldTransforms;return new mE(new $t(u),l,c)}class io extends Fu{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof io}}function yE(e,t,n,r){const i=e.Dc(1,t,n);qu("Data must be an object, but it was:",i,r);const s=[],a=$t.empty();un(r,(l,c)=>{const f=$u(t,l,n);c=De(c);const p=i.gc(f);if(c instanceof io)s.push(f);else{const m=gi(c,p);m!=null&&(s.push(f),a.set(f,m))}});const u=new Kt(s);return new Vp(a,u,i.fieldTransforms)}function vE(e,t,n,r,i,s){const a=e.Dc(1,t,n),u=[Na(t,r,n)],l=[i];if(s.length%2!=0)throw new F(D.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)u.push(Na(t,s[m])),l.push(s[m+1]);const c=[],f=$t.empty();for(let m=u.length-1;m>=0;--m)if(!Op(c,u[m])){const _=u[m];let v=l[m];v=De(v);const A=a.gc(_);if(v instanceof io)c.push(_);else{const E=gi(v,A);E!=null&&(c.push(_),f.set(_,E))}}const p=new Kt(c);return new Vp(f,p,a.fieldTransforms)}function wE(e,t,n,r=!1){return gi(n,e.Dc(r?4:3,t))}function gi(e,t){if(kp(e=De(e)))return qu("Unsupported field value:",t,e),Dp(e,t);if(e instanceof Fu)return function(r,i){if(!Np(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const u of r){let l=gi(u,i.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ow(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ot.fromDate(r);return{timestampValue:Ss(i.serializer,s)}}if(r instanceof ot){const s=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ss(i.serializer,s)}}if(r instanceof ge)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jt)return{bytesValue:Qd(i.serializer,r._byteString)};if(r instanceof ft){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Au(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _e)return function(a,u){return{mapValue:{fields:{[Ad]:{stringValue:Id},[Ts]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw u.wc("VectorValues must only contain numeric values.");return wu(u.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${zs(r)}`)}(e,t)}function Dp(e,t){const n={};return _d(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):un(e,(r,i)=>{const s=gi(i,t.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function kp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ot||e instanceof ge||e instanceof Jt||e instanceof ft||e instanceof Fu||e instanceof _e)}function qu(e,t,n){if(!kp(n)||!md(n)){const r=zs(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Na(e,t,n){if((t=De(t))instanceof ro)return t._internalPath;if(typeof t=="string")return $u(e,t);throw Vs("Field path arguments must be of type string or ",e,!1,void 0,n)}const EE=new RegExp("[~\\*/\\[\\]]");function $u(e,t,n){if(t.search(EE)>=0)throw Vs(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ro(...t.split("."))._internalPath}catch{throw Vs(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Vs(e,t,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${t}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new F(D.INVALID_ARGUMENT,u+e+l)}function Op(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new TE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(ju("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TE extends Mp{data(){return super.data()}}function ju(e,t){return typeof t=="string"?$u(e,t):t instanceof ro?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new F(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zu{}class Hu extends zu{}function IE(e,t,...n){let r=[];t instanceof zu&&r.push(t),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof Wu).length,u=s.filter(l=>l instanceof Gu).length;if(a>1||a>0&&u>0)throw new F(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Gu extends Hu{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Gu(t,n,r)}_apply(t){const n=this._parse(t);return Lp(t._query,n),new cn(t.firestore,t.converter,Ta(t._query,n))}_parse(t){const n=Bu(t.firestore);return function(s,a,u,l,c,f,p){let m;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new F(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ph(p,f);const v=[];for(const A of p)v.push(xh(l,s,A));m={arrayValue:{values:v}}}else m=xh(l,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ph(p,f),m=wE(u,a,p,f==="in"||f==="not-in");return gt.create(c,f,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Wu extends zu{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Wu(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ie.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let a=i;const u=s.getFlattenedFilters();for(const l of u)Lp(a,l),a=Ta(a,l)}(t._query,n),new cn(t.firestore,t.converter,Ta(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ku extends Hu{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ku(t,n)}_apply(t){const n=function(i,s,a){if(i.startAt!==null)throw new F(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ti(s,a)}(t._query,this._field,this._direction);return new cn(t.firestore,t.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new ur(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function bE(e,t="asc"){const n=t,r=ju("orderBy",e);return Ku._create(r,n)}class Qu extends Hu{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new Qu(t,n,r)}_apply(t){return new cn(t.firestore,t.converter,Is(t._query,this._limit,this._limitType))}}function RE(e){return Rv("limit",e),Qu._create("limit",e,"F")}function xh(e,t,n){if(typeof(n=De(n))=="string"){if(n==="")throw new F(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nd(t)&&n.indexOf("/")!==-1)throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(it.fromString(n));if(!q.isDocumentKey(r))throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gc(e,new q(r))}if(n instanceof ft)return Gc(e,n._key);throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zs(n)}.`)}function Ph(e,t){if(!Array.isArray(e)||e.length===0)throw new F(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Lp(e,t){const n=function(i,s){for(const a of i)for(const u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new F(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new F(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class SE{convertValue(t,n="none"){switch(sn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ht(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(rn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw $(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return un(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n[Ts].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ht(a.doubleValue));return new _e(s)}convertGeoPoint(t){return new ge(ht(t.latitude),ht(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ws(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jr(t));default:return null}}convertTimestamp(t){const n=nn(t);return new ot(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=it.fromString(t);et(ep(r),9688,{name:t});const i=new Yr(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||Oe(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class kr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Tn extends Mp{constructor(t,n,r,i,s,a){super(t,n,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(ju("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Tn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Tn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Tn._jsonSchema={type:_t("string",Tn._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class ns extends Tn{data(t={}){return super.data(t)}}class Hn{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new kr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new ns(this._firestore,this._userDataWriter,r.key,r,new kr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const l=new ns(i._firestore,i._userDataWriter,u.doc.key,u.doc,new kr(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const l=new ns(i._firestore,i._userDataWriter,u.doc.key,u.doc,new kr(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return u.type!==0&&(c=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),f=a.indexOf(u.doc.key)),{type:xE(u.type),doc:l,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Hn._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=du.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function xE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(e){e=Me(e,ft);const t=Me(e.firestore,mi);return uE(Lu(t),e._key).then(n=>DE(t,e,n))}Hn._jsonSchemaVersion="firestore/querySnapshot/1.0",Hn._jsonSchema={type:_t("string",Hn._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class Fp extends SE{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jt(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function Up(e){e=Me(e,cn);const t=Me(e.firestore,mi),n=Lu(t),r=new Fp(t);return AE(e._query),lE(n,e._query).then(i=>new Hn(t,r,e,i))}function VE(e,t,n){e=Me(e,ft);const r=Me(e.firestore,mi),i=CE(e.converter,t);return Bp(r,[_E(Bu(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,pe.none())])}function NE(e,t,n,...r){e=Me(e,ft);const i=Me(e.firestore,mi),s=Bu(i);let a;return a=typeof(t=De(t))=="string"||t instanceof ro?vE(s,"updateDoc",e._key,t,n,r):yE(s,"updateDoc",e._key,t),Bp(i,[a.toMutation(e._key,pe.exists(!0))])}function Bp(e,t){return function(r,i){const s=new Ve;return r.asyncQueue.enqueueAndForget(async()=>X0(await aE(r),i,s)),s.promise}(Lu(e),t)}function DE(e,t,n){const r=n.docs.get(t._key),i=new Fp(e);return new Tn(e,i,t._key,r,new kr(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){sr=i})(nv),vs(new Kr("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new mi(new yv(r.getProvider("auth-internal")),new Ev(a,r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new F(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yr(c.options.projectId,f)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),jn(Nc,Dc,t),jn(Nc,Dc,"esm2017")})();const kE={apiKey:"AIzaSyAZsdXZU6WbM33SaKP5PoYm7G0V2ABYUSU",authDomain:"great-wave-everywhere.firebaseapp.com",projectId:"great-wave-everywhere",storageBucket:"great-wave-everywhere.firebasestorage.app",messagingSenderId:"636756607685",appId:"1:636756607685:web:2199075bc12821f89466ac",measurementId:"G-XRVYGKFWJ8"},OE=nd(kE),Xu=fE(OE);async function ME(e){const t=hE(Xu,"words",e.toLowerCase()),n=await PE(t);n.exists()?await NE(t,{count:n.data().count+1}):await VE(t,{count:1})}async function Vh(){return(await Up(Pp(Xu,"words"))).docs.map(t=>({id:t.id,count:t.data().count}))}async function Nh(e=5){const t=IE(Pp(Xu,"words"),bE("count","desc"),RE(e));return(await Up(t)).docs.map(r=>({id:r.id,count:r.data().count}))}function qp(e,t){return function(){return e.apply(t,arguments)}}const{toString:LE}=Object.prototype,{getPrototypeOf:Ju}=Object,{iterator:so,toStringTag:$p}=Symbol,oo=(e=>t=>{const n=LE.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),oe=e=>(e=e.toLowerCase(),t=>oo(t)===e),ao=e=>t=>typeof t===e,{isArray:cr}=Array,ri=ao("undefined");function FE(e){return e!==null&&!ri(e)&&e.constructor!==null&&!ri(e.constructor)&&zt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jp=oe("ArrayBuffer");function UE(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&jp(e.buffer),t}const BE=ao("string"),zt=ao("function"),zp=ao("number"),uo=e=>e!==null&&typeof e=="object",qE=e=>e===!0||e===!1,rs=e=>{if(oo(e)!=="object")return!1;const t=Ju(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!($p in e)&&!(so in e)},$E=oe("Date"),jE=oe("File"),zE=oe("Blob"),HE=oe("FileList"),GE=e=>uo(e)&&zt(e.pipe),WE=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||zt(e.append)&&((t=oo(e))==="formdata"||t==="object"&&zt(e.toString)&&e.toString()==="[object FormData]"))},KE=oe("URLSearchParams"),[QE,XE,JE,YE]=["ReadableStream","Request","Response","Headers"].map(oe),ZE=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _i(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),cr(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let u;for(r=0;r<a;r++)u=s[r],t.call(null,e[u],u,e)}}function Hp(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const vn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gp=e=>!ri(e)&&e!==vn;function Da(){const{caseless:e}=Gp(this)&&this||{},t={},n=(r,i)=>{const s=e&&Hp(t,i)||i;rs(t[s])&&rs(r)?t[s]=Da(t[s],r):rs(r)?t[s]=Da({},r):cr(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&_i(arguments[r],n);return t}const tT=(e,t,n,{allOwnKeys:r}={})=>(_i(t,(i,s)=>{n&&zt(i)?e[s]=qp(i,n):e[s]=i},{allOwnKeys:r}),e),eT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),nT=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},rT=(e,t,n,r)=>{let i,s,a;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],(!r||r(a,e,t))&&!u[a]&&(t[a]=e[a],u[a]=!0);e=n!==!1&&Ju(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},iT=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},sT=e=>{if(!e)return null;if(cr(e))return e;let t=e.length;if(!zp(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},oT=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ju(Uint8Array)),aT=(e,t)=>{const r=(e&&e[so]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},uT=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},lT=oe("HTMLFormElement"),cT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Dh=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),hT=oe("RegExp"),Wp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};_i(n,(i,s)=>{let a;(a=t(i,s,e))!==!1&&(r[s]=a||i)}),Object.defineProperties(e,r)},fT=e=>{Wp(e,(t,n)=>{if(zt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(zt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dT=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return cr(e)?r(e):r(String(e).split(t)),n},pT=()=>{},mT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function gT(e){return!!(e&&zt(e.append)&&e[$p]==="FormData"&&e[so])}const _T=e=>{const t=new Array(10),n=(r,i)=>{if(uo(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=cr(r)?[]:{};return _i(r,(a,u)=>{const l=n(a,i+1);!ri(l)&&(s[u]=l)}),t[i]=void 0,s}}return r};return n(e,0)},yT=oe("AsyncFunction"),vT=e=>e&&(uo(e)||zt(e))&&zt(e.then)&&zt(e.catch),Kp=((e,t)=>e?setImmediate:t?((n,r)=>(vn.addEventListener("message",({source:i,data:s})=>{i===vn&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),vn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",zt(vn.postMessage)),wT=typeof queueMicrotask<"u"?queueMicrotask.bind(vn):typeof process<"u"&&process.nextTick||Kp,ET=e=>e!=null&&zt(e[so]),P={isArray:cr,isArrayBuffer:jp,isBuffer:FE,isFormData:WE,isArrayBufferView:UE,isString:BE,isNumber:zp,isBoolean:qE,isObject:uo,isPlainObject:rs,isReadableStream:QE,isRequest:XE,isResponse:JE,isHeaders:YE,isUndefined:ri,isDate:$E,isFile:jE,isBlob:zE,isRegExp:hT,isFunction:zt,isStream:GE,isURLSearchParams:KE,isTypedArray:oT,isFileList:HE,forEach:_i,merge:Da,extend:tT,trim:ZE,stripBOM:eT,inherits:nT,toFlatObject:rT,kindOf:oo,kindOfTest:oe,endsWith:iT,toArray:sT,forEachEntry:aT,matchAll:uT,isHTMLForm:lT,hasOwnProperty:Dh,hasOwnProp:Dh,reduceDescriptors:Wp,freezeMethods:fT,toObjectSet:dT,toCamelCase:cT,noop:pT,toFiniteNumber:mT,findKey:Hp,global:vn,isContextDefined:Gp,isSpecCompliantForm:gT,toJSONObject:_T,isAsyncFn:yT,isThenable:vT,setImmediate:Kp,asap:wT,isIterable:ET};function W(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}P.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.status}}});const Qp=W.prototype,Xp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Xp[e]={value:e}});Object.defineProperties(W,Xp);Object.defineProperty(Qp,"isAxiosError",{value:!0});W.from=(e,t,n,r,i,s)=>{const a=Object.create(Qp);return P.toFlatObject(e,a,function(l){return l!==Error.prototype},u=>u!=="isAxiosError"),W.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const TT=null;function ka(e){return P.isPlainObject(e)||P.isArray(e)}function Jp(e){return P.endsWith(e,"[]")?e.slice(0,-2):e}function kh(e,t,n){return e?e.concat(t).map(function(i,s){return i=Jp(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function AT(e){return P.isArray(e)&&!e.some(ka)}const IT=P.toFlatObject(P,{},null,function(t){return/^is[A-Z]/.test(t)});function lo(e,t,n){if(!P.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,E){return!P.isUndefined(E[A])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(t);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(P.isDate(v))return v.toISOString();if(P.isBoolean(v))return v.toString();if(!l&&P.isBlob(v))throw new W("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(v)||P.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,A,E){let x=v;if(v&&!E&&typeof v=="object"){if(P.endsWith(A,"{}"))A=r?A:A.slice(0,-2),v=JSON.stringify(v);else if(P.isArray(v)&&AT(v)||(P.isFileList(v)||P.endsWith(A,"[]"))&&(x=P.toArray(v)))return A=Jp(A),x.forEach(function(M,k){!(P.isUndefined(M)||M===null)&&t.append(a===!0?kh([A],k,s):a===null?A:A+"[]",c(M))}),!1}return ka(v)?!0:(t.append(kh(E,A,s),c(v)),!1)}const p=[],m=Object.assign(IT,{defaultVisitor:f,convertValue:c,isVisitable:ka});function _(v,A){if(!P.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+A.join("."));p.push(v),P.forEach(v,function(x,N){(!(P.isUndefined(x)||x===null)&&i.call(t,x,P.isString(N)?N.trim():N,A,m))===!0&&_(x,A?A.concat(N):[N])}),p.pop()}}if(!P.isObject(e))throw new TypeError("data must be an object");return _(e),t}function Oh(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Yu(e,t){this._pairs=[],e&&lo(e,this,t)}const Yp=Yu.prototype;Yp.append=function(t,n){this._pairs.push([t,n])};Yp.toString=function(t){const n=t?function(r){return t.call(this,r,Oh)}:Oh;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function bT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zp(e,t,n){if(!t)return e;const r=n&&n.encode||bT;P.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=P.isURLSearchParams(t)?t.toString():new Yu(t,n).toString(r),s){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Mh{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){P.forEach(this.handlers,function(r){r!==null&&t(r)})}}const tm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RT=typeof URLSearchParams<"u"?URLSearchParams:Yu,ST=typeof FormData<"u"?FormData:null,CT=typeof Blob<"u"?Blob:null,xT={isBrowser:!0,classes:{URLSearchParams:RT,FormData:ST,Blob:CT},protocols:["http","https","file","blob","url","data"]},Zu=typeof window<"u"&&typeof document<"u",Oa=typeof navigator=="object"&&navigator||void 0,PT=Zu&&(!Oa||["ReactNative","NativeScript","NS"].indexOf(Oa.product)<0),VT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",NT=Zu&&window.location.href||"http://localhost",DT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zu,hasStandardBrowserEnv:PT,hasStandardBrowserWebWorkerEnv:VT,navigator:Oa,origin:NT},Symbol.toStringTag,{value:"Module"})),kt={...DT,...xT};function kT(e,t){return lo(e,new kt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return kt.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function OT(e){return P.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function MT(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function em(e){function t(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),l=s>=n.length;return a=!a&&P.isArray(i)?i.length:a,l?(P.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!u):((!i[a]||!P.isObject(i[a]))&&(i[a]=[]),t(n,r,i[a],s)&&P.isArray(i[a])&&(i[a]=MT(i[a])),!u)}if(P.isFormData(e)&&P.isFunction(e.entries)){const n={};return P.forEachEntry(e,(r,i)=>{t(OT(r),i,n,0)}),n}return null}function LT(e,t,n){if(P.isString(e))try{return(t||JSON.parse)(e),P.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const yi={transitional:tm,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=P.isObject(t);if(s&&P.isHTMLForm(t)&&(t=new FormData(t)),P.isFormData(t))return i?JSON.stringify(em(t)):t;if(P.isArrayBuffer(t)||P.isBuffer(t)||P.isStream(t)||P.isFile(t)||P.isBlob(t)||P.isReadableStream(t))return t;if(P.isArrayBufferView(t))return t.buffer;if(P.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return kT(t,this.formSerializer).toString();if((u=P.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return lo(u?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),LT(t)):t}],transformResponse:[function(t){const n=this.transitional||yi.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(P.isResponse(t)||P.isReadableStream(t))return t;if(t&&P.isString(t)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(u){if(a)throw u.name==="SyntaxError"?W.from(u,W.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kt.classes.FormData,Blob:kt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],e=>{yi.headers[e]={}});const FT=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UT=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||t[n]&&FT[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Lh=Symbol("internals");function Rr(e){return e&&String(e).trim().toLowerCase()}function is(e){return e===!1||e==null?e:P.isArray(e)?e.map(is):String(e)}function BT(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const qT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ta(e,t,n,r,i){if(P.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!P.isString(t)){if(P.isString(r))return t.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(t)}}function $T(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function jT(e,t){const n=P.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,a){return this[r].call(this,t,i,s,a)},configurable:!0})})}let Ht=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(u,l,c){const f=Rr(l);if(!f)throw new Error("header name must be a non-empty string");const p=P.findKey(i,f);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=is(u))}const a=(u,l)=>P.forEach(u,(c,f)=>s(c,f,l));if(P.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(P.isString(t)&&(t=t.trim())&&!qT(t))a(UT(t),n);else if(P.isObject(t)&&P.isIterable(t)){let u={},l,c;for(const f of t){if(!P.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[c=f[0]]=(l=u[c])?P.isArray(l)?[...l,f[1]]:[l,f[1]]:f[1]}a(u,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=Rr(t),t){const r=P.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return BT(i);if(P.isFunction(n))return n.call(this,i,r);if(P.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Rr(t),t){const r=P.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||ta(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(a){if(a=Rr(a),a){const u=P.findKey(r,a);u&&(!n||ta(r,r[u],u,n))&&(delete r[u],i=!0)}}return P.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||ta(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return P.forEach(this,(i,s)=>{const a=P.findKey(r,s);if(a){n[a]=is(i),delete n[s];return}const u=t?$T(s):String(s).trim();u!==s&&delete n[s],n[u]=is(i),r[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return P.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Lh]=this[Lh]={accessors:{}}).accessors,i=this.prototype;function s(a){const u=Rr(a);r[u]||(jT(i,a),r[u]=!0)}return P.isArray(t)?t.forEach(s):s(t),this}};Ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(Ht.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});P.freezeMethods(Ht);function ea(e,t){const n=this||yi,r=t||n,i=Ht.from(r.headers);let s=r.data;return P.forEach(e,function(u){s=u.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function nm(e){return!!(e&&e.__CANCEL__)}function hr(e,t,n){W.call(this,e??"canceled",W.ERR_CANCELED,t,n),this.name="CanceledError"}P.inherits(hr,W,{__CANCEL__:!0});function rm(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new W("Request failed with status code "+n.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function zT(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function HT(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,a;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),f=r[s];a||(a=c),n[i]=l,r[i]=c;let p=s,m=0;for(;p!==i;)m+=n[p++],p=p%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-a<t)return;const _=f&&c-f;return _?Math.round(m*1e3/_):void 0}}function GT(e,t){let n=0,r=1e3/t,i,s;const a=(c,f=Date.now())=>{n=f,i=null,s&&(clearTimeout(s),s=null),e.apply(null,c)};return[(...c)=>{const f=Date.now(),p=f-n;p>=r?a(c,f):(i=c,s||(s=setTimeout(()=>{s=null,a(i)},r-p)))},()=>i&&a(i)]}const Ns=(e,t,n=3)=>{let r=0;const i=HT(50,250);return GT(s=>{const a=s.loaded,u=s.lengthComputable?s.total:void 0,l=a-r,c=i(l),f=a<=u;r=a;const p={loaded:a,total:u,progress:u?a/u:void 0,bytes:l,rate:c||void 0,estimated:c&&u&&f?(u-a)/c:void 0,event:s,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(p)},n)},Fh=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Uh=e=>(...t)=>P.asap(()=>e(...t)),WT=kt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,kt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(kt.origin),kt.navigator&&/(msie|trident)/i.test(kt.navigator.userAgent)):()=>!0,KT=kt.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];P.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),P.isString(r)&&a.push("path="+r),P.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QT(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function XT(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function im(e,t,n){let r=!QT(t);return e&&(r||n==!1)?XT(e,t):t}const Bh=e=>e instanceof Ht?{...e}:e;function Sn(e,t){t=t||{};const n={};function r(c,f,p,m){return P.isPlainObject(c)&&P.isPlainObject(f)?P.merge.call({caseless:m},c,f):P.isPlainObject(f)?P.merge({},f):P.isArray(f)?f.slice():f}function i(c,f,p,m){if(P.isUndefined(f)){if(!P.isUndefined(c))return r(void 0,c,p,m)}else return r(c,f,p,m)}function s(c,f){if(!P.isUndefined(f))return r(void 0,f)}function a(c,f){if(P.isUndefined(f)){if(!P.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function u(c,f,p){if(p in t)return r(c,f);if(p in e)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(c,f,p)=>i(Bh(c),Bh(f),p,!0)};return P.forEach(Object.keys(Object.assign({},e,t)),function(f){const p=l[f]||i,m=p(e[f],t[f],f);P.isUndefined(m)&&p!==u||(n[f]=m)}),n}const sm=e=>{const t=Sn({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:u}=t;t.headers=a=Ht.from(a),t.url=Zp(im(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let l;if(P.isFormData(n)){if(kt.hasStandardBrowserEnv||kt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...f]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...f].join("; "))}}if(kt.hasStandardBrowserEnv&&(r&&P.isFunction(r)&&(r=r(t)),r||r!==!1&&WT(t.url))){const c=i&&s&&KT.read(s);c&&a.set(i,c)}return t},JT=typeof XMLHttpRequest<"u",YT=JT&&function(e){return new Promise(function(n,r){const i=sm(e);let s=i.data;const a=Ht.from(i.headers).normalize();let{responseType:u,onUploadProgress:l,onDownloadProgress:c}=i,f,p,m,_,v;function A(){_&&_(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let E=new XMLHttpRequest;E.open(i.method.toUpperCase(),i.url,!0),E.timeout=i.timeout;function x(){if(!E)return;const M=Ht.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),U={data:!u||u==="text"||u==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:M,config:e,request:E};rm(function(I){n(I),A()},function(I){r(I),A()},U),E=null}"onloadend"in E?E.onloadend=x:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(x)},E.onabort=function(){E&&(r(new W("Request aborted",W.ECONNABORTED,e,E)),E=null)},E.onerror=function(){r(new W("Network Error",W.ERR_NETWORK,e,E)),E=null},E.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const U=i.transitional||tm;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),r(new W(k,U.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,e,E)),E=null},s===void 0&&a.setContentType(null),"setRequestHeader"in E&&P.forEach(a.toJSON(),function(k,U){E.setRequestHeader(U,k)}),P.isUndefined(i.withCredentials)||(E.withCredentials=!!i.withCredentials),u&&u!=="json"&&(E.responseType=i.responseType),c&&([m,v]=Ns(c,!0),E.addEventListener("progress",m)),l&&E.upload&&([p,_]=Ns(l),E.upload.addEventListener("progress",p),E.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(f=M=>{E&&(r(!M||M.type?new hr(null,e,E):M),E.abort(),E=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const N=zT(i.url);if(N&&kt.protocols.indexOf(N)===-1){r(new W("Unsupported protocol "+N+":",W.ERR_BAD_REQUEST,e));return}E.send(s||null)})},ZT=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,u();const f=c instanceof Error?c:this.reason;r.abort(f instanceof W?f:new hr(f instanceof Error?f.message:f))}};let a=t&&setTimeout(()=>{a=null,s(new W(`timeout ${t} of ms exceeded`,W.ETIMEDOUT))},t);const u=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>P.asap(u),l}},tA=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},eA=async function*(e,t){for await(const n of nA(e))yield*tA(n,t)},nA=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},qh=(e,t,n,r)=>{const i=eA(e,t);let s=0,a,u=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:f}=await i.next();if(c){u(),l.close();return}let p=f.byteLength;if(n){let m=s+=p;n(m)}l.enqueue(new Uint8Array(f))}catch(c){throw u(c),c}},cancel(l){return u(l),i.return()}},{highWaterMark:2})},co=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",om=co&&typeof ReadableStream=="function",rA=co&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),am=(e,...t)=>{try{return!!e(...t)}catch{return!1}},iA=om&&am(()=>{let e=!1;const t=new Request(kt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),$h=64*1024,Ma=om&&am(()=>P.isReadableStream(new Response("").body)),Ds={stream:Ma&&(e=>e.body)};co&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ds[t]&&(Ds[t]=P.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new W(`Response type '${t}' is not supported`,W.ERR_NOT_SUPPORT,r)})})})(new Response);const sA=async e=>{if(e==null)return 0;if(P.isBlob(e))return e.size;if(P.isSpecCompliantForm(e))return(await new Request(kt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(P.isArrayBufferView(e)||P.isArrayBuffer(e))return e.byteLength;if(P.isURLSearchParams(e)&&(e=e+""),P.isString(e))return(await rA(e)).byteLength},oA=async(e,t)=>{const n=P.toFiniteNumber(e.getContentLength());return n??sA(t)},aA=co&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:u,onUploadProgress:l,responseType:c,headers:f,withCredentials:p="same-origin",fetchOptions:m}=sm(e);c=c?(c+"").toLowerCase():"text";let _=ZT([i,s&&s.toAbortSignal()],a),v;const A=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let E;try{if(l&&iA&&n!=="get"&&n!=="head"&&(E=await oA(f,r))!==0){let U=new Request(t,{method:"POST",body:r,duplex:"half"}),H;if(P.isFormData(r)&&(H=U.headers.get("content-type"))&&f.setContentType(H),U.body){const[I,y]=Fh(E,Ns(Uh(l)));r=qh(U.body,$h,I,y)}}P.isString(p)||(p=p?"include":"omit");const x="credentials"in Request.prototype;v=new Request(t,{...m,signal:_,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:x?p:void 0});let N=await fetch(v,m);const M=Ma&&(c==="stream"||c==="response");if(Ma&&(u||M&&A)){const U={};["status","statusText","headers"].forEach(T=>{U[T]=N[T]});const H=P.toFiniteNumber(N.headers.get("content-length")),[I,y]=u&&Fh(H,Ns(Uh(u),!0))||[];N=new Response(qh(N.body,$h,I,()=>{y&&y(),A&&A()}),U)}c=c||"text";let k=await Ds[P.findKey(Ds,c)||"text"](N,e);return!M&&A&&A(),await new Promise((U,H)=>{rm(U,H,{data:k,headers:Ht.from(N.headers),status:N.status,statusText:N.statusText,config:e,request:v})})}catch(x){throw A&&A(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new W("Network Error",W.ERR_NETWORK,e,v),{cause:x.cause||x}):W.from(x,x&&x.code,e,v)}}),La={http:TT,xhr:YT,fetch:aA};P.forEach(La,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jh=e=>`- ${e}`,uA=e=>P.isFunction(e)||e===null||e===!1,um={getAdapter:e=>{e=P.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let a;if(r=n,!uA(n)&&(r=La[(a=String(n)).toLowerCase()],r===void 0))throw new W(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,l])=>`adapter ${u} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=t?s.length>1?`since :
`+s.map(jh).join(`
`):" "+jh(s[0]):"as no adapter specified";throw new W("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:La};function na(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hr(null,e)}function zh(e){return na(e),e.headers=Ht.from(e.headers),e.data=ea.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),um.getAdapter(e.adapter||yi.adapter)(e).then(function(r){return na(e),r.data=ea.call(e,e.transformResponse,r),r.headers=Ht.from(r.headers),r},function(r){return nm(r)||(na(e),r&&r.response&&(r.response.data=ea.call(e,e.transformResponse,r.response),r.response.headers=Ht.from(r.response.headers))),Promise.reject(r)})}const lm="1.10.0",ho={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ho[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Hh={};ho.transitional=function(t,n,r){function i(s,a){return"[Axios v"+lm+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,u)=>{if(t===!1)throw new W(i(a," has been removed"+(n?" in "+n:"")),W.ERR_DEPRECATED);return n&&!Hh[a]&&(Hh[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,a,u):!0}};ho.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function lA(e,t,n){if(typeof e!="object")throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const u=e[s],l=u===void 0||a(u,s,e);if(l!==!0)throw new W("option "+s+" must be "+l,W.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new W("Unknown option "+s,W.ERR_BAD_OPTION)}}const ss={assertOptions:lA,validators:ho},ce=ss.validators;let An=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Mh,response:new Mh}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Sn(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ss.assertOptions(r,{silentJSONParsing:ce.transitional(ce.boolean),forcedJSONParsing:ce.transitional(ce.boolean),clarifyTimeoutError:ce.transitional(ce.boolean)},!1),i!=null&&(P.isFunction(i)?n.paramsSerializer={serialize:i}:ss.assertOptions(i,{encode:ce.function,serialize:ce.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ss.assertOptions(n,{baseUrl:ce.spelling("baseURL"),withXsrfToken:ce.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&P.merge(s.common,s[n.method]);s&&P.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),n.headers=Ht.concat(a,s);const u=[];let l=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(l=l&&A.synchronous,u.unshift(A.fulfilled,A.rejected))});const c=[];this.interceptors.response.forEach(function(A){c.push(A.fulfilled,A.rejected)});let f,p=0,m;if(!l){const v=[zh.bind(this),void 0];for(v.unshift.apply(v,u),v.push.apply(v,c),m=v.length,f=Promise.resolve(n);p<m;)f=f.then(v[p++],v[p++]);return f}m=u.length;let _=n;for(p=0;p<m;){const v=u[p++],A=u[p++];try{_=v(_)}catch(E){A.call(this,E);break}}try{f=zh.call(this,_)}catch(v){return Promise.reject(v)}for(p=0,m=c.length;p<m;)f=f.then(c[p++],c[p++]);return f}getUri(t){t=Sn(this.defaults,t);const n=im(t.baseURL,t.url,t.allowAbsoluteUrls);return Zp(n,t.params,t.paramsSerializer)}};P.forEach(["delete","get","head","options"],function(t){An.prototype[t]=function(n,r){return this.request(Sn(r||{},{method:t,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(t){function n(r){return function(s,a,u){return this.request(Sn(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}An.prototype[t]=n(),An.prototype[t+"Form"]=n(!0)});let cA=class cm{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(u=>{r.subscribe(u),s=u}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},t(function(s,a,u){r.reason||(r.reason=new hr(s,a,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new cm(function(i){t=i}),cancel:t}}};function hA(e){return function(n){return e.apply(null,n)}}function fA(e){return P.isObject(e)&&e.isAxiosError===!0}const Fa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fa).forEach(([e,t])=>{Fa[t]=e});function hm(e){const t=new An(e),n=qp(An.prototype.request,t);return P.extend(n,An.prototype,t,{allOwnKeys:!0}),P.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return hm(Sn(e,i))},n}const dt=hm(yi);dt.Axios=An;dt.CanceledError=hr;dt.CancelToken=cA;dt.isCancel=nm;dt.VERSION=lm;dt.toFormData=lo;dt.AxiosError=W;dt.Cancel=dt.CanceledError;dt.all=function(t){return Promise.all(t)};dt.spread=hA;dt.isAxiosError=fA;dt.mergeConfig=Sn;dt.AxiosHeaders=Ht;dt.formToJSON=e=>em(P.isHTMLForm(e)?new FormData(e):e);dt.getAdapter=um.getAdapter;dt.HttpStatusCode=Fa;dt.default=dt;const{Axios:yR,AxiosError:vR,CanceledError:wR,isCancel:ER,CancelToken:TR,VERSION:AR,all:IR,Cancel:bR,isAxiosError:RR,spread:SR,toFormData:CR,AxiosHeaders:xR,HttpStatusCode:PR,formToJSON:VR,getAdapter:NR,mergeConfig:DR}=dt;var dA={value:()=>{}};function tl(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new os(n)}function os(e){this._=e}function pA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}os.prototype=tl.prototype={constructor:os,on:function(e,t){var n=this._,r=pA(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=mA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=Gh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Gh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new os(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function mA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Gh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=dA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ua="http://www.w3.org/1999/xhtml";const Wh={svg:"http://www.w3.org/2000/svg",xhtml:Ua,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Wh.hasOwnProperty(t)?{space:Wh[t],local:e}:e}function gA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ua&&t.documentElement.namespaceURI===Ua?t.createElement(e):t.createElementNS(n,e)}}function _A(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fm(e){var t=fo(e);return(t.local?_A:gA)(t)}function yA(){}function el(e){return e==null?yA:function(){return this.querySelector(e)}}function vA(e){typeof e!="function"&&(e=el(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,u=r[i]=new Array(a),l,c,f=0;f<a;++f)(l=s[f])&&(c=e.call(l,l.__data__,f,s))&&("__data__"in l&&(c.__data__=l.__data__),u[f]=c);return new se(r,this._parents)}function wA(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function EA(){return[]}function dm(e){return e==null?EA:function(){return this.querySelectorAll(e)}}function TA(e){return function(){return wA(e.apply(this,arguments))}}function AA(e){typeof e=="function"?e=TA(e):e=dm(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],u=a.length,l,c=0;c<u;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new se(r,i)}function pm(e){return function(){return this.matches(e)}}function mm(e){return function(t){return t.matches(e)}}var IA=Array.prototype.find;function bA(e){return function(){return IA.call(this.children,e)}}function RA(){return this.firstElementChild}function SA(e){return this.select(e==null?RA:bA(typeof e=="function"?e:mm(e)))}var CA=Array.prototype.filter;function xA(){return Array.from(this.children)}function PA(e){return function(){return CA.call(this.children,e)}}function VA(e){return this.selectAll(e==null?xA:PA(typeof e=="function"?e:mm(e)))}function NA(e){typeof e!="function"&&(e=pm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,u=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&u.push(l);return new se(r,this._parents)}function gm(e){return new Array(e.length)}function DA(){return new se(this._enter||this._groups.map(gm),this._parents)}function ks(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ks.prototype={constructor:ks,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function kA(e){return function(){return e}}function OA(e,t,n,r,i,s){for(var a=0,u,l=t.length,c=s.length;a<c;++a)(u=t[a])?(u.__data__=s[a],r[a]=u):n[a]=new ks(e,s[a]);for(;a<l;++a)(u=t[a])&&(i[a]=u)}function MA(e,t,n,r,i,s,a){var u,l,c=new Map,f=t.length,p=s.length,m=new Array(f),_;for(u=0;u<f;++u)(l=t[u])&&(m[u]=_=a.call(l,l.__data__,u,t)+"",c.has(_)?i[u]=l:c.set(_,l));for(u=0;u<p;++u)_=a.call(e,s[u],u,s)+"",(l=c.get(_))?(r[u]=l,l.__data__=s[u],c.delete(_)):n[u]=new ks(e,s[u]);for(u=0;u<f;++u)(l=t[u])&&c.get(m[u])===l&&(i[u]=l)}function LA(e){return e.__data__}function FA(e,t){if(!arguments.length)return Array.from(this,LA);var n=t?MA:OA,r=this._parents,i=this._groups;typeof e!="function"&&(e=kA(e));for(var s=i.length,a=new Array(s),u=new Array(s),l=new Array(s),c=0;c<s;++c){var f=r[c],p=i[c],m=p.length,_=UA(e.call(f,f&&f.__data__,c,r)),v=_.length,A=u[c]=new Array(v),E=a[c]=new Array(v),x=l[c]=new Array(m);n(f,p,A,E,x,_,t);for(var N=0,M=0,k,U;N<v;++N)if(k=A[N]){for(N>=M&&(M=N+1);!(U=E[M])&&++M<v;);k._next=U||null}}return a=new se(a,r),a._enter=u,a._exit=l,a}function UA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function BA(){return new se(this._exit||this._groups.map(gm),this._parents)}function qA(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function $A(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),u=new Array(i),l=0;l<a;++l)for(var c=n[l],f=r[l],p=c.length,m=u[l]=new Array(p),_,v=0;v<p;++v)(_=c[v]||f[v])&&(m[v]=_);for(;l<i;++l)u[l]=n[l];return new se(u,this._parents)}function jA(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function zA(e){e||(e=HA);function t(p,m){return p&&m?e(p.__data__,m.__data__):!p-!m}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],u=a.length,l=i[s]=new Array(u),c,f=0;f<u;++f)(c=a[f])&&(l[f]=c);l.sort(t)}return new se(i,this._parents).order()}function HA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function GA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function WA(){return Array.from(this)}function KA(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function QA(){let e=0;for(const t of this)++e;return e}function XA(){return!this.node()}function JA(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,u;s<a;++s)(u=i[s])&&e.call(u,u.__data__,s,i);return this}function YA(e){return function(){this.removeAttribute(e)}}function ZA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tI(e,t){return function(){this.setAttribute(e,t)}}function eI(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function iI(e,t){var n=fo(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ZA:YA:typeof t=="function"?n.local?rI:nI:n.local?eI:tI)(n,t))}function _m(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sI(e){return function(){this.style.removeProperty(e)}}function oI(e,t,n){return function(){this.style.setProperty(e,t,n)}}function aI(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function uI(e,t,n){return arguments.length>1?this.each((t==null?sI:typeof t=="function"?aI:oI)(e,t,n??"")):Yn(this.node(),e)}function Yn(e,t){return e.style.getPropertyValue(t)||_m(e).getComputedStyle(e,null).getPropertyValue(t)}function lI(e){return function(){delete this[e]}}function cI(e,t){return function(){this[e]=t}}function hI(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function fI(e,t){return arguments.length>1?this.each((t==null?lI:typeof t=="function"?hI:cI)(e,t)):this.node()[e]}function ym(e){return e.trim().split(/^|\s+/)}function nl(e){return e.classList||new vm(e)}function vm(e){this._node=e,this._names=ym(e.getAttribute("class")||"")}vm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wm(e,t){for(var n=nl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Em(e,t){for(var n=nl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function dI(e){return function(){wm(this,e)}}function pI(e){return function(){Em(this,e)}}function mI(e,t){return function(){(t.apply(this,arguments)?wm:Em)(this,e)}}function gI(e,t){var n=ym(e+"");if(arguments.length<2){for(var r=nl(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?mI:t?dI:pI)(n,t))}function _I(){this.textContent=""}function yI(e){return function(){this.textContent=e}}function vI(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function wI(e){return arguments.length?this.each(e==null?_I:(typeof e=="function"?vI:yI)(e)):this.node().textContent}function EI(){this.innerHTML=""}function TI(e){return function(){this.innerHTML=e}}function AI(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function II(e){return arguments.length?this.each(e==null?EI:(typeof e=="function"?AI:TI)(e)):this.node().innerHTML}function bI(){this.nextSibling&&this.parentNode.appendChild(this)}function RI(){return this.each(bI)}function SI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function CI(){return this.each(SI)}function xI(e){var t=typeof e=="function"?e:fm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function PI(){return null}function VI(e,t){var n=typeof e=="function"?e:fm(e),r=t==null?PI:typeof t=="function"?t:el(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function NI(){var e=this.parentNode;e&&e.removeChild(this)}function DI(){return this.each(NI)}function kI(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function OI(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MI(e){return this.select(e?OI:kI)}function LI(e){return arguments.length?this.property("__data__",e):this.node().__data__}function FI(e){return function(t){e.call(this,t,this.__data__)}}function UI(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function BI(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function qI(e,t,n){return function(){var r=this.__on,i,s=FI(t);if(r){for(var a=0,u=r.length;a<u;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function $I(e,t,n){var r=UI(e+""),i,s=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,c=u.length,f;l<c;++l)for(i=0,f=u[l];i<s;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(u=t?qI:BI,i=0;i<s;++i)this.each(u(r[i],t,n));return this}function Tm(e,t,n){var r=_m(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function jI(e,t){return function(){return Tm(this,e,t)}}function zI(e,t){return function(){return Tm(this,e,t.apply(this,arguments))}}function HI(e,t){return this.each((typeof t=="function"?zI:jI)(e,t))}function*GI(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var WI=[null];function se(e,t){this._groups=e,this._parents=t}function vi(){return new se([[document.documentElement]],WI)}function KI(){return this}se.prototype=vi.prototype={constructor:se,select:vA,selectAll:AA,selectChild:SA,selectChildren:VA,filter:NA,data:FA,enter:DA,exit:BA,join:qA,merge:$A,selection:KI,order:jA,sort:zA,call:GA,nodes:WA,node:KA,size:QA,empty:XA,each:JA,attr:iI,style:uI,property:fI,classed:gI,text:wI,html:II,raise:RI,lower:CI,append:xI,insert:VI,remove:DI,clone:MI,datum:LI,on:$I,dispatch:HI,[Symbol.iterator]:GI};function rl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Am(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function wi(){}var ii=.7,Os=1/ii,Gn="\\s*([+-]?\\d+)\\s*",si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",QI=/^#([0-9a-f]{3,8})$/,XI=new RegExp(`^rgb\\(${Gn},${Gn},${Gn}\\)$`),JI=new RegExp(`^rgb\\(${ye},${ye},${ye}\\)$`),YI=new RegExp(`^rgba\\(${Gn},${Gn},${Gn},${si}\\)$`),ZI=new RegExp(`^rgba\\(${ye},${ye},${ye},${si}\\)$`),t1=new RegExp(`^hsl\\(${si},${ye},${ye}\\)$`),e1=new RegExp(`^hsla\\(${si},${ye},${ye},${si}\\)$`),Kh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rl(wi,oi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Qh,formatHex:Qh,formatHex8:n1,formatHsl:r1,formatRgb:Xh,toString:Xh});function Qh(){return this.rgb().formatHex()}function n1(){return this.rgb().formatHex8()}function r1(){return Im(this).formatHsl()}function Xh(){return this.rgb().formatRgb()}function oi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=QI.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jh(t):n===3?new jt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=XI.exec(e))?new jt(t[1],t[2],t[3],1):(t=JI.exec(e))?new jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=YI.exec(e))?Wi(t[1],t[2],t[3],t[4]):(t=ZI.exec(e))?Wi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=t1.exec(e))?tf(t[1],t[2]/100,t[3]/100,1):(t=e1.exec(e))?tf(t[1],t[2]/100,t[3]/100,t[4]):Kh.hasOwnProperty(e)?Jh(Kh[e]):e==="transparent"?new jt(NaN,NaN,NaN,0):null}function Jh(e){return new jt(e>>16&255,e>>8&255,e&255,1)}function Wi(e,t,n,r){return r<=0&&(e=t=n=NaN),new jt(e,t,n,r)}function i1(e){return e instanceof wi||(e=oi(e)),e?(e=e.rgb(),new jt(e.r,e.g,e.b,e.opacity)):new jt}function Ba(e,t,n,r){return arguments.length===1?i1(e):new jt(e,t,n,r??1)}function jt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}rl(jt,Ba,Am(wi,{brighter(e){return e=e==null?Os:Math.pow(Os,e),new jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ii:Math.pow(ii,e),new jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jt(In(this.r),In(this.g),In(this.b),Ms(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yh,formatHex:Yh,formatHex8:s1,formatRgb:Zh,toString:Zh}));function Yh(){return`#${wn(this.r)}${wn(this.g)}${wn(this.b)}`}function s1(){return`#${wn(this.r)}${wn(this.g)}${wn(this.b)}${wn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zh(){const e=Ms(this.opacity);return`${e===1?"rgb(":"rgba("}${In(this.r)}, ${In(this.g)}, ${In(this.b)}${e===1?")":`, ${e})`}`}function Ms(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function In(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wn(e){return e=In(e),(e<16?"0":"")+e.toString(16)}function tf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new re(e,t,n,r)}function Im(e){if(e instanceof re)return new re(e.h,e.s,e.l,e.opacity);if(e instanceof wi||(e=oi(e)),!e)return new re;if(e instanceof re)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,u=s-i,l=(s+i)/2;return u?(t===s?a=(n-r)/u+(n<r)*6:n===s?a=(r-t)/u+2:a=(t-n)/u+4,u/=l<.5?s+i:2-s-i,a*=60):u=l>0&&l<1?0:a,new re(a,u,l,e.opacity)}function o1(e,t,n,r){return arguments.length===1?Im(e):new re(e,t,n,r??1)}function re(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rl(re,o1,Am(wi,{brighter(e){return e=e==null?Os:Math.pow(Os,e),new re(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ii:Math.pow(ii,e),new re(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new jt(ra(e>=240?e-240:e+120,i,r),ra(e,i,r),ra(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new re(ef(this.h),Ki(this.s),Ki(this.l),Ms(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ms(this.opacity);return`${e===1?"hsl(":"hsla("}${ef(this.h)}, ${Ki(this.s)*100}%, ${Ki(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ef(e){return e=(e||0)%360,e<0?e+360:e}function Ki(e){return Math.max(0,Math.min(1,e||0))}function ra(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bm=e=>()=>e;function a1(e,t){return function(n){return e+n*t}}function u1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function l1(e){return(e=+e)==1?Rm:function(t,n){return n-t?u1(t,n,e):bm(isNaN(t)?n:t)}}function Rm(e,t){var n=t-e;return n?a1(e,n):bm(isNaN(e)?t:e)}const nf=function e(t){var n=l1(t);function r(i,s){var a=n((i=Ba(i)).r,(s=Ba(s)).r),u=n(i.g,s.g),l=n(i.b,s.b),c=Rm(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=u(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=e,r}(1);function He(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var qa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ia=new RegExp(qa.source,"g");function c1(e){return function(){return e}}function h1(e){return function(t){return e(t)+""}}function f1(e,t){var n=qa.lastIndex=ia.lastIndex=0,r,i,s,a=-1,u=[],l=[];for(e=e+"",t=t+"";(r=qa.exec(e))&&(i=ia.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,l.push({i:a,x:He(r,i)})),n=ia.lastIndex;return n<t.length&&(s=t.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?l[0]?h1(l[0].x):c1(t):(t=l.length,function(c){for(var f=0,p;f<t;++f)u[(p=l[f]).i]=p.x(c);return u.join("")})}var rf=180/Math.PI,$a={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sm(e,t,n,r,i,s){var a,u,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,l/=u),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*rf,skewX:Math.atan(l)*rf,scaleX:a,scaleY:u}}var Qi;function d1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$a:Sm(t.a,t.b,t.c,t.d,t.e,t.f)}function p1(e){return e==null||(Qi||(Qi=document.createElementNS("http://www.w3.org/2000/svg","g")),Qi.setAttribute("transform",e),!(e=Qi.transform.baseVal.consolidate()))?$a:(e=e.matrix,Sm(e.a,e.b,e.c,e.d,e.e,e.f))}function Cm(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,f,p,m,_,v){if(c!==p||f!==m){var A=_.push("translate(",null,t,null,n);v.push({i:A-4,x:He(c,p)},{i:A-2,x:He(f,m)})}else(p||m)&&_.push("translate("+p+t+m+n)}function a(c,f,p,m){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),m.push({i:p.push(i(p)+"rotate(",null,r)-2,x:He(c,f)})):f&&p.push(i(p)+"rotate("+f+r)}function u(c,f,p,m){c!==f?m.push({i:p.push(i(p)+"skewX(",null,r)-2,x:He(c,f)}):f&&p.push(i(p)+"skewX("+f+r)}function l(c,f,p,m,_,v){if(c!==p||f!==m){var A=_.push(i(_)+"scale(",null,",",null,")");v.push({i:A-4,x:He(c,p)},{i:A-2,x:He(f,m)})}else(p!==1||m!==1)&&_.push(i(_)+"scale("+p+","+m+")")}return function(c,f){var p=[],m=[];return c=e(c),f=e(f),s(c.translateX,c.translateY,f.translateX,f.translateY,p,m),a(c.rotate,f.rotate,p,m),u(c.skewX,f.skewX,p,m),l(c.scaleX,c.scaleY,f.scaleX,f.scaleY,p,m),c=f=null,function(_){for(var v=-1,A=m.length,E;++v<A;)p[(E=m[v]).i]=E.x(_);return p.join("")}}}var m1=Cm(d1,"px, ","px)","deg)"),g1=Cm(p1,", ",")",")"),Zn=0,Or=0,Sr=0,xm=1e3,Ls,Mr,Fs=0,Cn=0,po=0,ai=typeof performance=="object"&&performance.now?performance:Date,Pm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function il(){return Cn||(Pm(_1),Cn=ai.now()+po)}function _1(){Cn=0}function Us(){this._call=this._time=this._next=null}Us.prototype=sl.prototype={constructor:Us,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?il():+n)+(t==null?0:+t),!this._next&&Mr!==this&&(Mr?Mr._next=this:Ls=this,Mr=this),this._call=e,this._time=n,ja()},stop:function(){this._call&&(this._call=null,this._time=1/0,ja())}};function sl(e,t,n){var r=new Us;return r.restart(e,t,n),r}function y1(){il(),++Zn;for(var e=Ls,t;e;)(t=Cn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Zn}function sf(){Cn=(Fs=ai.now())+po,Zn=Or=0;try{y1()}finally{Zn=0,w1(),Cn=0}}function v1(){var e=ai.now(),t=e-Fs;t>xm&&(po-=t,Fs=e)}function w1(){for(var e,t=Ls,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ls=n);Mr=e,ja(r)}function ja(e){if(!Zn){Or&&(Or=clearTimeout(Or));var t=e-Cn;t>24?(e<1/0&&(Or=setTimeout(sf,e-ai.now()-po)),Sr&&(Sr=clearInterval(Sr))):(Sr||(Fs=ai.now(),Sr=setInterval(v1,xm)),Zn=1,Pm(sf))}}function of(e,t,n){var r=new Us;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var E1=tl("start","end","cancel","interrupt"),T1=[],Vm=0,af=1,za=2,as=3,uf=4,Ha=5,us=6;function mo(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;A1(e,n,{name:t,index:r,group:i,on:E1,tween:T1,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Vm})}function ol(e,t){var n=ae(e,t);if(n.state>Vm)throw new Error("too late; already scheduled");return n}function Te(e,t){var n=ae(e,t);if(n.state>as)throw new Error("too late; already running");return n}function ae(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function A1(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=sl(s,0,n.time);function s(c){n.state=af,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var f,p,m,_;if(n.state!==af)return l();for(f in r)if(_=r[f],_.name===n.name){if(_.state===as)return of(a);_.state===uf?(_.state=us,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[f]):+f<t&&(_.state=us,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[f])}if(of(function(){n.state===as&&(n.state=uf,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=za,n.on.call("start",e,e.__data__,n.index,n.group),n.state===za){for(n.state=as,i=new Array(m=n.tween.length),f=0,p=-1;f<m;++f)(_=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=_);i.length=p+1}}function u(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ha,1),p=-1,m=i.length;++p<m;)i[p].call(e,f);n.state===Ha&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=us,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function I1(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>za&&r.state<Ha,r.state=us,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function b1(e){return this.each(function(){I1(this,e)})}function R1(e,t){var n,r;return function(){var i=Te(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,u=r.length;a<u;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function S1(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Te(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var u={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=u;break}l===c&&i.push(u)}s.tween=i}}function C1(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ae(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?R1:S1)(n,e,t))}function al(e,t,n){var r=e._id;return e.each(function(){var i=Te(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ae(i,r).value[t]}}function Nm(e,t){var n;return(typeof t=="number"?He:t instanceof oi?nf:(n=oi(t))?(t=n,nf):f1)(e,t)}function x1(e){return function(){this.removeAttribute(e)}}function P1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function V1(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function N1(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function D1(e,t,n){var r,i,s;return function(){var a,u=n(this),l;return u==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=u+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,u)))}}function k1(e,t,n){var r,i,s;return function(){var a,u=n(this),l;return u==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=u+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,u)))}}function O1(e,t){var n=fo(e),r=n==="transform"?g1:Nm;return this.attrTween(e,typeof t=="function"?(n.local?k1:D1)(n,r,al(this,"attr."+e,t)):t==null?(n.local?P1:x1)(n):(n.local?N1:V1)(n,r,t))}function M1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function L1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function F1(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&L1(e,s)),n}return i._value=t,i}function U1(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&M1(e,s)),n}return i._value=t,i}function B1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=fo(e);return this.tween(n,(r.local?F1:U1)(r,t))}function q1(e,t){return function(){ol(this,e).delay=+t.apply(this,arguments)}}function $1(e,t){return t=+t,function(){ol(this,e).delay=t}}function j1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?q1:$1)(t,e)):ae(this.node(),t).delay}function z1(e,t){return function(){Te(this,e).duration=+t.apply(this,arguments)}}function H1(e,t){return t=+t,function(){Te(this,e).duration=t}}function G1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?z1:H1)(t,e)):ae(this.node(),t).duration}function W1(e,t){if(typeof t!="function")throw new Error;return function(){Te(this,e).ease=t}}function K1(e){var t=this._id;return arguments.length?this.each(W1(t,e)):ae(this.node(),t).ease}function Q1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Te(this,e).ease=n}}function X1(e){if(typeof e!="function")throw new Error;return this.each(Q1(this._id,e))}function J1(e){typeof e!="function"&&(e=pm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,u=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&u.push(l);return new Fe(r,this._parents,this._name,this._id)}function Y1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),u=0;u<s;++u)for(var l=t[u],c=n[u],f=l.length,p=a[u]=new Array(f),m,_=0;_<f;++_)(m=l[_]||c[_])&&(p[_]=m);for(;u<r;++u)a[u]=t[u];return new Fe(a,this._parents,this._name,this._id)}function Z1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function tb(e,t,n){var r,i,s=Z1(t)?ol:Te;return function(){var a=s(this,e),u=a.on;u!==r&&(i=(r=u).copy()).on(t,n),a.on=i}}function eb(e,t){var n=this._id;return arguments.length<2?ae(this.node(),n).on.on(e):this.each(tb(n,e,t))}function nb(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function rb(){return this.on("end.remove",nb(this._id))}function ib(e){var t=this._name,n=this._id;typeof e!="function"&&(e=el(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var u=r[a],l=u.length,c=s[a]=new Array(l),f,p,m=0;m<l;++m)(f=u[m])&&(p=e.call(f,f.__data__,m,u))&&("__data__"in f&&(p.__data__=f.__data__),c[m]=p,mo(c[m],t,n,m,c,ae(f,n)));return new Fe(s,this._parents,t,n)}function sb(e){var t=this._name,n=this._id;typeof e!="function"&&(e=dm(e));for(var r=this._groups,i=r.length,s=[],a=[],u=0;u<i;++u)for(var l=r[u],c=l.length,f,p=0;p<c;++p)if(f=l[p]){for(var m=e.call(f,f.__data__,p,l),_,v=ae(f,n),A=0,E=m.length;A<E;++A)(_=m[A])&&mo(_,t,n,A,m,v);s.push(m),a.push(f)}return new Fe(s,a,t,n)}var ob=vi.prototype.constructor;function ab(){return new ob(this._groups,this._parents)}function ub(e,t){var n,r,i;return function(){var s=Yn(this,e),a=(this.style.removeProperty(e),Yn(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function Dm(e){return function(){this.style.removeProperty(e)}}function lb(e,t,n){var r,i=n+"",s;return function(){var a=Yn(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function cb(e,t,n){var r,i,s;return function(){var a=Yn(this,e),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(e),Yn(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,u))}}function hb(e,t){var n,r,i,s="style."+t,a="end."+s,u;return function(){var l=Te(this,e),c=l.on,f=l.value[s]==null?u||(u=Dm(t)):void 0;(c!==n||i!==f)&&(r=(n=c).copy()).on(a,i=f),l.on=r}}function fb(e,t,n){var r=(e+="")=="transform"?m1:Nm;return t==null?this.styleTween(e,ub(e,r)).on("end.style."+e,Dm(e)):typeof t=="function"?this.styleTween(e,cb(e,r,al(this,"style."+e,t))).each(hb(this._id,e)):this.styleTween(e,lb(e,r,t),n).on("end.style."+e,null)}function db(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function pb(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&db(e,a,n)),r}return s._value=t,s}function mb(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,pb(e,t,n??""))}function gb(e){return function(){this.textContent=e}}function _b(e){return function(){var t=e(this);this.textContent=t??""}}function yb(e){return this.tween("text",typeof e=="function"?_b(al(this,"text",e)):gb(e==null?"":e+""))}function vb(e){return function(t){this.textContent=e.call(this,t)}}function wb(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&vb(i)),t}return r._value=e,r}function Eb(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,wb(e))}function Tb(){for(var e=this._name,t=this._id,n=km(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,l,c=0;c<u;++c)if(l=a[c]){var f=ae(l,t);mo(l,e,n,c,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Fe(r,this._parents,e,n)}function Ab(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var u={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=Te(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(l)),c.on=t}),i===0&&s()})}var Ib=0;function Fe(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function km(){return++Ib}var Se=vi.prototype;Fe.prototype={constructor:Fe,select:ib,selectAll:sb,selectChild:Se.selectChild,selectChildren:Se.selectChildren,filter:J1,merge:Y1,selection:ab,transition:Tb,call:Se.call,nodes:Se.nodes,node:Se.node,size:Se.size,empty:Se.empty,each:Se.each,on:eb,attr:O1,attrTween:B1,style:fb,styleTween:mb,text:yb,textTween:Eb,remove:rb,tween:C1,delay:j1,duration:G1,ease:K1,easeVarying:X1,end:Ab,[Symbol.iterator]:Se[Symbol.iterator]};function bb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Rb={time:null,delay:0,duration:250,ease:bb};function Sb(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Cb(e){var t,n;e instanceof Fe?(t=e._id,e=e._name):(t=km(),(n=Rb).time=il(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,l,c=0;c<u;++c)(l=a[c])&&mo(l,e,t,c,a,n||Sb(l,t));return new Fe(r,this._parents,e,t)}vi.prototype.interrupt=b1;vi.prototype.transition=Cb;function xb(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,a=n.length,u,l=0,c=0;for(s=0;s<a;++s)u=n[s],l+=u.x,c+=u.y;for(l=(l/a-e)*r,c=(c/a-t)*r,s=0;s<a;++s)u=n[s],u.x-=l,u.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Pb(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Om(this.cover(t,n),t,n,e)}function Om(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,a={data:r},u=e._x0,l=e._y0,c=e._x1,f=e._y1,p,m,_,v,A,E,x,N;if(!s)return e._root=a,e;for(;s.length;)if((A=t>=(p=(u+c)/2))?u=p:c=p,(E=n>=(m=(l+f)/2))?l=m:f=m,i=s,!(s=s[x=E<<1|A]))return i[x]=a,e;if(_=+e._x.call(null,s.data),v=+e._y.call(null,s.data),t===_&&n===v)return a.next=s,i?i[x]=a:e._root=a,e;do i=i?i[x]=new Array(4):e._root=new Array(4),(A=t>=(p=(u+c)/2))?u=p:c=p,(E=n>=(m=(l+f)/2))?l=m:f=m;while((x=E<<1|A)===(N=(v>=m)<<1|_>=p));return i[N]=s,i[x]=a,e}function Vb(e){var t,n,r=e.length,i,s,a=new Array(r),u=new Array(r),l=1/0,c=1/0,f=-1/0,p=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(a[n]=i,u[n]=s,i<l&&(l=i),i>f&&(f=i),s<c&&(c=s),s>p&&(p=s));if(l>f||c>p)return this;for(this.cover(l,c).cover(f,p),n=0;n<r;++n)Om(this,a[n],u[n],e[n]);return this}function Nb(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var a=i-n||1,u=this._root,l,c;n>e||e>=i||r>t||t>=s;)switch(c=(t<r)<<1|e<n,l=new Array(4),l[c]=u,u=l,a*=2,c){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Db(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function kb(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ft(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Ob(e,t,n){var r,i=this._x0,s=this._y0,a,u,l,c,f=this._x1,p=this._y1,m=[],_=this._root,v,A;for(_&&m.push(new Ft(_,i,s,f,p)),n==null?n=1/0:(i=e-n,s=t-n,f=e+n,p=t+n,n*=n);v=m.pop();)if(!(!(_=v.node)||(a=v.x0)>f||(u=v.y0)>p||(l=v.x1)<i||(c=v.y1)<s))if(_.length){var E=(a+l)/2,x=(u+c)/2;m.push(new Ft(_[3],E,x,l,c),new Ft(_[2],a,x,E,c),new Ft(_[1],E,u,l,x),new Ft(_[0],a,u,E,x)),(A=(t>=x)<<1|e>=E)&&(v=m[m.length-1],m[m.length-1]=m[m.length-1-A],m[m.length-1-A]=v)}else{var N=e-+this._x.call(null,_.data),M=t-+this._y.call(null,_.data),k=N*N+M*M;if(k<n){var U=Math.sqrt(n=k);i=e-U,s=t-U,f=e+U,p=t+U,r=_.data}}return r}function Mb(e){if(isNaN(f=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,a=this._x0,u=this._y0,l=this._x1,c=this._y1,f,p,m,_,v,A,E,x;if(!n)return this;if(n.length)for(;;){if((v=f>=(m=(a+l)/2))?a=m:l=m,(A=p>=(_=(u+c)/2))?u=_:c=_,t=n,!(n=n[E=A<<1|v]))return this;if(!n.length)break;(t[E+1&3]||t[E+2&3]||t[E+3&3])&&(r=t,x=E)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[E]=s:delete t[E],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function Lb(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Fb(){return this._root}function Ub(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Bb(e){var t=[],n,r=this._root,i,s,a,u,l;for(r&&t.push(new Ft(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,a=n.y0,u=n.x1,l=n.y1)&&r.length){var c=(s+u)/2,f=(a+l)/2;(i=r[3])&&t.push(new Ft(i,c,f,u,l)),(i=r[2])&&t.push(new Ft(i,s,f,c,l)),(i=r[1])&&t.push(new Ft(i,c,a,u,f)),(i=r[0])&&t.push(new Ft(i,s,a,c,f))}return this}function qb(e){var t=[],n=[],r;for(this._root&&t.push(new Ft(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,a=r.x0,u=r.y0,l=r.x1,c=r.y1,f=(a+l)/2,p=(u+c)/2;(s=i[0])&&t.push(new Ft(s,a,u,f,p)),(s=i[1])&&t.push(new Ft(s,f,u,l,p)),(s=i[2])&&t.push(new Ft(s,a,p,f,c)),(s=i[3])&&t.push(new Ft(s,f,p,l,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function $b(e){return e[0]}function jb(e){return arguments.length?(this._x=e,this):this._x}function zb(e){return e[1]}function Hb(e){return arguments.length?(this._y=e,this):this._y}function Mm(e,t,n){var r=new ul(t??$b,n??zb,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function ul(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function lf(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ut=Mm.prototype=ul.prototype;Ut.copy=function(){var e=new ul(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=lf(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=lf(r));return e};Ut.add=Pb;Ut.addAll=Vb;Ut.cover=Nb;Ut.data=Db;Ut.extent=kb;Ut.find=Ob;Ut.remove=Mb;Ut.removeAll=Lb;Ut.root=Fb;Ut.size=Ub;Ut.visit=Bb;Ut.visitAfter=qb;Ut.x=jb;Ut.y=Hb;function xe(e){return function(){return e}}function $n(e){return(e()-.5)*1e-6}function Gb(e){return e.index}function cf(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Wb(e){var t=Gb,n=p,r,i=xe(30),s,a,u,l,c,f=1;e==null&&(e=[]);function p(E){return 1/Math.min(u[E.source.index],u[E.target.index])}function m(E){for(var x=0,N=e.length;x<f;++x)for(var M=0,k,U,H,I,y,T,R;M<N;++M)k=e[M],U=k.source,H=k.target,I=H.x+H.vx-U.x-U.vx||$n(c),y=H.y+H.vy-U.y-U.vy||$n(c),T=Math.sqrt(I*I+y*y),T=(T-s[M])/T*E*r[M],I*=T,y*=T,H.vx-=I*(R=l[M]),H.vy-=y*R,U.vx+=I*(R=1-R),U.vy+=y*R}function _(){if(a){var E,x=a.length,N=e.length,M=new Map(a.map((U,H)=>[t(U,H,a),U])),k;for(E=0,u=new Array(x);E<N;++E)k=e[E],k.index=E,typeof k.source!="object"&&(k.source=cf(M,k.source)),typeof k.target!="object"&&(k.target=cf(M,k.target)),u[k.source.index]=(u[k.source.index]||0)+1,u[k.target.index]=(u[k.target.index]||0)+1;for(E=0,l=new Array(N);E<N;++E)k=e[E],l[E]=u[k.source.index]/(u[k.source.index]+u[k.target.index]);r=new Array(N),v(),s=new Array(N),A()}}function v(){if(a)for(var E=0,x=e.length;E<x;++E)r[E]=+n(e[E],E,e)}function A(){if(a)for(var E=0,x=e.length;E<x;++E)s[E]=+i(e[E],E,e)}return m.initialize=function(E,x){a=E,c=x,_()},m.links=function(E){return arguments.length?(e=E,_(),m):e},m.id=function(E){return arguments.length?(t=E,m):t},m.iterations=function(E){return arguments.length?(f=+E,m):f},m.strength=function(E){return arguments.length?(n=typeof E=="function"?E:xe(+E),v(),m):n},m.distance=function(E){return arguments.length?(i=typeof E=="function"?E:xe(+E),A(),m):i},m}const Kb=1664525,Qb=1013904223,hf=4294967296;function Xb(){let e=1;return()=>(e=(Kb*e+Qb)%hf)/hf}function Jb(e){return e.x}function Yb(e){return e.y}var Zb=10,tR=Math.PI*(3-Math.sqrt(5));function eR(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,u=new Map,l=sl(p),c=tl("tick","end"),f=Xb();e==null&&(e=[]);function p(){m(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function m(A){var E,x=e.length,N;A===void 0&&(A=1);for(var M=0;M<A;++M)for(n+=(s-n)*i,u.forEach(function(k){k(n)}),E=0;E<x;++E)N=e[E],N.fx==null?N.x+=N.vx*=a:(N.x=N.fx,N.vx=0),N.fy==null?N.y+=N.vy*=a:(N.y=N.fy,N.vy=0);return t}function _(){for(var A=0,E=e.length,x;A<E;++A){if(x=e[A],x.index=A,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var N=Zb*Math.sqrt(.5+A),M=A*tR;x.x=N*Math.cos(M),x.y=N*Math.sin(M)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function v(A){return A.initialize&&A.initialize(e,f),A}return _(),t={tick:m,restart:function(){return l.restart(p),t},stop:function(){return l.stop(),t},nodes:function(A){return arguments.length?(e=A,_(),u.forEach(v),t):e},alpha:function(A){return arguments.length?(n=+A,t):n},alphaMin:function(A){return arguments.length?(r=+A,t):r},alphaDecay:function(A){return arguments.length?(i=+A,t):+i},alphaTarget:function(A){return arguments.length?(s=+A,t):s},velocityDecay:function(A){return arguments.length?(a=1-A,t):1-a},randomSource:function(A){return arguments.length?(f=A,u.forEach(v),t):f},force:function(A,E){return arguments.length>1?(E==null?u.delete(A):u.set(A,v(E)),t):u.get(A)},find:function(A,E,x){var N=0,M=e.length,k,U,H,I,y;for(x==null?x=1/0:x*=x,N=0;N<M;++N)I=e[N],k=A-I.x,U=E-I.y,H=k*k+U*U,H<x&&(y=I,x=H);return y},on:function(A,E){return arguments.length>1?(c.on(A,E),t):c.on(A)}}}function nR(){var e,t,n,r,i=xe(-30),s,a=1,u=1/0,l=.81;function c(_){var v,A=e.length,E=Mm(e,Jb,Yb).visitAfter(p);for(r=_,v=0;v<A;++v)t=e[v],E.visit(m)}function f(){if(e){var _,v=e.length,A;for(s=new Array(v),_=0;_<v;++_)A=e[_],s[A.index]=+i(A,_,e)}}function p(_){var v=0,A,E,x=0,N,M,k;if(_.length){for(N=M=k=0;k<4;++k)(A=_[k])&&(E=Math.abs(A.value))&&(v+=A.value,x+=E,N+=E*A.x,M+=E*A.y);_.x=N/x,_.y=M/x}else{A=_,A.x=A.data.x,A.y=A.data.y;do v+=s[A.data.index];while(A=A.next)}_.value=v}function m(_,v,A,E){if(!_.value)return!0;var x=_.x-t.x,N=_.y-t.y,M=E-v,k=x*x+N*N;if(M*M/l<k)return k<u&&(x===0&&(x=$n(n),k+=x*x),N===0&&(N=$n(n),k+=N*N),k<a&&(k=Math.sqrt(a*k)),t.vx+=x*_.value*r/k,t.vy+=N*_.value*r/k),!0;if(_.length||k>=u)return;(_.data!==t||_.next)&&(x===0&&(x=$n(n),k+=x*x),N===0&&(N=$n(n),k+=N*N),k<a&&(k=Math.sqrt(a*k)));do _.data!==t&&(M=s[_.data.index]*r/k,t.vx+=x*M,t.vy+=N*M);while(_=_.next)}return c.initialize=function(_,v){e=_,n=v,f()},c.strength=function(_){return arguments.length?(i=typeof _=="function"?_:xe(+_),f(),c):i},c.distanceMin=function(_){return arguments.length?(a=_*_,c):Math.sqrt(a)},c.distanceMax=function(_){return arguments.length?(u=_*_,c):Math.sqrt(u)},c.theta=function(_){return arguments.length?(l=_*_,c):Math.sqrt(l)},c}function rR(e,t,n){var r,i=xe(.1),s,a;typeof e!="function"&&(e=xe(+e)),t==null&&(t=0),n==null&&(n=0);function u(c){for(var f=0,p=r.length;f<p;++f){var m=r[f],_=m.x-t||1e-6,v=m.y-n||1e-6,A=Math.sqrt(_*_+v*v),E=(a[f]-A)*s[f]*c/A;m.vx+=_*E,m.vy+=v*E}}function l(){if(r){var c,f=r.length;for(s=new Array(f),a=new Array(f),c=0;c<f;++c)a[c]=+e(r[c],c,r),s[c]=isNaN(a[c])?0:+i(r[c],c,r)}}return u.initialize=function(c){r=c,l()},u.strength=function(c){return arguments.length?(i=typeof c=="function"?c:xe(+c),l(),u):i},u.radius=function(c){return arguments.length?(e=typeof c=="function"?c:xe(+c),l(),u):e},u.x=function(c){return arguments.length?(t=+c,u):t},u.y=function(c){return arguments.length?(n=+c,u):n},u}function Lr(e,t,n){this.k=e,this.x=t,this.y=n}Lr.prototype={constructor:Lr,scale:function(e){return e===1?this:new Lr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Lr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Lr.prototype;var iR=rr('<div class="loading-indicator svelte-1vm5no6">Loading...</div>'),sR=rr('<li class="svelte-1vm5no6"> <span class="count svelte-1vm5no6"> </span></li>'),oR=rr('<div class="image-with-title svelte-1vm5no6"><a target="_blank" rel="noopener noreferrer"><img class="svelte-1vm5no6"/></a> <div class="image-title-box"><!></div></div>'),aR=rr('<div class="image-container svelte-1vm5no6"></div>'),uR=rr('<p style="color:white;">No images yet  try a search above!</p>'),lR=Kf('<line stroke="#fff" stroke-opacity="0.6" stroke-width="2" class="svelte-1vm5no6"></line>'),cR=Kf('<text fill="steelblue" text-anchor="middle" alignment-baseline="middle" class="svelte-1vm5no6"> </text>'),hR=rr(`<main class="svelte-1vm5no6"><!> <div class="trending-panel svelte-1vm5no6"><h2 class="svelte-1vm5no6"> Trending</h2> <ul class="svelte-1vm5no6"></ul></div> <h1 class="svelte-1vm5no6"><span>Hokusai's legendary</span><span class="italic svelte-1vm5no6">"Great Wave off Kanagawa"</span><span>can be</span></h1> <input type="text" placeholder="anything" class="svelte-1vm5no6"/> <button class="svelte-1vm5no6">Search</button> <div class="container svelte-1vm5no6"><!> <div><svg width="400" height="600" class="svelte-1vm5no6"><!><!></svg></div></div></main>`);function fR(e,t){Ef(t,!1);let n=gn([]),r=gn(""),i=gn([]),s=gn([]),a=gn([]),u=gn(!1);C_(async()=>{ct(u,!0);try{ct(i,await Vh()),ct(a,await Nh(5)),c(),f()}finally{ct(u,!1)}});async function l(){if(j(r)){ct(u,!0);try{const b=await dt.get(`https://great-wave-api-1muq.onrender.com/api/images?q=${j(r)}`);ct(n,b.data),console.log("Fetched images:",j(n)),await ME(j(r)),ct(i,await Vh()),ct(a,await Nh(5)),c(),f(),ct(r,"")}catch(b){console.error("Error fetching images",b)}finally{ct(u,!1)}}}function c(){ct(s,[]);for(let b=1;b<j(i).length;b++)j(s).push({source:j(i)[b-1].id,target:j(i)[b].id})}function f(){eR(j(i)).force("link",Wb(j(s)).id(b=>b.id).distance(10)).force("charge",nR().strength(-200)).force("center",xb(200*1.5,300*1.5)).force("gravity",rR(b=>300-b.count*20,200,300)).on("tick",()=>{ct(i,[...j(i)])})}function p(b){return j(i).find(w=>w.id===b)}function m(b){const w=p(b.source),X=p(b.target);return{x1:(w==null?void 0:w.x)||0,y1:(w==null?void 0:w.y)||0,x2:(X==null?void 0:X.x)||0,y2:(X==null?void 0:X.y)||0}}S_();var _=hR(),v=ne(_);{var A=b=>{var w=iR();Re(b,w)};jo(v,b=>{j(u)&&b(A)})}var E=be(v,2),x=be(ne(E),2);qi(x,5,()=>j(a),Bi,(b,w)=>{var X=sR(),pt=ne(X),te=be(pt),vt=ne(te);xr(()=>{$o(pt,`${j(w).id??""} `),$o(vt,`(${j(w).count??""})`)}),Re(b,X)});var N=be(E,4),M=be(N,2),k=be(M,2),U=ne(k);{var H=b=>{var w=aR();qi(w,5,()=>j(n),Bi,(X,pt)=>{var te=oR(),vt=ne(te),Tt=ne(vt),hn=be(vt,2),Nn=ne(hn);E_(Nn,()=>`<textarea readonly style='width: 180px; font-family: Noto Sans, sans-serif; font-size: 12px; resize: none; border: 1px solid #ccc; border-radius: 4px; background: #f9f9f9; color: #222; margin-top: 0.25rem; text-align: center; padding: 2px 4px; overflow-wrap: break-word; white-space: pre-wrap; box-sizing: border-box;' rows='2'>${j(pt).title}</textarea>`),xr(()=>{le(vt,"href",j(pt).link),le(Tt,"src",j(pt).link),le(Tt,"alt",j(pt).title)}),Re(X,te)}),Re(b,w)},I=b=>{var w=uR();Re(b,w)};jo(U,b=>{j(n).length>0?b(H):b(I,!1)})}var y=be(U,2),T=ne(y),R=ne(T);qi(R,1,()=>j(s),Bi,(b,w)=>{var X=d_(),pt=jg(X);{var te=vt=>{var Tt=lR();xr((hn,Nn,go,ue)=>{le(Tt,"x1",hn),le(Tt,"y1",Nn),le(Tt,"x2",go),le(Tt,"y2",ue)},[()=>m(j(w)).x1,()=>m(j(w)).y1,()=>m(j(w)).x2,()=>m(j(w)).y2],Af),Re(vt,Tt)};jo(pt,vt=>{p(j(w).source)&&p(j(w).target)&&vt(te)})}Re(b,X)});var S=be(R);qi(S,1,()=>j(i),Bi,(b,w)=>{var X=cR(),pt=ne(X);xr(()=>{le(X,"x",j(w).x),le(X,"y",j(w).y),le(X,"font-size",`${10+j(w).count}px`),$o(pt,j(w).id)}),gc("mouseover",X,()=>console.log(j(w).id)),Re(b,X)}),R_(N,()=>j(r),b=>ct(r,b)),gc("click",M,l),Re(e,_),Tf()}p_(fR,{target:document.getElementById("app")});
